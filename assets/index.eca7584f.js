const Qhe=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))l(d);new MutationObserver(d=>{for(const g of d)if(g.type==="childList")for(const x of g.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&l(x)}).observe(document,{childList:!0,subtree:!0});function i(d){const g={};return d.integrity&&(g.integrity=d.integrity),d.referrerpolicy&&(g.referrerPolicy=d.referrerpolicy),d.crossorigin==="use-credentials"?g.credentials="include":d.crossorigin==="anonymous"?g.credentials="omit":g.credentials="same-origin",g}function l(d){if(d.ep)return;d.ep=!0;const g=i(d);fetch(d.href,g)}};Qhe();/**
 * @license
 * Copyright 2010-2022 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const kL="142",epe=0,ite=1,tpe=2,Fne=1,npe=2,r1=3,p0=0,Vs=1,Gh=2,rpe=1,Ud=0,f0=1,ote=2,ate=3,ste=4,ipe=5,c0=100,ope=101,ape=102,lte=103,ute=104,spe=200,lpe=201,upe=202,cpe=203,Bne=204,jne=205,dpe=206,fpe=207,hpe=208,ppe=209,mpe=210,gpe=0,vpe=1,ype=2,lL=3,bpe=4,_pe=5,xpe=6,wpe=7,Une=0,Spe=1,Epe=2,qu=0,kpe=1,Tpe=2,Mpe=3,Ppe=4,Cpe=5,Vne=300,m0=301,g0=302,uL=303,cL=304,XM=306,v0=1e3,$a=1001,qM=1002,Ji=1003,dL=1004,fL=1005,Zo=1006,Hne=1007,w0=1008,Wh=1009,Ape=1010,Ipe=1011,Gne=1012,Dpe=1013,Nh=1014,jd=1015,s1=1016,Ope=1017,Rpe=1018,h0=1020,Lpe=1021,zpe=1022,Us=1023,Npe=1024,Fpe=1025,Uh=1026,y0=1027,Bpe=1028,jpe=1029,Upe=1030,Vpe=1031,Hpe=1033,M4=33776,P4=33777,C4=33778,A4=33779,cte=35840,dte=35841,fte=35842,hte=35843,Gpe=36196,pte=37492,mte=37496,gte=37808,vte=37809,yte=37810,bte=37811,_te=37812,xte=37813,wte=37814,Ste=37815,Ete=37816,kte=37817,Tte=37818,Mte=37819,Pte=37820,Cte=37821,Ate=36492,l1=2300,b0=2301,I4=2302,Ite=2400,Dte=2401,Ote=2402,Wpe=2500,qpe=2501,Kpe=1,Wne=2,qh=3e3,gr=3001,Xpe=3200,$pe=3201,TL=0,Zpe=1,Gu="srgb",Fh="srgb-linear",D4=7680,Ype=519,hL=35044,Rte="300 es",pL=1035;class S0{addEventListener(t,i){this._listeners===void 0&&(this._listeners={});const l=this._listeners;l[t]===void 0&&(l[t]=[]),l[t].indexOf(i)===-1&&l[t].push(i)}hasEventListener(t,i){if(this._listeners===void 0)return!1;const l=this._listeners;return l[t]!==void 0&&l[t].indexOf(i)!==-1}removeEventListener(t,i){if(this._listeners===void 0)return;const d=this._listeners[t];if(d!==void 0){const g=d.indexOf(i);g!==-1&&d.splice(g,1)}}dispatchEvent(t){if(this._listeners===void 0)return;const l=this._listeners[t.type];if(l!==void 0){t.target=this;const d=l.slice(0);for(let g=0,x=d.length;g<x;g++)d[g].call(this,t);t.target=null}}}const fo=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Lte=1234567;const o1=Math.PI/180,u1=180/Math.PI;function Hs(){const w=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0,l=Math.random()*4294967295|0;return(fo[w&255]+fo[w>>8&255]+fo[w>>16&255]+fo[w>>24&255]+"-"+fo[t&255]+fo[t>>8&255]+"-"+fo[t>>16&15|64]+fo[t>>24&255]+"-"+fo[i&63|128]+fo[i>>8&255]+"-"+fo[i>>16&255]+fo[i>>24&255]+fo[l&255]+fo[l>>8&255]+fo[l>>16&255]+fo[l>>24&255]).toLowerCase()}function Do(w,t,i){return Math.max(t,Math.min(i,w))}function ML(w,t){return(w%t+t)%t}function Jpe(w,t,i,l,d){return l+(w-t)*(d-l)/(i-t)}function Qpe(w,t,i){return w!==t?(i-w)/(t-w):0}function a1(w,t,i){return(1-i)*w+i*t}function eme(w,t,i,l){return a1(w,t,1-Math.exp(-i*l))}function tme(w,t=1){return t-Math.abs(ML(w,t*2)-t)}function nme(w,t,i){return w<=t?0:w>=i?1:(w=(w-t)/(i-t),w*w*(3-2*w))}function rme(w,t,i){return w<=t?0:w>=i?1:(w=(w-t)/(i-t),w*w*w*(w*(w*6-15)+10))}function ime(w,t){return w+Math.floor(Math.random()*(t-w+1))}function ome(w,t){return w+Math.random()*(t-w)}function ame(w){return w*(.5-Math.random())}function sme(w){w!==void 0&&(Lte=w);let t=Lte+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}function lme(w){return w*o1}function ume(w){return w*u1}function mL(w){return(w&w-1)===0&&w!==0}function qne(w){return Math.pow(2,Math.ceil(Math.log(w)/Math.LN2))}function KM(w){return Math.pow(2,Math.floor(Math.log(w)/Math.LN2))}function cme(w,t,i,l,d){const g=Math.cos,x=Math.sin,_=g(i/2),P=x(i/2),D=g((t+l)/2),B=x((t+l)/2),F=g((t-l)/2),V=x((t-l)/2),X=g((l-t)/2),ie=x((l-t)/2);switch(d){case"XYX":w.set(_*B,P*F,P*V,_*D);break;case"YZY":w.set(P*V,_*B,P*F,_*D);break;case"ZXZ":w.set(P*F,P*V,_*B,_*D);break;case"XZX":w.set(_*B,P*ie,P*X,_*D);break;case"YXY":w.set(P*X,_*B,P*ie,_*D);break;case"ZYZ":w.set(P*ie,P*X,_*B,_*D);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+d)}}function dme(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return w/65535;case Uint8Array:return w/255;case Int16Array:return Math.max(w/32767,-1);case Int8Array:return Math.max(w/127,-1);default:throw new Error("Invalid component type.")}}function fme(w,t){switch(t.constructor){case Float32Array:return w;case Uint16Array:return Math.round(w*65535);case Uint8Array:return Math.round(w*255);case Int16Array:return Math.round(w*32767);case Int8Array:return Math.round(w*127);default:throw new Error("Invalid component type.")}}var hme=Object.freeze({__proto__:null,DEG2RAD:o1,RAD2DEG:u1,generateUUID:Hs,clamp:Do,euclideanModulo:ML,mapLinear:Jpe,inverseLerp:Qpe,lerp:a1,damp:eme,pingpong:tme,smoothstep:nme,smootherstep:rme,randInt:ime,randFloat:ome,randFloatSpread:ame,seededRandom:sme,degToRad:lme,radToDeg:ume,isPowerOfTwo:mL,ceilPowerOfTwo:qne,floorPowerOfTwo:KM,setQuaternionFromProperEuler:cme,normalize:fme,denormalize:dme});class er{constructor(t=0,i=0){er.prototype.isVector2=!0,this.x=t,this.y=i}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,i){return this.x=t,this.y=i,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const i=this.x,l=this.y,d=t.elements;return this.x=d[0]*i+d[3]*l+d[6],this.y=d[1]*i+d[4]*l+d[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,l=this.y-t.y;return i*i+l*l}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this}rotateAround(t,i){const l=Math.cos(i),d=Math.sin(i),g=this.x-t.x,x=this.y-t.y;return this.x=g*l-x*d+t.x,this.y=g*d+x*l+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Za{constructor(){Za.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,i,l,d,g,x,_,P,D){const B=this.elements;return B[0]=t,B[1]=d,B[2]=_,B[3]=i,B[4]=g,B[5]=P,B[6]=l,B[7]=x,B[8]=D,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const i=this.elements,l=t.elements;return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],this}extractBasis(t,i,l){return t.setFromMatrix3Column(this,0),i.setFromMatrix3Column(this,1),l.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const i=t.elements;return this.set(i[0],i[4],i[8],i[1],i[5],i[9],i[2],i[6],i[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const l=t.elements,d=i.elements,g=this.elements,x=l[0],_=l[3],P=l[6],D=l[1],B=l[4],F=l[7],V=l[2],X=l[5],ie=l[8],K=d[0],O=d[3],q=d[6],_e=d[1],z=d[4],le=d[7],Ee=d[2],je=d[5],te=d[8];return g[0]=x*K+_*_e+P*Ee,g[3]=x*O+_*z+P*je,g[6]=x*q+_*le+P*te,g[1]=D*K+B*_e+F*Ee,g[4]=D*O+B*z+F*je,g[7]=D*q+B*le+F*te,g[2]=V*K+X*_e+ie*Ee,g[5]=V*O+X*z+ie*je,g[8]=V*q+X*le+ie*te,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[3]*=t,i[6]*=t,i[1]*=t,i[4]*=t,i[7]*=t,i[2]*=t,i[5]*=t,i[8]*=t,this}determinant(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],x=t[4],_=t[5],P=t[6],D=t[7],B=t[8];return i*x*B-i*_*D-l*g*B+l*_*P+d*g*D-d*x*P}invert(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],x=t[4],_=t[5],P=t[6],D=t[7],B=t[8],F=B*x-_*D,V=_*P-B*g,X=D*g-x*P,ie=i*F+l*V+d*X;if(ie===0)return this.set(0,0,0,0,0,0,0,0,0);const K=1/ie;return t[0]=F*K,t[1]=(d*D-B*l)*K,t[2]=(_*l-d*x)*K,t[3]=V*K,t[4]=(B*i-d*P)*K,t[5]=(d*g-_*i)*K,t[6]=X*K,t[7]=(l*P-D*i)*K,t[8]=(x*i-l*g)*K,this}transpose(){let t;const i=this.elements;return t=i[1],i[1]=i[3],i[3]=t,t=i[2],i[2]=i[6],i[6]=t,t=i[5],i[5]=i[7],i[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const i=this.elements;return t[0]=i[0],t[1]=i[3],t[2]=i[6],t[3]=i[1],t[4]=i[4],t[5]=i[7],t[6]=i[2],t[7]=i[5],t[8]=i[8],this}setUvTransform(t,i,l,d,g,x,_){const P=Math.cos(g),D=Math.sin(g);return this.set(l*P,l*D,-l*(P*x+D*_)+x+t,-d*D,d*P,-d*(-D*x+P*_)+_+i,0,0,1),this}scale(t,i){const l=this.elements;return l[0]*=t,l[3]*=t,l[6]*=t,l[1]*=i,l[4]*=i,l[7]*=i,this}rotate(t){const i=Math.cos(t),l=Math.sin(t),d=this.elements,g=d[0],x=d[3],_=d[6],P=d[1],D=d[4],B=d[7];return d[0]=i*g+l*P,d[3]=i*x+l*D,d[6]=i*_+l*B,d[1]=-l*g+i*P,d[4]=-l*x+i*D,d[7]=-l*_+i*B,this}translate(t,i){const l=this.elements;return l[0]+=t*l[2],l[3]+=t*l[5],l[6]+=t*l[8],l[1]+=i*l[2],l[4]+=i*l[5],l[7]+=i*l[8],this}equals(t){const i=this.elements,l=t.elements;for(let d=0;d<9;d++)if(i[d]!==l[d])return!1;return!0}fromArray(t,i=0){for(let l=0;l<9;l++)this.elements[l]=t[l+i];return this}toArray(t=[],i=0){const l=this.elements;return t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7],t[i+8]=l[8],t}clone(){return new this.constructor().fromArray(this.elements)}}function Kne(w){for(let t=w.length-1;t>=0;--t)if(w[t]>65535)return!0;return!1}function c1(w){return document.createElementNS("http://www.w3.org/1999/xhtml",w)}function Vh(w){return w<.04045?w*.0773993808:Math.pow(w*.9478672986+.0521327014,2.4)}function GM(w){return w<.0031308?w*12.92:1.055*Math.pow(w,.41666)-.055}const O4={[Gu]:{[Fh]:Vh},[Fh]:{[Gu]:GM}},Ns={legacyMode:!0,get workingColorSpace(){return Fh},set workingColorSpace(w){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(w,t,i){if(this.legacyMode||t===i||!t||!i)return w;if(O4[t]&&O4[t][i]!==void 0){const l=O4[t][i];return w.r=l(w.r),w.g=l(w.g),w.b=l(w.b),w}throw new Error("Unsupported color space conversion.")},fromWorkingColorSpace:function(w,t){return this.convert(w,this.workingColorSpace,t)},toWorkingColorSpace:function(w,t){return this.convert(w,t,this.workingColorSpace)}},Xne={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},ki={r:0,g:0,b:0},Fs={h:0,s:0,l:0},_M={h:0,s:0,l:0};function R4(w,t,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?w+(t-w)*6*i:i<1/2?t:i<2/3?w+(t-w)*6*(2/3-i):w}function xM(w,t){return t.r=w.r,t.g=w.g,t.b=w.b,t}class zn{constructor(t,i,l){return this.isColor=!0,this.r=1,this.g=1,this.b=1,i===void 0&&l===void 0?this.set(t):this.setRGB(t,i,l)}set(t){return t&&t.isColor?this.copy(t):typeof t=="number"?this.setHex(t):typeof t=="string"&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,i=Gu){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(t&255)/255,Ns.toWorkingColorSpace(this,i),this}setRGB(t,i,l,d=Fh){return this.r=t,this.g=i,this.b=l,Ns.toWorkingColorSpace(this,d),this}setHSL(t,i,l,d=Fh){if(t=ML(t,1),i=Do(i,0,1),l=Do(l,0,1),i===0)this.r=this.g=this.b=l;else{const g=l<=.5?l*(1+i):l+i-l*i,x=2*l-g;this.r=R4(x,g,t+1/3),this.g=R4(x,g,t),this.b=R4(x,g,t-1/3)}return Ns.toWorkingColorSpace(this,d),this}setStyle(t,i=Gu){function l(g){g!==void 0&&parseFloat(g)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let d;if(d=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let g;const x=d[1],_=d[2];switch(x){case"rgb":case"rgba":if(g=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(255,parseInt(g[1],10))/255,this.g=Math.min(255,parseInt(g[2],10))/255,this.b=Math.min(255,parseInt(g[3],10))/255,Ns.toWorkingColorSpace(this,i),l(g[4]),this;if(g=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_))return this.r=Math.min(100,parseInt(g[1],10))/100,this.g=Math.min(100,parseInt(g[2],10))/100,this.b=Math.min(100,parseInt(g[3],10))/100,Ns.toWorkingColorSpace(this,i),l(g[4]),this;break;case"hsl":case"hsla":if(g=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(_)){const P=parseFloat(g[1])/360,D=parseInt(g[2],10)/100,B=parseInt(g[3],10)/100;return l(g[4]),this.setHSL(P,D,B,i)}break}}else if(d=/^\#([A-Fa-f\d]+)$/.exec(t)){const g=d[1],x=g.length;if(x===3)return this.r=parseInt(g.charAt(0)+g.charAt(0),16)/255,this.g=parseInt(g.charAt(1)+g.charAt(1),16)/255,this.b=parseInt(g.charAt(2)+g.charAt(2),16)/255,Ns.toWorkingColorSpace(this,i),this;if(x===6)return this.r=parseInt(g.charAt(0)+g.charAt(1),16)/255,this.g=parseInt(g.charAt(2)+g.charAt(3),16)/255,this.b=parseInt(g.charAt(4)+g.charAt(5),16)/255,Ns.toWorkingColorSpace(this,i),this}return t&&t.length>0?this.setColorName(t,i):this}setColorName(t,i=Gu){const l=Xne[t.toLowerCase()];return l!==void 0?this.setHex(l,i):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=Vh(t.r),this.g=Vh(t.g),this.b=Vh(t.b),this}copyLinearToSRGB(t){return this.r=GM(t.r),this.g=GM(t.g),this.b=GM(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Gu){return Ns.fromWorkingColorSpace(xM(this,ki),t),Do(ki.r*255,0,255)<<16^Do(ki.g*255,0,255)<<8^Do(ki.b*255,0,255)<<0}getHexString(t=Gu){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,i=Fh){Ns.fromWorkingColorSpace(xM(this,ki),i);const l=ki.r,d=ki.g,g=ki.b,x=Math.max(l,d,g),_=Math.min(l,d,g);let P,D;const B=(_+x)/2;if(_===x)P=0,D=0;else{const F=x-_;switch(D=B<=.5?F/(x+_):F/(2-x-_),x){case l:P=(d-g)/F+(d<g?6:0);break;case d:P=(g-l)/F+2;break;case g:P=(l-d)/F+4;break}P/=6}return t.h=P,t.s=D,t.l=B,t}getRGB(t,i=Fh){return Ns.fromWorkingColorSpace(xM(this,ki),i),t.r=ki.r,t.g=ki.g,t.b=ki.b,t}getStyle(t=Gu){return Ns.fromWorkingColorSpace(xM(this,ki),t),t!==Gu?`color(${t} ${ki.r} ${ki.g} ${ki.b})`:`rgb(${ki.r*255|0},${ki.g*255|0},${ki.b*255|0})`}offsetHSL(t,i,l){return this.getHSL(Fs),Fs.h+=t,Fs.s+=i,Fs.l+=l,this.setHSL(Fs.h,Fs.s,Fs.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,i){return this.r=t.r+i.r,this.g=t.g+i.g,this.b=t.b+i.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,i){return this.r+=(t.r-this.r)*i,this.g+=(t.g-this.g)*i,this.b+=(t.b-this.b)*i,this}lerpColors(t,i,l){return this.r=t.r+(i.r-t.r)*l,this.g=t.g+(i.g-t.g)*l,this.b=t.b+(i.b-t.b)*l,this}lerpHSL(t,i){this.getHSL(Fs),t.getHSL(_M);const l=a1(Fs.h,_M.h,i),d=a1(Fs.s,_M.s,i),g=a1(Fs.l,_M.l,i);return this.setHSL(l,d,g),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,i=0){return this.r=t[i],this.g=t[i+1],this.b=t[i+2],this}toArray(t=[],i=0){return t[i]=this.r,t[i+1]=this.g,t[i+2]=this.b,t}fromBufferAttribute(t,i){return this.r=t.getX(i),this.g=t.getY(i),this.b=t.getZ(i),t.normalized===!0&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}zn.NAMES=Xne;let Zg;class $ne{static getDataURL(t){if(/^data:/i.test(t.src)||typeof HTMLCanvasElement=="undefined")return t.src;let i;if(t instanceof HTMLCanvasElement)i=t;else{Zg===void 0&&(Zg=c1("canvas")),Zg.width=t.width,Zg.height=t.height;const l=Zg.getContext("2d");t instanceof ImageData?l.putImageData(t,0,0):l.drawImage(t,0,0,t.width,t.height),i=Zg}return i.width>2048||i.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),i.toDataURL("image/jpeg",.6)):i.toDataURL("image/png")}static sRGBToLinear(t){if(typeof HTMLImageElement!="undefined"&&t instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&t instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&t instanceof ImageBitmap){const i=c1("canvas");i.width=t.width,i.height=t.height;const l=i.getContext("2d");l.drawImage(t,0,0,t.width,t.height);const d=l.getImageData(0,0,t.width,t.height),g=d.data;for(let x=0;x<g.length;x++)g[x]=Vh(g[x]/255)*255;return l.putImageData(d,0,0),i}else if(t.data){const i=t.data.slice(0);for(let l=0;l<i.length;l++)i instanceof Uint8Array||i instanceof Uint8ClampedArray?i[l]=Math.floor(Vh(i[l]/255)*255):i[l]=Vh(i[l]);return{data:i,width:t.width,height:t.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}class Zne{constructor(t=null){this.isSource=!0,this.uuid=Hs(),this.data=t,this.version=0}set needsUpdate(t){t===!0&&this.version++}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.images[this.uuid]!==void 0)return t.images[this.uuid];const l={uuid:this.uuid,url:""},d=this.data;if(d!==null){let g;if(Array.isArray(d)){g=[];for(let x=0,_=d.length;x<_;x++)d[x].isDataTexture?g.push(L4(d[x].image)):g.push(L4(d[x]))}else g=L4(d);l.url=g}return i||(t.images[this.uuid]=l),l}}function L4(w){return typeof HTMLImageElement!="undefined"&&w instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&w instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&w instanceof ImageBitmap?$ne.getDataURL(w):w.data?{data:Array.from(w.data),width:w.width,height:w.height,type:w.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let pme=0;class Ro extends S0{constructor(t=Ro.DEFAULT_IMAGE,i=Ro.DEFAULT_MAPPING,l=$a,d=$a,g=Zo,x=w0,_=Us,P=Wh,D=1,B=qh){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:pme++}),this.uuid=Hs(),this.name="",this.source=new Zne(t),this.mipmaps=[],this.mapping=i,this.wrapS=l,this.wrapT=d,this.magFilter=g,this.minFilter=x,this.anisotropy=D,this.format=_,this.internalFormat=null,this.type=P,this.offset=new er(0,0),this.repeat=new er(1,1),this.center=new er(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Za,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=B,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(t){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const i=t===void 0||typeof t=="string";if(!i&&t.textures[this.uuid]!==void 0)return t.textures[this.uuid];const l={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData),i||(t.textures[this.uuid]=l),l}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(this.mapping!==Vne)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case v0:t.x=t.x-Math.floor(t.x);break;case $a:t.x=t.x<0?0:1;break;case qM:Math.abs(Math.floor(t.x)%2)===1?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case v0:t.y=t.y-Math.floor(t.y);break;case $a:t.y=t.y<0?0:1;break;case qM:Math.abs(Math.floor(t.y)%2)===1?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){t===!0&&(this.version++,this.source.needsUpdate=!0)}}Ro.DEFAULT_IMAGE=null;Ro.DEFAULT_MAPPING=Vne;class xr{constructor(t=0,i=0,l=0,d=1){xr.prototype.isVector4=!0,this.x=t,this.y=i,this.z=l,this.w=d}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,i,l,d){return this.x=t,this.y=i,this.z=l,this.w=d,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;case 3:this.w=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=t.w!==void 0?t.w:1,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this.w=t.w+i.w,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this.w+=t.w*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this.w=t.w-i.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const i=this.x,l=this.y,d=this.z,g=this.w,x=t.elements;return this.x=x[0]*i+x[4]*l+x[8]*d+x[12]*g,this.y=x[1]*i+x[5]*l+x[9]*d+x[13]*g,this.z=x[2]*i+x[6]*l+x[10]*d+x[14]*g,this.w=x[3]*i+x[7]*l+x[11]*d+x[15]*g,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const i=Math.sqrt(1-t.w*t.w);return i<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/i,this.y=t.y/i,this.z=t.z/i),this}setAxisAngleFromRotationMatrix(t){let i,l,d,g;const P=t.elements,D=P[0],B=P[4],F=P[8],V=P[1],X=P[5],ie=P[9],K=P[2],O=P[6],q=P[10];if(Math.abs(B-V)<.01&&Math.abs(F-K)<.01&&Math.abs(ie-O)<.01){if(Math.abs(B+V)<.1&&Math.abs(F+K)<.1&&Math.abs(ie+O)<.1&&Math.abs(D+X+q-3)<.1)return this.set(1,0,0,0),this;i=Math.PI;const z=(D+1)/2,le=(X+1)/2,Ee=(q+1)/2,je=(B+V)/4,te=(F+K)/4,me=(ie+O)/4;return z>le&&z>Ee?z<.01?(l=0,d=.707106781,g=.707106781):(l=Math.sqrt(z),d=je/l,g=te/l):le>Ee?le<.01?(l=.707106781,d=0,g=.707106781):(d=Math.sqrt(le),l=je/d,g=me/d):Ee<.01?(l=.707106781,d=.707106781,g=0):(g=Math.sqrt(Ee),l=te/g,d=me/g),this.set(l,d,g,i),this}let _e=Math.sqrt((O-ie)*(O-ie)+(F-K)*(F-K)+(V-B)*(V-B));return Math.abs(_e)<.001&&(_e=1),this.x=(O-ie)/_e,this.y=(F-K)/_e,this.z=(V-B)/_e,this.w=Math.acos((D+X+q-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this.w=Math.max(t.w,Math.min(i.w,this.w)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this.w=Math.max(t,Math.min(i,this.w)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this.w+=(t.w-this.w)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this.z=t.z+(i.z-t.z)*l,this.w=t.w+(i.w-t.w)*l,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this.w=t[i+3],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t[i+3]=this.w,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this.w=t.getW(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Kh extends S0{constructor(t,i,l={}){super(),this.isWebGLRenderTarget=!0,this.width=t,this.height=i,this.depth=1,this.scissor=new xr(0,0,t,i),this.scissorTest=!1,this.viewport=new xr(0,0,t,i);const d={width:t,height:i,depth:1};this.texture=new Ro(d,l.mapping,l.wrapS,l.wrapT,l.magFilter,l.minFilter,l.format,l.type,l.anisotropy,l.encoding),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=l.generateMipmaps!==void 0?l.generateMipmaps:!1,this.texture.internalFormat=l.internalFormat!==void 0?l.internalFormat:null,this.texture.minFilter=l.minFilter!==void 0?l.minFilter:Zo,this.depthBuffer=l.depthBuffer!==void 0?l.depthBuffer:!0,this.stencilBuffer=l.stencilBuffer!==void 0?l.stencilBuffer:!1,this.depthTexture=l.depthTexture!==void 0?l.depthTexture:null,this.samples=l.samples!==void 0?l.samples:0}setSize(t,i,l=1){(this.width!==t||this.height!==i||this.depth!==l)&&(this.width=t,this.height=i,this.depth=l,this.texture.image.width=t,this.texture.image.height=i,this.texture.image.depth=l,this.dispose()),this.viewport.set(0,0,t,i),this.scissor.set(0,0,t,i)}clone(){return new this.constructor().copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.texture.isRenderTargetTexture=!0;const i=Object.assign({},t.texture.image);return this.texture.source=new Zne(i),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,t.depthTexture!==null&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Yne extends Ro{constructor(t=null,i=1,l=1,d=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:i,height:l,depth:d},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class mme extends Ro{constructor(t=null,i=1,l=1,d=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:i,height:l,depth:d},this.magFilter=Ji,this.minFilter=Ji,this.wrapR=$a,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class $u{constructor(t=0,i=0,l=0,d=1){this.isQuaternion=!0,this._x=t,this._y=i,this._z=l,this._w=d}static slerp(t,i,l,d){return console.warn("THREE.Quaternion: Static .slerp() has been deprecated. Use qm.slerpQuaternions( qa, qb, t ) instead."),l.slerpQuaternions(t,i,d)}static slerpFlat(t,i,l,d,g,x,_){let P=l[d+0],D=l[d+1],B=l[d+2],F=l[d+3];const V=g[x+0],X=g[x+1],ie=g[x+2],K=g[x+3];if(_===0){t[i+0]=P,t[i+1]=D,t[i+2]=B,t[i+3]=F;return}if(_===1){t[i+0]=V,t[i+1]=X,t[i+2]=ie,t[i+3]=K;return}if(F!==K||P!==V||D!==X||B!==ie){let O=1-_;const q=P*V+D*X+B*ie+F*K,_e=q>=0?1:-1,z=1-q*q;if(z>Number.EPSILON){const Ee=Math.sqrt(z),je=Math.atan2(Ee,q*_e);O=Math.sin(O*je)/Ee,_=Math.sin(_*je)/Ee}const le=_*_e;if(P=P*O+V*le,D=D*O+X*le,B=B*O+ie*le,F=F*O+K*le,O===1-_){const Ee=1/Math.sqrt(P*P+D*D+B*B+F*F);P*=Ee,D*=Ee,B*=Ee,F*=Ee}}t[i]=P,t[i+1]=D,t[i+2]=B,t[i+3]=F}static multiplyQuaternionsFlat(t,i,l,d,g,x){const _=l[d],P=l[d+1],D=l[d+2],B=l[d+3],F=g[x],V=g[x+1],X=g[x+2],ie=g[x+3];return t[i]=_*ie+B*F+P*X-D*V,t[i+1]=P*ie+B*V+D*F-_*X,t[i+2]=D*ie+B*X+_*V-P*F,t[i+3]=B*ie-_*F-P*V-D*X,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,i,l,d){return this._x=t,this._y=i,this._z=l,this._w=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,i){if(!(t&&t.isEuler))throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const l=t._x,d=t._y,g=t._z,x=t._order,_=Math.cos,P=Math.sin,D=_(l/2),B=_(d/2),F=_(g/2),V=P(l/2),X=P(d/2),ie=P(g/2);switch(x){case"XYZ":this._x=V*B*F+D*X*ie,this._y=D*X*F-V*B*ie,this._z=D*B*ie+V*X*F,this._w=D*B*F-V*X*ie;break;case"YXZ":this._x=V*B*F+D*X*ie,this._y=D*X*F-V*B*ie,this._z=D*B*ie-V*X*F,this._w=D*B*F+V*X*ie;break;case"ZXY":this._x=V*B*F-D*X*ie,this._y=D*X*F+V*B*ie,this._z=D*B*ie+V*X*F,this._w=D*B*F-V*X*ie;break;case"ZYX":this._x=V*B*F-D*X*ie,this._y=D*X*F+V*B*ie,this._z=D*B*ie-V*X*F,this._w=D*B*F+V*X*ie;break;case"YZX":this._x=V*B*F+D*X*ie,this._y=D*X*F+V*B*ie,this._z=D*B*ie-V*X*F,this._w=D*B*F-V*X*ie;break;case"XZY":this._x=V*B*F-D*X*ie,this._y=D*X*F-V*B*ie,this._z=D*B*ie+V*X*F,this._w=D*B*F+V*X*ie;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+x)}return i!==!1&&this._onChangeCallback(),this}setFromAxisAngle(t,i){const l=i/2,d=Math.sin(l);return this._x=t.x*d,this._y=t.y*d,this._z=t.z*d,this._w=Math.cos(l),this._onChangeCallback(),this}setFromRotationMatrix(t){const i=t.elements,l=i[0],d=i[4],g=i[8],x=i[1],_=i[5],P=i[9],D=i[2],B=i[6],F=i[10],V=l+_+F;if(V>0){const X=.5/Math.sqrt(V+1);this._w=.25/X,this._x=(B-P)*X,this._y=(g-D)*X,this._z=(x-d)*X}else if(l>_&&l>F){const X=2*Math.sqrt(1+l-_-F);this._w=(B-P)/X,this._x=.25*X,this._y=(d+x)/X,this._z=(g+D)/X}else if(_>F){const X=2*Math.sqrt(1+_-l-F);this._w=(g-D)/X,this._x=(d+x)/X,this._y=.25*X,this._z=(P+B)/X}else{const X=2*Math.sqrt(1+F-l-_);this._w=(x-d)/X,this._x=(g+D)/X,this._y=(P+B)/X,this._z=.25*X}return this._onChangeCallback(),this}setFromUnitVectors(t,i){let l=t.dot(i)+1;return l<Number.EPSILON?(l=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=l):(this._x=0,this._y=-t.z,this._z=t.y,this._w=l)):(this._x=t.y*i.z-t.z*i.y,this._y=t.z*i.x-t.x*i.z,this._z=t.x*i.y-t.y*i.x,this._w=l),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Do(this.dot(t),-1,1)))}rotateTowards(t,i){const l=this.angleTo(t);if(l===0)return this;const d=Math.min(1,i/l);return this.slerp(t,d),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return t===0?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,i){return i!==void 0?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,i)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,i){const l=t._x,d=t._y,g=t._z,x=t._w,_=i._x,P=i._y,D=i._z,B=i._w;return this._x=l*B+x*_+d*D-g*P,this._y=d*B+x*P+g*_-l*D,this._z=g*B+x*D+l*P-d*_,this._w=x*B-l*_-d*P-g*D,this._onChangeCallback(),this}slerp(t,i){if(i===0)return this;if(i===1)return this.copy(t);const l=this._x,d=this._y,g=this._z,x=this._w;let _=x*t._w+l*t._x+d*t._y+g*t._z;if(_<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,_=-_):this.copy(t),_>=1)return this._w=x,this._x=l,this._y=d,this._z=g,this;const P=1-_*_;if(P<=Number.EPSILON){const X=1-i;return this._w=X*x+i*this._w,this._x=X*l+i*this._x,this._y=X*d+i*this._y,this._z=X*g+i*this._z,this.normalize(),this._onChangeCallback(),this}const D=Math.sqrt(P),B=Math.atan2(D,_),F=Math.sin((1-i)*B)/D,V=Math.sin(i*B)/D;return this._w=x*F+this._w*V,this._x=l*F+this._x*V,this._y=d*F+this._y*V,this._z=g*F+this._z*V,this._onChangeCallback(),this}slerpQuaternions(t,i,l){return this.copy(t).slerp(i,l)}random(){const t=Math.random(),i=Math.sqrt(1-t),l=Math.sqrt(t),d=2*Math.PI*Math.random(),g=2*Math.PI*Math.random();return this.set(i*Math.cos(d),l*Math.sin(g),l*Math.cos(g),i*Math.sin(d))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,i=0){return this._x=t[i],this._y=t[i+1],this._z=t[i+2],this._w=t[i+3],this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._w,t}fromBufferAttribute(t,i){return this._x=t.getX(i),this._y=t.getY(i),this._z=t.getZ(i),this._w=t.getW(i),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Ve{constructor(t=0,i=0,l=0){Ve.prototype.isVector3=!0,this.x=t,this.y=i,this.z=l}set(t,i,l){return l===void 0&&(l=this.z),this.x=t,this.y=i,this.z=l,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,i){switch(t){case 0:this.x=i;break;case 1:this.y=i;break;case 2:this.z=i;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,i){return i!==void 0?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,i)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,i){return this.x=t.x+i.x,this.y=t.y+i.y,this.z=t.z+i.z,this}addScaledVector(t,i){return this.x+=t.x*i,this.y+=t.y*i,this.z+=t.z*i,this}sub(t,i){return i!==void 0?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,i)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,i){return this.x=t.x-i.x,this.y=t.y-i.y,this.z=t.z-i.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,i)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,i){return this.x=t.x*i.x,this.y=t.y*i.y,this.z=t.z*i.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(zte.setFromEuler(t))}applyAxisAngle(t,i){return this.applyQuaternion(zte.setFromAxisAngle(t,i))}applyMatrix3(t){const i=this.x,l=this.y,d=this.z,g=t.elements;return this.x=g[0]*i+g[3]*l+g[6]*d,this.y=g[1]*i+g[4]*l+g[7]*d,this.z=g[2]*i+g[5]*l+g[8]*d,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const i=this.x,l=this.y,d=this.z,g=t.elements,x=1/(g[3]*i+g[7]*l+g[11]*d+g[15]);return this.x=(g[0]*i+g[4]*l+g[8]*d+g[12])*x,this.y=(g[1]*i+g[5]*l+g[9]*d+g[13])*x,this.z=(g[2]*i+g[6]*l+g[10]*d+g[14])*x,this}applyQuaternion(t){const i=this.x,l=this.y,d=this.z,g=t.x,x=t.y,_=t.z,P=t.w,D=P*i+x*d-_*l,B=P*l+_*i-g*d,F=P*d+g*l-x*i,V=-g*i-x*l-_*d;return this.x=D*P+V*-g+B*-_-F*-x,this.y=B*P+V*-x+F*-g-D*-_,this.z=F*P+V*-_+D*-x-B*-g,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const i=this.x,l=this.y,d=this.z,g=t.elements;return this.x=g[0]*i+g[4]*l+g[8]*d,this.y=g[1]*i+g[5]*l+g[9]*d,this.z=g[2]*i+g[6]*l+g[10]*d,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,i){return this.x=Math.max(t.x,Math.min(i.x,this.x)),this.y=Math.max(t.y,Math.min(i.y,this.y)),this.z=Math.max(t.z,Math.min(i.z,this.z)),this}clampScalar(t,i){return this.x=Math.max(t,Math.min(i,this.x)),this.y=Math.max(t,Math.min(i,this.y)),this.z=Math.max(t,Math.min(i,this.z)),this}clampLength(t,i){const l=this.length();return this.divideScalar(l||1).multiplyScalar(Math.max(t,Math.min(i,l)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,i){return this.x+=(t.x-this.x)*i,this.y+=(t.y-this.y)*i,this.z+=(t.z-this.z)*i,this}lerpVectors(t,i,l){return this.x=t.x+(i.x-t.x)*l,this.y=t.y+(i.y-t.y)*l,this.z=t.z+(i.z-t.z)*l,this}cross(t,i){return i!==void 0?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,i)):this.crossVectors(this,t)}crossVectors(t,i){const l=t.x,d=t.y,g=t.z,x=i.x,_=i.y,P=i.z;return this.x=d*P-g*_,this.y=g*x-l*P,this.z=l*_-d*x,this}projectOnVector(t){const i=t.lengthSq();if(i===0)return this.set(0,0,0);const l=t.dot(this)/i;return this.copy(t).multiplyScalar(l)}projectOnPlane(t){return z4.copy(this).projectOnVector(t),this.sub(z4)}reflect(t){return this.sub(z4.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const i=Math.sqrt(this.lengthSq()*t.lengthSq());if(i===0)return Math.PI/2;const l=this.dot(t)/i;return Math.acos(Do(l,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const i=this.x-t.x,l=this.y-t.y,d=this.z-t.z;return i*i+l*l+d*d}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,i,l){const d=Math.sin(i)*t;return this.x=d*Math.sin(l),this.y=Math.cos(i)*t,this.z=d*Math.cos(l),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,i,l){return this.x=t*Math.sin(i),this.y=l,this.z=t*Math.cos(i),this}setFromMatrixPosition(t){const i=t.elements;return this.x=i[12],this.y=i[13],this.z=i[14],this}setFromMatrixScale(t){const i=this.setFromMatrixColumn(t,0).length(),l=this.setFromMatrixColumn(t,1).length(),d=this.setFromMatrixColumn(t,2).length();return this.x=i,this.y=l,this.z=d,this}setFromMatrixColumn(t,i){return this.fromArray(t.elements,i*4)}setFromMatrix3Column(t,i){return this.fromArray(t.elements,i*3)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,i=0){return this.x=t[i],this.y=t[i+1],this.z=t[i+2],this}toArray(t=[],i=0){return t[i]=this.x,t[i+1]=this.y,t[i+2]=this.z,t}fromBufferAttribute(t,i,l){return l!==void 0&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(i),this.y=t.getY(i),this.z=t.getZ(i),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=(Math.random()-.5)*2,i=Math.random()*Math.PI*2,l=Math.sqrt(1-t**2);return this.x=l*Math.cos(i),this.y=l*Math.sin(i),this.z=t,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const z4=new Ve,zte=new $u;class E0{constructor(t=new Ve(1/0,1/0,1/0),i=new Ve(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=i}set(t,i){return this.min.copy(t),this.max.copy(i),this}setFromArray(t){let i=1/0,l=1/0,d=1/0,g=-1/0,x=-1/0,_=-1/0;for(let P=0,D=t.length;P<D;P+=3){const B=t[P],F=t[P+1],V=t[P+2];B<i&&(i=B),F<l&&(l=F),V<d&&(d=V),B>g&&(g=B),F>x&&(x=F),V>_&&(_=V)}return this.min.set(i,l,d),this.max.set(g,x,_),this}setFromBufferAttribute(t){let i=1/0,l=1/0,d=1/0,g=-1/0,x=-1/0,_=-1/0;for(let P=0,D=t.count;P<D;P++){const B=t.getX(P),F=t.getY(P),V=t.getZ(P);B<i&&(i=B),F<l&&(l=F),V<d&&(d=V),B>g&&(g=B),F>x&&(x=F),V>_&&(_=V)}return this.min.set(i,l,d),this.max.set(g,x,_),this}setFromPoints(t){this.makeEmpty();for(let i=0,l=t.length;i<l;i++)this.expandByPoint(t[i]);return this}setFromCenterAndSize(t,i){const l=Ah.copy(i).multiplyScalar(.5);return this.min.copy(t).sub(l),this.max.copy(t).add(l),this}setFromObject(t,i=!1){return this.makeEmpty(),this.expandByObject(t,i)}clone(){return new this.constructor().copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,i=!1){t.updateWorldMatrix(!1,!1);const l=t.geometry;if(l!==void 0)if(i&&l.attributes!=null&&l.attributes.position!==void 0){const g=l.attributes.position;for(let x=0,_=g.count;x<_;x++)Ah.fromBufferAttribute(g,x).applyMatrix4(t.matrixWorld),this.expandByPoint(Ah)}else l.boundingBox===null&&l.computeBoundingBox(),N4.copy(l.boundingBox),N4.applyMatrix4(t.matrixWorld),this.union(N4);const d=t.children;for(let g=0,x=d.length;g<x;g++)this.expandByObject(d[g],i);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,i){return i.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,Ah),Ah.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let i,l;return t.normal.x>0?(i=t.normal.x*this.min.x,l=t.normal.x*this.max.x):(i=t.normal.x*this.max.x,l=t.normal.x*this.min.x),t.normal.y>0?(i+=t.normal.y*this.min.y,l+=t.normal.y*this.max.y):(i+=t.normal.y*this.max.y,l+=t.normal.y*this.min.y),t.normal.z>0?(i+=t.normal.z*this.min.z,l+=t.normal.z*this.max.z):(i+=t.normal.z*this.max.z,l+=t.normal.z*this.min.z),i<=-t.constant&&l>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(Y_),wM.subVectors(this.max,Y_),Yg.subVectors(t.a,Y_),Jg.subVectors(t.b,Y_),Qg.subVectors(t.c,Y_),Dd.subVectors(Jg,Yg),Od.subVectors(Qg,Jg),Ih.subVectors(Yg,Qg);let i=[0,-Dd.z,Dd.y,0,-Od.z,Od.y,0,-Ih.z,Ih.y,Dd.z,0,-Dd.x,Od.z,0,-Od.x,Ih.z,0,-Ih.x,-Dd.y,Dd.x,0,-Od.y,Od.x,0,-Ih.y,Ih.x,0];return!F4(i,Yg,Jg,Qg,wM)||(i=[1,0,0,0,1,0,0,0,1],!F4(i,Yg,Jg,Qg,wM))?!1:(SM.crossVectors(Dd,Od),i=[SM.x,SM.y,SM.z],F4(i,Yg,Jg,Qg,wM))}clampPoint(t,i){return i.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return Ah.copy(t).clamp(this.min,this.max).sub(t).length()}getBoundingSphere(t){return this.getCenter(t.center),t.radius=this.getSize(Ah).length()*.5,t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(Nu[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Nu[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Nu[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Nu[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Nu[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Nu[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Nu[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Nu[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Nu),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Nu=[new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve,new Ve],Ah=new Ve,N4=new E0,Yg=new Ve,Jg=new Ve,Qg=new Ve,Dd=new Ve,Od=new Ve,Ih=new Ve,Y_=new Ve,wM=new Ve,SM=new Ve,Dh=new Ve;function F4(w,t,i,l,d){for(let g=0,x=w.length-3;g<=x;g+=3){Dh.fromArray(w,g);const _=d.x*Math.abs(Dh.x)+d.y*Math.abs(Dh.y)+d.z*Math.abs(Dh.z),P=t.dot(Dh),D=i.dot(Dh),B=l.dot(Dh);if(Math.max(-Math.max(P,D,B),Math.min(P,D,B))>_)return!1}return!0}const gme=new E0,Nte=new Ve,EM=new Ve,B4=new Ve;class k0{constructor(t=new Ve,i=-1){this.center=t,this.radius=i}set(t,i){return this.center.copy(t),this.radius=i,this}setFromPoints(t,i){const l=this.center;i!==void 0?l.copy(i):gme.setFromPoints(t).getCenter(l);let d=0;for(let g=0,x=t.length;g<x;g++)d=Math.max(d,l.distanceToSquared(t[g]));return this.radius=Math.sqrt(d),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const i=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=i*i}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,i){const l=this.center.distanceToSquared(t);return i.copy(t),l>this.radius*this.radius&&(i.sub(this.center).normalize(),i.multiplyScalar(this.radius).add(this.center)),i}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){B4.subVectors(t,this.center);const i=B4.lengthSq();if(i>this.radius*this.radius){const l=Math.sqrt(i),d=(l-this.radius)*.5;this.center.add(B4.multiplyScalar(d/l)),this.radius+=d}return this}union(t){return this.center.equals(t.center)===!0?EM.set(0,0,1).multiplyScalar(t.radius):EM.subVectors(t.center,this.center).normalize().multiplyScalar(t.radius),this.expandByPoint(Nte.copy(t.center).add(EM)),this.expandByPoint(Nte.copy(t.center).sub(EM)),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return new this.constructor().copy(this)}}const Fu=new Ve,j4=new Ve,kM=new Ve,Rd=new Ve,U4=new Ve,TM=new Ve,V4=new Ve;class PL{constructor(t=new Ve,i=new Ve(0,0,-1)){this.origin=t,this.direction=i}set(t,i){return this.origin.copy(t),this.direction.copy(i),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,i){return i.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,Fu)),this}closestPointToPoint(t,i){i.subVectors(t,this.origin);const l=i.dot(this.direction);return l<0?i.copy(this.origin):i.copy(this.direction).multiplyScalar(l).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const i=Fu.subVectors(t,this.origin).dot(this.direction);return i<0?this.origin.distanceToSquared(t):(Fu.copy(this.direction).multiplyScalar(i).add(this.origin),Fu.distanceToSquared(t))}distanceSqToSegment(t,i,l,d){j4.copy(t).add(i).multiplyScalar(.5),kM.copy(i).sub(t).normalize(),Rd.copy(this.origin).sub(j4);const g=t.distanceTo(i)*.5,x=-this.direction.dot(kM),_=Rd.dot(this.direction),P=-Rd.dot(kM),D=Rd.lengthSq(),B=Math.abs(1-x*x);let F,V,X,ie;if(B>0)if(F=x*P-_,V=x*_-P,ie=g*B,F>=0)if(V>=-ie)if(V<=ie){const K=1/B;F*=K,V*=K,X=F*(F+x*V+2*_)+V*(x*F+V+2*P)+D}else V=g,F=Math.max(0,-(x*V+_)),X=-F*F+V*(V+2*P)+D;else V=-g,F=Math.max(0,-(x*V+_)),X=-F*F+V*(V+2*P)+D;else V<=-ie?(F=Math.max(0,-(-x*g+_)),V=F>0?-g:Math.min(Math.max(-g,-P),g),X=-F*F+V*(V+2*P)+D):V<=ie?(F=0,V=Math.min(Math.max(-g,-P),g),X=V*(V+2*P)+D):(F=Math.max(0,-(x*g+_)),V=F>0?g:Math.min(Math.max(-g,-P),g),X=-F*F+V*(V+2*P)+D);else V=x>0?-g:g,F=Math.max(0,-(x*V+_)),X=-F*F+V*(V+2*P)+D;return l&&l.copy(this.direction).multiplyScalar(F).add(this.origin),d&&d.copy(kM).multiplyScalar(V).add(j4),X}intersectSphere(t,i){Fu.subVectors(t.center,this.origin);const l=Fu.dot(this.direction),d=Fu.dot(Fu)-l*l,g=t.radius*t.radius;if(d>g)return null;const x=Math.sqrt(g-d),_=l-x,P=l+x;return _<0&&P<0?null:_<0?this.at(P,i):this.at(_,i)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const i=t.normal.dot(this.direction);if(i===0)return t.distanceToPoint(this.origin)===0?0:null;const l=-(this.origin.dot(t.normal)+t.constant)/i;return l>=0?l:null}intersectPlane(t,i){const l=this.distanceToPlane(t);return l===null?null:this.at(l,i)}intersectsPlane(t){const i=t.distanceToPoint(this.origin);return i===0||t.normal.dot(this.direction)*i<0}intersectBox(t,i){let l,d,g,x,_,P;const D=1/this.direction.x,B=1/this.direction.y,F=1/this.direction.z,V=this.origin;return D>=0?(l=(t.min.x-V.x)*D,d=(t.max.x-V.x)*D):(l=(t.max.x-V.x)*D,d=(t.min.x-V.x)*D),B>=0?(g=(t.min.y-V.y)*B,x=(t.max.y-V.y)*B):(g=(t.max.y-V.y)*B,x=(t.min.y-V.y)*B),l>x||g>d||((g>l||l!==l)&&(l=g),(x<d||d!==d)&&(d=x),F>=0?(_=(t.min.z-V.z)*F,P=(t.max.z-V.z)*F):(_=(t.max.z-V.z)*F,P=(t.min.z-V.z)*F),l>P||_>d)||((_>l||l!==l)&&(l=_),(P<d||d!==d)&&(d=P),d<0)?null:this.at(l>=0?l:d,i)}intersectsBox(t){return this.intersectBox(t,Fu)!==null}intersectTriangle(t,i,l,d,g){U4.subVectors(i,t),TM.subVectors(l,t),V4.crossVectors(U4,TM);let x=this.direction.dot(V4),_;if(x>0){if(d)return null;_=1}else if(x<0)_=-1,x=-x;else return null;Rd.subVectors(this.origin,t);const P=_*this.direction.dot(TM.crossVectors(Rd,TM));if(P<0)return null;const D=_*this.direction.dot(U4.cross(Rd));if(D<0||P+D>x)return null;const B=-_*Rd.dot(V4);return B<0?null:this.at(B/x,g)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class lr{constructor(){lr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,i,l,d,g,x,_,P,D,B,F,V,X,ie,K,O){const q=this.elements;return q[0]=t,q[4]=i,q[8]=l,q[12]=d,q[1]=g,q[5]=x,q[9]=_,q[13]=P,q[2]=D,q[6]=B,q[10]=F,q[14]=V,q[3]=X,q[7]=ie,q[11]=K,q[15]=O,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new lr().fromArray(this.elements)}copy(t){const i=this.elements,l=t.elements;return i[0]=l[0],i[1]=l[1],i[2]=l[2],i[3]=l[3],i[4]=l[4],i[5]=l[5],i[6]=l[6],i[7]=l[7],i[8]=l[8],i[9]=l[9],i[10]=l[10],i[11]=l[11],i[12]=l[12],i[13]=l[13],i[14]=l[14],i[15]=l[15],this}copyPosition(t){const i=this.elements,l=t.elements;return i[12]=l[12],i[13]=l[13],i[14]=l[14],this}setFromMatrix3(t){const i=t.elements;return this.set(i[0],i[3],i[6],0,i[1],i[4],i[7],0,i[2],i[5],i[8],0,0,0,0,1),this}extractBasis(t,i,l){return t.setFromMatrixColumn(this,0),i.setFromMatrixColumn(this,1),l.setFromMatrixColumn(this,2),this}makeBasis(t,i,l){return this.set(t.x,i.x,l.x,0,t.y,i.y,l.y,0,t.z,i.z,l.z,0,0,0,0,1),this}extractRotation(t){const i=this.elements,l=t.elements,d=1/e0.setFromMatrixColumn(t,0).length(),g=1/e0.setFromMatrixColumn(t,1).length(),x=1/e0.setFromMatrixColumn(t,2).length();return i[0]=l[0]*d,i[1]=l[1]*d,i[2]=l[2]*d,i[3]=0,i[4]=l[4]*g,i[5]=l[5]*g,i[6]=l[6]*g,i[7]=0,i[8]=l[8]*x,i[9]=l[9]*x,i[10]=l[10]*x,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const i=this.elements,l=t.x,d=t.y,g=t.z,x=Math.cos(l),_=Math.sin(l),P=Math.cos(d),D=Math.sin(d),B=Math.cos(g),F=Math.sin(g);if(t.order==="XYZ"){const V=x*B,X=x*F,ie=_*B,K=_*F;i[0]=P*B,i[4]=-P*F,i[8]=D,i[1]=X+ie*D,i[5]=V-K*D,i[9]=-_*P,i[2]=K-V*D,i[6]=ie+X*D,i[10]=x*P}else if(t.order==="YXZ"){const V=P*B,X=P*F,ie=D*B,K=D*F;i[0]=V+K*_,i[4]=ie*_-X,i[8]=x*D,i[1]=x*F,i[5]=x*B,i[9]=-_,i[2]=X*_-ie,i[6]=K+V*_,i[10]=x*P}else if(t.order==="ZXY"){const V=P*B,X=P*F,ie=D*B,K=D*F;i[0]=V-K*_,i[4]=-x*F,i[8]=ie+X*_,i[1]=X+ie*_,i[5]=x*B,i[9]=K-V*_,i[2]=-x*D,i[6]=_,i[10]=x*P}else if(t.order==="ZYX"){const V=x*B,X=x*F,ie=_*B,K=_*F;i[0]=P*B,i[4]=ie*D-X,i[8]=V*D+K,i[1]=P*F,i[5]=K*D+V,i[9]=X*D-ie,i[2]=-D,i[6]=_*P,i[10]=x*P}else if(t.order==="YZX"){const V=x*P,X=x*D,ie=_*P,K=_*D;i[0]=P*B,i[4]=K-V*F,i[8]=ie*F+X,i[1]=F,i[5]=x*B,i[9]=-_*B,i[2]=-D*B,i[6]=X*F+ie,i[10]=V-K*F}else if(t.order==="XZY"){const V=x*P,X=x*D,ie=_*P,K=_*D;i[0]=P*B,i[4]=-F,i[8]=D*B,i[1]=V*F+K,i[5]=x*B,i[9]=X*F-ie,i[2]=ie*F-X,i[6]=_*B,i[10]=K*F+V}return i[3]=0,i[7]=0,i[11]=0,i[12]=0,i[13]=0,i[14]=0,i[15]=1,this}makeRotationFromQuaternion(t){return this.compose(vme,t,yme)}lookAt(t,i,l){const d=this.elements;return ma.subVectors(t,i),ma.lengthSq()===0&&(ma.z=1),ma.normalize(),Ld.crossVectors(l,ma),Ld.lengthSq()===0&&(Math.abs(l.z)===1?ma.x+=1e-4:ma.z+=1e-4,ma.normalize(),Ld.crossVectors(l,ma)),Ld.normalize(),MM.crossVectors(ma,Ld),d[0]=Ld.x,d[4]=MM.x,d[8]=ma.x,d[1]=Ld.y,d[5]=MM.y,d[9]=ma.y,d[2]=Ld.z,d[6]=MM.z,d[10]=ma.z,this}multiply(t,i){return i!==void 0?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,i)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,i){const l=t.elements,d=i.elements,g=this.elements,x=l[0],_=l[4],P=l[8],D=l[12],B=l[1],F=l[5],V=l[9],X=l[13],ie=l[2],K=l[6],O=l[10],q=l[14],_e=l[3],z=l[7],le=l[11],Ee=l[15],je=d[0],te=d[4],me=d[8],Pe=d[12],Q=d[1],Je=d[5],Ut=d[9],Dt=d[13],et=d[2],be=d[6],tt=d[10],He=d[14],yt=d[3],dt=d[7],vt=d[11],Lt=d[15];return g[0]=x*je+_*Q+P*et+D*yt,g[4]=x*te+_*Je+P*be+D*dt,g[8]=x*me+_*Ut+P*tt+D*vt,g[12]=x*Pe+_*Dt+P*He+D*Lt,g[1]=B*je+F*Q+V*et+X*yt,g[5]=B*te+F*Je+V*be+X*dt,g[9]=B*me+F*Ut+V*tt+X*vt,g[13]=B*Pe+F*Dt+V*He+X*Lt,g[2]=ie*je+K*Q+O*et+q*yt,g[6]=ie*te+K*Je+O*be+q*dt,g[10]=ie*me+K*Ut+O*tt+q*vt,g[14]=ie*Pe+K*Dt+O*He+q*Lt,g[3]=_e*je+z*Q+le*et+Ee*yt,g[7]=_e*te+z*Je+le*be+Ee*dt,g[11]=_e*me+z*Ut+le*tt+Ee*vt,g[15]=_e*Pe+z*Dt+le*He+Ee*Lt,this}multiplyScalar(t){const i=this.elements;return i[0]*=t,i[4]*=t,i[8]*=t,i[12]*=t,i[1]*=t,i[5]*=t,i[9]*=t,i[13]*=t,i[2]*=t,i[6]*=t,i[10]*=t,i[14]*=t,i[3]*=t,i[7]*=t,i[11]*=t,i[15]*=t,this}determinant(){const t=this.elements,i=t[0],l=t[4],d=t[8],g=t[12],x=t[1],_=t[5],P=t[9],D=t[13],B=t[2],F=t[6],V=t[10],X=t[14],ie=t[3],K=t[7],O=t[11],q=t[15];return ie*(+g*P*F-d*D*F-g*_*V+l*D*V+d*_*X-l*P*X)+K*(+i*P*X-i*D*V+g*x*V-d*x*X+d*D*B-g*P*B)+O*(+i*D*F-i*_*X-g*x*F+l*x*X+g*_*B-l*D*B)+q*(-d*_*B-i*P*F+i*_*V+d*x*F-l*x*V+l*P*B)}transpose(){const t=this.elements;let i;return i=t[1],t[1]=t[4],t[4]=i,i=t[2],t[2]=t[8],t[8]=i,i=t[6],t[6]=t[9],t[9]=i,i=t[3],t[3]=t[12],t[12]=i,i=t[7],t[7]=t[13],t[13]=i,i=t[11],t[11]=t[14],t[14]=i,this}setPosition(t,i,l){const d=this.elements;return t.isVector3?(d[12]=t.x,d[13]=t.y,d[14]=t.z):(d[12]=t,d[13]=i,d[14]=l),this}invert(){const t=this.elements,i=t[0],l=t[1],d=t[2],g=t[3],x=t[4],_=t[5],P=t[6],D=t[7],B=t[8],F=t[9],V=t[10],X=t[11],ie=t[12],K=t[13],O=t[14],q=t[15],_e=F*O*D-K*V*D+K*P*X-_*O*X-F*P*q+_*V*q,z=ie*V*D-B*O*D-ie*P*X+x*O*X+B*P*q-x*V*q,le=B*K*D-ie*F*D+ie*_*X-x*K*X-B*_*q+x*F*q,Ee=ie*F*P-B*K*P-ie*_*V+x*K*V+B*_*O-x*F*O,je=i*_e+l*z+d*le+g*Ee;if(je===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const te=1/je;return t[0]=_e*te,t[1]=(K*V*g-F*O*g-K*d*X+l*O*X+F*d*q-l*V*q)*te,t[2]=(_*O*g-K*P*g+K*d*D-l*O*D-_*d*q+l*P*q)*te,t[3]=(F*P*g-_*V*g-F*d*D+l*V*D+_*d*X-l*P*X)*te,t[4]=z*te,t[5]=(B*O*g-ie*V*g+ie*d*X-i*O*X-B*d*q+i*V*q)*te,t[6]=(ie*P*g-x*O*g-ie*d*D+i*O*D+x*d*q-i*P*q)*te,t[7]=(x*V*g-B*P*g+B*d*D-i*V*D-x*d*X+i*P*X)*te,t[8]=le*te,t[9]=(ie*F*g-B*K*g-ie*l*X+i*K*X+B*l*q-i*F*q)*te,t[10]=(x*K*g-ie*_*g+ie*l*D-i*K*D-x*l*q+i*_*q)*te,t[11]=(B*_*g-x*F*g-B*l*D+i*F*D+x*l*X-i*_*X)*te,t[12]=Ee*te,t[13]=(B*K*d-ie*F*d+ie*l*V-i*K*V-B*l*O+i*F*O)*te,t[14]=(ie*_*d-x*K*d-ie*l*P+i*K*P+x*l*O-i*_*O)*te,t[15]=(x*F*d-B*_*d+B*l*P-i*F*P-x*l*V+i*_*V)*te,this}scale(t){const i=this.elements,l=t.x,d=t.y,g=t.z;return i[0]*=l,i[4]*=d,i[8]*=g,i[1]*=l,i[5]*=d,i[9]*=g,i[2]*=l,i[6]*=d,i[10]*=g,i[3]*=l,i[7]*=d,i[11]*=g,this}getMaxScaleOnAxis(){const t=this.elements,i=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],l=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],d=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(i,l,d))}makeTranslation(t,i,l){return this.set(1,0,0,t,0,1,0,i,0,0,1,l,0,0,0,1),this}makeRotationX(t){const i=Math.cos(t),l=Math.sin(t);return this.set(1,0,0,0,0,i,-l,0,0,l,i,0,0,0,0,1),this}makeRotationY(t){const i=Math.cos(t),l=Math.sin(t);return this.set(i,0,l,0,0,1,0,0,-l,0,i,0,0,0,0,1),this}makeRotationZ(t){const i=Math.cos(t),l=Math.sin(t);return this.set(i,-l,0,0,l,i,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,i){const l=Math.cos(i),d=Math.sin(i),g=1-l,x=t.x,_=t.y,P=t.z,D=g*x,B=g*_;return this.set(D*x+l,D*_-d*P,D*P+d*_,0,D*_+d*P,B*_+l,B*P-d*x,0,D*P-d*_,B*P+d*x,g*P*P+l,0,0,0,0,1),this}makeScale(t,i,l){return this.set(t,0,0,0,0,i,0,0,0,0,l,0,0,0,0,1),this}makeShear(t,i,l,d,g,x){return this.set(1,l,g,0,t,1,x,0,i,d,1,0,0,0,0,1),this}compose(t,i,l){const d=this.elements,g=i._x,x=i._y,_=i._z,P=i._w,D=g+g,B=x+x,F=_+_,V=g*D,X=g*B,ie=g*F,K=x*B,O=x*F,q=_*F,_e=P*D,z=P*B,le=P*F,Ee=l.x,je=l.y,te=l.z;return d[0]=(1-(K+q))*Ee,d[1]=(X+le)*Ee,d[2]=(ie-z)*Ee,d[3]=0,d[4]=(X-le)*je,d[5]=(1-(V+q))*je,d[6]=(O+_e)*je,d[7]=0,d[8]=(ie+z)*te,d[9]=(O-_e)*te,d[10]=(1-(V+K))*te,d[11]=0,d[12]=t.x,d[13]=t.y,d[14]=t.z,d[15]=1,this}decompose(t,i,l){const d=this.elements;let g=e0.set(d[0],d[1],d[2]).length();const x=e0.set(d[4],d[5],d[6]).length(),_=e0.set(d[8],d[9],d[10]).length();this.determinant()<0&&(g=-g),t.x=d[12],t.y=d[13],t.z=d[14],Bs.copy(this);const D=1/g,B=1/x,F=1/_;return Bs.elements[0]*=D,Bs.elements[1]*=D,Bs.elements[2]*=D,Bs.elements[4]*=B,Bs.elements[5]*=B,Bs.elements[6]*=B,Bs.elements[8]*=F,Bs.elements[9]*=F,Bs.elements[10]*=F,i.setFromRotationMatrix(Bs),l.x=g,l.y=x,l.z=_,this}makePerspective(t,i,l,d,g,x){x===void 0&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const _=this.elements,P=2*g/(i-t),D=2*g/(l-d),B=(i+t)/(i-t),F=(l+d)/(l-d),V=-(x+g)/(x-g),X=-2*x*g/(x-g);return _[0]=P,_[4]=0,_[8]=B,_[12]=0,_[1]=0,_[5]=D,_[9]=F,_[13]=0,_[2]=0,_[6]=0,_[10]=V,_[14]=X,_[3]=0,_[7]=0,_[11]=-1,_[15]=0,this}makeOrthographic(t,i,l,d,g,x){const _=this.elements,P=1/(i-t),D=1/(l-d),B=1/(x-g),F=(i+t)*P,V=(l+d)*D,X=(x+g)*B;return _[0]=2*P,_[4]=0,_[8]=0,_[12]=-F,_[1]=0,_[5]=2*D,_[9]=0,_[13]=-V,_[2]=0,_[6]=0,_[10]=-2*B,_[14]=-X,_[3]=0,_[7]=0,_[11]=0,_[15]=1,this}equals(t){const i=this.elements,l=t.elements;for(let d=0;d<16;d++)if(i[d]!==l[d])return!1;return!0}fromArray(t,i=0){for(let l=0;l<16;l++)this.elements[l]=t[l+i];return this}toArray(t=[],i=0){const l=this.elements;return t[i]=l[0],t[i+1]=l[1],t[i+2]=l[2],t[i+3]=l[3],t[i+4]=l[4],t[i+5]=l[5],t[i+6]=l[6],t[i+7]=l[7],t[i+8]=l[8],t[i+9]=l[9],t[i+10]=l[10],t[i+11]=l[11],t[i+12]=l[12],t[i+13]=l[13],t[i+14]=l[14],t[i+15]=l[15],t}}const e0=new Ve,Bs=new lr,vme=new Ve(0,0,0),yme=new Ve(1,1,1),Ld=new Ve,MM=new Ve,ma=new Ve,Fte=new lr,Bte=new $u;class p1{constructor(t=0,i=0,l=0,d=p1.DefaultOrder){this.isEuler=!0,this._x=t,this._y=i,this._z=l,this._order=d}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,i,l,d=this._order){return this._x=t,this._y=i,this._z=l,this._order=d,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,i=this._order,l=!0){const d=t.elements,g=d[0],x=d[4],_=d[8],P=d[1],D=d[5],B=d[9],F=d[2],V=d[6],X=d[10];switch(i){case"XYZ":this._y=Math.asin(Do(_,-1,1)),Math.abs(_)<.9999999?(this._x=Math.atan2(-B,X),this._z=Math.atan2(-x,g)):(this._x=Math.atan2(V,D),this._z=0);break;case"YXZ":this._x=Math.asin(-Do(B,-1,1)),Math.abs(B)<.9999999?(this._y=Math.atan2(_,X),this._z=Math.atan2(P,D)):(this._y=Math.atan2(-F,g),this._z=0);break;case"ZXY":this._x=Math.asin(Do(V,-1,1)),Math.abs(V)<.9999999?(this._y=Math.atan2(-F,X),this._z=Math.atan2(-x,D)):(this._y=0,this._z=Math.atan2(P,g));break;case"ZYX":this._y=Math.asin(-Do(F,-1,1)),Math.abs(F)<.9999999?(this._x=Math.atan2(V,X),this._z=Math.atan2(P,g)):(this._x=0,this._z=Math.atan2(-x,D));break;case"YZX":this._z=Math.asin(Do(P,-1,1)),Math.abs(P)<.9999999?(this._x=Math.atan2(-B,D),this._y=Math.atan2(-F,g)):(this._x=0,this._y=Math.atan2(_,X));break;case"XZY":this._z=Math.asin(-Do(x,-1,1)),Math.abs(x)<.9999999?(this._x=Math.atan2(V,D),this._y=Math.atan2(_,g)):(this._x=Math.atan2(-B,X),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+i)}return this._order=i,l===!0&&this._onChangeCallback(),this}setFromQuaternion(t,i,l){return Fte.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Fte,i,l)}setFromVector3(t,i=this._order){return this.set(t.x,t.y,t.z,i)}reorder(t){return Bte.setFromEuler(this),this.setFromQuaternion(Bte,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],t[3]!==void 0&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],i=0){return t[i]=this._x,t[i+1]=this._y,t[i+2]=this._z,t[i+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}toVector3(){console.error("THREE.Euler: .toVector3() has been removed. Use Vector3.setFromEuler() instead")}}p1.DefaultOrder="XYZ";p1.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];class Jne{constructor(){this.mask=1}set(t){this.mask=(1<<t|0)>>>0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return(this.mask&t.mask)!==0}isEnabled(t){return(this.mask&(1<<t|0))!==0}}let bme=0;const jte=new Ve,t0=new $u,Bu=new lr,PM=new Ve,J_=new Ve,_me=new Ve,xme=new $u,Ute=new Ve(1,0,0),Vte=new Ve(0,1,0),Hte=new Ve(0,0,1),wme={type:"added"},Gte={type:"removed"};class gi extends S0{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:bme++}),this.uuid=Hs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=gi.DefaultUp.clone();const t=new Ve,i=new p1,l=new $u,d=new Ve(1,1,1);function g(){l.setFromEuler(i,!1)}function x(){i.setFromQuaternion(l,void 0,!1)}i._onChange(g),l._onChange(x),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:l},scale:{configurable:!0,enumerable:!0,value:d},modelViewMatrix:{value:new lr},normalMatrix:{value:new Za}}),this.matrix=new lr,this.matrixWorld=new lr,this.matrixAutoUpdate=gi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Jne,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,i){this.quaternion.setFromAxisAngle(t,i)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,i){return t0.setFromAxisAngle(t,i),this.quaternion.multiply(t0),this}rotateOnWorldAxis(t,i){return t0.setFromAxisAngle(t,i),this.quaternion.premultiply(t0),this}rotateX(t){return this.rotateOnAxis(Ute,t)}rotateY(t){return this.rotateOnAxis(Vte,t)}rotateZ(t){return this.rotateOnAxis(Hte,t)}translateOnAxis(t,i){return jte.copy(t).applyQuaternion(this.quaternion),this.position.add(jte.multiplyScalar(i)),this}translateX(t){return this.translateOnAxis(Ute,t)}translateY(t){return this.translateOnAxis(Vte,t)}translateZ(t){return this.translateOnAxis(Hte,t)}localToWorld(t){return t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return t.applyMatrix4(Bu.copy(this.matrixWorld).invert())}lookAt(t,i,l){t.isVector3?PM.copy(t):PM.set(t,i,l);const d=this.parent;this.updateWorldMatrix(!0,!1),J_.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Bu.lookAt(J_,PM,this.up):Bu.lookAt(PM,J_,this.up),this.quaternion.setFromRotationMatrix(Bu),d&&(Bu.extractRotation(d.matrixWorld),t0.setFromRotationMatrix(Bu),this.quaternion.premultiply(t0.invert()))}add(t){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.add(arguments[i]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.parent!==null&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(wme)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let l=0;l<arguments.length;l++)this.remove(arguments[l]);return this}const i=this.children.indexOf(t);return i!==-1&&(t.parent=null,this.children.splice(i,1),t.dispatchEvent(Gte)),this}removeFromParent(){const t=this.parent;return t!==null&&t.remove(this),this}clear(){for(let t=0;t<this.children.length;t++){const i=this.children[t];i.parent=null,i.dispatchEvent(Gte)}return this.children.length=0,this}attach(t){return this.updateWorldMatrix(!0,!1),Bu.copy(this.matrixWorld).invert(),t.parent!==null&&(t.parent.updateWorldMatrix(!0,!1),Bu.multiply(t.parent.matrixWorld)),t.applyMatrix4(Bu),this.add(t),t.updateWorldMatrix(!1,!0),this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,i){if(this[t]===i)return this;for(let l=0,d=this.children.length;l<d;l++){const x=this.children[l].getObjectByProperty(t,i);if(x!==void 0)return x}}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(J_,t,_me),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(J_,xme,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(i[8],i[9],i[10]).normalize()}raycast(){}traverse(t){t(this);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].traverse(t)}traverseVisible(t){if(this.visible===!1)return;t(this);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].traverseVisible(t)}traverseAncestors(t){const i=this.parent;i!==null&&(t(i),i.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const i=this.children;for(let l=0,d=i.length;l<d;l++)i[l].updateMatrixWorld(t)}updateWorldMatrix(t,i){const l=this.parent;if(t===!0&&l!==null&&l.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),i===!0){const d=this.children;for(let g=0,x=d.length;g<x;g++)d[g].updateWorldMatrix(!1,!0)}}toJSON(t){const i=t===void 0||typeof t=="string",l={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},l.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const d={};d.uuid=this.uuid,d.type=this.type,this.name!==""&&(d.name=this.name),this.castShadow===!0&&(d.castShadow=!0),this.receiveShadow===!0&&(d.receiveShadow=!0),this.visible===!1&&(d.visible=!1),this.frustumCulled===!1&&(d.frustumCulled=!1),this.renderOrder!==0&&(d.renderOrder=this.renderOrder),JSON.stringify(this.userData)!=="{}"&&(d.userData=this.userData),d.layers=this.layers.mask,d.matrix=this.matrix.toArray(),this.matrixAutoUpdate===!1&&(d.matrixAutoUpdate=!1),this.isInstancedMesh&&(d.type="InstancedMesh",d.count=this.count,d.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(d.instanceColor=this.instanceColor.toJSON()));function g(_,P){return _[P.uuid]===void 0&&(_[P.uuid]=P.toJSON(t)),P.uuid}if(this.isScene)this.background&&(this.background.isColor?d.background=this.background.toJSON():this.background.isTexture&&(d.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&(d.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){d.geometry=g(t.geometries,this.geometry);const _=this.geometry.parameters;if(_!==void 0&&_.shapes!==void 0){const P=_.shapes;if(Array.isArray(P))for(let D=0,B=P.length;D<B;D++){const F=P[D];g(t.shapes,F)}else g(t.shapes,P)}}if(this.isSkinnedMesh&&(d.bindMode=this.bindMode,d.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(g(t.skeletons,this.skeleton),d.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const _=[];for(let P=0,D=this.material.length;P<D;P++)_.push(g(t.materials,this.material[P]));d.material=_}else d.material=g(t.materials,this.material);if(this.children.length>0){d.children=[];for(let _=0;_<this.children.length;_++)d.children.push(this.children[_].toJSON(t).object)}if(this.animations.length>0){d.animations=[];for(let _=0;_<this.animations.length;_++){const P=this.animations[_];d.animations.push(g(t.animations,P))}}if(i){const _=x(t.geometries),P=x(t.materials),D=x(t.textures),B=x(t.images),F=x(t.shapes),V=x(t.skeletons),X=x(t.animations),ie=x(t.nodes);_.length>0&&(l.geometries=_),P.length>0&&(l.materials=P),D.length>0&&(l.textures=D),B.length>0&&(l.images=B),F.length>0&&(l.shapes=F),V.length>0&&(l.skeletons=V),X.length>0&&(l.animations=X),ie.length>0&&(l.nodes=ie)}return l.object=d,l;function x(_){const P=[];for(const D in _){const B=_[D];delete B.metadata,P.push(B)}return P}}clone(t){return new this.constructor().copy(this,t)}copy(t,i=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),i===!0)for(let l=0;l<t.children.length;l++){const d=t.children[l];this.add(d.clone())}return this}}gi.DefaultUp=new Ve(0,1,0);gi.DefaultMatrixAutoUpdate=!0;const js=new Ve,ju=new Ve,H4=new Ve,Uu=new Ve,n0=new Ve,r0=new Ve,Wte=new Ve,G4=new Ve,W4=new Ve,q4=new Ve;class Wu{constructor(t=new Ve,i=new Ve,l=new Ve){this.a=t,this.b=i,this.c=l}static getNormal(t,i,l,d){d.subVectors(l,i),js.subVectors(t,i),d.cross(js);const g=d.lengthSq();return g>0?d.multiplyScalar(1/Math.sqrt(g)):d.set(0,0,0)}static getBarycoord(t,i,l,d,g){js.subVectors(d,i),ju.subVectors(l,i),H4.subVectors(t,i);const x=js.dot(js),_=js.dot(ju),P=js.dot(H4),D=ju.dot(ju),B=ju.dot(H4),F=x*D-_*_;if(F===0)return g.set(-2,-1,-1);const V=1/F,X=(D*P-_*B)*V,ie=(x*B-_*P)*V;return g.set(1-X-ie,ie,X)}static containsPoint(t,i,l,d){return this.getBarycoord(t,i,l,d,Uu),Uu.x>=0&&Uu.y>=0&&Uu.x+Uu.y<=1}static getUV(t,i,l,d,g,x,_,P){return this.getBarycoord(t,i,l,d,Uu),P.set(0,0),P.addScaledVector(g,Uu.x),P.addScaledVector(x,Uu.y),P.addScaledVector(_,Uu.z),P}static isFrontFacing(t,i,l,d){return js.subVectors(l,i),ju.subVectors(t,i),js.cross(ju).dot(d)<0}set(t,i,l){return this.a.copy(t),this.b.copy(i),this.c.copy(l),this}setFromPointsAndIndices(t,i,l,d){return this.a.copy(t[i]),this.b.copy(t[l]),this.c.copy(t[d]),this}setFromAttributeAndIndices(t,i,l,d){return this.a.fromBufferAttribute(t,i),this.b.fromBufferAttribute(t,l),this.c.fromBufferAttribute(t,d),this}clone(){return new this.constructor().copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return js.subVectors(this.c,this.b),ju.subVectors(this.a,this.b),js.cross(ju).length()*.5}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Wu.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,i){return Wu.getBarycoord(t,this.a,this.b,this.c,i)}getUV(t,i,l,d,g){return Wu.getUV(t,this.a,this.b,this.c,i,l,d,g)}containsPoint(t){return Wu.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Wu.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,i){const l=this.a,d=this.b,g=this.c;let x,_;n0.subVectors(d,l),r0.subVectors(g,l),G4.subVectors(t,l);const P=n0.dot(G4),D=r0.dot(G4);if(P<=0&&D<=0)return i.copy(l);W4.subVectors(t,d);const B=n0.dot(W4),F=r0.dot(W4);if(B>=0&&F<=B)return i.copy(d);const V=P*F-B*D;if(V<=0&&P>=0&&B<=0)return x=P/(P-B),i.copy(l).addScaledVector(n0,x);q4.subVectors(t,g);const X=n0.dot(q4),ie=r0.dot(q4);if(ie>=0&&X<=ie)return i.copy(g);const K=X*D-P*ie;if(K<=0&&D>=0&&ie<=0)return _=D/(D-ie),i.copy(l).addScaledVector(r0,_);const O=B*ie-X*F;if(O<=0&&F-B>=0&&X-ie>=0)return Wte.subVectors(g,d),_=(F-B)/(F-B+(X-ie)),i.copy(d).addScaledVector(Wte,_);const q=1/(O+K+V);return x=K*q,_=V*q,i.copy(l).addScaledVector(n0,x).addScaledVector(r0,_)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}let Sme=0;class Ll extends S0{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Sme++}),this.uuid=Hs(),this.name="",this.type="Material",this.blending=f0,this.side=p0,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=Bne,this.blendDst=jne,this.blendEquation=c0,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=lL,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=Ype,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=D4,this.stencilZFail=D4,this.stencilZPass=D4,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(t!==void 0)for(const i in t){const l=t[i];if(l===void 0){console.warn("THREE.Material: '"+i+"' parameter is undefined.");continue}if(i==="shading"){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=l===rpe;continue}const d=this[i];if(d===void 0){console.warn("THREE."+this.type+": '"+i+"' is not a property of this material.");continue}d&&d.isColor?d.set(l):d&&d.isVector3&&l&&l.isVector3?d.copy(l):this[i]=l}}toJSON(t){const i=t===void 0||typeof t=="string";i&&(t={textures:{},images:{}});const l={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};l.uuid=this.uuid,l.type=this.type,this.name!==""&&(l.name=this.name),this.color&&this.color.isColor&&(l.color=this.color.getHex()),this.roughness!==void 0&&(l.roughness=this.roughness),this.metalness!==void 0&&(l.metalness=this.metalness),this.sheen!==void 0&&(l.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(l.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(l.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(l.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(l.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(l.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(l.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(l.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(l.shininess=this.shininess),this.clearcoat!==void 0&&(l.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(l.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(l.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(l.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(l.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,l.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(l.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(l.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(l.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(l.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(l.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(l.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(l.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(l.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(l.lightMap=this.lightMap.toJSON(t).uuid,l.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(l.aoMap=this.aoMap.toJSON(t).uuid,l.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(l.bumpMap=this.bumpMap.toJSON(t).uuid,l.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(l.normalMap=this.normalMap.toJSON(t).uuid,l.normalMapType=this.normalMapType,l.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(l.displacementMap=this.displacementMap.toJSON(t).uuid,l.displacementScale=this.displacementScale,l.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(l.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(l.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(l.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(l.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(l.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(l.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(l.envMap=this.envMap.toJSON(t).uuid,this.combine!==void 0&&(l.combine=this.combine)),this.envMapIntensity!==void 0&&(l.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(l.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(l.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(l.gradientMap=this.gradientMap.toJSON(t).uuid),this.transmission!==void 0&&(l.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(l.transmissionMap=this.transmissionMap.toJSON(t).uuid),this.thickness!==void 0&&(l.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(l.thicknessMap=this.thicknessMap.toJSON(t).uuid),this.attenuationDistance!==void 0&&(l.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(l.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(l.size=this.size),this.shadowSide!==null&&(l.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(l.sizeAttenuation=this.sizeAttenuation),this.blending!==f0&&(l.blending=this.blending),this.side!==p0&&(l.side=this.side),this.vertexColors&&(l.vertexColors=!0),this.opacity<1&&(l.opacity=this.opacity),this.transparent===!0&&(l.transparent=this.transparent),l.depthFunc=this.depthFunc,l.depthTest=this.depthTest,l.depthWrite=this.depthWrite,l.colorWrite=this.colorWrite,l.stencilWrite=this.stencilWrite,l.stencilWriteMask=this.stencilWriteMask,l.stencilFunc=this.stencilFunc,l.stencilRef=this.stencilRef,l.stencilFuncMask=this.stencilFuncMask,l.stencilFail=this.stencilFail,l.stencilZFail=this.stencilZFail,l.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(l.rotation=this.rotation),this.polygonOffset===!0&&(l.polygonOffset=!0),this.polygonOffsetFactor!==0&&(l.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(l.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(l.linewidth=this.linewidth),this.dashSize!==void 0&&(l.dashSize=this.dashSize),this.gapSize!==void 0&&(l.gapSize=this.gapSize),this.scale!==void 0&&(l.scale=this.scale),this.dithering===!0&&(l.dithering=!0),this.alphaTest>0&&(l.alphaTest=this.alphaTest),this.alphaToCoverage===!0&&(l.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(l.premultipliedAlpha=this.premultipliedAlpha),this.wireframe===!0&&(l.wireframe=this.wireframe),this.wireframeLinewidth>1&&(l.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(l.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(l.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(l.flatShading=this.flatShading),this.visible===!1&&(l.visible=!1),this.toneMapped===!1&&(l.toneMapped=!1),this.fog===!1&&(l.fog=!1),JSON.stringify(this.userData)!=="{}"&&(l.userData=this.userData);function d(g){const x=[];for(const _ in g){const P=g[_];delete P.metadata,x.push(P)}return x}if(i){const g=d(t.textures),x=d(t.images);g.length>0&&(l.textures=g),x.length>0&&(l.images=x)}return l}clone(){return new this.constructor().copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const i=t.clippingPlanes;let l=null;if(i!==null){const d=i.length;l=new Array(d);for(let g=0;g!==d;++g)l[g]=i[g].clone()}return this.clippingPlanes=l,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){t===!0&&this.version++}}class Bh extends Ll{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new zn(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Une,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const mi=new Ve,CM=new er;class va{constructor(t,i,l){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=i,this.count=t!==void 0?t.length/i:0,this.normalized=l===!0,this.usage=hL,this.updateRange={offset:0,count:-1},this.version=0}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this}copyAt(t,i,l){t*=this.itemSize,l*=i.itemSize;for(let d=0,g=this.itemSize;d<g;d++)this.array[t+d]=i.array[l+d];return this}copyArray(t){return this.array.set(t),this}copyColorsArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let x=t[d];x===void 0&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",d),x=new zn),i[l++]=x.r,i[l++]=x.g,i[l++]=x.b}return this}copyVector2sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let x=t[d];x===void 0&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",d),x=new er),i[l++]=x.x,i[l++]=x.y}return this}copyVector3sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let x=t[d];x===void 0&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",d),x=new Ve),i[l++]=x.x,i[l++]=x.y,i[l++]=x.z}return this}copyVector4sArray(t){const i=this.array;let l=0;for(let d=0,g=t.length;d<g;d++){let x=t[d];x===void 0&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",d),x=new xr),i[l++]=x.x,i[l++]=x.y,i[l++]=x.z,i[l++]=x.w}return this}applyMatrix3(t){if(this.itemSize===2)for(let i=0,l=this.count;i<l;i++)CM.fromBufferAttribute(this,i),CM.applyMatrix3(t),this.setXY(i,CM.x,CM.y);else if(this.itemSize===3)for(let i=0,l=this.count;i<l;i++)mi.fromBufferAttribute(this,i),mi.applyMatrix3(t),this.setXYZ(i,mi.x,mi.y,mi.z);return this}applyMatrix4(t){for(let i=0,l=this.count;i<l;i++)mi.fromBufferAttribute(this,i),mi.applyMatrix4(t),this.setXYZ(i,mi.x,mi.y,mi.z);return this}applyNormalMatrix(t){for(let i=0,l=this.count;i<l;i++)mi.fromBufferAttribute(this,i),mi.applyNormalMatrix(t),this.setXYZ(i,mi.x,mi.y,mi.z);return this}transformDirection(t){for(let i=0,l=this.count;i<l;i++)mi.fromBufferAttribute(this,i),mi.transformDirection(t),this.setXYZ(i,mi.x,mi.y,mi.z);return this}set(t,i=0){return this.array.set(t,i),this}getX(t){return this.array[t*this.itemSize]}setX(t,i){return this.array[t*this.itemSize]=i,this}getY(t){return this.array[t*this.itemSize+1]}setY(t,i){return this.array[t*this.itemSize+1]=i,this}getZ(t){return this.array[t*this.itemSize+2]}setZ(t,i){return this.array[t*this.itemSize+2]=i,this}getW(t){return this.array[t*this.itemSize+3]}setW(t,i){return this.array[t*this.itemSize+3]=i,this}setXY(t,i,l){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this}setXYZ(t,i,l,d){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this.array[t+2]=d,this}setXYZW(t,i,l,d,g){return t*=this.itemSize,this.array[t+0]=i,this.array[t+1]=l,this.array[t+2]=d,this.array[t+3]=g,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(t.name=this.name),this.usage!==hL&&(t.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(t.updateRange=this.updateRange),t}}class Qne extends va{constructor(t,i,l){super(new Uint16Array(t),i,l)}}class ere extends va{constructor(t,i,l){super(new Uint32Array(t),i,l)}}class Ku extends va{constructor(t,i,l){super(new Float32Array(t),i,l)}}let Eme=0;const Ka=new lr,K4=new gi,i0=new Ve,ga=new E0,Q_=new E0,Li=new Ve;class zl extends S0{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Eme++}),this.uuid=Hs(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(Kne(t)?ere:Qne)(t,1):this.index=t,this}getAttribute(t){return this.attributes[t]}setAttribute(t,i){return this.attributes[t]=i,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return this.attributes[t]!==void 0}addGroup(t,i,l=0){this.groups.push({start:t,count:i,materialIndex:l})}clearGroups(){this.groups=[]}setDrawRange(t,i){this.drawRange.start=t,this.drawRange.count=i}applyMatrix4(t){const i=this.attributes.position;i!==void 0&&(i.applyMatrix4(t),i.needsUpdate=!0);const l=this.attributes.normal;if(l!==void 0){const g=new Za().getNormalMatrix(t);l.applyNormalMatrix(g),l.needsUpdate=!0}const d=this.attributes.tangent;return d!==void 0&&(d.transformDirection(t),d.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(t){return Ka.makeRotationFromQuaternion(t),this.applyMatrix4(Ka),this}rotateX(t){return Ka.makeRotationX(t),this.applyMatrix4(Ka),this}rotateY(t){return Ka.makeRotationY(t),this.applyMatrix4(Ka),this}rotateZ(t){return Ka.makeRotationZ(t),this.applyMatrix4(Ka),this}translate(t,i,l){return Ka.makeTranslation(t,i,l),this.applyMatrix4(Ka),this}scale(t,i,l){return Ka.makeScale(t,i,l),this.applyMatrix4(Ka),this}lookAt(t){return K4.lookAt(t),K4.updateMatrix(),this.applyMatrix4(K4.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(i0).negate(),this.translate(i0.x,i0.y,i0.z),this}setFromPoints(t){const i=[];for(let l=0,d=t.length;l<d;l++){const g=t[l];i.push(g.x,g.y,g.z||0)}return this.setAttribute("position",new Ku(i,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new E0);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Ve(-1/0,-1/0,-1/0),new Ve(1/0,1/0,1/0));return}if(t!==void 0){if(this.boundingBox.setFromBufferAttribute(t),i)for(let l=0,d=i.length;l<d;l++){const g=i[l];ga.setFromBufferAttribute(g),this.morphTargetsRelative?(Li.addVectors(this.boundingBox.min,ga.min),this.boundingBox.expandByPoint(Li),Li.addVectors(this.boundingBox.max,ga.max),this.boundingBox.expandByPoint(Li)):(this.boundingBox.expandByPoint(ga.min),this.boundingBox.expandByPoint(ga.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new k0);const t=this.attributes.position,i=this.morphAttributes.position;if(t&&t.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Ve,1/0);return}if(t){const l=this.boundingSphere.center;if(ga.setFromBufferAttribute(t),i)for(let g=0,x=i.length;g<x;g++){const _=i[g];Q_.setFromBufferAttribute(_),this.morphTargetsRelative?(Li.addVectors(ga.min,Q_.min),ga.expandByPoint(Li),Li.addVectors(ga.max,Q_.max),ga.expandByPoint(Li)):(ga.expandByPoint(Q_.min),ga.expandByPoint(Q_.max))}ga.getCenter(l);let d=0;for(let g=0,x=t.count;g<x;g++)Li.fromBufferAttribute(t,g),d=Math.max(d,l.distanceToSquared(Li));if(i)for(let g=0,x=i.length;g<x;g++){const _=i[g],P=this.morphTargetsRelative;for(let D=0,B=_.count;D<B;D++)Li.fromBufferAttribute(_,D),P&&(i0.fromBufferAttribute(t,D),Li.add(i0)),d=Math.max(d,l.distanceToSquared(Li))}this.boundingSphere.radius=Math.sqrt(d),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,i=this.attributes;if(t===null||i.position===void 0||i.normal===void 0||i.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const l=t.array,d=i.position.array,g=i.normal.array,x=i.uv.array,_=d.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new va(new Float32Array(4*_),4));const P=this.getAttribute("tangent").array,D=[],B=[];for(let Q=0;Q<_;Q++)D[Q]=new Ve,B[Q]=new Ve;const F=new Ve,V=new Ve,X=new Ve,ie=new er,K=new er,O=new er,q=new Ve,_e=new Ve;function z(Q,Je,Ut){F.fromArray(d,Q*3),V.fromArray(d,Je*3),X.fromArray(d,Ut*3),ie.fromArray(x,Q*2),K.fromArray(x,Je*2),O.fromArray(x,Ut*2),V.sub(F),X.sub(F),K.sub(ie),O.sub(ie);const Dt=1/(K.x*O.y-O.x*K.y);!isFinite(Dt)||(q.copy(V).multiplyScalar(O.y).addScaledVector(X,-K.y).multiplyScalar(Dt),_e.copy(X).multiplyScalar(K.x).addScaledVector(V,-O.x).multiplyScalar(Dt),D[Q].add(q),D[Je].add(q),D[Ut].add(q),B[Q].add(_e),B[Je].add(_e),B[Ut].add(_e))}let le=this.groups;le.length===0&&(le=[{start:0,count:l.length}]);for(let Q=0,Je=le.length;Q<Je;++Q){const Ut=le[Q],Dt=Ut.start,et=Ut.count;for(let be=Dt,tt=Dt+et;be<tt;be+=3)z(l[be+0],l[be+1],l[be+2])}const Ee=new Ve,je=new Ve,te=new Ve,me=new Ve;function Pe(Q){te.fromArray(g,Q*3),me.copy(te);const Je=D[Q];Ee.copy(Je),Ee.sub(te.multiplyScalar(te.dot(Je))).normalize(),je.crossVectors(me,Je);const Dt=je.dot(B[Q])<0?-1:1;P[Q*4]=Ee.x,P[Q*4+1]=Ee.y,P[Q*4+2]=Ee.z,P[Q*4+3]=Dt}for(let Q=0,Je=le.length;Q<Je;++Q){const Ut=le[Q],Dt=Ut.start,et=Ut.count;for(let be=Dt,tt=Dt+et;be<tt;be+=3)Pe(l[be+0]),Pe(l[be+1]),Pe(l[be+2])}}computeVertexNormals(){const t=this.index,i=this.getAttribute("position");if(i!==void 0){let l=this.getAttribute("normal");if(l===void 0)l=new va(new Float32Array(i.count*3),3),this.setAttribute("normal",l);else for(let V=0,X=l.count;V<X;V++)l.setXYZ(V,0,0,0);const d=new Ve,g=new Ve,x=new Ve,_=new Ve,P=new Ve,D=new Ve,B=new Ve,F=new Ve;if(t)for(let V=0,X=t.count;V<X;V+=3){const ie=t.getX(V+0),K=t.getX(V+1),O=t.getX(V+2);d.fromBufferAttribute(i,ie),g.fromBufferAttribute(i,K),x.fromBufferAttribute(i,O),B.subVectors(x,g),F.subVectors(d,g),B.cross(F),_.fromBufferAttribute(l,ie),P.fromBufferAttribute(l,K),D.fromBufferAttribute(l,O),_.add(B),P.add(B),D.add(B),l.setXYZ(ie,_.x,_.y,_.z),l.setXYZ(K,P.x,P.y,P.z),l.setXYZ(O,D.x,D.y,D.z)}else for(let V=0,X=i.count;V<X;V+=3)d.fromBufferAttribute(i,V+0),g.fromBufferAttribute(i,V+1),x.fromBufferAttribute(i,V+2),B.subVectors(x,g),F.subVectors(d,g),B.cross(F),l.setXYZ(V+0,B.x,B.y,B.z),l.setXYZ(V+1,B.x,B.y,B.z),l.setXYZ(V+2,B.x,B.y,B.z);this.normalizeNormals(),l.needsUpdate=!0}}merge(t,i){if(!(t&&t.isBufferGeometry)){console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);return}i===void 0&&(i=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const l=this.attributes;for(const d in l){if(t.attributes[d]===void 0)continue;const x=l[d].array,_=t.attributes[d],P=_.array,D=_.itemSize*i,B=Math.min(P.length,x.length-D);for(let F=0,V=D;F<B;F++,V++)x[V]=P[F]}return this}normalizeNormals(){const t=this.attributes.normal;for(let i=0,l=t.count;i<l;i++)Li.fromBufferAttribute(t,i),Li.normalize(),t.setXYZ(i,Li.x,Li.y,Li.z)}toNonIndexed(){function t(_,P){const D=_.array,B=_.itemSize,F=_.normalized,V=new D.constructor(P.length*B);let X=0,ie=0;for(let K=0,O=P.length;K<O;K++){_.isInterleavedBufferAttribute?X=P[K]*_.data.stride+_.offset:X=P[K]*B;for(let q=0;q<B;q++)V[ie++]=D[X++]}return new va(V,B,F)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const i=new zl,l=this.index.array,d=this.attributes;for(const _ in d){const P=d[_],D=t(P,l);i.setAttribute(_,D)}const g=this.morphAttributes;for(const _ in g){const P=[],D=g[_];for(let B=0,F=D.length;B<F;B++){const V=D[B],X=t(V,l);P.push(X)}i.morphAttributes[_]=P}i.morphTargetsRelative=this.morphTargetsRelative;const x=this.groups;for(let _=0,P=x.length;_<P;_++){const D=x[_];i.addGroup(D.start,D.count,D.materialIndex)}return i}toJSON(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,this.name!==""&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),this.parameters!==void 0){const P=this.parameters;for(const D in P)P[D]!==void 0&&(t[D]=P[D]);return t}t.data={attributes:{}};const i=this.index;i!==null&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});const l=this.attributes;for(const P in l){const D=l[P];t.data.attributes[P]=D.toJSON(t.data)}const d={};let g=!1;for(const P in this.morphAttributes){const D=this.morphAttributes[P],B=[];for(let F=0,V=D.length;F<V;F++){const X=D[F];B.push(X.toJSON(t.data))}B.length>0&&(d[P]=B,g=!0)}g&&(t.data.morphAttributes=d,t.data.morphTargetsRelative=this.morphTargetsRelative);const x=this.groups;x.length>0&&(t.data.groups=JSON.parse(JSON.stringify(x)));const _=this.boundingSphere;return _!==null&&(t.data.boundingSphere={center:_.center.toArray(),radius:_.radius}),t}clone(){return new this.constructor().copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const i={};this.name=t.name;const l=t.index;l!==null&&this.setIndex(l.clone(i));const d=t.attributes;for(const D in d){const B=d[D];this.setAttribute(D,B.clone(i))}const g=t.morphAttributes;for(const D in g){const B=[],F=g[D];for(let V=0,X=F.length;V<X;V++)B.push(F[V].clone(i));this.morphAttributes[D]=B}this.morphTargetsRelative=t.morphTargetsRelative;const x=t.groups;for(let D=0,B=x.length;D<B;D++){const F=x[D];this.addGroup(F.start,F.count,F.materialIndex)}const _=t.boundingBox;_!==null&&(this.boundingBox=_.clone());const P=t.boundingSphere;return P!==null&&(this.boundingSphere=P.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,t.parameters!==void 0&&(this.parameters=Object.assign({},t.parameters)),this}dispose(){this.dispatchEvent({type:"dispose"})}}const qte=new lr,o0=new PL,X4=new k0,zd=new Ve,Nd=new Ve,Fd=new Ve,$4=new Ve,Z4=new Ve,Y4=new Ve,AM=new Ve,IM=new Ve,DM=new Ve,OM=new er,RM=new er,LM=new er,J4=new Ve,zM=new Ve;class Rl extends gi{constructor(t=new zl,i=new Bh){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),t.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),t.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,x=d.length;g<x;g++){const _=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=g}}}}raycast(t,i){const l=this.geometry,d=this.material,g=this.matrixWorld;if(d===void 0||(l.boundingSphere===null&&l.computeBoundingSphere(),X4.copy(l.boundingSphere),X4.applyMatrix4(g),t.ray.intersectsSphere(X4)===!1)||(qte.copy(g).invert(),o0.copy(t.ray).applyMatrix4(qte),l.boundingBox!==null&&o0.intersectsBox(l.boundingBox)===!1))return;let x;const _=l.index,P=l.attributes.position,D=l.morphAttributes.position,B=l.morphTargetsRelative,F=l.attributes.uv,V=l.attributes.uv2,X=l.groups,ie=l.drawRange;if(_!==null)if(Array.isArray(d))for(let K=0,O=X.length;K<O;K++){const q=X[K],_e=d[q.materialIndex],z=Math.max(q.start,ie.start),le=Math.min(_.count,Math.min(q.start+q.count,ie.start+ie.count));for(let Ee=z,je=le;Ee<je;Ee+=3){const te=_.getX(Ee),me=_.getX(Ee+1),Pe=_.getX(Ee+2);x=NM(this,_e,t,o0,P,D,B,F,V,te,me,Pe),x&&(x.faceIndex=Math.floor(Ee/3),x.face.materialIndex=q.materialIndex,i.push(x))}}else{const K=Math.max(0,ie.start),O=Math.min(_.count,ie.start+ie.count);for(let q=K,_e=O;q<_e;q+=3){const z=_.getX(q),le=_.getX(q+1),Ee=_.getX(q+2);x=NM(this,d,t,o0,P,D,B,F,V,z,le,Ee),x&&(x.faceIndex=Math.floor(q/3),i.push(x))}}else if(P!==void 0)if(Array.isArray(d))for(let K=0,O=X.length;K<O;K++){const q=X[K],_e=d[q.materialIndex],z=Math.max(q.start,ie.start),le=Math.min(P.count,Math.min(q.start+q.count,ie.start+ie.count));for(let Ee=z,je=le;Ee<je;Ee+=3){const te=Ee,me=Ee+1,Pe=Ee+2;x=NM(this,_e,t,o0,P,D,B,F,V,te,me,Pe),x&&(x.faceIndex=Math.floor(Ee/3),x.face.materialIndex=q.materialIndex,i.push(x))}}else{const K=Math.max(0,ie.start),O=Math.min(P.count,ie.start+ie.count);for(let q=K,_e=O;q<_e;q+=3){const z=q,le=q+1,Ee=q+2;x=NM(this,d,t,o0,P,D,B,F,V,z,le,Ee),x&&(x.faceIndex=Math.floor(q/3),i.push(x))}}}}function kme(w,t,i,l,d,g,x,_){let P;if(t.side===Vs?P=l.intersectTriangle(x,g,d,!0,_):P=l.intersectTriangle(d,g,x,t.side!==Gh,_),P===null)return null;zM.copy(_),zM.applyMatrix4(w.matrixWorld);const D=i.ray.origin.distanceTo(zM);return D<i.near||D>i.far?null:{distance:D,point:zM.clone(),object:w}}function NM(w,t,i,l,d,g,x,_,P,D,B,F){zd.fromBufferAttribute(d,D),Nd.fromBufferAttribute(d,B),Fd.fromBufferAttribute(d,F);const V=w.morphTargetInfluences;if(g&&V){AM.set(0,0,0),IM.set(0,0,0),DM.set(0,0,0);for(let ie=0,K=g.length;ie<K;ie++){const O=V[ie],q=g[ie];O!==0&&($4.fromBufferAttribute(q,D),Z4.fromBufferAttribute(q,B),Y4.fromBufferAttribute(q,F),x?(AM.addScaledVector($4,O),IM.addScaledVector(Z4,O),DM.addScaledVector(Y4,O)):(AM.addScaledVector($4.sub(zd),O),IM.addScaledVector(Z4.sub(Nd),O),DM.addScaledVector(Y4.sub(Fd),O)))}zd.add(AM),Nd.add(IM),Fd.add(DM)}w.isSkinnedMesh&&(w.boneTransform(D,zd),w.boneTransform(B,Nd),w.boneTransform(F,Fd));const X=kme(w,t,i,l,zd,Nd,Fd,J4);if(X){_&&(OM.fromBufferAttribute(_,D),RM.fromBufferAttribute(_,B),LM.fromBufferAttribute(_,F),X.uv=Wu.getUV(J4,zd,Nd,Fd,OM,RM,LM,new er)),P&&(OM.fromBufferAttribute(P,D),RM.fromBufferAttribute(P,B),LM.fromBufferAttribute(P,F),X.uv2=Wu.getUV(J4,zd,Nd,Fd,OM,RM,LM,new er));const ie={a:D,b:B,c:F,normal:new Ve,materialIndex:0};Wu.getNormal(zd,Nd,Fd,ie.normal),X.face=ie}return X}class m1 extends zl{constructor(t=1,i=1,l=1,d=1,g=1,x=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:i,depth:l,widthSegments:d,heightSegments:g,depthSegments:x};const _=this;d=Math.floor(d),g=Math.floor(g),x=Math.floor(x);const P=[],D=[],B=[],F=[];let V=0,X=0;ie("z","y","x",-1,-1,l,i,t,x,g,0),ie("z","y","x",1,-1,l,i,-t,x,g,1),ie("x","z","y",1,1,t,l,i,d,x,2),ie("x","z","y",1,-1,t,l,-i,d,x,3),ie("x","y","z",1,-1,t,i,l,d,g,4),ie("x","y","z",-1,-1,t,i,-l,d,g,5),this.setIndex(P),this.setAttribute("position",new Ku(D,3)),this.setAttribute("normal",new Ku(B,3)),this.setAttribute("uv",new Ku(F,2));function ie(K,O,q,_e,z,le,Ee,je,te,me,Pe){const Q=le/te,Je=Ee/me,Ut=le/2,Dt=Ee/2,et=je/2,be=te+1,tt=me+1;let He=0,yt=0;const dt=new Ve;for(let vt=0;vt<tt;vt++){const Lt=vt*Je-Dt;for(let Et=0;Et<be;Et++){const Ot=Et*Q-Ut;dt[K]=Ot*_e,dt[O]=Lt*z,dt[q]=et,D.push(dt.x,dt.y,dt.z),dt[K]=0,dt[O]=0,dt[q]=je>0?1:-1,B.push(dt.x,dt.y,dt.z),F.push(Et/te),F.push(1-vt/me),He+=1}}for(let vt=0;vt<me;vt++)for(let Lt=0;Lt<te;Lt++){const Et=V+Lt+be*vt,Ot=V+Lt+be*(vt+1),Yt=V+(Lt+1)+be*(vt+1),Qt=V+(Lt+1)+be*vt;P.push(Et,Ot,Qt),P.push(Ot,Yt,Qt),yt+=6}_.addGroup(X,yt,Pe),X+=yt,V+=He}}static fromJSON(t){return new m1(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function _0(w){const t={};for(const i in w){t[i]={};for(const l in w[i]){const d=w[i][l];d&&(d.isColor||d.isMatrix3||d.isMatrix4||d.isVector2||d.isVector3||d.isVector4||d.isTexture||d.isQuaternion)?t[i][l]=d.clone():Array.isArray(d)?t[i][l]=d.slice():t[i][l]=d}}return t}function ho(w){const t={};for(let i=0;i<w.length;i++){const l=_0(w[i]);for(const d in l)t[d]=l[d]}return t}const Tme={clone:_0,merge:ho};var Mme=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,Pme=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Xh extends Ll{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Mme,this.fragmentShader=Pme,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,t!==void 0&&(t.attributes!==void 0&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=_0(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const i=super.toJSON(t);i.glslVersion=this.glslVersion,i.uniforms={};for(const d in this.uniforms){const x=this.uniforms[d].value;x&&x.isTexture?i.uniforms[d]={type:"t",value:x.toJSON(t).uuid}:x&&x.isColor?i.uniforms[d]={type:"c",value:x.getHex()}:x&&x.isVector2?i.uniforms[d]={type:"v2",value:x.toArray()}:x&&x.isVector3?i.uniforms[d]={type:"v3",value:x.toArray()}:x&&x.isVector4?i.uniforms[d]={type:"v4",value:x.toArray()}:x&&x.isMatrix3?i.uniforms[d]={type:"m3",value:x.toArray()}:x&&x.isMatrix4?i.uniforms[d]={type:"m4",value:x.toArray()}:i.uniforms[d]={value:x}}Object.keys(this.defines).length>0&&(i.defines=this.defines),i.vertexShader=this.vertexShader,i.fragmentShader=this.fragmentShader;const l={};for(const d in this.extensions)this.extensions[d]===!0&&(l[d]=!0);return Object.keys(l).length>0&&(i.extensions=l),i}}class tre extends gi{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new lr,this.projectionMatrix=new lr,this.projectionMatrixInverse=new lr}copy(t,i){return super.copy(t,i),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const i=this.matrixWorld.elements;return t.set(-i[8],-i[9],-i[10]).normalize()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,i){super.updateWorldMatrix(t,i),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class Oo extends tre{constructor(t=50,i=1,l=.1,d=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=l,this.far=d,this.focus=10,this.aspect=i,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=t.view===null?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const i=.5*this.getFilmHeight()/t;this.fov=u1*2*Math.atan(i),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(o1*.5*this.fov);return .5*this.getFilmHeight()/t}getEffectiveFOV(){return u1*2*Math.atan(Math.tan(o1*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(t,i,l,d,g,x){this.aspect=t/i,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=l,this.view.offsetY=d,this.view.width=g,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let i=t*Math.tan(o1*.5*this.fov)/this.zoom,l=2*i,d=this.aspect*l,g=-.5*d;const x=this.view;if(this.view!==null&&this.view.enabled){const P=x.fullWidth,D=x.fullHeight;g+=x.offsetX*d/P,i-=x.offsetY*l/D,d*=x.width/P,l*=x.height/D}const _=this.filmOffset;_!==0&&(g+=t*_/this.getFilmWidth()),this.projectionMatrix.makePerspective(g,g+d,i,i-l,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.fov=this.fov,i.object.zoom=this.zoom,i.object.near=this.near,i.object.far=this.far,i.object.focus=this.focus,i.object.aspect=this.aspect,this.view!==null&&(i.object.view=Object.assign({},this.view)),i.object.filmGauge=this.filmGauge,i.object.filmOffset=this.filmOffset,i}}const a0=90,s0=1;class Cme extends gi{constructor(t,i,l){if(super(),this.type="CubeCamera",l.isWebGLCubeRenderTarget!==!0){console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");return}this.renderTarget=l;const d=new Oo(a0,s0,t,i);d.layers=this.layers,d.up.set(0,-1,0),d.lookAt(new Ve(1,0,0)),this.add(d);const g=new Oo(a0,s0,t,i);g.layers=this.layers,g.up.set(0,-1,0),g.lookAt(new Ve(-1,0,0)),this.add(g);const x=new Oo(a0,s0,t,i);x.layers=this.layers,x.up.set(0,0,1),x.lookAt(new Ve(0,1,0)),this.add(x);const _=new Oo(a0,s0,t,i);_.layers=this.layers,_.up.set(0,0,-1),_.lookAt(new Ve(0,-1,0)),this.add(_);const P=new Oo(a0,s0,t,i);P.layers=this.layers,P.up.set(0,-1,0),P.lookAt(new Ve(0,0,1)),this.add(P);const D=new Oo(a0,s0,t,i);D.layers=this.layers,D.up.set(0,-1,0),D.lookAt(new Ve(0,0,-1)),this.add(D)}update(t,i){this.parent===null&&this.updateMatrixWorld();const l=this.renderTarget,[d,g,x,_,P,D]=this.children,B=t.getRenderTarget(),F=t.toneMapping,V=t.xr.enabled;t.toneMapping=qu,t.xr.enabled=!1;const X=l.texture.generateMipmaps;l.texture.generateMipmaps=!1,t.setRenderTarget(l,0),t.render(i,d),t.setRenderTarget(l,1),t.render(i,g),t.setRenderTarget(l,2),t.render(i,x),t.setRenderTarget(l,3),t.render(i,_),t.setRenderTarget(l,4),t.render(i,P),l.texture.generateMipmaps=X,t.setRenderTarget(l,5),t.render(i,D),t.setRenderTarget(B),t.toneMapping=F,t.xr.enabled=V,l.texture.needsPMREMUpdate=!0}}class nre extends Ro{constructor(t,i,l,d,g,x,_,P,D,B){t=t!==void 0?t:[],i=i!==void 0?i:m0,super(t,i,l,d,g,x,_,P,D,B),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Ame extends Kh{constructor(t,i={}){super(t,t,i),this.isWebGLCubeRenderTarget=!0;const l={width:t,height:t,depth:1},d=[l,l,l,l,l,l];this.texture=new nre(d,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Zo}fromEquirectangularTexture(t,i){this.texture.type=i.type,this.texture.encoding=i.encoding,this.texture.generateMipmaps=i.generateMipmaps,this.texture.minFilter=i.minFilter,this.texture.magFilter=i.magFilter;const l={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},d=new m1(5,5,5),g=new Xh({name:"CubemapFromEquirect",uniforms:_0(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,side:Vs,blending:Ud});g.uniforms.tEquirect.value=i;const x=new Rl(d,g),_=i.minFilter;return i.minFilter===w0&&(i.minFilter=Zo),new Cme(1,10,this).update(t,x),i.minFilter=_,x.geometry.dispose(),x.material.dispose(),this}clear(t,i,l,d){const g=t.getRenderTarget();for(let x=0;x<6;x++)t.setRenderTarget(this,x),t.clear(i,l,d);t.setRenderTarget(g)}}const Q4=new Ve,Ime=new Ve,Dme=new Za;class Oh{constructor(t=new Ve(1,0,0),i=0){this.isPlane=!0,this.normal=t,this.constant=i}set(t,i){return this.normal.copy(t),this.constant=i,this}setComponents(t,i,l,d){return this.normal.set(t,i,l),this.constant=d,this}setFromNormalAndCoplanarPoint(t,i){return this.normal.copy(t),this.constant=-i.dot(this.normal),this}setFromCoplanarPoints(t,i,l){const d=Q4.subVectors(l,i).cross(Ime.subVectors(t,i)).normalize();return this.setFromNormalAndCoplanarPoint(d,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,i){return i.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,i){const l=t.delta(Q4),d=this.normal.dot(l);if(d===0)return this.distanceToPoint(t.start)===0?i.copy(t.start):null;const g=-(t.start.dot(this.normal)+this.constant)/d;return g<0||g>1?null:i.copy(l).multiplyScalar(g).add(t.start)}intersectsLine(t){const i=this.distanceToPoint(t.start),l=this.distanceToPoint(t.end);return i<0&&l>0||l<0&&i>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,i){const l=i||Dme.getNormalMatrix(t),d=this.coplanarPoint(Q4).applyMatrix4(t),g=this.normal.applyMatrix3(l).normalize();return this.constant=-d.dot(g),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return new this.constructor().copy(this)}}const l0=new k0,FM=new Ve;class CL{constructor(t=new Oh,i=new Oh,l=new Oh,d=new Oh,g=new Oh,x=new Oh){this.planes=[t,i,l,d,g,x]}set(t,i,l,d,g,x){const _=this.planes;return _[0].copy(t),_[1].copy(i),_[2].copy(l),_[3].copy(d),_[4].copy(g),_[5].copy(x),this}copy(t){const i=this.planes;for(let l=0;l<6;l++)i[l].copy(t.planes[l]);return this}setFromProjectionMatrix(t){const i=this.planes,l=t.elements,d=l[0],g=l[1],x=l[2],_=l[3],P=l[4],D=l[5],B=l[6],F=l[7],V=l[8],X=l[9],ie=l[10],K=l[11],O=l[12],q=l[13],_e=l[14],z=l[15];return i[0].setComponents(_-d,F-P,K-V,z-O).normalize(),i[1].setComponents(_+d,F+P,K+V,z+O).normalize(),i[2].setComponents(_+g,F+D,K+X,z+q).normalize(),i[3].setComponents(_-g,F-D,K-X,z-q).normalize(),i[4].setComponents(_-x,F-B,K-ie,z-_e).normalize(),i[5].setComponents(_+x,F+B,K+ie,z+_e).normalize(),this}intersectsObject(t){const i=t.geometry;return i.boundingSphere===null&&i.computeBoundingSphere(),l0.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(l0)}intersectsSprite(t){return l0.center.set(0,0,0),l0.radius=.7071067811865476,l0.applyMatrix4(t.matrixWorld),this.intersectsSphere(l0)}intersectsSphere(t){const i=this.planes,l=t.center,d=-t.radius;for(let g=0;g<6;g++)if(i[g].distanceToPoint(l)<d)return!1;return!0}intersectsBox(t){const i=this.planes;for(let l=0;l<6;l++){const d=i[l];if(FM.x=d.normal.x>0?t.max.x:t.min.x,FM.y=d.normal.y>0?t.max.y:t.min.y,FM.z=d.normal.z>0?t.max.z:t.min.z,d.distanceToPoint(FM)<0)return!1}return!0}containsPoint(t){const i=this.planes;for(let l=0;l<6;l++)if(i[l].distanceToPoint(t)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function rre(){let w=null,t=!1,i=null,l=null;function d(g,x){i(g,x),l=w.requestAnimationFrame(d)}return{start:function(){t!==!0&&i!==null&&(l=w.requestAnimationFrame(d),t=!0)},stop:function(){w.cancelAnimationFrame(l),t=!1},setAnimationLoop:function(g){i=g},setContext:function(g){w=g}}}function Ome(w,t){const i=t.isWebGL2,l=new WeakMap;function d(D,B){const F=D.array,V=D.usage,X=w.createBuffer();w.bindBuffer(B,X),w.bufferData(B,F,V),D.onUploadCallback();let ie;if(F instanceof Float32Array)ie=5126;else if(F instanceof Uint16Array)if(D.isFloat16BufferAttribute)if(i)ie=5131;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else ie=5123;else if(F instanceof Int16Array)ie=5122;else if(F instanceof Uint32Array)ie=5125;else if(F instanceof Int32Array)ie=5124;else if(F instanceof Int8Array)ie=5120;else if(F instanceof Uint8Array)ie=5121;else if(F instanceof Uint8ClampedArray)ie=5121;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+F);return{buffer:X,type:ie,bytesPerElement:F.BYTES_PER_ELEMENT,version:D.version}}function g(D,B,F){const V=B.array,X=B.updateRange;w.bindBuffer(F,D),X.count===-1?w.bufferSubData(F,0,V):(i?w.bufferSubData(F,X.offset*V.BYTES_PER_ELEMENT,V,X.offset,X.count):w.bufferSubData(F,X.offset*V.BYTES_PER_ELEMENT,V.subarray(X.offset,X.offset+X.count)),X.count=-1)}function x(D){return D.isInterleavedBufferAttribute&&(D=D.data),l.get(D)}function _(D){D.isInterleavedBufferAttribute&&(D=D.data);const B=l.get(D);B&&(w.deleteBuffer(B.buffer),l.delete(D))}function P(D,B){if(D.isGLBufferAttribute){const V=l.get(D);(!V||V.version<D.version)&&l.set(D,{buffer:D.buffer,type:D.type,bytesPerElement:D.elementSize,version:D.version});return}D.isInterleavedBufferAttribute&&(D=D.data);const F=l.get(D);F===void 0?l.set(D,d(D,B)):F.version<D.version&&(g(F.buffer,D,B),F.version=D.version)}return{get:x,remove:_,update:P}}class AL extends zl{constructor(t=1,i=1,l=1,d=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:i,widthSegments:l,heightSegments:d};const g=t/2,x=i/2,_=Math.floor(l),P=Math.floor(d),D=_+1,B=P+1,F=t/_,V=i/P,X=[],ie=[],K=[],O=[];for(let q=0;q<B;q++){const _e=q*V-x;for(let z=0;z<D;z++){const le=z*F-g;ie.push(le,-_e,0),K.push(0,0,1),O.push(z/_),O.push(1-q/P)}}for(let q=0;q<P;q++)for(let _e=0;_e<_;_e++){const z=_e+D*q,le=_e+D*(q+1),Ee=_e+1+D*(q+1),je=_e+1+D*q;X.push(z,le,je),X.push(le,Ee,je)}this.setIndex(X),this.setAttribute("position",new Ku(ie,3)),this.setAttribute("normal",new Ku(K,3)),this.setAttribute("uv",new Ku(O,2))}static fromJSON(t){return new AL(t.width,t.height,t.widthSegments,t.heightSegments)}}var Rme=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vUv ).g;
#endif`,Lme=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zme=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,Nme=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Fme=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Bme=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,jme="vec3 transformed = vec3( position );",Ume=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Vme=`vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#ifdef USE_IRIDESCENCE
vec3 BRDF_GGX_Iridescence( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 f0, const in float f90, const in float iridescence, const in vec3 iridescenceFresnel, const in float roughness ) {
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = mix(F_Schlick( f0, f90, dotVH ), iridescenceFresnel, iridescence);
	float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
	float D = D_GGX( alpha, dotNH );
	return F * ( V * D );
}
#endif
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif`,Hme=`#ifdef USE_IRIDESCENCE
const mat3 XYZ_TO_REC709 = mat3(
    3.2404542, -0.9692660,  0.0556434,
   -1.5371385,  1.8760108, -0.2040259,
   -0.4985314,  0.0415560,  1.0572252
);
vec3 Fresnel0ToIor( vec3 fresnel0 ) {
   vec3 sqrtF0 = sqrt( fresnel0 );
   return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
}
vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
}
float IorToFresnel0( float transmittedIor, float incidentIor ) {
   return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
}
vec3 evalSensitivity( float OPD, vec3 shift ) {
   float phase = 2.0 * PI * OPD * 1.0e-9;
   vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
   vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
   vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
   vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( -pow2( phase ) * var );
   xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[0] ) * exp( -4.5282e+09 * pow2( phase ) );
   xyz /= 1.0685e-7;
   vec3 srgb = XYZ_TO_REC709 * xyz;
   return srgb;
}
vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
   vec3 I;
   float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
   float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
   float cosTheta2Sq = 1.0 - sinTheta2Sq;
   if ( cosTheta2Sq < 0.0 ) {
       return vec3( 1.0 );
   }
   float cosTheta2 = sqrt( cosTheta2Sq );
   float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
   float R12 = F_Schlick( R0, 1.0, cosTheta1 );
   float R21 = R12;
   float T121 = 1.0 - R12;
   float phi12 = 0.0;
   if ( iridescenceIOR < outsideIOR ) phi12 = PI;
   float phi21 = PI - phi12;
   vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );   vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
   vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
   vec3 phi23 = vec3( 0.0 );
   if ( baseIOR[0] < iridescenceIOR ) phi23[0] = PI;
   if ( baseIOR[1] < iridescenceIOR ) phi23[1] = PI;
   if ( baseIOR[2] < iridescenceIOR ) phi23[2] = PI;
   float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
   vec3 phi = vec3( phi21 ) + phi23;
   vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
   vec3 r123 = sqrt( R123 );
   vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
   vec3 C0 = R12 + Rs;
   I = C0;
   vec3 Cm = Rs - T121;
   for ( int m = 1; m <= 2; ++m ) {
       Cm *= r123;
       vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
       I += Cm * Sm;
   }
   return max( I, vec3( 0.0 ) );
}
#endif`,Gme=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vUv );
		vec2 dSTdy = dFdy( vUv );
		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );
		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,Wme=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,qme=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Kme=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Xme=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,$me=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Zme=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Yme=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,Jme=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,Qme=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float linearToRelativeLuminance( const in vec3 color ) {
	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );
	return dot( weights, color.rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}`,ege=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define r0 1.0
	#define v0 0.339
	#define m0 - 2.0
	#define r1 0.8
	#define v1 0.276
	#define m1 - 1.0
	#define r4 0.4
	#define v4 0.046
	#define m4 2.0
	#define r5 0.305
	#define v5 0.016
	#define m5 3.0
	#define r6 0.21
	#define v6 0.0038
	#define m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= r1 ) {
			mip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;
		} else if ( roughness >= r4 ) {
			mip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;
		} else if ( roughness >= r5 ) {
			mip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;
		} else if ( roughness >= r6 ) {
			mip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,tge=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,nge=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,rge=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );
#endif`,ige=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,oge=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,age="gl_FragColor = linearToOutputTexel( gl_FragColor );",sge=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,lge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,uge=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,cge=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,dge=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,fge=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,hge=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,pge=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,mge=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,gge=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,vge=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );
	#endif
}`,yge=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vUv2 );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,bge=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,_ge=`vec3 diffuse = vec3( 1.0 );
GeometricContext geometry;
geometry.position = mvPosition.xyz;
geometry.normal = normalize( transformedNormal );
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );
GeometricContext backGeometry;
backGeometry.position = geometry.position;
backGeometry.normal = -geometry.normal;
backGeometry.viewDir = geometry.viewDir;
vLightFront = vec3( 0.0 );
vIndirectFront = vec3( 0.0 );
#ifdef DOUBLE_SIDED
	vLightBack = vec3( 0.0 );
	vIndirectBack = vec3( 0.0 );
#endif
IncidentLight directLight;
float dotNL;
vec3 directLightColor_Diffuse;
vIndirectFront += getAmbientLightIrradiance( ambientLightColor );
vIndirectFront += getLightProbeIrradiance( lightProbe, geometry.normal );
#ifdef DOUBLE_SIDED
	vIndirectBack += getAmbientLightIrradiance( ambientLightColor );
	vIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry.normal );
#endif
#if NUM_POINT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		getPointLightInfo( pointLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_SPOT_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		getSpotLightInfo( spotLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_DIR_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		getDirectionalLightInfo( directionalLights[ i ], geometry, directLight );
		dotNL = dot( geometry.normal, directLight.direction );
		directLightColor_Diffuse = directLight.color;
		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;
		#ifdef DOUBLE_SIDED
			vLightBack += saturate( - dotNL ) * directLightColor_Diffuse;
		#endif
	}
	#pragma unroll_loop_end
#endif
#if NUM_HEMI_LIGHTS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
		vIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		#ifdef DOUBLE_SIDED
			vIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry.normal );
		#endif
	}
	#pragma unroll_loop_end
#endif`,xge=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( PHYSICALLY_CORRECT_LIGHTS )
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#else
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,wge=`#if defined( USE_ENVMAP )
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#if defined( ENVMAP_TYPE_CUBE_UV )
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
#endif`,Sge=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Ege=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon
#define Material_LightProbeLOD( material )	(0)`,kge=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Tge=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong
#define Material_LightProbeLOD( material )	(0)`,Mge=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	#ifdef SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULARINTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vUv ).a;
		#endif
		#ifdef USE_SPECULARCOLORMAP
			specularColorFactor *= texture2D( specularColorMap, vUv ).rgb;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( ior - 1.0 ) / ( ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEENCOLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEENROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vUv ).a;
	#endif
#endif`,Pge=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	#ifdef USE_IRIDESCENCE
		reflectedLight.directSpecular += irradiance * BRDF_GGX_Iridescence( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness );
	#else
		reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularF90, material.roughness );
	#endif
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Cge=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
float dotNVi = saturate( dot( normal, geometry.viewDir ) );
if ( material.iridescenceThickness == 0.0 ) {
	material.iridescence = 0.0;
} else {
	material.iridescence = saturate( material.iridescence );
}
if ( material.iridescence > 0.0 ) {
	material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
	material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Age=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Ige=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,Dge=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,Oge=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Rge=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,Lge=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,zge=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Nge=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Fge=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Bge=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	uniform mat3 uvTransform;
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,jge=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Uge=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Vge=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,Hge=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,Gge=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,Wge=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,qge=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );
	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	#ifdef USE_TANGENT
		vec3 tangent = normalize( vTangent );
		vec3 bitangent = normalize( vBitangent );
		#ifdef DOUBLE_SIDED
			tangent = tangent * faceDirection;
			bitangent = bitangent * faceDirection;
		#endif
		#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )
			mat3 vTBN = mat3( tangent, bitangent, normal );
		#endif
	#endif
#endif
vec3 geometryNormal = normal;`,Kge=`#ifdef OBJECTSPACE_NORMALMAP
	normal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( TANGENTSPACE_NORMALMAP )
	vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	#ifdef USE_TANGENT
		normal = normalize( vTBN * mapN );
	#else
		normal = perturbNormal2Arb( - vViewPosition, normal, mapN, faceDirection );
	#endif
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Xge=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,$ge=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zge=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,Yge=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef OBJECTSPACE_NORMALMAP
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )
	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN, float faceDirection ) {
		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );
		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );
		vec2 st0 = dFdx( vUv.st );
		vec2 st1 = dFdy( vUv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : faceDirection * inversesqrt( det );
		return normalize( T * ( mapN.x * scale ) + B * ( mapN.y * scale ) + N * mapN.z );
	}
#endif`,Jge=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,Qge=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	#ifdef USE_TANGENT
		clearcoatNormal = normalize( vTBN * clearcoatMapN );
	#else
		clearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN, faceDirection );
	#endif
#endif`,e0e=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif`,t0e=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,n0e=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= transmissionAlpha + 0.1;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,r0e=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {
	return linearClipZ * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * invClipZ - far );
}`,i0e=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,o0e=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,a0e=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,s0e=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,l0e=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vUv );
	roughnessFactor *= texelRoughness.g;
#endif`,u0e=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,c0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );
		bool inFrustum = all( inFrustumVec );
		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );
		bool frustumTest = all( frustumTestVec );
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), 
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), 
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,d0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];
		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,f0e=`#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0
		vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		vec4 shadowWorldPosition;
	#endif
	#if NUM_DIR_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );
		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
	#endif
#endif`,h0e=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,p0e=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,m0e=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,g0e=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,v0e=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,y0e=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,b0e=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,_0e=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,x0e=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return toneMappingExposure * color;
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,w0e=`#ifdef USE_TRANSMISSION
	float transmissionAlpha = 1.0;
	float transmissionFactor = transmission;
	float thicknessFactor = thickness;
	#ifdef USE_TRANSMISSIONMAP
		transmissionFactor *= texture2D( transmissionMap, vUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		thicknessFactor *= texture2D( thicknessMap, vUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmission = getIBLVolumeRefraction(
		n, v, roughnessFactor, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, ior, thicknessFactor,
		attenuationColor, attenuationDistance );
	totalDiffuse = mix( totalDiffuse, transmission.rgb, transmissionFactor );
	transmissionAlpha = mix( transmissionAlpha, transmission.a, transmissionFactor );
#endif`,S0e=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float framebufferLod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		#ifdef texture2DLodEXT
			return texture2DLodEXT( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#else
			return texture2D( transmissionSamplerMap, fragCoord.xy, framebufferLod );
		#endif
	}
	vec3 applyVolumeAttenuation( const in vec3 radiance, const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( attenuationDistance == 0.0 ) {
			return radiance;
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance * radiance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 attenuatedColor = applyVolumeAttenuation( transmittedLight.rgb, length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		return vec4( ( 1.0 - F ) * attenuatedColor * diffuseColor, transmittedLight.a );
	}
#endif`,E0e=`#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )
	varying vec2 vUv;
#endif`,k0e=`#ifdef USE_UV
	#ifdef UVS_VERTEX_ONLY
		vec2 vUv;
	#else
		varying vec2 vUv;
	#endif
	uniform mat3 uvTransform;
#endif`,T0e=`#ifdef USE_UV
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
#endif`,M0e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	varying vec2 vUv2;
#endif`,P0e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	attribute vec2 uv2;
	varying vec2 vUv2;
	uniform mat3 uv2Transform;
#endif`,C0e=`#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )
	vUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;
#endif`,A0e=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION )
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const I0e=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,D0e=`uniform sampler2D t2D;
varying vec2 vUv;
void main() {
	gl_FragColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		gl_FragColor = vec4( mix( pow( gl_FragColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), gl_FragColor.rgb * 0.0773993808, vec3( lessThanEqual( gl_FragColor.rgb, vec3( 0.04045 ) ) ) ), gl_FragColor.w );
	#endif
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,O0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,R0e=`#include <envmap_common_pars_fragment>
uniform float opacity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	vec3 vReflect = vWorldDirection;
	#include <envmap_fragment>
	gl_FragColor = envColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,L0e=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,z0e=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,N0e=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,F0e=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,B0e=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,j0e=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
}`,U0e=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,V0e=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,H0e=`#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,G0e=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vUv2 );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,W0e=`#define LAMBERT
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <envmap_pars_vertex>
#include <bsdfs>
#include <lights_pars_begin>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <lights_lambert_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,q0e=`uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
varying vec3 vLightFront;
varying vec3 vIndirectFront;
#ifdef DOUBLE_SIDED
	varying vec3 vLightBack;
	varying vec3 vIndirectBack;
#endif
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <fog_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <emissivemap_fragment>
	#ifdef DOUBLE_SIDED
		reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;
	#else
		reflectedLight.indirectDiffuse += vIndirectFront;
	#endif
	#include <lightmap_fragment>
	reflectedLight.indirectDiffuse *= BRDF_Lambert( diffuseColor.rgb );
	#ifdef DOUBLE_SIDED
		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;
	#else
		reflectedLight.directDiffuse = vLightFront;
	#endif
	reflectedLight.directDiffuse *= BRDF_Lambert( diffuseColor.rgb ) * getShadowMask();
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,K0e=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,X0e=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$0e=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Z0e=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Y0e=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,J0e=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <cube_uv_reflection_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Q0e=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,eve=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULARINTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
	#ifdef USE_SPECULARCOLORMAP
		uniform sampler2D specularColorMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEENCOLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEENROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <bsdfs>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tve=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <uv2_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <uv2_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,nve=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <uv2_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,rve=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,ive=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,ove=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,ave=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,sve=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,lve=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <output_fragment>
	#include <tonemapping_fragment>
	#include <encodings_fragment>
	#include <fog_fragment>
}`,Wn={alphamap_fragment:Rme,alphamap_pars_fragment:Lme,alphatest_fragment:zme,alphatest_pars_fragment:Nme,aomap_fragment:Fme,aomap_pars_fragment:Bme,begin_vertex:jme,beginnormal_vertex:Ume,bsdfs:Vme,iridescence_fragment:Hme,bumpmap_pars_fragment:Gme,clipping_planes_fragment:Wme,clipping_planes_pars_fragment:qme,clipping_planes_pars_vertex:Kme,clipping_planes_vertex:Xme,color_fragment:$me,color_pars_fragment:Zme,color_pars_vertex:Yme,color_vertex:Jme,common:Qme,cube_uv_reflection_fragment:ege,defaultnormal_vertex:tge,displacementmap_pars_vertex:nge,displacementmap_vertex:rge,emissivemap_fragment:ige,emissivemap_pars_fragment:oge,encodings_fragment:age,encodings_pars_fragment:sge,envmap_fragment:lge,envmap_common_pars_fragment:uge,envmap_pars_fragment:cge,envmap_pars_vertex:dge,envmap_physical_pars_fragment:wge,envmap_vertex:fge,fog_vertex:hge,fog_pars_vertex:pge,fog_fragment:mge,fog_pars_fragment:gge,gradientmap_pars_fragment:vge,lightmap_fragment:yge,lightmap_pars_fragment:bge,lights_lambert_vertex:_ge,lights_pars_begin:xge,lights_toon_fragment:Sge,lights_toon_pars_fragment:Ege,lights_phong_fragment:kge,lights_phong_pars_fragment:Tge,lights_physical_fragment:Mge,lights_physical_pars_fragment:Pge,lights_fragment_begin:Cge,lights_fragment_maps:Age,lights_fragment_end:Ige,logdepthbuf_fragment:Dge,logdepthbuf_pars_fragment:Oge,logdepthbuf_pars_vertex:Rge,logdepthbuf_vertex:Lge,map_fragment:zge,map_pars_fragment:Nge,map_particle_fragment:Fge,map_particle_pars_fragment:Bge,metalnessmap_fragment:jge,metalnessmap_pars_fragment:Uge,morphcolor_vertex:Vge,morphnormal_vertex:Hge,morphtarget_pars_vertex:Gge,morphtarget_vertex:Wge,normal_fragment_begin:qge,normal_fragment_maps:Kge,normal_pars_fragment:Xge,normal_pars_vertex:$ge,normal_vertex:Zge,normalmap_pars_fragment:Yge,clearcoat_normal_fragment_begin:Jge,clearcoat_normal_fragment_maps:Qge,clearcoat_pars_fragment:e0e,iridescence_pars_fragment:t0e,output_fragment:n0e,packing:r0e,premultiplied_alpha_fragment:i0e,project_vertex:o0e,dithering_fragment:a0e,dithering_pars_fragment:s0e,roughnessmap_fragment:l0e,roughnessmap_pars_fragment:u0e,shadowmap_pars_fragment:c0e,shadowmap_pars_vertex:d0e,shadowmap_vertex:f0e,shadowmask_pars_fragment:h0e,skinbase_vertex:p0e,skinning_pars_vertex:m0e,skinning_vertex:g0e,skinnormal_vertex:v0e,specularmap_fragment:y0e,specularmap_pars_fragment:b0e,tonemapping_fragment:_0e,tonemapping_pars_fragment:x0e,transmission_fragment:w0e,transmission_pars_fragment:S0e,uv_pars_fragment:E0e,uv_pars_vertex:k0e,uv_vertex:T0e,uv2_pars_fragment:M0e,uv2_pars_vertex:P0e,uv2_vertex:C0e,worldpos_vertex:A0e,background_vert:I0e,background_frag:D0e,cube_vert:O0e,cube_frag:R0e,depth_vert:L0e,depth_frag:z0e,distanceRGBA_vert:N0e,distanceRGBA_frag:F0e,equirect_vert:B0e,equirect_frag:j0e,linedashed_vert:U0e,linedashed_frag:V0e,meshbasic_vert:H0e,meshbasic_frag:G0e,meshlambert_vert:W0e,meshlambert_frag:q0e,meshmatcap_vert:K0e,meshmatcap_frag:X0e,meshnormal_vert:$0e,meshnormal_frag:Z0e,meshphong_vert:Y0e,meshphong_frag:J0e,meshphysical_vert:Q0e,meshphysical_frag:eve,meshtoon_vert:tve,meshtoon_frag:nve,points_vert:rve,points_frag:ive,shadow_vert:ove,shadow_frag:ave,sprite_vert:sve,sprite_frag:lve},Wt={common:{diffuse:{value:new zn(16777215)},opacity:{value:1},map:{value:null},uvTransform:{value:new Za},uv2Transform:{value:new Za},alphaMap:{value:null},alphaTest:{value:0}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new er(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new zn(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new zn(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Za}},sprite:{diffuse:{value:new zn(16777215)},opacity:{value:1},center:{value:new er(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},alphaTest:{value:0},uvTransform:{value:new Za}}},Ol={basic:{uniforms:ho([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.fog]),vertexShader:Wn.meshbasic_vert,fragmentShader:Wn.meshbasic_frag},lambert:{uniforms:ho([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.fog,Wt.lights,{emissive:{value:new zn(0)}}]),vertexShader:Wn.meshlambert_vert,fragmentShader:Wn.meshlambert_frag},phong:{uniforms:ho([Wt.common,Wt.specularmap,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.fog,Wt.lights,{emissive:{value:new zn(0)},specular:{value:new zn(1118481)},shininess:{value:30}}]),vertexShader:Wn.meshphong_vert,fragmentShader:Wn.meshphong_frag},standard:{uniforms:ho([Wt.common,Wt.envmap,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.roughnessmap,Wt.metalnessmap,Wt.fog,Wt.lights,{emissive:{value:new zn(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag},toon:{uniforms:ho([Wt.common,Wt.aomap,Wt.lightmap,Wt.emissivemap,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.gradientmap,Wt.fog,Wt.lights,{emissive:{value:new zn(0)}}]),vertexShader:Wn.meshtoon_vert,fragmentShader:Wn.meshtoon_frag},matcap:{uniforms:ho([Wt.common,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,Wt.fog,{matcap:{value:null}}]),vertexShader:Wn.meshmatcap_vert,fragmentShader:Wn.meshmatcap_frag},points:{uniforms:ho([Wt.points,Wt.fog]),vertexShader:Wn.points_vert,fragmentShader:Wn.points_frag},dashed:{uniforms:ho([Wt.common,Wt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wn.linedashed_vert,fragmentShader:Wn.linedashed_frag},depth:{uniforms:ho([Wt.common,Wt.displacementmap]),vertexShader:Wn.depth_vert,fragmentShader:Wn.depth_frag},normal:{uniforms:ho([Wt.common,Wt.bumpmap,Wt.normalmap,Wt.displacementmap,{opacity:{value:1}}]),vertexShader:Wn.meshnormal_vert,fragmentShader:Wn.meshnormal_frag},sprite:{uniforms:ho([Wt.sprite,Wt.fog]),vertexShader:Wn.sprite_vert,fragmentShader:Wn.sprite_frag},background:{uniforms:{uvTransform:{value:new Za},t2D:{value:null}},vertexShader:Wn.background_vert,fragmentShader:Wn.background_frag},cube:{uniforms:ho([Wt.envmap,{opacity:{value:1}}]),vertexShader:Wn.cube_vert,fragmentShader:Wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wn.equirect_vert,fragmentShader:Wn.equirect_frag},distanceRGBA:{uniforms:ho([Wt.common,Wt.displacementmap,{referencePosition:{value:new Ve},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wn.distanceRGBA_vert,fragmentShader:Wn.distanceRGBA_frag},shadow:{uniforms:ho([Wt.lights,Wt.fog,{color:{value:new zn(0)},opacity:{value:1}}]),vertexShader:Wn.shadow_vert,fragmentShader:Wn.shadow_frag}};Ol.physical={uniforms:ho([Ol.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new er(1,1)},clearcoatNormalMap:{value:null},iridescence:{value:0},iridescenceMap:{value:null},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},sheen:{value:0},sheenColor:{value:new zn(0)},sheenColorMap:{value:null},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},transmission:{value:0},transmissionMap:{value:null},transmissionSamplerSize:{value:new er},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},attenuationDistance:{value:0},attenuationColor:{value:new zn(0)},specularIntensity:{value:1},specularIntensityMap:{value:null},specularColor:{value:new zn(1,1,1)},specularColorMap:{value:null}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag};function uve(w,t,i,l,d,g){const x=new zn(0);let _=d===!0?0:1,P,D,B=null,F=0,V=null;function X(K,O){let q=!1,_e=O.isScene===!0?O.background:null;_e&&_e.isTexture&&(_e=t.get(_e));const z=w.xr,le=z.getSession&&z.getSession();le&&le.environmentBlendMode==="additive"&&(_e=null),_e===null?ie(x,_):_e&&_e.isColor&&(ie(_e,1),q=!0),(w.autoClear||q)&&w.clear(w.autoClearColor,w.autoClearDepth,w.autoClearStencil),_e&&(_e.isCubeTexture||_e.mapping===XM)?(D===void 0&&(D=new Rl(new m1(1,1,1),new Xh({name:"BackgroundCubeMaterial",uniforms:_0(Ol.cube.uniforms),vertexShader:Ol.cube.vertexShader,fragmentShader:Ol.cube.fragmentShader,side:Vs,depthTest:!1,depthWrite:!1,fog:!1})),D.geometry.deleteAttribute("normal"),D.geometry.deleteAttribute("uv"),D.onBeforeRender=function(Ee,je,te){this.matrixWorld.copyPosition(te.matrixWorld)},Object.defineProperty(D.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),l.update(D)),D.material.uniforms.envMap.value=_e,D.material.uniforms.flipEnvMap.value=_e.isCubeTexture&&_e.isRenderTargetTexture===!1?-1:1,(B!==_e||F!==_e.version||V!==w.toneMapping)&&(D.material.needsUpdate=!0,B=_e,F=_e.version,V=w.toneMapping),D.layers.enableAll(),K.unshift(D,D.geometry,D.material,0,0,null)):_e&&_e.isTexture&&(P===void 0&&(P=new Rl(new AL(2,2),new Xh({name:"BackgroundMaterial",uniforms:_0(Ol.background.uniforms),vertexShader:Ol.background.vertexShader,fragmentShader:Ol.background.fragmentShader,side:p0,depthTest:!1,depthWrite:!1,fog:!1})),P.geometry.deleteAttribute("normal"),Object.defineProperty(P.material,"map",{get:function(){return this.uniforms.t2D.value}}),l.update(P)),P.material.uniforms.t2D.value=_e,_e.matrixAutoUpdate===!0&&_e.updateMatrix(),P.material.uniforms.uvTransform.value.copy(_e.matrix),(B!==_e||F!==_e.version||V!==w.toneMapping)&&(P.material.needsUpdate=!0,B=_e,F=_e.version,V=w.toneMapping),P.layers.enableAll(),K.unshift(P,P.geometry,P.material,0,0,null))}function ie(K,O){i.buffers.color.setClear(K.r,K.g,K.b,O,g)}return{getClearColor:function(){return x},setClearColor:function(K,O=1){x.set(K),_=O,ie(x,_)},getClearAlpha:function(){return _},setClearAlpha:function(K){_=K,ie(x,_)},render:X}}function cve(w,t,i,l){const d=w.getParameter(34921),g=l.isWebGL2?null:t.get("OES_vertex_array_object"),x=l.isWebGL2||g!==null,_={},P=O(null);let D=P,B=!1;function F(et,be,tt,He,yt){let dt=!1;if(x){const vt=K(He,tt,be);D!==vt&&(D=vt,X(D.object)),dt=q(et,He,tt,yt),dt&&_e(et,He,tt,yt)}else{const vt=be.wireframe===!0;(D.geometry!==He.id||D.program!==tt.id||D.wireframe!==vt)&&(D.geometry=He.id,D.program=tt.id,D.wireframe=vt,dt=!0)}yt!==null&&i.update(yt,34963),(dt||B)&&(B=!1,me(et,be,tt,He),yt!==null&&w.bindBuffer(34963,i.get(yt).buffer))}function V(){return l.isWebGL2?w.createVertexArray():g.createVertexArrayOES()}function X(et){return l.isWebGL2?w.bindVertexArray(et):g.bindVertexArrayOES(et)}function ie(et){return l.isWebGL2?w.deleteVertexArray(et):g.deleteVertexArrayOES(et)}function K(et,be,tt){const He=tt.wireframe===!0;let yt=_[et.id];yt===void 0&&(yt={},_[et.id]=yt);let dt=yt[be.id];dt===void 0&&(dt={},yt[be.id]=dt);let vt=dt[He];return vt===void 0&&(vt=O(V()),dt[He]=vt),vt}function O(et){const be=[],tt=[],He=[];for(let yt=0;yt<d;yt++)be[yt]=0,tt[yt]=0,He[yt]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:be,enabledAttributes:tt,attributeDivisors:He,object:et,attributes:{},index:null}}function q(et,be,tt,He){const yt=D.attributes,dt=be.attributes;let vt=0;const Lt=tt.getAttributes();for(const Et in Lt)if(Lt[Et].location>=0){const Yt=yt[Et];let Qt=dt[Et];if(Qt===void 0&&(Et==="instanceMatrix"&&et.instanceMatrix&&(Qt=et.instanceMatrix),Et==="instanceColor"&&et.instanceColor&&(Qt=et.instanceColor)),Yt===void 0||Yt.attribute!==Qt||Qt&&Yt.data!==Qt.data)return!0;vt++}return D.attributesNum!==vt||D.index!==He}function _e(et,be,tt,He){const yt={},dt=be.attributes;let vt=0;const Lt=tt.getAttributes();for(const Et in Lt)if(Lt[Et].location>=0){let Yt=dt[Et];Yt===void 0&&(Et==="instanceMatrix"&&et.instanceMatrix&&(Yt=et.instanceMatrix),Et==="instanceColor"&&et.instanceColor&&(Yt=et.instanceColor));const Qt={};Qt.attribute=Yt,Yt&&Yt.data&&(Qt.data=Yt.data),yt[Et]=Qt,vt++}D.attributes=yt,D.attributesNum=vt,D.index=He}function z(){const et=D.newAttributes;for(let be=0,tt=et.length;be<tt;be++)et[be]=0}function le(et){Ee(et,0)}function Ee(et,be){const tt=D.newAttributes,He=D.enabledAttributes,yt=D.attributeDivisors;tt[et]=1,He[et]===0&&(w.enableVertexAttribArray(et),He[et]=1),yt[et]!==be&&((l.isWebGL2?w:t.get("ANGLE_instanced_arrays"))[l.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](et,be),yt[et]=be)}function je(){const et=D.newAttributes,be=D.enabledAttributes;for(let tt=0,He=be.length;tt<He;tt++)be[tt]!==et[tt]&&(w.disableVertexAttribArray(tt),be[tt]=0)}function te(et,be,tt,He,yt,dt){l.isWebGL2===!0&&(tt===5124||tt===5125)?w.vertexAttribIPointer(et,be,tt,yt,dt):w.vertexAttribPointer(et,be,tt,He,yt,dt)}function me(et,be,tt,He){if(l.isWebGL2===!1&&(et.isInstancedMesh||He.isInstancedBufferGeometry)&&t.get("ANGLE_instanced_arrays")===null)return;z();const yt=He.attributes,dt=tt.getAttributes(),vt=be.defaultAttributeValues;for(const Lt in dt){const Et=dt[Lt];if(Et.location>=0){let Ot=yt[Lt];if(Ot===void 0&&(Lt==="instanceMatrix"&&et.instanceMatrix&&(Ot=et.instanceMatrix),Lt==="instanceColor"&&et.instanceColor&&(Ot=et.instanceColor)),Ot!==void 0){const Yt=Ot.normalized,Qt=Ot.itemSize,mt=i.get(Ot);if(mt===void 0)continue;const Jn=mt.buffer,Dn=mt.type,wn=mt.bytesPerElement;if(Ot.isInterleavedBufferAttribute){const qt=Ot.data,On=qt.stride,Fn=Ot.offset;if(qt.isInstancedInterleavedBuffer){for(let hn=0;hn<Et.locationSize;hn++)Ee(Et.location+hn,qt.meshPerAttribute);et.isInstancedMesh!==!0&&He._maxInstanceCount===void 0&&(He._maxInstanceCount=qt.meshPerAttribute*qt.count)}else for(let hn=0;hn<Et.locationSize;hn++)le(Et.location+hn);w.bindBuffer(34962,Jn);for(let hn=0;hn<Et.locationSize;hn++)te(Et.location+hn,Qt/Et.locationSize,Dn,Yt,On*wn,(Fn+Qt/Et.locationSize*hn)*wn)}else{if(Ot.isInstancedBufferAttribute){for(let qt=0;qt<Et.locationSize;qt++)Ee(Et.location+qt,Ot.meshPerAttribute);et.isInstancedMesh!==!0&&He._maxInstanceCount===void 0&&(He._maxInstanceCount=Ot.meshPerAttribute*Ot.count)}else for(let qt=0;qt<Et.locationSize;qt++)le(Et.location+qt);w.bindBuffer(34962,Jn);for(let qt=0;qt<Et.locationSize;qt++)te(Et.location+qt,Qt/Et.locationSize,Dn,Yt,Qt*wn,Qt/Et.locationSize*qt*wn)}}else if(vt!==void 0){const Yt=vt[Lt];if(Yt!==void 0)switch(Yt.length){case 2:w.vertexAttrib2fv(Et.location,Yt);break;case 3:w.vertexAttrib3fv(Et.location,Yt);break;case 4:w.vertexAttrib4fv(Et.location,Yt);break;default:w.vertexAttrib1fv(Et.location,Yt)}}}}je()}function Pe(){Ut();for(const et in _){const be=_[et];for(const tt in be){const He=be[tt];for(const yt in He)ie(He[yt].object),delete He[yt];delete be[tt]}delete _[et]}}function Q(et){if(_[et.id]===void 0)return;const be=_[et.id];for(const tt in be){const He=be[tt];for(const yt in He)ie(He[yt].object),delete He[yt];delete be[tt]}delete _[et.id]}function Je(et){for(const be in _){const tt=_[be];if(tt[et.id]===void 0)continue;const He=tt[et.id];for(const yt in He)ie(He[yt].object),delete He[yt];delete tt[et.id]}}function Ut(){Dt(),B=!0,D!==P&&(D=P,X(D.object))}function Dt(){P.geometry=null,P.program=null,P.wireframe=!1}return{setup:F,reset:Ut,resetDefaultState:Dt,dispose:Pe,releaseStatesOfGeometry:Q,releaseStatesOfProgram:Je,initAttributes:z,enableAttribute:le,disableUnusedAttributes:je}}function dve(w,t,i,l){const d=l.isWebGL2;let g;function x(D){g=D}function _(D,B){w.drawArrays(g,D,B),i.update(B,g,1)}function P(D,B,F){if(F===0)return;let V,X;if(d)V=w,X="drawArraysInstanced";else if(V=t.get("ANGLE_instanced_arrays"),X="drawArraysInstancedANGLE",V===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}V[X](g,D,B,F),i.update(B,g,F)}this.setMode=x,this.render=_,this.renderInstances=P}function fve(w,t,i){let l;function d(){if(l!==void 0)return l;if(t.has("EXT_texture_filter_anisotropic")===!0){const te=t.get("EXT_texture_filter_anisotropic");l=w.getParameter(te.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else l=0;return l}function g(te){if(te==="highp"){if(w.getShaderPrecisionFormat(35633,36338).precision>0&&w.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";te="mediump"}return te==="mediump"&&w.getShaderPrecisionFormat(35633,36337).precision>0&&w.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const x=typeof WebGL2RenderingContext!="undefined"&&w instanceof WebGL2RenderingContext||typeof WebGL2ComputeRenderingContext!="undefined"&&w instanceof WebGL2ComputeRenderingContext;let _=i.precision!==void 0?i.precision:"highp";const P=g(_);P!==_&&(console.warn("THREE.WebGLRenderer:",_,"not supported, using",P,"instead."),_=P);const D=x||t.has("WEBGL_draw_buffers"),B=i.logarithmicDepthBuffer===!0,F=w.getParameter(34930),V=w.getParameter(35660),X=w.getParameter(3379),ie=w.getParameter(34076),K=w.getParameter(34921),O=w.getParameter(36347),q=w.getParameter(36348),_e=w.getParameter(36349),z=V>0,le=x||t.has("OES_texture_float"),Ee=z&&le,je=x?w.getParameter(36183):0;return{isWebGL2:x,drawBuffers:D,getMaxAnisotropy:d,getMaxPrecision:g,precision:_,logarithmicDepthBuffer:B,maxTextures:F,maxVertexTextures:V,maxTextureSize:X,maxCubemapSize:ie,maxAttributes:K,maxVertexUniforms:O,maxVaryings:q,maxFragmentUniforms:_e,vertexTextures:z,floatFragmentTextures:le,floatVertexTextures:Ee,maxSamples:je}}function hve(w){const t=this;let i=null,l=0,d=!1,g=!1;const x=new Oh,_=new Za,P={value:null,needsUpdate:!1};this.uniform=P,this.numPlanes=0,this.numIntersection=0,this.init=function(F,V,X){const ie=F.length!==0||V||l!==0||d;return d=V,i=B(F,X,0),l=F.length,ie},this.beginShadows=function(){g=!0,B(null)},this.endShadows=function(){g=!1,D()},this.setState=function(F,V,X){const ie=F.clippingPlanes,K=F.clipIntersection,O=F.clipShadows,q=w.get(F);if(!d||ie===null||ie.length===0||g&&!O)g?B(null):D();else{const _e=g?0:l,z=_e*4;let le=q.clippingState||null;P.value=le,le=B(ie,V,z,X);for(let Ee=0;Ee!==z;++Ee)le[Ee]=i[Ee];q.clippingState=le,this.numIntersection=K?this.numPlanes:0,this.numPlanes+=_e}};function D(){P.value!==i&&(P.value=i,P.needsUpdate=l>0),t.numPlanes=l,t.numIntersection=0}function B(F,V,X,ie){const K=F!==null?F.length:0;let O=null;if(K!==0){if(O=P.value,ie!==!0||O===null){const q=X+K*4,_e=V.matrixWorldInverse;_.getNormalMatrix(_e),(O===null||O.length<q)&&(O=new Float32Array(q));for(let z=0,le=X;z!==K;++z,le+=4)x.copy(F[z]).applyMatrix4(_e,_),x.normal.toArray(O,le),O[le+3]=x.constant}P.value=O,P.needsUpdate=!0}return t.numPlanes=K,t.numIntersection=0,O}}function pve(w){let t=new WeakMap;function i(x,_){return _===uL?x.mapping=m0:_===cL&&(x.mapping=g0),x}function l(x){if(x&&x.isTexture&&x.isRenderTargetTexture===!1){const _=x.mapping;if(_===uL||_===cL)if(t.has(x)){const P=t.get(x).texture;return i(P,x.mapping)}else{const P=x.image;if(P&&P.height>0){const D=new Ame(P.height/2);return D.fromEquirectangularTexture(w,x),t.set(x,D),x.addEventListener("dispose",d),i(D.texture,x.mapping)}else return null}}return x}function d(x){const _=x.target;_.removeEventListener("dispose",d);const P=t.get(_);P!==void 0&&(t.delete(_),P.dispose())}function g(){t=new WeakMap}return{get:l,dispose:g}}class IL extends tre{constructor(t=-1,i=1,l=1,d=-1,g=.1,x=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=i,this.top=l,this.bottom=d,this.near=g,this.far=x,this.updateProjectionMatrix()}copy(t,i){return super.copy(t,i),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=t.view===null?null:Object.assign({},t.view),this}setViewOffset(t,i,l,d,g,x){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=i,this.view.offsetX=l,this.view.offsetY=d,this.view.width=g,this.view.height=x,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),i=(this.top-this.bottom)/(2*this.zoom),l=(this.right+this.left)/2,d=(this.top+this.bottom)/2;let g=l-t,x=l+t,_=d+i,P=d-i;if(this.view!==null&&this.view.enabled){const D=(this.right-this.left)/this.view.fullWidth/this.zoom,B=(this.top-this.bottom)/this.view.fullHeight/this.zoom;g+=D*this.view.offsetX,x=g+D*this.view.width,_-=B*this.view.offsetY,P=_-B*this.view.height}this.projectionMatrix.makeOrthographic(g,x,_,P,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const i=super.toJSON(t);return i.object.zoom=this.zoom,i.object.left=this.left,i.object.right=this.right,i.object.top=this.top,i.object.bottom=this.bottom,i.object.near=this.near,i.object.far=this.far,this.view!==null&&(i.object.view=Object.assign({},this.view)),i}}const d0=4,Kte=[.125,.215,.35,.446,.526,.582],zh=20,eL=new IL,Xte=new zn;let tL=null;const Rh=(1+Math.sqrt(5))/2,u0=1/Rh,$te=[new Ve(1,1,1),new Ve(-1,1,1),new Ve(1,1,-1),new Ve(-1,1,-1),new Ve(0,Rh,u0),new Ve(0,Rh,-u0),new Ve(u0,0,Rh),new Ve(-u0,0,Rh),new Ve(Rh,u0,0),new Ve(-Rh,u0,0)];class Zte{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,i=0,l=.1,d=100){tL=this._renderer.getRenderTarget(),this._setSize(256);const g=this._allocateTargets();return g.depthBuffer=!0,this._sceneToCubeUV(t,l,d,g),i>0&&this._blur(g,0,0,i),this._applyPMREM(g),this._cleanup(g),g}fromEquirectangular(t,i=null){return this._fromTexture(t,i)}fromCubemap(t,i=null){return this._fromTexture(t,i)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Qte(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Jte(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(tL),t.scissorTest=!1,BM(t,0,0,t.width,t.height)}_fromTexture(t,i){t.mapping===m0||t.mapping===g0?this._setSize(t.image.length===0?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),tL=this._renderer.getRenderTarget();const l=i||this._allocateTargets();return this._textureToCubeUV(t,l),this._applyPMREM(l),this._cleanup(l),l}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),i=4*this._cubeSize,l={magFilter:Zo,minFilter:Zo,generateMipmaps:!1,type:s1,format:Us,encoding:qh,depthBuffer:!1},d=Yte(t,i,l);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Yte(t,i,l);const{_lodMax:g}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=mve(g)),this._blurMaterial=gve(g,t,i)}return d}_compileMaterial(t){const i=new Rl(this._lodPlanes[0],t);this._renderer.compile(i,eL)}_sceneToCubeUV(t,i,l,d){const _=new Oo(90,1,i,l),P=[1,-1,1,1,1,1],D=[1,1,1,-1,-1,-1],B=this._renderer,F=B.autoClear,V=B.toneMapping;B.getClearColor(Xte),B.toneMapping=qu,B.autoClear=!1;const X=new Bh({name:"PMREM.Background",side:Vs,depthWrite:!1,depthTest:!1}),ie=new Rl(new m1,X);let K=!1;const O=t.background;O?O.isColor&&(X.color.copy(O),t.background=null,K=!0):(X.color.copy(Xte),K=!0);for(let q=0;q<6;q++){const _e=q%3;_e===0?(_.up.set(0,P[q],0),_.lookAt(D[q],0,0)):_e===1?(_.up.set(0,0,P[q]),_.lookAt(0,D[q],0)):(_.up.set(0,P[q],0),_.lookAt(0,0,D[q]));const z=this._cubeSize;BM(d,_e*z,q>2?z:0,z,z),B.setRenderTarget(d),K&&B.render(ie,_),B.render(t,_)}ie.geometry.dispose(),ie.material.dispose(),B.toneMapping=V,B.autoClear=F,t.background=O}_textureToCubeUV(t,i){const l=this._renderer,d=t.mapping===m0||t.mapping===g0;d?(this._cubemapMaterial===null&&(this._cubemapMaterial=Qte()),this._cubemapMaterial.uniforms.flipEnvMap.value=t.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=Jte());const g=d?this._cubemapMaterial:this._equirectMaterial,x=new Rl(this._lodPlanes[0],g),_=g.uniforms;_.envMap.value=t;const P=this._cubeSize;BM(i,0,0,3*P,2*P),l.setRenderTarget(i),l.render(x,eL)}_applyPMREM(t){const i=this._renderer,l=i.autoClear;i.autoClear=!1;for(let d=1;d<this._lodPlanes.length;d++){const g=Math.sqrt(this._sigmas[d]*this._sigmas[d]-this._sigmas[d-1]*this._sigmas[d-1]),x=$te[(d-1)%$te.length];this._blur(t,d-1,d,g,x)}i.autoClear=l}_blur(t,i,l,d,g){const x=this._pingPongRenderTarget;this._halfBlur(t,x,i,l,d,"latitudinal",g),this._halfBlur(x,t,l,l,d,"longitudinal",g)}_halfBlur(t,i,l,d,g,x,_){const P=this._renderer,D=this._blurMaterial;x!=="latitudinal"&&x!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const B=3,F=new Rl(this._lodPlanes[d],D),V=D.uniforms,X=this._sizeLods[l]-1,ie=isFinite(g)?Math.PI/(2*X):2*Math.PI/(2*zh-1),K=g/ie,O=isFinite(g)?1+Math.floor(B*K):zh;O>zh&&console.warn(`sigmaRadians, ${g}, is too large and will clip, as it requested ${O} samples when the maximum is set to ${zh}`);const q=[];let _e=0;for(let te=0;te<zh;++te){const me=te/K,Pe=Math.exp(-me*me/2);q.push(Pe),te===0?_e+=Pe:te<O&&(_e+=2*Pe)}for(let te=0;te<q.length;te++)q[te]=q[te]/_e;V.envMap.value=t.texture,V.samples.value=O,V.weights.value=q,V.latitudinal.value=x==="latitudinal",_&&(V.poleAxis.value=_);const{_lodMax:z}=this;V.dTheta.value=ie,V.mipInt.value=z-l;const le=this._sizeLods[d],Ee=3*le*(d>z-d0?d-z+d0:0),je=4*(this._cubeSize-le);BM(i,Ee,je,3*le,2*le),P.setRenderTarget(i),P.render(F,eL)}}function mve(w){const t=[],i=[],l=[];let d=w;const g=w-d0+1+Kte.length;for(let x=0;x<g;x++){const _=Math.pow(2,d);i.push(_);let P=1/_;x>w-d0?P=Kte[x-w+d0-1]:x===0&&(P=0),l.push(P);const D=1/(_-2),B=-D,F=1+D,V=[B,B,F,B,F,F,B,B,F,F,B,F],X=6,ie=6,K=3,O=2,q=1,_e=new Float32Array(K*ie*X),z=new Float32Array(O*ie*X),le=new Float32Array(q*ie*X);for(let je=0;je<X;je++){const te=je%3*2/3-1,me=je>2?0:-1,Pe=[te,me,0,te+2/3,me,0,te+2/3,me+1,0,te,me,0,te+2/3,me+1,0,te,me+1,0];_e.set(Pe,K*ie*je),z.set(V,O*ie*je);const Q=[je,je,je,je,je,je];le.set(Q,q*ie*je)}const Ee=new zl;Ee.setAttribute("position",new va(_e,K)),Ee.setAttribute("uv",new va(z,O)),Ee.setAttribute("faceIndex",new va(le,q)),t.push(Ee),d>d0&&d--}return{lodPlanes:t,sizeLods:i,sigmas:l}}function Yte(w,t,i){const l=new Kh(w,t,i);return l.texture.mapping=XM,l.texture.name="PMREM.cubeUv",l.scissorTest=!0,l}function BM(w,t,i,l,d){w.viewport.set(t,i,l,d),w.scissor.set(t,i,l,d)}function gve(w,t,i){const l=new Float32Array(zh),d=new Ve(0,1,0);return new Xh({name:"SphericalGaussianBlur",defines:{n:zh,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${w}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:l},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:d}},vertexShader:DL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ud,depthTest:!1,depthWrite:!1})}function Jte(){return new Xh({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:DL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ud,depthTest:!1,depthWrite:!1})}function Qte(){return new Xh({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:DL(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ud,depthTest:!1,depthWrite:!1})}function DL(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function vve(w){let t=new WeakMap,i=null;function l(_){if(_&&_.isTexture){const P=_.mapping,D=P===uL||P===cL,B=P===m0||P===g0;if(D||B)if(_.isRenderTargetTexture&&_.needsPMREMUpdate===!0){_.needsPMREMUpdate=!1;let F=t.get(_);return i===null&&(i=new Zte(w)),F=D?i.fromEquirectangular(_,F):i.fromCubemap(_,F),t.set(_,F),F.texture}else{if(t.has(_))return t.get(_).texture;{const F=_.image;if(D&&F&&F.height>0||B&&F&&d(F)){i===null&&(i=new Zte(w));const V=D?i.fromEquirectangular(_):i.fromCubemap(_);return t.set(_,V),_.addEventListener("dispose",g),V.texture}else return null}}}return _}function d(_){let P=0;const D=6;for(let B=0;B<D;B++)_[B]!==void 0&&P++;return P===D}function g(_){const P=_.target;P.removeEventListener("dispose",g);const D=t.get(P);D!==void 0&&(t.delete(P),D.dispose())}function x(){t=new WeakMap,i!==null&&(i.dispose(),i=null)}return{get:l,dispose:x}}function yve(w){const t={};function i(l){if(t[l]!==void 0)return t[l];let d;switch(l){case"WEBGL_depth_texture":d=w.getExtension("WEBGL_depth_texture")||w.getExtension("MOZ_WEBGL_depth_texture")||w.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":d=w.getExtension("EXT_texture_filter_anisotropic")||w.getExtension("MOZ_EXT_texture_filter_anisotropic")||w.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":d=w.getExtension("WEBGL_compressed_texture_s3tc")||w.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":d=w.getExtension("WEBGL_compressed_texture_pvrtc")||w.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:d=w.getExtension(l)}return t[l]=d,d}return{has:function(l){return i(l)!==null},init:function(l){l.isWebGL2?i("EXT_color_buffer_float"):(i("WEBGL_depth_texture"),i("OES_texture_float"),i("OES_texture_half_float"),i("OES_texture_half_float_linear"),i("OES_standard_derivatives"),i("OES_element_index_uint"),i("OES_vertex_array_object"),i("ANGLE_instanced_arrays")),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture")},get:function(l){const d=i(l);return d===null&&console.warn("THREE.WebGLRenderer: "+l+" extension not supported."),d}}}function bve(w,t,i,l){const d={},g=new WeakMap;function x(F){const V=F.target;V.index!==null&&t.remove(V.index);for(const ie in V.attributes)t.remove(V.attributes[ie]);V.removeEventListener("dispose",x),delete d[V.id];const X=g.get(V);X&&(t.remove(X),g.delete(V)),l.releaseStatesOfGeometry(V),V.isInstancedBufferGeometry===!0&&delete V._maxInstanceCount,i.memory.geometries--}function _(F,V){return d[V.id]===!0||(V.addEventListener("dispose",x),d[V.id]=!0,i.memory.geometries++),V}function P(F){const V=F.attributes;for(const ie in V)t.update(V[ie],34962);const X=F.morphAttributes;for(const ie in X){const K=X[ie];for(let O=0,q=K.length;O<q;O++)t.update(K[O],34962)}}function D(F){const V=[],X=F.index,ie=F.attributes.position;let K=0;if(X!==null){const _e=X.array;K=X.version;for(let z=0,le=_e.length;z<le;z+=3){const Ee=_e[z+0],je=_e[z+1],te=_e[z+2];V.push(Ee,je,je,te,te,Ee)}}else{const _e=ie.array;K=ie.version;for(let z=0,le=_e.length/3-1;z<le;z+=3){const Ee=z+0,je=z+1,te=z+2;V.push(Ee,je,je,te,te,Ee)}}const O=new(Kne(V)?ere:Qne)(V,1);O.version=K;const q=g.get(F);q&&t.remove(q),g.set(F,O)}function B(F){const V=g.get(F);if(V){const X=F.index;X!==null&&V.version<X.version&&D(F)}else D(F);return g.get(F)}return{get:_,update:P,getWireframeAttribute:B}}function _ve(w,t,i,l){const d=l.isWebGL2;let g;function x(V){g=V}let _,P;function D(V){_=V.type,P=V.bytesPerElement}function B(V,X){w.drawElements(g,X,_,V*P),i.update(X,g,1)}function F(V,X,ie){if(ie===0)return;let K,O;if(d)K=w,O="drawElementsInstanced";else if(K=t.get("ANGLE_instanced_arrays"),O="drawElementsInstancedANGLE",K===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}K[O](g,X,_,V*P,ie),i.update(X,g,ie)}this.setMode=x,this.setIndex=D,this.render=B,this.renderInstances=F}function xve(w){const t={geometries:0,textures:0},i={frame:0,calls:0,triangles:0,points:0,lines:0};function l(g,x,_){switch(i.calls++,x){case 4:i.triangles+=_*(g/3);break;case 1:i.lines+=_*(g/2);break;case 3:i.lines+=_*(g-1);break;case 2:i.lines+=_*g;break;case 0:i.points+=_*g;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",x);break}}function d(){i.frame++,i.calls=0,i.triangles=0,i.points=0,i.lines=0}return{memory:t,render:i,programs:null,autoReset:!0,reset:d,update:l}}function wve(w,t){return w[0]-t[0]}function Sve(w,t){return Math.abs(t[1])-Math.abs(w[1])}function nL(w,t){let i=1;const l=t.isInterleavedBufferAttribute?t.data.array:t.array;l instanceof Int8Array?i=127:l instanceof Uint8Array?i=255:l instanceof Uint16Array?i=65535:l instanceof Int16Array?i=32767:l instanceof Int32Array?i=2147483647:console.error("THREE.WebGLMorphtargets: Unsupported morph attribute data type: ",l),w.divideScalar(i)}function Eve(w,t,i){const l={},d=new Float32Array(8),g=new WeakMap,x=new xr,_=[];for(let D=0;D<8;D++)_[D]=[D,0];function P(D,B,F,V){const X=D.morphTargetInfluences;if(t.isWebGL2===!0){const K=B.morphAttributes.position||B.morphAttributes.normal||B.morphAttributes.color,O=K!==void 0?K.length:0;let q=g.get(B);if(q===void 0||q.count!==O){let tt=function(){et.dispose(),g.delete(B),B.removeEventListener("dispose",tt)};var ie=tt;q!==void 0&&q.texture.dispose();const le=B.morphAttributes.position!==void 0,Ee=B.morphAttributes.normal!==void 0,je=B.morphAttributes.color!==void 0,te=B.morphAttributes.position||[],me=B.morphAttributes.normal||[],Pe=B.morphAttributes.color||[];let Q=0;le===!0&&(Q=1),Ee===!0&&(Q=2),je===!0&&(Q=3);let Je=B.attributes.position.count*Q,Ut=1;Je>t.maxTextureSize&&(Ut=Math.ceil(Je/t.maxTextureSize),Je=t.maxTextureSize);const Dt=new Float32Array(Je*Ut*4*O),et=new Yne(Dt,Je,Ut,O);et.type=jd,et.needsUpdate=!0;const be=Q*4;for(let He=0;He<O;He++){const yt=te[He],dt=me[He],vt=Pe[He],Lt=Je*Ut*4*He;for(let Et=0;Et<yt.count;Et++){const Ot=Et*be;le===!0&&(x.fromBufferAttribute(yt,Et),yt.normalized===!0&&nL(x,yt),Dt[Lt+Ot+0]=x.x,Dt[Lt+Ot+1]=x.y,Dt[Lt+Ot+2]=x.z,Dt[Lt+Ot+3]=0),Ee===!0&&(x.fromBufferAttribute(dt,Et),dt.normalized===!0&&nL(x,dt),Dt[Lt+Ot+4]=x.x,Dt[Lt+Ot+5]=x.y,Dt[Lt+Ot+6]=x.z,Dt[Lt+Ot+7]=0),je===!0&&(x.fromBufferAttribute(vt,Et),vt.normalized===!0&&nL(x,vt),Dt[Lt+Ot+8]=x.x,Dt[Lt+Ot+9]=x.y,Dt[Lt+Ot+10]=x.z,Dt[Lt+Ot+11]=vt.itemSize===4?x.w:1)}}q={count:O,texture:et,size:new er(Je,Ut)},g.set(B,q),B.addEventListener("dispose",tt)}let _e=0;for(let le=0;le<X.length;le++)_e+=X[le];const z=B.morphTargetsRelative?1:1-_e;V.getUniforms().setValue(w,"morphTargetBaseInfluence",z),V.getUniforms().setValue(w,"morphTargetInfluences",X),V.getUniforms().setValue(w,"morphTargetsTexture",q.texture,i),V.getUniforms().setValue(w,"morphTargetsTextureSize",q.size)}else{const K=X===void 0?0:X.length;let O=l[B.id];if(O===void 0||O.length!==K){O=[];for(let Ee=0;Ee<K;Ee++)O[Ee]=[Ee,0];l[B.id]=O}for(let Ee=0;Ee<K;Ee++){const je=O[Ee];je[0]=Ee,je[1]=X[Ee]}O.sort(Sve);for(let Ee=0;Ee<8;Ee++)Ee<K&&O[Ee][1]?(_[Ee][0]=O[Ee][0],_[Ee][1]=O[Ee][1]):(_[Ee][0]=Number.MAX_SAFE_INTEGER,_[Ee][1]=0);_.sort(wve);const q=B.morphAttributes.position,_e=B.morphAttributes.normal;let z=0;for(let Ee=0;Ee<8;Ee++){const je=_[Ee],te=je[0],me=je[1];te!==Number.MAX_SAFE_INTEGER&&me?(q&&B.getAttribute("morphTarget"+Ee)!==q[te]&&B.setAttribute("morphTarget"+Ee,q[te]),_e&&B.getAttribute("morphNormal"+Ee)!==_e[te]&&B.setAttribute("morphNormal"+Ee,_e[te]),d[Ee]=me,z+=me):(q&&B.hasAttribute("morphTarget"+Ee)===!0&&B.deleteAttribute("morphTarget"+Ee),_e&&B.hasAttribute("morphNormal"+Ee)===!0&&B.deleteAttribute("morphNormal"+Ee),d[Ee]=0)}const le=B.morphTargetsRelative?1:1-z;V.getUniforms().setValue(w,"morphTargetBaseInfluence",le),V.getUniforms().setValue(w,"morphTargetInfluences",d)}}return{update:P}}function kve(w,t,i,l){let d=new WeakMap;function g(P){const D=l.render.frame,B=P.geometry,F=t.get(P,B);return d.get(F)!==D&&(t.update(F),d.set(F,D)),P.isInstancedMesh&&(P.hasEventListener("dispose",_)===!1&&P.addEventListener("dispose",_),i.update(P.instanceMatrix,34962),P.instanceColor!==null&&i.update(P.instanceColor,34962)),F}function x(){d=new WeakMap}function _(P){const D=P.target;D.removeEventListener("dispose",_),i.remove(D.instanceMatrix),D.instanceColor!==null&&i.remove(D.instanceColor)}return{update:g,dispose:x}}const ire=new Ro,ore=new Yne,are=new mme,sre=new nre,ene=[],tne=[],nne=new Float32Array(16),rne=new Float32Array(9),ine=new Float32Array(4);function T0(w,t,i){const l=w[0];if(l<=0||l>0)return w;const d=t*i;let g=ene[d];if(g===void 0&&(g=new Float32Array(d),ene[d]=g),t!==0){l.toArray(g,0);for(let x=1,_=0;x!==t;++x)_+=i,w[x].toArray(g,_)}return g}function Lo(w,t){if(w.length!==t.length)return!1;for(let i=0,l=w.length;i<l;i++)if(w[i]!==t[i])return!1;return!0}function zo(w,t){for(let i=0,l=t.length;i<l;i++)w[i]=t[i]}function $M(w,t){let i=tne[t];i===void 0&&(i=new Int32Array(t),tne[t]=i);for(let l=0;l!==t;++l)i[l]=w.allocateTextureUnit();return i}function Tve(w,t){const i=this.cache;i[0]!==t&&(w.uniform1f(this.addr,t),i[0]=t)}function Mve(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y)&&(w.uniform2f(this.addr,t.x,t.y),i[0]=t.x,i[1]=t.y);else{if(Lo(i,t))return;w.uniform2fv(this.addr,t),zo(i,t)}}function Pve(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z)&&(w.uniform3f(this.addr,t.x,t.y,t.z),i[0]=t.x,i[1]=t.y,i[2]=t.z);else if(t.r!==void 0)(i[0]!==t.r||i[1]!==t.g||i[2]!==t.b)&&(w.uniform3f(this.addr,t.r,t.g,t.b),i[0]=t.r,i[1]=t.g,i[2]=t.b);else{if(Lo(i,t))return;w.uniform3fv(this.addr,t),zo(i,t)}}function Cve(w,t){const i=this.cache;if(t.x!==void 0)(i[0]!==t.x||i[1]!==t.y||i[2]!==t.z||i[3]!==t.w)&&(w.uniform4f(this.addr,t.x,t.y,t.z,t.w),i[0]=t.x,i[1]=t.y,i[2]=t.z,i[3]=t.w);else{if(Lo(i,t))return;w.uniform4fv(this.addr,t),zo(i,t)}}function Ave(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(Lo(i,t))return;w.uniformMatrix2fv(this.addr,!1,t),zo(i,t)}else{if(Lo(i,l))return;ine.set(l),w.uniformMatrix2fv(this.addr,!1,ine),zo(i,l)}}function Ive(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(Lo(i,t))return;w.uniformMatrix3fv(this.addr,!1,t),zo(i,t)}else{if(Lo(i,l))return;rne.set(l),w.uniformMatrix3fv(this.addr,!1,rne),zo(i,l)}}function Dve(w,t){const i=this.cache,l=t.elements;if(l===void 0){if(Lo(i,t))return;w.uniformMatrix4fv(this.addr,!1,t),zo(i,t)}else{if(Lo(i,l))return;nne.set(l),w.uniformMatrix4fv(this.addr,!1,nne),zo(i,l)}}function Ove(w,t){const i=this.cache;i[0]!==t&&(w.uniform1i(this.addr,t),i[0]=t)}function Rve(w,t){const i=this.cache;Lo(i,t)||(w.uniform2iv(this.addr,t),zo(i,t))}function Lve(w,t){const i=this.cache;Lo(i,t)||(w.uniform3iv(this.addr,t),zo(i,t))}function zve(w,t){const i=this.cache;Lo(i,t)||(w.uniform4iv(this.addr,t),zo(i,t))}function Nve(w,t){const i=this.cache;i[0]!==t&&(w.uniform1ui(this.addr,t),i[0]=t)}function Fve(w,t){const i=this.cache;Lo(i,t)||(w.uniform2uiv(this.addr,t),zo(i,t))}function Bve(w,t){const i=this.cache;Lo(i,t)||(w.uniform3uiv(this.addr,t),zo(i,t))}function jve(w,t){const i=this.cache;Lo(i,t)||(w.uniform4uiv(this.addr,t),zo(i,t))}function Uve(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture2D(t||ire,d)}function Vve(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture3D(t||are,d)}function Hve(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTextureCube(t||sre,d)}function Gve(w,t,i){const l=this.cache,d=i.allocateTextureUnit();l[0]!==d&&(w.uniform1i(this.addr,d),l[0]=d),i.setTexture2DArray(t||ore,d)}function Wve(w){switch(w){case 5126:return Tve;case 35664:return Mve;case 35665:return Pve;case 35666:return Cve;case 35674:return Ave;case 35675:return Ive;case 35676:return Dve;case 5124:case 35670:return Ove;case 35667:case 35671:return Rve;case 35668:case 35672:return Lve;case 35669:case 35673:return zve;case 5125:return Nve;case 36294:return Fve;case 36295:return Bve;case 36296:return jve;case 35678:case 36198:case 36298:case 36306:case 35682:return Uve;case 35679:case 36299:case 36307:return Vve;case 35680:case 36300:case 36308:case 36293:return Hve;case 36289:case 36303:case 36311:case 36292:return Gve}}function qve(w,t){w.uniform1fv(this.addr,t)}function Kve(w,t){const i=T0(t,this.size,2);w.uniform2fv(this.addr,i)}function Xve(w,t){const i=T0(t,this.size,3);w.uniform3fv(this.addr,i)}function $ve(w,t){const i=T0(t,this.size,4);w.uniform4fv(this.addr,i)}function Zve(w,t){const i=T0(t,this.size,4);w.uniformMatrix2fv(this.addr,!1,i)}function Yve(w,t){const i=T0(t,this.size,9);w.uniformMatrix3fv(this.addr,!1,i)}function Jve(w,t){const i=T0(t,this.size,16);w.uniformMatrix4fv(this.addr,!1,i)}function Qve(w,t){w.uniform1iv(this.addr,t)}function eye(w,t){w.uniform2iv(this.addr,t)}function tye(w,t){w.uniform3iv(this.addr,t)}function nye(w,t){w.uniform4iv(this.addr,t)}function rye(w,t){w.uniform1uiv(this.addr,t)}function iye(w,t){w.uniform2uiv(this.addr,t)}function oye(w,t){w.uniform3uiv(this.addr,t)}function aye(w,t){w.uniform4uiv(this.addr,t)}function sye(w,t,i){const l=t.length,d=$M(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture2D(t[g]||ire,d[g])}function lye(w,t,i){const l=t.length,d=$M(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture3D(t[g]||are,d[g])}function uye(w,t,i){const l=t.length,d=$M(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTextureCube(t[g]||sre,d[g])}function cye(w,t,i){const l=t.length,d=$M(i,l);w.uniform1iv(this.addr,d);for(let g=0;g!==l;++g)i.setTexture2DArray(t[g]||ore,d[g])}function dye(w){switch(w){case 5126:return qve;case 35664:return Kve;case 35665:return Xve;case 35666:return $ve;case 35674:return Zve;case 35675:return Yve;case 35676:return Jve;case 5124:case 35670:return Qve;case 35667:case 35671:return eye;case 35668:case 35672:return tye;case 35669:case 35673:return nye;case 5125:return rye;case 36294:return iye;case 36295:return oye;case 36296:return aye;case 35678:case 36198:case 36298:case 36306:case 35682:return sye;case 35679:case 36299:case 36307:return lye;case 35680:case 36300:case 36308:case 36293:return uye;case 36289:case 36303:case 36311:case 36292:return cye}}class fye{constructor(t,i,l){this.id=t,this.addr=l,this.cache=[],this.setValue=Wve(i.type)}}class hye{constructor(t,i,l){this.id=t,this.addr=l,this.cache=[],this.size=i.size,this.setValue=dye(i.type)}}class pye{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,i,l){const d=this.seq;for(let g=0,x=d.length;g!==x;++g){const _=d[g];_.setValue(t,i[_.id],l)}}}const rL=/(\w+)(\])?(\[|\.)?/g;function one(w,t){w.seq.push(t),w.map[t.id]=t}function mye(w,t,i){const l=w.name,d=l.length;for(rL.lastIndex=0;;){const g=rL.exec(l),x=rL.lastIndex;let _=g[1];const P=g[2]==="]",D=g[3];if(P&&(_=_|0),D===void 0||D==="["&&x+2===d){one(i,D===void 0?new fye(_,w,t):new hye(_,w,t));break}else{let F=i.map[_];F===void 0&&(F=new pye(_),one(i,F)),i=F}}}class WM{constructor(t,i){this.seq=[],this.map={};const l=t.getProgramParameter(i,35718);for(let d=0;d<l;++d){const g=t.getActiveUniform(i,d),x=t.getUniformLocation(i,g.name);mye(g,x,this)}}setValue(t,i,l,d){const g=this.map[i];g!==void 0&&g.setValue(t,l,d)}setOptional(t,i,l){const d=i[l];d!==void 0&&this.setValue(t,l,d)}static upload(t,i,l,d){for(let g=0,x=i.length;g!==x;++g){const _=i[g],P=l[_.id];P.needsUpdate!==!1&&_.setValue(t,P.value,d)}}static seqWithValue(t,i){const l=[];for(let d=0,g=t.length;d!==g;++d){const x=t[d];x.id in i&&l.push(x)}return l}}function ane(w,t,i){const l=w.createShader(t);return w.shaderSource(l,i),w.compileShader(l),l}let gye=0;function vye(w,t){const i=w.split(`
`),l=[],d=Math.max(t-6,0),g=Math.min(t+6,i.length);for(let x=d;x<g;x++){const _=x+1;l.push(`${_===t?">":" "} ${_}: ${i[x]}`)}return l.join(`
`)}function yye(w){switch(w){case qh:return["Linear","( value )"];case gr:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",w),["Linear","( value )"]}}function sne(w,t,i){const l=w.getShaderParameter(t,35713),d=w.getShaderInfoLog(t).trim();if(l&&d==="")return"";const g=/ERROR: 0:(\d+)/.exec(d);if(g){const x=parseInt(g[1]);return i.toUpperCase()+`

`+d+`

`+vye(w.getShaderSource(t),x)}else return d}function bye(w,t){const i=yye(t);return"vec4 "+w+"( vec4 value ) { return LinearTo"+i[0]+i[1]+"; }"}function _ye(w,t){let i;switch(t){case kpe:i="Linear";break;case Tpe:i="Reinhard";break;case Mpe:i="OptimizedCineon";break;case Ppe:i="ACESFilmic";break;case Cpe:i="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),i="Linear"}return"vec3 "+w+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}function xye(w){return[w.extensionDerivatives||!!w.envMapCubeUVHeight||w.bumpMap||w.tangentSpaceNormalMap||w.clearcoatNormalMap||w.flatShading||w.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(w.extensionFragDepth||w.logarithmicDepthBuffer)&&w.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",w.extensionDrawBuffers&&w.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(w.extensionShaderTextureLOD||w.envMap||w.transmission)&&w.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(i1).join(`
`)}function wye(w){const t=[];for(const i in w){const l=w[i];l!==!1&&t.push("#define "+i+" "+l)}return t.join(`
`)}function Sye(w,t){const i={},l=w.getProgramParameter(t,35721);for(let d=0;d<l;d++){const g=w.getActiveAttrib(t,d),x=g.name;let _=1;g.type===35674&&(_=2),g.type===35675&&(_=3),g.type===35676&&(_=4),i[x]={type:g.type,location:w.getAttribLocation(t,x),locationSize:_}}return i}function i1(w){return w!==""}function lne(w,t){return w.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function une(w,t){return w.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const Eye=/^[ \t]*#include +<([\w\d./]+)>/gm;function gL(w){return w.replace(Eye,kye)}function kye(w,t){const i=Wn[t];if(i===void 0)throw new Error("Can not resolve #include <"+t+">");return gL(i)}const Tye=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Mye=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function cne(w){return w.replace(Mye,lre).replace(Tye,Pye)}function Pye(w,t,i,l){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),lre(w,t,i,l)}function lre(w,t,i,l){let d="";for(let g=parseInt(t);g<parseInt(i);g++)d+=l.replace(/\[\s*i\s*\]/g,"[ "+g+" ]").replace(/UNROLLED_LOOP_INDEX/g,g);return d}function dne(w){let t="precision "+w.precision+` float;
precision `+w.precision+" int;";return w.precision==="highp"?t+=`
#define HIGH_PRECISION`:w.precision==="mediump"?t+=`
#define MEDIUM_PRECISION`:w.precision==="lowp"&&(t+=`
#define LOW_PRECISION`),t}function Cye(w){let t="SHADOWMAP_TYPE_BASIC";return w.shadowMapType===Fne?t="SHADOWMAP_TYPE_PCF":w.shadowMapType===npe?t="SHADOWMAP_TYPE_PCF_SOFT":w.shadowMapType===r1&&(t="SHADOWMAP_TYPE_VSM"),t}function Aye(w){let t="ENVMAP_TYPE_CUBE";if(w.envMap)switch(w.envMapMode){case m0:case g0:t="ENVMAP_TYPE_CUBE";break;case XM:t="ENVMAP_TYPE_CUBE_UV";break}return t}function Iye(w){let t="ENVMAP_MODE_REFLECTION";if(w.envMap)switch(w.envMapMode){case g0:t="ENVMAP_MODE_REFRACTION";break}return t}function Dye(w){let t="ENVMAP_BLENDING_NONE";if(w.envMap)switch(w.combine){case Une:t="ENVMAP_BLENDING_MULTIPLY";break;case Spe:t="ENVMAP_BLENDING_MIX";break;case Epe:t="ENVMAP_BLENDING_ADD";break}return t}function Oye(w){const t=w.envMapCubeUVHeight;if(t===null)return null;const i=Math.log2(t)-2,l=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,i),7*16)),texelHeight:l,maxMip:i}}function Rye(w,t,i,l){const d=w.getContext(),g=i.defines;let x=i.vertexShader,_=i.fragmentShader;const P=Cye(i),D=Aye(i),B=Iye(i),F=Dye(i),V=Oye(i),X=i.isWebGL2?"":xye(i),ie=wye(g),K=d.createProgram();let O,q,_e=i.glslVersion?"#version "+i.glslVersion+`
`:"";i.isRawShaderMaterial?(O=[ie].filter(i1).join(`
`),O.length>0&&(O+=`
`),q=[X,ie].filter(i1).join(`
`),q.length>0&&(q+=`
`)):(O=[dne(i),"#define SHADER_NAME "+i.shaderName,ie,i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.supportsVertexTextures?"#define VERTEX_TEXTURES":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+B:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.displacementMap&&i.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&i.flatShading===!1?"#define USE_MORPHNORMALS":"",i.morphColors&&i.isWebGL2?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0&&i.isWebGL2?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+P:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(i1).join(`
`),q=[X,dne(i),"#define SHADER_NAME "+i.shaderName,ie,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+D:"",i.envMap?"#define "+B:"",i.envMap?"#define "+F:"",V?"#define CUBEUV_TEXEL_WIDTH "+V.texelWidth:"",V?"#define CUBEUV_TEXEL_HEIGHT "+V.texelHeight:"",V?"#define CUBEUV_MAX_MIP "+V.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMap&&i.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",i.normalMap&&i.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularIntensityMap?"#define USE_SPECULARINTENSITYMAP":"",i.specularColorMap?"#define USE_SPECULARCOLORMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEENCOLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEENROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.vertexTangents?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUvs?"#define USE_UV":"",i.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+P:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.logarithmicDepthBuffer&&i.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==qu?"#define TONE_MAPPING":"",i.toneMapping!==qu?Wn.tonemapping_pars_fragment:"",i.toneMapping!==qu?_ye("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",Wn.encodings_pars_fragment,bye("linearToOutputTexel",i.outputEncoding),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"",`
`].filter(i1).join(`
`)),x=gL(x),x=lne(x,i),x=une(x,i),_=gL(_),_=lne(_,i),_=une(_,i),x=cne(x),_=cne(_),i.isWebGL2&&i.isRawShaderMaterial!==!0&&(_e=`#version 300 es
`,O=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+O,q=["#define varying in",i.glslVersion===Rte?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===Rte?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+q);const z=_e+O+x,le=_e+q+_,Ee=ane(d,35633,z),je=ane(d,35632,le);if(d.attachShader(K,Ee),d.attachShader(K,je),i.index0AttributeName!==void 0?d.bindAttribLocation(K,0,i.index0AttributeName):i.morphTargets===!0&&d.bindAttribLocation(K,0,"position"),d.linkProgram(K),w.debug.checkShaderErrors){const Pe=d.getProgramInfoLog(K).trim(),Q=d.getShaderInfoLog(Ee).trim(),Je=d.getShaderInfoLog(je).trim();let Ut=!0,Dt=!0;if(d.getProgramParameter(K,35714)===!1){Ut=!1;const et=sne(d,Ee,"vertex"),be=sne(d,je,"fragment");console.error("THREE.WebGLProgram: Shader Error "+d.getError()+" - VALIDATE_STATUS "+d.getProgramParameter(K,35715)+`

Program Info Log: `+Pe+`
`+et+`
`+be)}else Pe!==""?console.warn("THREE.WebGLProgram: Program Info Log:",Pe):(Q===""||Je==="")&&(Dt=!1);Dt&&(this.diagnostics={runnable:Ut,programLog:Pe,vertexShader:{log:Q,prefix:O},fragmentShader:{log:Je,prefix:q}})}d.deleteShader(Ee),d.deleteShader(je);let te;this.getUniforms=function(){return te===void 0&&(te=new WM(d,K)),te};let me;return this.getAttributes=function(){return me===void 0&&(me=Sye(d,K)),me},this.destroy=function(){l.releaseStatesOfProgram(this),d.deleteProgram(K),this.program=void 0},this.name=i.shaderName,this.id=gye++,this.cacheKey=t,this.usedTimes=1,this.program=K,this.vertexShader=Ee,this.fragmentShader=je,this}let Lye=0;class zye{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const i=t.vertexShader,l=t.fragmentShader,d=this._getShaderStage(i),g=this._getShaderStage(l),x=this._getShaderCacheForMaterial(t);return x.has(d)===!1&&(x.add(d),d.usedTimes++),x.has(g)===!1&&(x.add(g),g.usedTimes++),this}remove(t){const i=this.materialCache.get(t);for(const l of i)l.usedTimes--,l.usedTimes===0&&this.shaderCache.delete(l.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const i=this.materialCache;return i.has(t)===!1&&i.set(t,new Set),i.get(t)}_getShaderStage(t){const i=this.shaderCache;if(i.has(t)===!1){const l=new Nye(t);i.set(t,l)}return i.get(t)}}class Nye{constructor(t){this.id=Lye++,this.code=t,this.usedTimes=0}}function Fye(w,t,i,l,d,g,x){const _=new Jne,P=new zye,D=[],B=d.isWebGL2,F=d.logarithmicDepthBuffer,V=d.vertexTextures;let X=d.precision;const ie={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function K(me,Pe,Q,Je,Ut){const Dt=Je.fog,et=Ut.geometry,be=me.isMeshStandardMaterial?Je.environment:null,tt=(me.isMeshStandardMaterial?i:t).get(me.envMap||be),He=!!tt&&tt.mapping===XM?tt.image.height:null,yt=ie[me.type];me.precision!==null&&(X=d.getMaxPrecision(me.precision),X!==me.precision&&console.warn("THREE.WebGLProgram.getParameters:",me.precision,"not supported, using",X,"instead."));const dt=et.morphAttributes.position||et.morphAttributes.normal||et.morphAttributes.color,vt=dt!==void 0?dt.length:0;let Lt=0;et.morphAttributes.position!==void 0&&(Lt=1),et.morphAttributes.normal!==void 0&&(Lt=2),et.morphAttributes.color!==void 0&&(Lt=3);let Et,Ot,Yt,Qt;if(yt){const On=Ol[yt];Et=On.vertexShader,Ot=On.fragmentShader}else Et=me.vertexShader,Ot=me.fragmentShader,P.update(me),Yt=P.getVertexShaderID(me),Qt=P.getFragmentShaderID(me);const mt=w.getRenderTarget(),Jn=me.alphaTest>0,Dn=me.clearcoat>0,wn=me.iridescence>0;return{isWebGL2:B,shaderID:yt,shaderName:me.type,vertexShader:Et,fragmentShader:Ot,defines:me.defines,customVertexShaderID:Yt,customFragmentShaderID:Qt,isRawShaderMaterial:me.isRawShaderMaterial===!0,glslVersion:me.glslVersion,precision:X,instancing:Ut.isInstancedMesh===!0,instancingColor:Ut.isInstancedMesh===!0&&Ut.instanceColor!==null,supportsVertexTextures:V,outputEncoding:mt===null?w.outputEncoding:mt.isXRRenderTarget===!0?mt.texture.encoding:qh,map:!!me.map,matcap:!!me.matcap,envMap:!!tt,envMapMode:tt&&tt.mapping,envMapCubeUVHeight:He,lightMap:!!me.lightMap,aoMap:!!me.aoMap,emissiveMap:!!me.emissiveMap,bumpMap:!!me.bumpMap,normalMap:!!me.normalMap,objectSpaceNormalMap:me.normalMapType===Zpe,tangentSpaceNormalMap:me.normalMapType===TL,decodeVideoTexture:!!me.map&&me.map.isVideoTexture===!0&&me.map.encoding===gr,clearcoat:Dn,clearcoatMap:Dn&&!!me.clearcoatMap,clearcoatRoughnessMap:Dn&&!!me.clearcoatRoughnessMap,clearcoatNormalMap:Dn&&!!me.clearcoatNormalMap,iridescence:wn,iridescenceMap:wn&&!!me.iridescenceMap,iridescenceThicknessMap:wn&&!!me.iridescenceThicknessMap,displacementMap:!!me.displacementMap,roughnessMap:!!me.roughnessMap,metalnessMap:!!me.metalnessMap,specularMap:!!me.specularMap,specularIntensityMap:!!me.specularIntensityMap,specularColorMap:!!me.specularColorMap,opaque:me.transparent===!1&&me.blending===f0,alphaMap:!!me.alphaMap,alphaTest:Jn,gradientMap:!!me.gradientMap,sheen:me.sheen>0,sheenColorMap:!!me.sheenColorMap,sheenRoughnessMap:!!me.sheenRoughnessMap,transmission:me.transmission>0,transmissionMap:!!me.transmissionMap,thicknessMap:!!me.thicknessMap,combine:me.combine,vertexTangents:!!me.normalMap&&!!et.attributes.tangent,vertexColors:me.vertexColors,vertexAlphas:me.vertexColors===!0&&!!et.attributes.color&&et.attributes.color.itemSize===4,vertexUvs:!!me.map||!!me.bumpMap||!!me.normalMap||!!me.specularMap||!!me.alphaMap||!!me.emissiveMap||!!me.roughnessMap||!!me.metalnessMap||!!me.clearcoatMap||!!me.clearcoatRoughnessMap||!!me.clearcoatNormalMap||!!me.iridescenceMap||!!me.iridescenceThicknessMap||!!me.displacementMap||!!me.transmissionMap||!!me.thicknessMap||!!me.specularIntensityMap||!!me.specularColorMap||!!me.sheenColorMap||!!me.sheenRoughnessMap,uvsVertexOnly:!(!!me.map||!!me.bumpMap||!!me.normalMap||!!me.specularMap||!!me.alphaMap||!!me.emissiveMap||!!me.roughnessMap||!!me.metalnessMap||!!me.clearcoatNormalMap||!!me.iridescenceMap||!!me.iridescenceThicknessMap||me.transmission>0||!!me.transmissionMap||!!me.thicknessMap||!!me.specularIntensityMap||!!me.specularColorMap||me.sheen>0||!!me.sheenColorMap||!!me.sheenRoughnessMap)&&!!me.displacementMap,fog:!!Dt,useFog:me.fog===!0,fogExp2:Dt&&Dt.isFogExp2,flatShading:!!me.flatShading,sizeAttenuation:me.sizeAttenuation,logarithmicDepthBuffer:F,skinning:Ut.isSkinnedMesh===!0,morphTargets:et.morphAttributes.position!==void 0,morphNormals:et.morphAttributes.normal!==void 0,morphColors:et.morphAttributes.color!==void 0,morphTargetsCount:vt,morphTextureStride:Lt,numDirLights:Pe.directional.length,numPointLights:Pe.point.length,numSpotLights:Pe.spot.length,numRectAreaLights:Pe.rectArea.length,numHemiLights:Pe.hemi.length,numDirLightShadows:Pe.directionalShadowMap.length,numPointLightShadows:Pe.pointShadowMap.length,numSpotLightShadows:Pe.spotShadowMap.length,numClippingPlanes:x.numPlanes,numClipIntersection:x.numIntersection,dithering:me.dithering,shadowMapEnabled:w.shadowMap.enabled&&Q.length>0,shadowMapType:w.shadowMap.type,toneMapping:me.toneMapped?w.toneMapping:qu,physicallyCorrectLights:w.physicallyCorrectLights,premultipliedAlpha:me.premultipliedAlpha,doubleSided:me.side===Gh,flipSided:me.side===Vs,useDepthPacking:!!me.depthPacking,depthPacking:me.depthPacking||0,index0AttributeName:me.index0AttributeName,extensionDerivatives:me.extensions&&me.extensions.derivatives,extensionFragDepth:me.extensions&&me.extensions.fragDepth,extensionDrawBuffers:me.extensions&&me.extensions.drawBuffers,extensionShaderTextureLOD:me.extensions&&me.extensions.shaderTextureLOD,rendererExtensionFragDepth:B||l.has("EXT_frag_depth"),rendererExtensionDrawBuffers:B||l.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:B||l.has("EXT_shader_texture_lod"),customProgramCacheKey:me.customProgramCacheKey()}}function O(me){const Pe=[];if(me.shaderID?Pe.push(me.shaderID):(Pe.push(me.customVertexShaderID),Pe.push(me.customFragmentShaderID)),me.defines!==void 0)for(const Q in me.defines)Pe.push(Q),Pe.push(me.defines[Q]);return me.isRawShaderMaterial===!1&&(q(Pe,me),_e(Pe,me),Pe.push(w.outputEncoding)),Pe.push(me.customProgramCacheKey),Pe.join()}function q(me,Pe){me.push(Pe.precision),me.push(Pe.outputEncoding),me.push(Pe.envMapMode),me.push(Pe.envMapCubeUVHeight),me.push(Pe.combine),me.push(Pe.vertexUvs),me.push(Pe.fogExp2),me.push(Pe.sizeAttenuation),me.push(Pe.morphTargetsCount),me.push(Pe.morphAttributeCount),me.push(Pe.numDirLights),me.push(Pe.numPointLights),me.push(Pe.numSpotLights),me.push(Pe.numHemiLights),me.push(Pe.numRectAreaLights),me.push(Pe.numDirLightShadows),me.push(Pe.numPointLightShadows),me.push(Pe.numSpotLightShadows),me.push(Pe.shadowMapType),me.push(Pe.toneMapping),me.push(Pe.numClippingPlanes),me.push(Pe.numClipIntersection),me.push(Pe.depthPacking)}function _e(me,Pe){_.disableAll(),Pe.isWebGL2&&_.enable(0),Pe.supportsVertexTextures&&_.enable(1),Pe.instancing&&_.enable(2),Pe.instancingColor&&_.enable(3),Pe.map&&_.enable(4),Pe.matcap&&_.enable(5),Pe.envMap&&_.enable(6),Pe.lightMap&&_.enable(7),Pe.aoMap&&_.enable(8),Pe.emissiveMap&&_.enable(9),Pe.bumpMap&&_.enable(10),Pe.normalMap&&_.enable(11),Pe.objectSpaceNormalMap&&_.enable(12),Pe.tangentSpaceNormalMap&&_.enable(13),Pe.clearcoat&&_.enable(14),Pe.clearcoatMap&&_.enable(15),Pe.clearcoatRoughnessMap&&_.enable(16),Pe.clearcoatNormalMap&&_.enable(17),Pe.iridescence&&_.enable(18),Pe.iridescenceMap&&_.enable(19),Pe.iridescenceThicknessMap&&_.enable(20),Pe.displacementMap&&_.enable(21),Pe.specularMap&&_.enable(22),Pe.roughnessMap&&_.enable(23),Pe.metalnessMap&&_.enable(24),Pe.gradientMap&&_.enable(25),Pe.alphaMap&&_.enable(26),Pe.alphaTest&&_.enable(27),Pe.vertexColors&&_.enable(28),Pe.vertexAlphas&&_.enable(29),Pe.vertexUvs&&_.enable(30),Pe.vertexTangents&&_.enable(31),Pe.uvsVertexOnly&&_.enable(32),Pe.fog&&_.enable(33),me.push(_.mask),_.disableAll(),Pe.useFog&&_.enable(0),Pe.flatShading&&_.enable(1),Pe.logarithmicDepthBuffer&&_.enable(2),Pe.skinning&&_.enable(3),Pe.morphTargets&&_.enable(4),Pe.morphNormals&&_.enable(5),Pe.morphColors&&_.enable(6),Pe.premultipliedAlpha&&_.enable(7),Pe.shadowMapEnabled&&_.enable(8),Pe.physicallyCorrectLights&&_.enable(9),Pe.doubleSided&&_.enable(10),Pe.flipSided&&_.enable(11),Pe.useDepthPacking&&_.enable(12),Pe.dithering&&_.enable(13),Pe.specularIntensityMap&&_.enable(14),Pe.specularColorMap&&_.enable(15),Pe.transmission&&_.enable(16),Pe.transmissionMap&&_.enable(17),Pe.thicknessMap&&_.enable(18),Pe.sheen&&_.enable(19),Pe.sheenColorMap&&_.enable(20),Pe.sheenRoughnessMap&&_.enable(21),Pe.decodeVideoTexture&&_.enable(22),Pe.opaque&&_.enable(23),me.push(_.mask)}function z(me){const Pe=ie[me.type];let Q;if(Pe){const Je=Ol[Pe];Q=Tme.clone(Je.uniforms)}else Q=me.uniforms;return Q}function le(me,Pe){let Q;for(let Je=0,Ut=D.length;Je<Ut;Je++){const Dt=D[Je];if(Dt.cacheKey===Pe){Q=Dt,++Q.usedTimes;break}}return Q===void 0&&(Q=new Rye(w,Pe,me,g),D.push(Q)),Q}function Ee(me){if(--me.usedTimes===0){const Pe=D.indexOf(me);D[Pe]=D[D.length-1],D.pop(),me.destroy()}}function je(me){P.remove(me)}function te(){P.dispose()}return{getParameters:K,getProgramCacheKey:O,getUniforms:z,acquireProgram:le,releaseProgram:Ee,releaseShaderCache:je,programs:D,dispose:te}}function Bye(){let w=new WeakMap;function t(g){let x=w.get(g);return x===void 0&&(x={},w.set(g,x)),x}function i(g){w.delete(g)}function l(g,x,_){w.get(g)[x]=_}function d(){w=new WeakMap}return{get:t,remove:i,update:l,dispose:d}}function jye(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.material.id!==t.material.id?w.material.id-t.material.id:w.z!==t.z?w.z-t.z:w.id-t.id}function fne(w,t){return w.groupOrder!==t.groupOrder?w.groupOrder-t.groupOrder:w.renderOrder!==t.renderOrder?w.renderOrder-t.renderOrder:w.z!==t.z?t.z-w.z:w.id-t.id}function hne(){const w=[];let t=0;const i=[],l=[],d=[];function g(){t=0,i.length=0,l.length=0,d.length=0}function x(F,V,X,ie,K,O){let q=w[t];return q===void 0?(q={id:F.id,object:F,geometry:V,material:X,groupOrder:ie,renderOrder:F.renderOrder,z:K,group:O},w[t]=q):(q.id=F.id,q.object=F,q.geometry=V,q.material=X,q.groupOrder=ie,q.renderOrder=F.renderOrder,q.z=K,q.group=O),t++,q}function _(F,V,X,ie,K,O){const q=x(F,V,X,ie,K,O);X.transmission>0?l.push(q):X.transparent===!0?d.push(q):i.push(q)}function P(F,V,X,ie,K,O){const q=x(F,V,X,ie,K,O);X.transmission>0?l.unshift(q):X.transparent===!0?d.unshift(q):i.unshift(q)}function D(F,V){i.length>1&&i.sort(F||jye),l.length>1&&l.sort(V||fne),d.length>1&&d.sort(V||fne)}function B(){for(let F=t,V=w.length;F<V;F++){const X=w[F];if(X.id===null)break;X.id=null,X.object=null,X.geometry=null,X.material=null,X.group=null}}return{opaque:i,transmissive:l,transparent:d,init:g,push:_,unshift:P,finish:B,sort:D}}function Uye(){let w=new WeakMap;function t(l,d){let g;return w.has(l)===!1?(g=new hne,w.set(l,[g])):d>=w.get(l).length?(g=new hne,w.get(l).push(g)):g=w.get(l)[d],g}function i(){w=new WeakMap}return{get:t,dispose:i}}function Vye(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let i;switch(t.type){case"DirectionalLight":i={direction:new Ve,color:new zn};break;case"SpotLight":i={position:new Ve,direction:new Ve,color:new zn,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new Ve,color:new zn,distance:0,decay:0};break;case"HemisphereLight":i={direction:new Ve,skyColor:new zn,groundColor:new zn};break;case"RectAreaLight":i={color:new zn,position:new Ve,halfWidth:new Ve,halfHeight:new Ve};break}return w[t.id]=i,i}}}function Hye(){const w={};return{get:function(t){if(w[t.id]!==void 0)return w[t.id];let i;switch(t.type){case"DirectionalLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er};break;case"SpotLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er};break;case"PointLight":i={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er,shadowCameraNear:1,shadowCameraFar:1e3};break}return w[t.id]=i,i}}}let Gye=0;function Wye(w,t){return(t.castShadow?1:0)-(w.castShadow?1:0)}function qye(w,t){const i=new Vye,l=Hye(),d={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let B=0;B<9;B++)d.probe.push(new Ve);const g=new Ve,x=new lr,_=new lr;function P(B,F){let V=0,X=0,ie=0;for(let Pe=0;Pe<9;Pe++)d.probe[Pe].set(0,0,0);let K=0,O=0,q=0,_e=0,z=0,le=0,Ee=0,je=0;B.sort(Wye);const te=F!==!0?Math.PI:1;for(let Pe=0,Q=B.length;Pe<Q;Pe++){const Je=B[Pe],Ut=Je.color,Dt=Je.intensity,et=Je.distance,be=Je.shadow&&Je.shadow.map?Je.shadow.map.texture:null;if(Je.isAmbientLight)V+=Ut.r*Dt*te,X+=Ut.g*Dt*te,ie+=Ut.b*Dt*te;else if(Je.isLightProbe)for(let tt=0;tt<9;tt++)d.probe[tt].addScaledVector(Je.sh.coefficients[tt],Dt);else if(Je.isDirectionalLight){const tt=i.get(Je);if(tt.color.copy(Je.color).multiplyScalar(Je.intensity*te),Je.castShadow){const He=Je.shadow,yt=l.get(Je);yt.shadowBias=He.bias,yt.shadowNormalBias=He.normalBias,yt.shadowRadius=He.radius,yt.shadowMapSize=He.mapSize,d.directionalShadow[K]=yt,d.directionalShadowMap[K]=be,d.directionalShadowMatrix[K]=Je.shadow.matrix,le++}d.directional[K]=tt,K++}else if(Je.isSpotLight){const tt=i.get(Je);if(tt.position.setFromMatrixPosition(Je.matrixWorld),tt.color.copy(Ut).multiplyScalar(Dt*te),tt.distance=et,tt.coneCos=Math.cos(Je.angle),tt.penumbraCos=Math.cos(Je.angle*(1-Je.penumbra)),tt.decay=Je.decay,Je.castShadow){const He=Je.shadow,yt=l.get(Je);yt.shadowBias=He.bias,yt.shadowNormalBias=He.normalBias,yt.shadowRadius=He.radius,yt.shadowMapSize=He.mapSize,d.spotShadow[q]=yt,d.spotShadowMap[q]=be,d.spotShadowMatrix[q]=Je.shadow.matrix,je++}d.spot[q]=tt,q++}else if(Je.isRectAreaLight){const tt=i.get(Je);tt.color.copy(Ut).multiplyScalar(Dt),tt.halfWidth.set(Je.width*.5,0,0),tt.halfHeight.set(0,Je.height*.5,0),d.rectArea[_e]=tt,_e++}else if(Je.isPointLight){const tt=i.get(Je);if(tt.color.copy(Je.color).multiplyScalar(Je.intensity*te),tt.distance=Je.distance,tt.decay=Je.decay,Je.castShadow){const He=Je.shadow,yt=l.get(Je);yt.shadowBias=He.bias,yt.shadowNormalBias=He.normalBias,yt.shadowRadius=He.radius,yt.shadowMapSize=He.mapSize,yt.shadowCameraNear=He.camera.near,yt.shadowCameraFar=He.camera.far,d.pointShadow[O]=yt,d.pointShadowMap[O]=be,d.pointShadowMatrix[O]=Je.shadow.matrix,Ee++}d.point[O]=tt,O++}else if(Je.isHemisphereLight){const tt=i.get(Je);tt.skyColor.copy(Je.color).multiplyScalar(Dt*te),tt.groundColor.copy(Je.groundColor).multiplyScalar(Dt*te),d.hemi[z]=tt,z++}}_e>0&&(t.isWebGL2||w.has("OES_texture_float_linear")===!0?(d.rectAreaLTC1=Wt.LTC_FLOAT_1,d.rectAreaLTC2=Wt.LTC_FLOAT_2):w.has("OES_texture_half_float_linear")===!0?(d.rectAreaLTC1=Wt.LTC_HALF_1,d.rectAreaLTC2=Wt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),d.ambient[0]=V,d.ambient[1]=X,d.ambient[2]=ie;const me=d.hash;(me.directionalLength!==K||me.pointLength!==O||me.spotLength!==q||me.rectAreaLength!==_e||me.hemiLength!==z||me.numDirectionalShadows!==le||me.numPointShadows!==Ee||me.numSpotShadows!==je)&&(d.directional.length=K,d.spot.length=q,d.rectArea.length=_e,d.point.length=O,d.hemi.length=z,d.directionalShadow.length=le,d.directionalShadowMap.length=le,d.pointShadow.length=Ee,d.pointShadowMap.length=Ee,d.spotShadow.length=je,d.spotShadowMap.length=je,d.directionalShadowMatrix.length=le,d.pointShadowMatrix.length=Ee,d.spotShadowMatrix.length=je,me.directionalLength=K,me.pointLength=O,me.spotLength=q,me.rectAreaLength=_e,me.hemiLength=z,me.numDirectionalShadows=le,me.numPointShadows=Ee,me.numSpotShadows=je,d.version=Gye++)}function D(B,F){let V=0,X=0,ie=0,K=0,O=0;const q=F.matrixWorldInverse;for(let _e=0,z=B.length;_e<z;_e++){const le=B[_e];if(le.isDirectionalLight){const Ee=d.directional[V];Ee.direction.setFromMatrixPosition(le.matrixWorld),g.setFromMatrixPosition(le.target.matrixWorld),Ee.direction.sub(g),Ee.direction.transformDirection(q),V++}else if(le.isSpotLight){const Ee=d.spot[ie];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(q),Ee.direction.setFromMatrixPosition(le.matrixWorld),g.setFromMatrixPosition(le.target.matrixWorld),Ee.direction.sub(g),Ee.direction.transformDirection(q),ie++}else if(le.isRectAreaLight){const Ee=d.rectArea[K];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(q),_.identity(),x.copy(le.matrixWorld),x.premultiply(q),_.extractRotation(x),Ee.halfWidth.set(le.width*.5,0,0),Ee.halfHeight.set(0,le.height*.5,0),Ee.halfWidth.applyMatrix4(_),Ee.halfHeight.applyMatrix4(_),K++}else if(le.isPointLight){const Ee=d.point[X];Ee.position.setFromMatrixPosition(le.matrixWorld),Ee.position.applyMatrix4(q),X++}else if(le.isHemisphereLight){const Ee=d.hemi[O];Ee.direction.setFromMatrixPosition(le.matrixWorld),Ee.direction.transformDirection(q),O++}}}return{setup:P,setupView:D,state:d}}function pne(w,t){const i=new qye(w,t),l=[],d=[];function g(){l.length=0,d.length=0}function x(F){l.push(F)}function _(F){d.push(F)}function P(F){i.setup(l,F)}function D(F){i.setupView(l,F)}return{init:g,state:{lightsArray:l,shadowsArray:d,lights:i},setupLights:P,setupLightsView:D,pushLight:x,pushShadow:_}}function Kye(w,t){let i=new WeakMap;function l(g,x=0){let _;return i.has(g)===!1?(_=new pne(w,t),i.set(g,[_])):x>=i.get(g).length?(_=new pne(w,t),i.get(g).push(_)):_=i.get(g)[x],_}function d(){i=new WeakMap}return{get:l,dispose:d}}class Xye extends Ll{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Xpe,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class $ye extends Ll{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.referencePosition=new Ve,this.nearDistance=1,this.farDistance=1e3,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}const Zye=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Yye=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function Jye(w,t,i){let l=new CL;const d=new er,g=new er,x=new xr,_=new Xye({depthPacking:$pe}),P=new $ye,D={},B=i.maxTextureSize,F={0:Vs,1:p0,2:Gh},V=new Xh({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new er},radius:{value:4}},vertexShader:Zye,fragmentShader:Yye}),X=V.clone();X.defines.HORIZONTAL_PASS=1;const ie=new zl;ie.setAttribute("position",new va(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const K=new Rl(ie,V),O=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fne,this.render=function(le,Ee,je){if(O.enabled===!1||O.autoUpdate===!1&&O.needsUpdate===!1||le.length===0)return;const te=w.getRenderTarget(),me=w.getActiveCubeFace(),Pe=w.getActiveMipmapLevel(),Q=w.state;Q.setBlending(Ud),Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);for(let Je=0,Ut=le.length;Je<Ut;Je++){const Dt=le[Je],et=Dt.shadow;if(et===void 0){console.warn("THREE.WebGLShadowMap:",Dt,"has no shadow.");continue}if(et.autoUpdate===!1&&et.needsUpdate===!1)continue;d.copy(et.mapSize);const be=et.getFrameExtents();if(d.multiply(be),g.copy(et.mapSize),(d.x>B||d.y>B)&&(d.x>B&&(g.x=Math.floor(B/be.x),d.x=g.x*be.x,et.mapSize.x=g.x),d.y>B&&(g.y=Math.floor(B/be.y),d.y=g.y*be.y,et.mapSize.y=g.y)),et.map===null){const He=this.type!==r1?{minFilter:Ji,magFilter:Ji}:{};et.map=new Kh(d.x,d.y,He),et.map.texture.name=Dt.name+".shadowMap",et.camera.updateProjectionMatrix()}w.setRenderTarget(et.map),w.clear();const tt=et.getViewportCount();for(let He=0;He<tt;He++){const yt=et.getViewport(He);x.set(g.x*yt.x,g.y*yt.y,g.x*yt.z,g.y*yt.w),Q.viewport(x),et.updateMatrices(Dt,He),l=et.getFrustum(),z(Ee,je,et.camera,Dt,this.type)}et.isPointLightShadow!==!0&&this.type===r1&&q(et,je),et.needsUpdate=!1}O.needsUpdate=!1,w.setRenderTarget(te,me,Pe)};function q(le,Ee){const je=t.update(K);V.defines.VSM_SAMPLES!==le.blurSamples&&(V.defines.VSM_SAMPLES=le.blurSamples,X.defines.VSM_SAMPLES=le.blurSamples,V.needsUpdate=!0,X.needsUpdate=!0),le.mapPass===null&&(le.mapPass=new Kh(d.x,d.y)),V.uniforms.shadow_pass.value=le.map.texture,V.uniforms.resolution.value=le.mapSize,V.uniforms.radius.value=le.radius,w.setRenderTarget(le.mapPass),w.clear(),w.renderBufferDirect(Ee,null,je,V,K,null),X.uniforms.shadow_pass.value=le.mapPass.texture,X.uniforms.resolution.value=le.mapSize,X.uniforms.radius.value=le.radius,w.setRenderTarget(le.map),w.clear(),w.renderBufferDirect(Ee,null,je,X,K,null)}function _e(le,Ee,je,te,me,Pe){let Q=null;const Je=je.isPointLight===!0?le.customDistanceMaterial:le.customDepthMaterial;if(Je!==void 0?Q=Je:Q=je.isPointLight===!0?P:_,w.localClippingEnabled&&Ee.clipShadows===!0&&Array.isArray(Ee.clippingPlanes)&&Ee.clippingPlanes.length!==0||Ee.displacementMap&&Ee.displacementScale!==0||Ee.alphaMap&&Ee.alphaTest>0){const Ut=Q.uuid,Dt=Ee.uuid;let et=D[Ut];et===void 0&&(et={},D[Ut]=et);let be=et[Dt];be===void 0&&(be=Q.clone(),et[Dt]=be),Q=be}return Q.visible=Ee.visible,Q.wireframe=Ee.wireframe,Pe===r1?Q.side=Ee.shadowSide!==null?Ee.shadowSide:Ee.side:Q.side=Ee.shadowSide!==null?Ee.shadowSide:F[Ee.side],Q.alphaMap=Ee.alphaMap,Q.alphaTest=Ee.alphaTest,Q.clipShadows=Ee.clipShadows,Q.clippingPlanes=Ee.clippingPlanes,Q.clipIntersection=Ee.clipIntersection,Q.displacementMap=Ee.displacementMap,Q.displacementScale=Ee.displacementScale,Q.displacementBias=Ee.displacementBias,Q.wireframeLinewidth=Ee.wireframeLinewidth,Q.linewidth=Ee.linewidth,je.isPointLight===!0&&Q.isMeshDistanceMaterial===!0&&(Q.referencePosition.setFromMatrixPosition(je.matrixWorld),Q.nearDistance=te,Q.farDistance=me),Q}function z(le,Ee,je,te,me){if(le.visible===!1)return;if(le.layers.test(Ee.layers)&&(le.isMesh||le.isLine||le.isPoints)&&(le.castShadow||le.receiveShadow&&me===r1)&&(!le.frustumCulled||l.intersectsObject(le))){le.modelViewMatrix.multiplyMatrices(je.matrixWorldInverse,le.matrixWorld);const Je=t.update(le),Ut=le.material;if(Array.isArray(Ut)){const Dt=Je.groups;for(let et=0,be=Dt.length;et<be;et++){const tt=Dt[et],He=Ut[tt.materialIndex];if(He&&He.visible){const yt=_e(le,He,te,je.near,je.far,me);w.renderBufferDirect(je,null,Je,yt,le,tt)}}}else if(Ut.visible){const Dt=_e(le,Ut,te,je.near,je.far,me);w.renderBufferDirect(je,null,Je,Dt,le,null)}}const Q=le.children;for(let Je=0,Ut=Q.length;Je<Ut;Je++)z(Q[Je],Ee,je,te,me)}}function Qye(w,t,i){const l=i.isWebGL2;function d(){let De=!1;const Vt=new xr;let Bt=null;const pn=new xr(0,0,0,0);return{setMask:function($t){Bt!==$t&&!De&&(w.colorMask($t,$t,$t,$t),Bt=$t)},setLocked:function($t){De=$t},setClear:function($t,cn,Rt,fn,Rn){Rn===!0&&($t*=fn,cn*=fn,Rt*=fn),Vt.set($t,cn,Rt,fn),pn.equals(Vt)===!1&&(w.clearColor($t,cn,Rt,fn),pn.copy(Vt))},reset:function(){De=!1,Bt=null,pn.set(-1,0,0,0)}}}function g(){let De=!1,Vt=null,Bt=null,pn=null;return{setTest:function($t){$t?Qt(2929):mt(2929)},setMask:function($t){Vt!==$t&&!De&&(w.depthMask($t),Vt=$t)},setFunc:function($t){if(Bt!==$t){if($t)switch($t){case gpe:w.depthFunc(512);break;case vpe:w.depthFunc(519);break;case ype:w.depthFunc(513);break;case lL:w.depthFunc(515);break;case bpe:w.depthFunc(514);break;case _pe:w.depthFunc(518);break;case xpe:w.depthFunc(516);break;case wpe:w.depthFunc(517);break;default:w.depthFunc(515)}else w.depthFunc(515);Bt=$t}},setLocked:function($t){De=$t},setClear:function($t){pn!==$t&&(w.clearDepth($t),pn=$t)},reset:function(){De=!1,Vt=null,Bt=null,pn=null}}}function x(){let De=!1,Vt=null,Bt=null,pn=null,$t=null,cn=null,Rt=null,fn=null,Rn=null;return{setTest:function(Bn){De||(Bn?Qt(2960):mt(2960))},setMask:function(Bn){Vt!==Bn&&!De&&(w.stencilMask(Bn),Vt=Bn)},setFunc:function(Bn,Jr,zi){(Bt!==Bn||pn!==Jr||$t!==zi)&&(w.stencilFunc(Bn,Jr,zi),Bt=Bn,pn=Jr,$t=zi)},setOp:function(Bn,Jr,zi){(cn!==Bn||Rt!==Jr||fn!==zi)&&(w.stencilOp(Bn,Jr,zi),cn=Bn,Rt=Jr,fn=zi)},setLocked:function(Bn){De=Bn},setClear:function(Bn){Rn!==Bn&&(w.clearStencil(Bn),Rn=Bn)},reset:function(){De=!1,Vt=null,Bt=null,pn=null,$t=null,cn=null,Rt=null,fn=null,Rn=null}}}const _=new d,P=new g,D=new x;let B={},F={},V=new WeakMap,X=[],ie=null,K=!1,O=null,q=null,_e=null,z=null,le=null,Ee=null,je=null,te=!1,me=null,Pe=null,Q=null,Je=null,Ut=null;const Dt=w.getParameter(35661);let et=!1,be=0;const tt=w.getParameter(7938);tt.indexOf("WebGL")!==-1?(be=parseFloat(/^WebGL (\d)/.exec(tt)[1]),et=be>=1):tt.indexOf("OpenGL ES")!==-1&&(be=parseFloat(/^OpenGL ES (\d)/.exec(tt)[1]),et=be>=2);let He=null,yt={};const dt=w.getParameter(3088),vt=w.getParameter(2978),Lt=new xr().fromArray(dt),Et=new xr().fromArray(vt);function Ot(De,Vt,Bt){const pn=new Uint8Array(4),$t=w.createTexture();w.bindTexture(De,$t),w.texParameteri(De,10241,9728),w.texParameteri(De,10240,9728);for(let cn=0;cn<Bt;cn++)w.texImage2D(Vt+cn,0,6408,1,1,0,6408,5121,pn);return $t}const Yt={};Yt[3553]=Ot(3553,3553,1),Yt[34067]=Ot(34067,34069,6),_.setClear(0,0,0,1),P.setClear(1),D.setClear(0),Qt(2929),P.setFunc(lL),Br(!1),Yr(ite),Qt(2884),Fn(Ud);function Qt(De){B[De]!==!0&&(w.enable(De),B[De]=!0)}function mt(De){B[De]!==!1&&(w.disable(De),B[De]=!1)}function Jn(De,Vt){return F[De]!==Vt?(w.bindFramebuffer(De,Vt),F[De]=Vt,l&&(De===36009&&(F[36160]=Vt),De===36160&&(F[36009]=Vt)),!0):!1}function Dn(De,Vt){let Bt=X,pn=!1;if(De)if(Bt=V.get(Vt),Bt===void 0&&(Bt=[],V.set(Vt,Bt)),De.isWebGLMultipleRenderTargets){const $t=De.texture;if(Bt.length!==$t.length||Bt[0]!==36064){for(let cn=0,Rt=$t.length;cn<Rt;cn++)Bt[cn]=36064+cn;Bt.length=$t.length,pn=!0}}else Bt[0]!==36064&&(Bt[0]=36064,pn=!0);else Bt[0]!==1029&&(Bt[0]=1029,pn=!0);pn&&(i.isWebGL2?w.drawBuffers(Bt):t.get("WEBGL_draw_buffers").drawBuffersWEBGL(Bt))}function wn(De){return ie!==De?(w.useProgram(De),ie=De,!0):!1}const qt={[c0]:32774,[ope]:32778,[ape]:32779};if(l)qt[lte]=32775,qt[ute]=32776;else{const De=t.get("EXT_blend_minmax");De!==null&&(qt[lte]=De.MIN_EXT,qt[ute]=De.MAX_EXT)}const On={[spe]:0,[lpe]:1,[upe]:768,[Bne]:770,[mpe]:776,[hpe]:774,[dpe]:772,[cpe]:769,[jne]:771,[ppe]:775,[fpe]:773};function Fn(De,Vt,Bt,pn,$t,cn,Rt,fn){if(De===Ud){K===!0&&(mt(3042),K=!1);return}if(K===!1&&(Qt(3042),K=!0),De!==ipe){if(De!==O||fn!==te){if((q!==c0||le!==c0)&&(w.blendEquation(32774),q=c0,le=c0),fn)switch(De){case f0:w.blendFuncSeparate(1,771,1,771);break;case ote:w.blendFunc(1,1);break;case ate:w.blendFuncSeparate(0,769,0,1);break;case ste:w.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",De);break}else switch(De){case f0:w.blendFuncSeparate(770,771,1,771);break;case ote:w.blendFunc(770,1);break;case ate:w.blendFuncSeparate(0,769,0,1);break;case ste:w.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",De);break}_e=null,z=null,Ee=null,je=null,O=De,te=fn}return}$t=$t||Vt,cn=cn||Bt,Rt=Rt||pn,(Vt!==q||$t!==le)&&(w.blendEquationSeparate(qt[Vt],qt[$t]),q=Vt,le=$t),(Bt!==_e||pn!==z||cn!==Ee||Rt!==je)&&(w.blendFuncSeparate(On[Bt],On[pn],On[cn],On[Rt]),_e=Bt,z=pn,Ee=cn,je=Rt),O=De,te=null}function hn(De,Vt){De.side===Gh?mt(2884):Qt(2884);let Bt=De.side===Vs;Vt&&(Bt=!Bt),Br(Bt),De.blending===f0&&De.transparent===!1?Fn(Ud):Fn(De.blending,De.blendEquation,De.blendSrc,De.blendDst,De.blendEquationAlpha,De.blendSrcAlpha,De.blendDstAlpha,De.premultipliedAlpha),P.setFunc(De.depthFunc),P.setTest(De.depthTest),P.setMask(De.depthWrite),_.setMask(De.colorWrite);const pn=De.stencilWrite;D.setTest(pn),pn&&(D.setMask(De.stencilWriteMask),D.setFunc(De.stencilFunc,De.stencilRef,De.stencilFuncMask),D.setOp(De.stencilFail,De.stencilZFail,De.stencilZPass)),wr(De.polygonOffset,De.polygonOffsetFactor,De.polygonOffsetUnits),De.alphaToCoverage===!0?Qt(32926):mt(32926)}function Br(De){me!==De&&(De?w.frontFace(2304):w.frontFace(2305),me=De)}function Yr(De){De!==epe?(Qt(2884),De!==Pe&&(De===ite?w.cullFace(1029):De===tpe?w.cullFace(1028):w.cullFace(1032))):mt(2884),Pe=De}function ai(De){De!==Q&&(et&&w.lineWidth(De),Q=De)}function wr(De,Vt,Bt){De?(Qt(32823),(Je!==Vt||Ut!==Bt)&&(w.polygonOffset(Vt,Bt),Je=Vt,Ut=Bt)):mt(32823)}function $n(De){De?Qt(3089):mt(3089)}function Zn(De){De===void 0&&(De=33984+Dt-1),He!==De&&(w.activeTexture(De),He=De)}function kr(De,Vt){He===null&&Zn();let Bt=yt[He];Bt===void 0&&(Bt={type:void 0,texture:void 0},yt[He]=Bt),(Bt.type!==De||Bt.texture!==Vt)&&(w.bindTexture(De,Vt||Yt[De]),Bt.type=De,Bt.texture=Vt)}function vi(){const De=yt[He];De!==void 0&&De.type!==void 0&&(w.bindTexture(De.type,null),De.type=void 0,De.texture=void 0)}function xe(){try{w.compressedTexImage2D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function he(){try{w.texSubImage2D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function ft(){try{w.texSubImage3D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function zt(){try{w.compressedTexSubImage2D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Nt(){try{w.texStorage2D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Ht(){try{w.texStorage3D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function Sn(){try{w.texImage2D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function ht(){try{w.texImage3D.apply(w,arguments)}catch(De){console.error("THREE.WebGLState:",De)}}function ln(De){Lt.equals(De)===!1&&(w.scissor(De.x,De.y,De.z,De.w),Lt.copy(De))}function Jt(De){Et.equals(De)===!1&&(w.viewport(De.x,De.y,De.z,De.w),Et.copy(De))}function Kt(){w.disable(3042),w.disable(2884),w.disable(2929),w.disable(32823),w.disable(3089),w.disable(2960),w.disable(32926),w.blendEquation(32774),w.blendFunc(1,0),w.blendFuncSeparate(1,0,1,0),w.colorMask(!0,!0,!0,!0),w.clearColor(0,0,0,0),w.depthMask(!0),w.depthFunc(513),w.clearDepth(1),w.stencilMask(4294967295),w.stencilFunc(519,0,4294967295),w.stencilOp(7680,7680,7680),w.clearStencil(0),w.cullFace(1029),w.frontFace(2305),w.polygonOffset(0,0),w.activeTexture(33984),w.bindFramebuffer(36160,null),l===!0&&(w.bindFramebuffer(36009,null),w.bindFramebuffer(36008,null)),w.useProgram(null),w.lineWidth(1),w.scissor(0,0,w.canvas.width,w.canvas.height),w.viewport(0,0,w.canvas.width,w.canvas.height),B={},He=null,yt={},F={},V=new WeakMap,X=[],ie=null,K=!1,O=null,q=null,_e=null,z=null,le=null,Ee=null,je=null,te=!1,me=null,Pe=null,Q=null,Je=null,Ut=null,Lt.set(0,0,w.canvas.width,w.canvas.height),Et.set(0,0,w.canvas.width,w.canvas.height),_.reset(),P.reset(),D.reset()}return{buffers:{color:_,depth:P,stencil:D},enable:Qt,disable:mt,bindFramebuffer:Jn,drawBuffers:Dn,useProgram:wn,setBlending:Fn,setMaterial:hn,setFlipSided:Br,setCullFace:Yr,setLineWidth:ai,setPolygonOffset:wr,setScissorTest:$n,activeTexture:Zn,bindTexture:kr,unbindTexture:vi,compressedTexImage2D:xe,texImage2D:Sn,texImage3D:ht,texStorage2D:Nt,texStorage3D:Ht,texSubImage2D:he,texSubImage3D:ft,compressedTexSubImage2D:zt,scissor:ln,viewport:Jt,reset:Kt}}function ebe(w,t,i,l,d,g,x){const _=d.isWebGL2,P=d.maxTextures,D=d.maxCubemapSize,B=d.maxTextureSize,F=d.maxSamples,V=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,X=/OculusBrowser/g.test(navigator.userAgent),ie=new WeakMap;let K;const O=new WeakMap;let q=!1;try{q=typeof OffscreenCanvas!="undefined"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function _e(xe,he){return q?new OffscreenCanvas(xe,he):c1("canvas")}function z(xe,he,ft,zt){let Nt=1;if((xe.width>zt||xe.height>zt)&&(Nt=zt/Math.max(xe.width,xe.height)),Nt<1||he===!0)if(typeof HTMLImageElement!="undefined"&&xe instanceof HTMLImageElement||typeof HTMLCanvasElement!="undefined"&&xe instanceof HTMLCanvasElement||typeof ImageBitmap!="undefined"&&xe instanceof ImageBitmap){const Ht=he?KM:Math.floor,Sn=Ht(Nt*xe.width),ht=Ht(Nt*xe.height);K===void 0&&(K=_e(Sn,ht));const ln=ft?_e(Sn,ht):K;return ln.width=Sn,ln.height=ht,ln.getContext("2d").drawImage(xe,0,0,Sn,ht),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+xe.width+"x"+xe.height+") to ("+Sn+"x"+ht+")."),ln}else return"data"in xe&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+xe.width+"x"+xe.height+")."),xe;return xe}function le(xe){return mL(xe.width)&&mL(xe.height)}function Ee(xe){return _?!1:xe.wrapS!==$a||xe.wrapT!==$a||xe.minFilter!==Ji&&xe.minFilter!==Zo}function je(xe,he){return xe.generateMipmaps&&he&&xe.minFilter!==Ji&&xe.minFilter!==Zo}function te(xe){w.generateMipmap(xe)}function me(xe,he,ft,zt,Nt=!1){if(_===!1)return he;if(xe!==null){if(w[xe]!==void 0)return w[xe];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+xe+"'")}let Ht=he;return he===6403&&(ft===5126&&(Ht=33326),ft===5131&&(Ht=33325),ft===5121&&(Ht=33321)),he===33319&&(ft===5126&&(Ht=33328),ft===5131&&(Ht=33327),ft===5121&&(Ht=33323)),he===6408&&(ft===5126&&(Ht=34836),ft===5131&&(Ht=34842),ft===5121&&(Ht=zt===gr&&Nt===!1?35907:32856),ft===32819&&(Ht=32854),ft===32820&&(Ht=32855)),(Ht===33325||Ht===33326||Ht===33327||Ht===33328||Ht===34842||Ht===34836)&&t.get("EXT_color_buffer_float"),Ht}function Pe(xe,he,ft){return je(xe,ft)===!0||xe.isFramebufferTexture&&xe.minFilter!==Ji&&xe.minFilter!==Zo?Math.log2(Math.max(he.width,he.height))+1:xe.mipmaps!==void 0&&xe.mipmaps.length>0?xe.mipmaps.length:xe.isCompressedTexture&&Array.isArray(xe.image)?he.mipmaps.length:1}function Q(xe){return xe===Ji||xe===dL||xe===fL?9728:9729}function Je(xe){const he=xe.target;he.removeEventListener("dispose",Je),Dt(he),he.isVideoTexture&&ie.delete(he)}function Ut(xe){const he=xe.target;he.removeEventListener("dispose",Ut),be(he)}function Dt(xe){const he=l.get(xe);if(he.__webglInit===void 0)return;const ft=xe.source,zt=O.get(ft);if(zt){const Nt=zt[he.__cacheKey];Nt.usedTimes--,Nt.usedTimes===0&&et(xe),Object.keys(zt).length===0&&O.delete(ft)}l.remove(xe)}function et(xe){const he=l.get(xe);w.deleteTexture(he.__webglTexture);const ft=xe.source,zt=O.get(ft);delete zt[he.__cacheKey],x.memory.textures--}function be(xe){const he=xe.texture,ft=l.get(xe),zt=l.get(he);if(zt.__webglTexture!==void 0&&(w.deleteTexture(zt.__webglTexture),x.memory.textures--),xe.depthTexture&&xe.depthTexture.dispose(),xe.isWebGLCubeRenderTarget)for(let Nt=0;Nt<6;Nt++)w.deleteFramebuffer(ft.__webglFramebuffer[Nt]),ft.__webglDepthbuffer&&w.deleteRenderbuffer(ft.__webglDepthbuffer[Nt]);else{if(w.deleteFramebuffer(ft.__webglFramebuffer),ft.__webglDepthbuffer&&w.deleteRenderbuffer(ft.__webglDepthbuffer),ft.__webglMultisampledFramebuffer&&w.deleteFramebuffer(ft.__webglMultisampledFramebuffer),ft.__webglColorRenderbuffer)for(let Nt=0;Nt<ft.__webglColorRenderbuffer.length;Nt++)ft.__webglColorRenderbuffer[Nt]&&w.deleteRenderbuffer(ft.__webglColorRenderbuffer[Nt]);ft.__webglDepthRenderbuffer&&w.deleteRenderbuffer(ft.__webglDepthRenderbuffer)}if(xe.isWebGLMultipleRenderTargets)for(let Nt=0,Ht=he.length;Nt<Ht;Nt++){const Sn=l.get(he[Nt]);Sn.__webglTexture&&(w.deleteTexture(Sn.__webglTexture),x.memory.textures--),l.remove(he[Nt])}l.remove(he),l.remove(xe)}let tt=0;function He(){tt=0}function yt(){const xe=tt;return xe>=P&&console.warn("THREE.WebGLTextures: Trying to use "+xe+" texture units while this GPU supports only "+P),tt+=1,xe}function dt(xe){const he=[];return he.push(xe.wrapS),he.push(xe.wrapT),he.push(xe.magFilter),he.push(xe.minFilter),he.push(xe.anisotropy),he.push(xe.internalFormat),he.push(xe.format),he.push(xe.type),he.push(xe.generateMipmaps),he.push(xe.premultiplyAlpha),he.push(xe.flipY),he.push(xe.unpackAlignment),he.push(xe.encoding),he.join()}function vt(xe,he){const ft=l.get(xe);if(xe.isVideoTexture&&kr(xe),xe.isRenderTargetTexture===!1&&xe.version>0&&ft.__version!==xe.version){const zt=xe.image;if(zt===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(zt.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Dn(ft,xe,he);return}}i.activeTexture(33984+he),i.bindTexture(3553,ft.__webglTexture)}function Lt(xe,he){const ft=l.get(xe);if(xe.version>0&&ft.__version!==xe.version){Dn(ft,xe,he);return}i.activeTexture(33984+he),i.bindTexture(35866,ft.__webglTexture)}function Et(xe,he){const ft=l.get(xe);if(xe.version>0&&ft.__version!==xe.version){Dn(ft,xe,he);return}i.activeTexture(33984+he),i.bindTexture(32879,ft.__webglTexture)}function Ot(xe,he){const ft=l.get(xe);if(xe.version>0&&ft.__version!==xe.version){wn(ft,xe,he);return}i.activeTexture(33984+he),i.bindTexture(34067,ft.__webglTexture)}const Yt={[v0]:10497,[$a]:33071,[qM]:33648},Qt={[Ji]:9728,[dL]:9984,[fL]:9986,[Zo]:9729,[Hne]:9985,[w0]:9987};function mt(xe,he,ft){if(ft?(w.texParameteri(xe,10242,Yt[he.wrapS]),w.texParameteri(xe,10243,Yt[he.wrapT]),(xe===32879||xe===35866)&&w.texParameteri(xe,32882,Yt[he.wrapR]),w.texParameteri(xe,10240,Qt[he.magFilter]),w.texParameteri(xe,10241,Qt[he.minFilter])):(w.texParameteri(xe,10242,33071),w.texParameteri(xe,10243,33071),(xe===32879||xe===35866)&&w.texParameteri(xe,32882,33071),(he.wrapS!==$a||he.wrapT!==$a)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),w.texParameteri(xe,10240,Q(he.magFilter)),w.texParameteri(xe,10241,Q(he.minFilter)),he.minFilter!==Ji&&he.minFilter!==Zo&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),t.has("EXT_texture_filter_anisotropic")===!0){const zt=t.get("EXT_texture_filter_anisotropic");if(he.type===jd&&t.has("OES_texture_float_linear")===!1||_===!1&&he.type===s1&&t.has("OES_texture_half_float_linear")===!1)return;(he.anisotropy>1||l.get(he).__currentAnisotropy)&&(w.texParameterf(xe,zt.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(he.anisotropy,d.getMaxAnisotropy())),l.get(he).__currentAnisotropy=he.anisotropy)}}function Jn(xe,he){let ft=!1;xe.__webglInit===void 0&&(xe.__webglInit=!0,he.addEventListener("dispose",Je));const zt=he.source;let Nt=O.get(zt);Nt===void 0&&(Nt={},O.set(zt,Nt));const Ht=dt(he);if(Ht!==xe.__cacheKey){Nt[Ht]===void 0&&(Nt[Ht]={texture:w.createTexture(),usedTimes:0},x.memory.textures++,ft=!0),Nt[Ht].usedTimes++;const Sn=Nt[xe.__cacheKey];Sn!==void 0&&(Nt[xe.__cacheKey].usedTimes--,Sn.usedTimes===0&&et(he)),xe.__cacheKey=Ht,xe.__webglTexture=Nt[Ht].texture}return ft}function Dn(xe,he,ft){let zt=3553;he.isDataArrayTexture&&(zt=35866),he.isData3DTexture&&(zt=32879);const Nt=Jn(xe,he),Ht=he.source;if(i.activeTexture(33984+ft),i.bindTexture(zt,xe.__webglTexture),Ht.version!==Ht.__currentVersion||Nt===!0){w.pixelStorei(37440,he.flipY),w.pixelStorei(37441,he.premultiplyAlpha),w.pixelStorei(3317,he.unpackAlignment),w.pixelStorei(37443,0);const Sn=Ee(he)&&le(he.image)===!1;let ht=z(he.image,Sn,!1,B);ht=vi(he,ht);const ln=le(ht)||_,Jt=g.convert(he.format,he.encoding);let Kt=g.convert(he.type),De=me(he.internalFormat,Jt,Kt,he.encoding,he.isVideoTexture);mt(zt,he,ln);let Vt;const Bt=he.mipmaps,pn=_&&he.isVideoTexture!==!0,$t=Ht.__currentVersion===void 0||Nt===!0,cn=Pe(he,ht,ln);if(he.isDepthTexture)De=6402,_?he.type===jd?De=36012:he.type===Nh?De=33190:he.type===h0?De=35056:De=33189:he.type===jd&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),he.format===Uh&&De===6402&&he.type!==Gne&&he.type!==Nh&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),he.type=Nh,Kt=g.convert(he.type)),he.format===y0&&De===6402&&(De=34041,he.type!==h0&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),he.type=h0,Kt=g.convert(he.type))),$t&&(pn?i.texStorage2D(3553,1,De,ht.width,ht.height):i.texImage2D(3553,0,De,ht.width,ht.height,0,Jt,Kt,null));else if(he.isDataTexture)if(Bt.length>0&&ln){pn&&$t&&i.texStorage2D(3553,cn,De,Bt[0].width,Bt[0].height);for(let Rt=0,fn=Bt.length;Rt<fn;Rt++)Vt=Bt[Rt],pn?i.texSubImage2D(3553,Rt,0,0,Vt.width,Vt.height,Jt,Kt,Vt.data):i.texImage2D(3553,Rt,De,Vt.width,Vt.height,0,Jt,Kt,Vt.data);he.generateMipmaps=!1}else pn?($t&&i.texStorage2D(3553,cn,De,ht.width,ht.height),i.texSubImage2D(3553,0,0,0,ht.width,ht.height,Jt,Kt,ht.data)):i.texImage2D(3553,0,De,ht.width,ht.height,0,Jt,Kt,ht.data);else if(he.isCompressedTexture){pn&&$t&&i.texStorage2D(3553,cn,De,Bt[0].width,Bt[0].height);for(let Rt=0,fn=Bt.length;Rt<fn;Rt++)Vt=Bt[Rt],he.format!==Us?Jt!==null?pn?i.compressedTexSubImage2D(3553,Rt,0,0,Vt.width,Vt.height,Jt,Vt.data):i.compressedTexImage2D(3553,Rt,De,Vt.width,Vt.height,0,Vt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):pn?i.texSubImage2D(3553,Rt,0,0,Vt.width,Vt.height,Jt,Kt,Vt.data):i.texImage2D(3553,Rt,De,Vt.width,Vt.height,0,Jt,Kt,Vt.data)}else if(he.isDataArrayTexture)pn?($t&&i.texStorage3D(35866,cn,De,ht.width,ht.height,ht.depth),i.texSubImage3D(35866,0,0,0,0,ht.width,ht.height,ht.depth,Jt,Kt,ht.data)):i.texImage3D(35866,0,De,ht.width,ht.height,ht.depth,0,Jt,Kt,ht.data);else if(he.isData3DTexture)pn?($t&&i.texStorage3D(32879,cn,De,ht.width,ht.height,ht.depth),i.texSubImage3D(32879,0,0,0,0,ht.width,ht.height,ht.depth,Jt,Kt,ht.data)):i.texImage3D(32879,0,De,ht.width,ht.height,ht.depth,0,Jt,Kt,ht.data);else if(he.isFramebufferTexture){if($t)if(pn)i.texStorage2D(3553,cn,De,ht.width,ht.height);else{let Rt=ht.width,fn=ht.height;for(let Rn=0;Rn<cn;Rn++)i.texImage2D(3553,Rn,De,Rt,fn,0,Jt,Kt,null),Rt>>=1,fn>>=1}}else if(Bt.length>0&&ln){pn&&$t&&i.texStorage2D(3553,cn,De,Bt[0].width,Bt[0].height);for(let Rt=0,fn=Bt.length;Rt<fn;Rt++)Vt=Bt[Rt],pn?i.texSubImage2D(3553,Rt,0,0,Jt,Kt,Vt):i.texImage2D(3553,Rt,De,Jt,Kt,Vt);he.generateMipmaps=!1}else pn?($t&&i.texStorage2D(3553,cn,De,ht.width,ht.height),i.texSubImage2D(3553,0,0,0,Jt,Kt,ht)):i.texImage2D(3553,0,De,Jt,Kt,ht);je(he,ln)&&te(zt),Ht.__currentVersion=Ht.version,he.onUpdate&&he.onUpdate(he)}xe.__version=he.version}function wn(xe,he,ft){if(he.image.length!==6)return;const zt=Jn(xe,he),Nt=he.source;if(i.activeTexture(33984+ft),i.bindTexture(34067,xe.__webglTexture),Nt.version!==Nt.__currentVersion||zt===!0){w.pixelStorei(37440,he.flipY),w.pixelStorei(37441,he.premultiplyAlpha),w.pixelStorei(3317,he.unpackAlignment),w.pixelStorei(37443,0);const Ht=he.isCompressedTexture||he.image[0].isCompressedTexture,Sn=he.image[0]&&he.image[0].isDataTexture,ht=[];for(let Rt=0;Rt<6;Rt++)!Ht&&!Sn?ht[Rt]=z(he.image[Rt],!1,!0,D):ht[Rt]=Sn?he.image[Rt].image:he.image[Rt],ht[Rt]=vi(he,ht[Rt]);const ln=ht[0],Jt=le(ln)||_,Kt=g.convert(he.format,he.encoding),De=g.convert(he.type),Vt=me(he.internalFormat,Kt,De,he.encoding),Bt=_&&he.isVideoTexture!==!0,pn=Nt.__currentVersion===void 0||zt===!0;let $t=Pe(he,ln,Jt);mt(34067,he,Jt);let cn;if(Ht){Bt&&pn&&i.texStorage2D(34067,$t,Vt,ln.width,ln.height);for(let Rt=0;Rt<6;Rt++){cn=ht[Rt].mipmaps;for(let fn=0;fn<cn.length;fn++){const Rn=cn[fn];he.format!==Us?Kt!==null?Bt?i.compressedTexSubImage2D(34069+Rt,fn,0,0,Rn.width,Rn.height,Kt,Rn.data):i.compressedTexImage2D(34069+Rt,fn,Vt,Rn.width,Rn.height,0,Rn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Bt?i.texSubImage2D(34069+Rt,fn,0,0,Rn.width,Rn.height,Kt,De,Rn.data):i.texImage2D(34069+Rt,fn,Vt,Rn.width,Rn.height,0,Kt,De,Rn.data)}}}else{cn=he.mipmaps,Bt&&pn&&(cn.length>0&&$t++,i.texStorage2D(34067,$t,Vt,ht[0].width,ht[0].height));for(let Rt=0;Rt<6;Rt++)if(Sn){Bt?i.texSubImage2D(34069+Rt,0,0,0,ht[Rt].width,ht[Rt].height,Kt,De,ht[Rt].data):i.texImage2D(34069+Rt,0,Vt,ht[Rt].width,ht[Rt].height,0,Kt,De,ht[Rt].data);for(let fn=0;fn<cn.length;fn++){const Bn=cn[fn].image[Rt].image;Bt?i.texSubImage2D(34069+Rt,fn+1,0,0,Bn.width,Bn.height,Kt,De,Bn.data):i.texImage2D(34069+Rt,fn+1,Vt,Bn.width,Bn.height,0,Kt,De,Bn.data)}}else{Bt?i.texSubImage2D(34069+Rt,0,0,0,Kt,De,ht[Rt]):i.texImage2D(34069+Rt,0,Vt,Kt,De,ht[Rt]);for(let fn=0;fn<cn.length;fn++){const Rn=cn[fn];Bt?i.texSubImage2D(34069+Rt,fn+1,0,0,Kt,De,Rn.image[Rt]):i.texImage2D(34069+Rt,fn+1,Vt,Kt,De,Rn.image[Rt])}}}je(he,Jt)&&te(34067),Nt.__currentVersion=Nt.version,he.onUpdate&&he.onUpdate(he)}xe.__version=he.version}function qt(xe,he,ft,zt,Nt){const Ht=g.convert(ft.format,ft.encoding),Sn=g.convert(ft.type),ht=me(ft.internalFormat,Ht,Sn,ft.encoding);l.get(he).__hasExternalTextures||(Nt===32879||Nt===35866?i.texImage3D(Nt,0,ht,he.width,he.height,he.depth,0,Ht,Sn,null):i.texImage2D(Nt,0,ht,he.width,he.height,0,Ht,Sn,null)),i.bindFramebuffer(36160,xe),Zn(he)?V.framebufferTexture2DMultisampleEXT(36160,zt,Nt,l.get(ft).__webglTexture,0,$n(he)):w.framebufferTexture2D(36160,zt,Nt,l.get(ft).__webglTexture,0),i.bindFramebuffer(36160,null)}function On(xe,he,ft){if(w.bindRenderbuffer(36161,xe),he.depthBuffer&&!he.stencilBuffer){let zt=33189;if(ft||Zn(he)){const Nt=he.depthTexture;Nt&&Nt.isDepthTexture&&(Nt.type===jd?zt=36012:Nt.type===Nh&&(zt=33190));const Ht=$n(he);Zn(he)?V.renderbufferStorageMultisampleEXT(36161,Ht,zt,he.width,he.height):w.renderbufferStorageMultisample(36161,Ht,zt,he.width,he.height)}else w.renderbufferStorage(36161,zt,he.width,he.height);w.framebufferRenderbuffer(36160,36096,36161,xe)}else if(he.depthBuffer&&he.stencilBuffer){const zt=$n(he);ft&&Zn(he)===!1?w.renderbufferStorageMultisample(36161,zt,35056,he.width,he.height):Zn(he)?V.renderbufferStorageMultisampleEXT(36161,zt,35056,he.width,he.height):w.renderbufferStorage(36161,34041,he.width,he.height),w.framebufferRenderbuffer(36160,33306,36161,xe)}else{const zt=he.isWebGLMultipleRenderTargets===!0?he.texture:[he.texture];for(let Nt=0;Nt<zt.length;Nt++){const Ht=zt[Nt],Sn=g.convert(Ht.format,Ht.encoding),ht=g.convert(Ht.type),ln=me(Ht.internalFormat,Sn,ht,Ht.encoding),Jt=$n(he);ft&&Zn(he)===!1?w.renderbufferStorageMultisample(36161,Jt,ln,he.width,he.height):Zn(he)?V.renderbufferStorageMultisampleEXT(36161,Jt,ln,he.width,he.height):w.renderbufferStorage(36161,ln,he.width,he.height)}}w.bindRenderbuffer(36161,null)}function Fn(xe,he){if(he&&he.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(36160,xe),!(he.depthTexture&&he.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!l.get(he.depthTexture).__webglTexture||he.depthTexture.image.width!==he.width||he.depthTexture.image.height!==he.height)&&(he.depthTexture.image.width=he.width,he.depthTexture.image.height=he.height,he.depthTexture.needsUpdate=!0),vt(he.depthTexture,0);const zt=l.get(he.depthTexture).__webglTexture,Nt=$n(he);if(he.depthTexture.format===Uh)Zn(he)?V.framebufferTexture2DMultisampleEXT(36160,36096,3553,zt,0,Nt):w.framebufferTexture2D(36160,36096,3553,zt,0);else if(he.depthTexture.format===y0)Zn(he)?V.framebufferTexture2DMultisampleEXT(36160,33306,3553,zt,0,Nt):w.framebufferTexture2D(36160,33306,3553,zt,0);else throw new Error("Unknown depthTexture format")}function hn(xe){const he=l.get(xe),ft=xe.isWebGLCubeRenderTarget===!0;if(xe.depthTexture&&!he.__autoAllocateDepthBuffer){if(ft)throw new Error("target.depthTexture not supported in Cube render targets");Fn(he.__webglFramebuffer,xe)}else if(ft){he.__webglDepthbuffer=[];for(let zt=0;zt<6;zt++)i.bindFramebuffer(36160,he.__webglFramebuffer[zt]),he.__webglDepthbuffer[zt]=w.createRenderbuffer(),On(he.__webglDepthbuffer[zt],xe,!1)}else i.bindFramebuffer(36160,he.__webglFramebuffer),he.__webglDepthbuffer=w.createRenderbuffer(),On(he.__webglDepthbuffer,xe,!1);i.bindFramebuffer(36160,null)}function Br(xe,he,ft){const zt=l.get(xe);he!==void 0&&qt(zt.__webglFramebuffer,xe,xe.texture,36064,3553),ft!==void 0&&hn(xe)}function Yr(xe){const he=xe.texture,ft=l.get(xe),zt=l.get(he);xe.addEventListener("dispose",Ut),xe.isWebGLMultipleRenderTargets!==!0&&(zt.__webglTexture===void 0&&(zt.__webglTexture=w.createTexture()),zt.__version=he.version,x.memory.textures++);const Nt=xe.isWebGLCubeRenderTarget===!0,Ht=xe.isWebGLMultipleRenderTargets===!0,Sn=le(xe)||_;if(Nt){ft.__webglFramebuffer=[];for(let ht=0;ht<6;ht++)ft.__webglFramebuffer[ht]=w.createFramebuffer()}else{if(ft.__webglFramebuffer=w.createFramebuffer(),Ht)if(d.drawBuffers){const ht=xe.texture;for(let ln=0,Jt=ht.length;ln<Jt;ln++){const Kt=l.get(ht[ln]);Kt.__webglTexture===void 0&&(Kt.__webglTexture=w.createTexture(),x.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(_&&xe.samples>0&&Zn(xe)===!1){const ht=Ht?he:[he];ft.__webglMultisampledFramebuffer=w.createFramebuffer(),ft.__webglColorRenderbuffer=[],i.bindFramebuffer(36160,ft.__webglMultisampledFramebuffer);for(let ln=0;ln<ht.length;ln++){const Jt=ht[ln];ft.__webglColorRenderbuffer[ln]=w.createRenderbuffer(),w.bindRenderbuffer(36161,ft.__webglColorRenderbuffer[ln]);const Kt=g.convert(Jt.format,Jt.encoding),De=g.convert(Jt.type),Vt=me(Jt.internalFormat,Kt,De,Jt.encoding),Bt=$n(xe);w.renderbufferStorageMultisample(36161,Bt,Vt,xe.width,xe.height),w.framebufferRenderbuffer(36160,36064+ln,36161,ft.__webglColorRenderbuffer[ln])}w.bindRenderbuffer(36161,null),xe.depthBuffer&&(ft.__webglDepthRenderbuffer=w.createRenderbuffer(),On(ft.__webglDepthRenderbuffer,xe,!0)),i.bindFramebuffer(36160,null)}}if(Nt){i.bindTexture(34067,zt.__webglTexture),mt(34067,he,Sn);for(let ht=0;ht<6;ht++)qt(ft.__webglFramebuffer[ht],xe,he,36064,34069+ht);je(he,Sn)&&te(34067),i.unbindTexture()}else if(Ht){const ht=xe.texture;for(let ln=0,Jt=ht.length;ln<Jt;ln++){const Kt=ht[ln],De=l.get(Kt);i.bindTexture(3553,De.__webglTexture),mt(3553,Kt,Sn),qt(ft.__webglFramebuffer,xe,Kt,36064+ln,3553),je(Kt,Sn)&&te(3553)}i.unbindTexture()}else{let ht=3553;(xe.isWebGL3DRenderTarget||xe.isWebGLArrayRenderTarget)&&(_?ht=xe.isWebGL3DRenderTarget?32879:35866:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),i.bindTexture(ht,zt.__webglTexture),mt(ht,he,Sn),qt(ft.__webglFramebuffer,xe,he,36064,ht),je(he,Sn)&&te(ht),i.unbindTexture()}xe.depthBuffer&&hn(xe)}function ai(xe){const he=le(xe)||_,ft=xe.isWebGLMultipleRenderTargets===!0?xe.texture:[xe.texture];for(let zt=0,Nt=ft.length;zt<Nt;zt++){const Ht=ft[zt];if(je(Ht,he)){const Sn=xe.isWebGLCubeRenderTarget?34067:3553,ht=l.get(Ht).__webglTexture;i.bindTexture(Sn,ht),te(Sn),i.unbindTexture()}}}function wr(xe){if(_&&xe.samples>0&&Zn(xe)===!1){const he=xe.isWebGLMultipleRenderTargets?xe.texture:[xe.texture],ft=xe.width,zt=xe.height;let Nt=16384;const Ht=[],Sn=xe.stencilBuffer?33306:36096,ht=l.get(xe),ln=xe.isWebGLMultipleRenderTargets===!0;if(ln)for(let Jt=0;Jt<he.length;Jt++)i.bindFramebuffer(36160,ht.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+Jt,36161,null),i.bindFramebuffer(36160,ht.__webglFramebuffer),w.framebufferTexture2D(36009,36064+Jt,3553,null,0);i.bindFramebuffer(36008,ht.__webglMultisampledFramebuffer),i.bindFramebuffer(36009,ht.__webglFramebuffer);for(let Jt=0;Jt<he.length;Jt++){Ht.push(36064+Jt),xe.depthBuffer&&Ht.push(Sn);const Kt=ht.__ignoreDepthValues!==void 0?ht.__ignoreDepthValues:!1;if(Kt===!1&&(xe.depthBuffer&&(Nt|=256),xe.stencilBuffer&&(Nt|=1024)),ln&&w.framebufferRenderbuffer(36008,36064,36161,ht.__webglColorRenderbuffer[Jt]),Kt===!0&&(w.invalidateFramebuffer(36008,[Sn]),w.invalidateFramebuffer(36009,[Sn])),ln){const De=l.get(he[Jt]).__webglTexture;w.framebufferTexture2D(36009,36064,3553,De,0)}w.blitFramebuffer(0,0,ft,zt,0,0,ft,zt,Nt,9728),X&&w.invalidateFramebuffer(36008,Ht)}if(i.bindFramebuffer(36008,null),i.bindFramebuffer(36009,null),ln)for(let Jt=0;Jt<he.length;Jt++){i.bindFramebuffer(36160,ht.__webglMultisampledFramebuffer),w.framebufferRenderbuffer(36160,36064+Jt,36161,ht.__webglColorRenderbuffer[Jt]);const Kt=l.get(he[Jt]).__webglTexture;i.bindFramebuffer(36160,ht.__webglFramebuffer),w.framebufferTexture2D(36009,36064+Jt,3553,Kt,0)}i.bindFramebuffer(36009,ht.__webglMultisampledFramebuffer)}}function $n(xe){return Math.min(F,xe.samples)}function Zn(xe){const he=l.get(xe);return _&&xe.samples>0&&t.has("WEBGL_multisampled_render_to_texture")===!0&&he.__useRenderToTexture!==!1}function kr(xe){const he=x.render.frame;ie.get(xe)!==he&&(ie.set(xe,he),xe.update())}function vi(xe,he){const ft=xe.encoding,zt=xe.format,Nt=xe.type;return xe.isCompressedTexture===!0||xe.isVideoTexture===!0||xe.format===pL||ft!==qh&&(ft===gr?_===!1?t.has("EXT_sRGB")===!0&&zt===Us?(xe.format=pL,xe.minFilter=Zo,xe.generateMipmaps=!1):he=$ne.sRGBToLinear(he):(zt!==Us||Nt!==Wh)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture encoding:",ft)),he}this.allocateTextureUnit=yt,this.resetTextureUnits=He,this.setTexture2D=vt,this.setTexture2DArray=Lt,this.setTexture3D=Et,this.setTextureCube=Ot,this.rebindTextures=Br,this.setupRenderTarget=Yr,this.updateRenderTargetMipmap=ai,this.updateMultisampleRenderTarget=wr,this.setupDepthRenderbuffer=hn,this.setupFrameBufferTexture=qt,this.useMultisampledRTT=Zn}function tbe(w,t,i){const l=i.isWebGL2;function d(g,x=null){let _;if(g===Wh)return 5121;if(g===Ope)return 32819;if(g===Rpe)return 32820;if(g===Ape)return 5120;if(g===Ipe)return 5122;if(g===Gne)return 5123;if(g===Dpe)return 5124;if(g===Nh)return 5125;if(g===jd)return 5126;if(g===s1)return l?5131:(_=t.get("OES_texture_half_float"),_!==null?_.HALF_FLOAT_OES:null);if(g===Lpe)return 6406;if(g===Us)return 6408;if(g===Npe)return 6409;if(g===Fpe)return 6410;if(g===Uh)return 6402;if(g===y0)return 34041;if(g===Bpe)return 6403;if(g===zpe)return console.warn("THREE.WebGLRenderer: THREE.RGBFormat has been removed. Use THREE.RGBAFormat instead. https://github.com/mrdoob/three.js/pull/23228"),6408;if(g===pL)return _=t.get("EXT_sRGB"),_!==null?_.SRGB_ALPHA_EXT:null;if(g===jpe)return 36244;if(g===Upe)return 33319;if(g===Vpe)return 33320;if(g===Hpe)return 36249;if(g===M4||g===P4||g===C4||g===A4)if(x===gr)if(_=t.get("WEBGL_compressed_texture_s3tc_srgb"),_!==null){if(g===M4)return _.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(g===P4)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(g===C4)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(g===A4)return _.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(_=t.get("WEBGL_compressed_texture_s3tc"),_!==null){if(g===M4)return _.COMPRESSED_RGB_S3TC_DXT1_EXT;if(g===P4)return _.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(g===C4)return _.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(g===A4)return _.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(g===cte||g===dte||g===fte||g===hte)if(_=t.get("WEBGL_compressed_texture_pvrtc"),_!==null){if(g===cte)return _.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(g===dte)return _.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(g===fte)return _.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(g===hte)return _.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(g===Gpe)return _=t.get("WEBGL_compressed_texture_etc1"),_!==null?_.COMPRESSED_RGB_ETC1_WEBGL:null;if(g===pte||g===mte)if(_=t.get("WEBGL_compressed_texture_etc"),_!==null){if(g===pte)return x===gr?_.COMPRESSED_SRGB8_ETC2:_.COMPRESSED_RGB8_ETC2;if(g===mte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:_.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(g===gte||g===vte||g===yte||g===bte||g===_te||g===xte||g===wte||g===Ste||g===Ete||g===kte||g===Tte||g===Mte||g===Pte||g===Cte)if(_=t.get("WEBGL_compressed_texture_astc"),_!==null){if(g===gte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:_.COMPRESSED_RGBA_ASTC_4x4_KHR;if(g===vte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:_.COMPRESSED_RGBA_ASTC_5x4_KHR;if(g===yte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:_.COMPRESSED_RGBA_ASTC_5x5_KHR;if(g===bte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:_.COMPRESSED_RGBA_ASTC_6x5_KHR;if(g===_te)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:_.COMPRESSED_RGBA_ASTC_6x6_KHR;if(g===xte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:_.COMPRESSED_RGBA_ASTC_8x5_KHR;if(g===wte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:_.COMPRESSED_RGBA_ASTC_8x6_KHR;if(g===Ste)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:_.COMPRESSED_RGBA_ASTC_8x8_KHR;if(g===Ete)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:_.COMPRESSED_RGBA_ASTC_10x5_KHR;if(g===kte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:_.COMPRESSED_RGBA_ASTC_10x6_KHR;if(g===Tte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:_.COMPRESSED_RGBA_ASTC_10x8_KHR;if(g===Mte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:_.COMPRESSED_RGBA_ASTC_10x10_KHR;if(g===Pte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:_.COMPRESSED_RGBA_ASTC_12x10_KHR;if(g===Cte)return x===gr?_.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:_.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(g===Ate)if(_=t.get("EXT_texture_compression_bptc"),_!==null){if(g===Ate)return x===gr?_.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:_.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;return g===h0?l?34042:(_=t.get("WEBGL_depth_texture"),_!==null?_.UNSIGNED_INT_24_8_WEBGL:null):w[g]!==void 0?w[g]:null}return{convert:d}}class nbe extends Oo{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class jh extends gi{constructor(){super(),this.isGroup=!0,this.type="Group"}}const rbe={type:"move"};class iL{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new jh,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new jh,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Ve,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Ve),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new jh,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Ve,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Ve),this._grip}dispatchEvent(t){return this._targetRay!==null&&this._targetRay.dispatchEvent(t),this._grip!==null&&this._grip.dispatchEvent(t),this._hand!==null&&this._hand.dispatchEvent(t),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(t,i,l){let d=null,g=null,x=null;const _=this._targetRay,P=this._grip,D=this._hand;if(t&&i.session.visibilityState!=="visible-blurred"){if(D&&t.hand){x=!0;for(const K of t.hand.values()){const O=i.getJointPose(K,l);if(D.joints[K.jointName]===void 0){const _e=new jh;_e.matrixAutoUpdate=!1,_e.visible=!1,D.joints[K.jointName]=_e,D.add(_e)}const q=D.joints[K.jointName];O!==null&&(q.matrix.fromArray(O.transform.matrix),q.matrix.decompose(q.position,q.rotation,q.scale),q.jointRadius=O.radius),q.visible=O!==null}const B=D.joints["index-finger-tip"],F=D.joints["thumb-tip"],V=B.position.distanceTo(F.position),X=.02,ie=.005;D.inputState.pinching&&V>X+ie?(D.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!D.inputState.pinching&&V<=X-ie&&(D.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else P!==null&&t.gripSpace&&(g=i.getPose(t.gripSpace,l),g!==null&&(P.matrix.fromArray(g.transform.matrix),P.matrix.decompose(P.position,P.rotation,P.scale),g.linearVelocity?(P.hasLinearVelocity=!0,P.linearVelocity.copy(g.linearVelocity)):P.hasLinearVelocity=!1,g.angularVelocity?(P.hasAngularVelocity=!0,P.angularVelocity.copy(g.angularVelocity)):P.hasAngularVelocity=!1));_!==null&&(d=i.getPose(t.targetRaySpace,l),d===null&&g!==null&&(d=g),d!==null&&(_.matrix.fromArray(d.transform.matrix),_.matrix.decompose(_.position,_.rotation,_.scale),d.linearVelocity?(_.hasLinearVelocity=!0,_.linearVelocity.copy(d.linearVelocity)):_.hasLinearVelocity=!1,d.angularVelocity?(_.hasAngularVelocity=!0,_.angularVelocity.copy(d.angularVelocity)):_.hasAngularVelocity=!1,this.dispatchEvent(rbe)))}return _!==null&&(_.visible=d!==null),P!==null&&(P.visible=g!==null),D!==null&&(D.visible=x!==null),this}}class ibe extends Ro{constructor(t,i,l,d,g,x,_,P,D,B){if(B=B!==void 0?B:Uh,B!==Uh&&B!==y0)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");l===void 0&&B===Uh&&(l=Nh),l===void 0&&B===y0&&(l=h0),super(null,d,g,x,_,P,B,l,D),this.isDepthTexture=!0,this.image={width:t,height:i},this.magFilter=_!==void 0?_:Ji,this.minFilter=P!==void 0?P:Ji,this.flipY=!1,this.generateMipmaps=!1}}class obe extends S0{constructor(t,i){super();const l=this;let d=null,g=1,x=null,_="local-floor",P=null,D=null,B=null,F=null,V=null,X=null;const ie=i.getContextAttributes();let K=null,O=null;const q=[],_e=[],z=new Oo;z.layers.enable(1),z.viewport=new xr;const le=new Oo;le.layers.enable(2),le.viewport=new xr;const Ee=[z,le],je=new nbe;je.layers.enable(1),je.layers.enable(2);let te=null,me=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(dt){let vt=q[dt];return vt===void 0&&(vt=new iL,q[dt]=vt),vt.getTargetRaySpace()},this.getControllerGrip=function(dt){let vt=q[dt];return vt===void 0&&(vt=new iL,q[dt]=vt),vt.getGripSpace()},this.getHand=function(dt){let vt=q[dt];return vt===void 0&&(vt=new iL,q[dt]=vt),vt.getHandSpace()};function Pe(dt){const vt=_e.indexOf(dt.inputSource);if(vt===-1)return;const Lt=q[vt];Lt!==void 0&&Lt.dispatchEvent({type:dt.type,data:dt.inputSource})}function Q(){d.removeEventListener("select",Pe),d.removeEventListener("selectstart",Pe),d.removeEventListener("selectend",Pe),d.removeEventListener("squeeze",Pe),d.removeEventListener("squeezestart",Pe),d.removeEventListener("squeezeend",Pe),d.removeEventListener("end",Q),d.removeEventListener("inputsourceschange",Je);for(let dt=0;dt<q.length;dt++){const vt=_e[dt];vt!==null&&(_e[dt]=null,q[dt].disconnect(vt))}te=null,me=null,t.setRenderTarget(K),V=null,F=null,B=null,d=null,O=null,yt.stop(),l.isPresenting=!1,l.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(dt){g=dt,l.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(dt){_=dt,l.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return P||x},this.setReferenceSpace=function(dt){P=dt},this.getBaseLayer=function(){return F!==null?F:V},this.getBinding=function(){return B},this.getFrame=function(){return X},this.getSession=function(){return d},this.setSession=async function(dt){if(d=dt,d!==null){if(K=t.getRenderTarget(),d.addEventListener("select",Pe),d.addEventListener("selectstart",Pe),d.addEventListener("selectend",Pe),d.addEventListener("squeeze",Pe),d.addEventListener("squeezestart",Pe),d.addEventListener("squeezeend",Pe),d.addEventListener("end",Q),d.addEventListener("inputsourceschange",Je),ie.xrCompatible!==!0&&await i.makeXRCompatible(),d.renderState.layers===void 0||t.capabilities.isWebGL2===!1){const vt={antialias:d.renderState.layers===void 0?ie.antialias:!0,alpha:ie.alpha,depth:ie.depth,stencil:ie.stencil,framebufferScaleFactor:g};V=new XRWebGLLayer(d,i,vt),d.updateRenderState({baseLayer:V}),O=new Kh(V.framebufferWidth,V.framebufferHeight,{format:Us,type:Wh,encoding:t.outputEncoding})}else{let vt=null,Lt=null,Et=null;ie.depth&&(Et=ie.stencil?35056:33190,vt=ie.stencil?y0:Uh,Lt=ie.stencil?h0:Nh);const Ot={colorFormat:32856,depthFormat:Et,scaleFactor:g};B=new XRWebGLBinding(d,i),F=B.createProjectionLayer(Ot),d.updateRenderState({layers:[F]}),O=new Kh(F.textureWidth,F.textureHeight,{format:Us,type:Wh,depthTexture:new ibe(F.textureWidth,F.textureHeight,Lt,void 0,void 0,void 0,void 0,void 0,void 0,vt),stencilBuffer:ie.stencil,encoding:t.outputEncoding,samples:ie.antialias?4:0});const Yt=t.properties.get(O);Yt.__ignoreDepthValues=F.ignoreDepthValues}O.isXRRenderTarget=!0,this.setFoveation(1),P=null,x=await d.requestReferenceSpace(_),yt.setContext(d),yt.start(),l.isPresenting=!0,l.dispatchEvent({type:"sessionstart"})}};function Je(dt){for(let vt=0;vt<dt.removed.length;vt++){const Lt=dt.removed[vt],Et=_e.indexOf(Lt);Et>=0&&(_e[Et]=null,q[Et].dispatchEvent({type:"disconnected",data:Lt}))}for(let vt=0;vt<dt.added.length;vt++){const Lt=dt.added[vt];let Et=_e.indexOf(Lt);if(Et===-1){for(let Yt=0;Yt<q.length;Yt++)if(Yt>=_e.length){_e.push(Lt),Et=Yt;break}else if(_e[Yt]===null){_e[Yt]=Lt,Et=Yt;break}if(Et===-1)break}const Ot=q[Et];Ot&&Ot.dispatchEvent({type:"connected",data:Lt})}}const Ut=new Ve,Dt=new Ve;function et(dt,vt,Lt){Ut.setFromMatrixPosition(vt.matrixWorld),Dt.setFromMatrixPosition(Lt.matrixWorld);const Et=Ut.distanceTo(Dt),Ot=vt.projectionMatrix.elements,Yt=Lt.projectionMatrix.elements,Qt=Ot[14]/(Ot[10]-1),mt=Ot[14]/(Ot[10]+1),Jn=(Ot[9]+1)/Ot[5],Dn=(Ot[9]-1)/Ot[5],wn=(Ot[8]-1)/Ot[0],qt=(Yt[8]+1)/Yt[0],On=Qt*wn,Fn=Qt*qt,hn=Et/(-wn+qt),Br=hn*-wn;vt.matrixWorld.decompose(dt.position,dt.quaternion,dt.scale),dt.translateX(Br),dt.translateZ(hn),dt.matrixWorld.compose(dt.position,dt.quaternion,dt.scale),dt.matrixWorldInverse.copy(dt.matrixWorld).invert();const Yr=Qt+hn,ai=mt+hn,wr=On-Br,$n=Fn+(Et-Br),Zn=Jn*mt/ai*Yr,kr=Dn*mt/ai*Yr;dt.projectionMatrix.makePerspective(wr,$n,Zn,kr,Yr,ai)}function be(dt,vt){vt===null?dt.matrixWorld.copy(dt.matrix):dt.matrixWorld.multiplyMatrices(vt.matrixWorld,dt.matrix),dt.matrixWorldInverse.copy(dt.matrixWorld).invert()}this.updateCamera=function(dt){if(d===null)return;je.near=le.near=z.near=dt.near,je.far=le.far=z.far=dt.far,(te!==je.near||me!==je.far)&&(d.updateRenderState({depthNear:je.near,depthFar:je.far}),te=je.near,me=je.far);const vt=dt.parent,Lt=je.cameras;be(je,vt);for(let Ot=0;Ot<Lt.length;Ot++)be(Lt[Ot],vt);je.matrixWorld.decompose(je.position,je.quaternion,je.scale),dt.position.copy(je.position),dt.quaternion.copy(je.quaternion),dt.scale.copy(je.scale),dt.matrix.copy(je.matrix),dt.matrixWorld.copy(je.matrixWorld);const Et=dt.children;for(let Ot=0,Yt=Et.length;Ot<Yt;Ot++)Et[Ot].updateMatrixWorld(!0);Lt.length===2?et(je,z,le):je.projectionMatrix.copy(z.projectionMatrix)},this.getCamera=function(){return je},this.getFoveation=function(){if(F!==null)return F.fixedFoveation;if(V!==null)return V.fixedFoveation},this.setFoveation=function(dt){F!==null&&(F.fixedFoveation=dt),V!==null&&V.fixedFoveation!==void 0&&(V.fixedFoveation=dt)};let tt=null;function He(dt,vt){if(D=vt.getViewerPose(P||x),X=vt,D!==null){const Lt=D.views;V!==null&&(t.setRenderTargetFramebuffer(O,V.framebuffer),t.setRenderTarget(O));let Et=!1;Lt.length!==je.cameras.length&&(je.cameras.length=0,Et=!0);for(let Ot=0;Ot<Lt.length;Ot++){const Yt=Lt[Ot];let Qt=null;if(V!==null)Qt=V.getViewport(Yt);else{const Jn=B.getViewSubImage(F,Yt);Qt=Jn.viewport,Ot===0&&(t.setRenderTargetTextures(O,Jn.colorTexture,F.ignoreDepthValues?void 0:Jn.depthStencilTexture),t.setRenderTarget(O))}let mt=Ee[Ot];mt===void 0&&(mt=new Oo,mt.layers.enable(Ot),mt.viewport=new xr,Ee[Ot]=mt),mt.matrix.fromArray(Yt.transform.matrix),mt.projectionMatrix.fromArray(Yt.projectionMatrix),mt.viewport.set(Qt.x,Qt.y,Qt.width,Qt.height),Ot===0&&je.matrix.copy(mt.matrix),Et===!0&&je.cameras.push(mt)}}for(let Lt=0;Lt<q.length;Lt++){const Et=_e[Lt],Ot=q[Lt];Et!==null&&Ot!==void 0&&Ot.update(Et,vt,P||x)}tt&&tt(dt,vt),X=null}const yt=new rre;yt.setAnimationLoop(He),this.setAnimationLoop=function(dt){tt=dt},this.dispose=function(){}}}function abe(w,t){function i(K,O){K.fogColor.value.copy(O.color),O.isFog?(K.fogNear.value=O.near,K.fogFar.value=O.far):O.isFogExp2&&(K.fogDensity.value=O.density)}function l(K,O,q,_e,z){O.isMeshBasicMaterial||O.isMeshLambertMaterial?d(K,O):O.isMeshToonMaterial?(d(K,O),B(K,O)):O.isMeshPhongMaterial?(d(K,O),D(K,O)):O.isMeshStandardMaterial?(d(K,O),F(K,O),O.isMeshPhysicalMaterial&&V(K,O,z)):O.isMeshMatcapMaterial?(d(K,O),X(K,O)):O.isMeshDepthMaterial?d(K,O):O.isMeshDistanceMaterial?(d(K,O),ie(K,O)):O.isMeshNormalMaterial?d(K,O):O.isLineBasicMaterial?(g(K,O),O.isLineDashedMaterial&&x(K,O)):O.isPointsMaterial?_(K,O,q,_e):O.isSpriteMaterial?P(K,O):O.isShadowMaterial?(K.color.value.copy(O.color),K.opacity.value=O.opacity):O.isShaderMaterial&&(O.uniformsNeedUpdate=!1)}function d(K,O){K.opacity.value=O.opacity,O.color&&K.diffuse.value.copy(O.color),O.emissive&&K.emissive.value.copy(O.emissive).multiplyScalar(O.emissiveIntensity),O.map&&(K.map.value=O.map),O.alphaMap&&(K.alphaMap.value=O.alphaMap),O.bumpMap&&(K.bumpMap.value=O.bumpMap,K.bumpScale.value=O.bumpScale,O.side===Vs&&(K.bumpScale.value*=-1)),O.displacementMap&&(K.displacementMap.value=O.displacementMap,K.displacementScale.value=O.displacementScale,K.displacementBias.value=O.displacementBias),O.emissiveMap&&(K.emissiveMap.value=O.emissiveMap),O.normalMap&&(K.normalMap.value=O.normalMap,K.normalScale.value.copy(O.normalScale),O.side===Vs&&K.normalScale.value.negate()),O.specularMap&&(K.specularMap.value=O.specularMap),O.alphaTest>0&&(K.alphaTest.value=O.alphaTest);const q=t.get(O).envMap;if(q&&(K.envMap.value=q,K.flipEnvMap.value=q.isCubeTexture&&q.isRenderTargetTexture===!1?-1:1,K.reflectivity.value=O.reflectivity,K.ior.value=O.ior,K.refractionRatio.value=O.refractionRatio),O.lightMap){K.lightMap.value=O.lightMap;const le=w.physicallyCorrectLights!==!0?Math.PI:1;K.lightMapIntensity.value=O.lightMapIntensity*le}O.aoMap&&(K.aoMap.value=O.aoMap,K.aoMapIntensity.value=O.aoMapIntensity);let _e;O.map?_e=O.map:O.specularMap?_e=O.specularMap:O.displacementMap?_e=O.displacementMap:O.normalMap?_e=O.normalMap:O.bumpMap?_e=O.bumpMap:O.roughnessMap?_e=O.roughnessMap:O.metalnessMap?_e=O.metalnessMap:O.alphaMap?_e=O.alphaMap:O.emissiveMap?_e=O.emissiveMap:O.clearcoatMap?_e=O.clearcoatMap:O.clearcoatNormalMap?_e=O.clearcoatNormalMap:O.clearcoatRoughnessMap?_e=O.clearcoatRoughnessMap:O.iridescenceMap?_e=O.iridescenceMap:O.iridescenceThicknessMap?_e=O.iridescenceThicknessMap:O.specularIntensityMap?_e=O.specularIntensityMap:O.specularColorMap?_e=O.specularColorMap:O.transmissionMap?_e=O.transmissionMap:O.thicknessMap?_e=O.thicknessMap:O.sheenColorMap?_e=O.sheenColorMap:O.sheenRoughnessMap&&(_e=O.sheenRoughnessMap),_e!==void 0&&(_e.isWebGLRenderTarget&&(_e=_e.texture),_e.matrixAutoUpdate===!0&&_e.updateMatrix(),K.uvTransform.value.copy(_e.matrix));let z;O.aoMap?z=O.aoMap:O.lightMap&&(z=O.lightMap),z!==void 0&&(z.isWebGLRenderTarget&&(z=z.texture),z.matrixAutoUpdate===!0&&z.updateMatrix(),K.uv2Transform.value.copy(z.matrix))}function g(K,O){K.diffuse.value.copy(O.color),K.opacity.value=O.opacity}function x(K,O){K.dashSize.value=O.dashSize,K.totalSize.value=O.dashSize+O.gapSize,K.scale.value=O.scale}function _(K,O,q,_e){K.diffuse.value.copy(O.color),K.opacity.value=O.opacity,K.size.value=O.size*q,K.scale.value=_e*.5,O.map&&(K.map.value=O.map),O.alphaMap&&(K.alphaMap.value=O.alphaMap),O.alphaTest>0&&(K.alphaTest.value=O.alphaTest);let z;O.map?z=O.map:O.alphaMap&&(z=O.alphaMap),z!==void 0&&(z.matrixAutoUpdate===!0&&z.updateMatrix(),K.uvTransform.value.copy(z.matrix))}function P(K,O){K.diffuse.value.copy(O.color),K.opacity.value=O.opacity,K.rotation.value=O.rotation,O.map&&(K.map.value=O.map),O.alphaMap&&(K.alphaMap.value=O.alphaMap),O.alphaTest>0&&(K.alphaTest.value=O.alphaTest);let q;O.map?q=O.map:O.alphaMap&&(q=O.alphaMap),q!==void 0&&(q.matrixAutoUpdate===!0&&q.updateMatrix(),K.uvTransform.value.copy(q.matrix))}function D(K,O){K.specular.value.copy(O.specular),K.shininess.value=Math.max(O.shininess,1e-4)}function B(K,O){O.gradientMap&&(K.gradientMap.value=O.gradientMap)}function F(K,O){K.roughness.value=O.roughness,K.metalness.value=O.metalness,O.roughnessMap&&(K.roughnessMap.value=O.roughnessMap),O.metalnessMap&&(K.metalnessMap.value=O.metalnessMap),t.get(O).envMap&&(K.envMapIntensity.value=O.envMapIntensity)}function V(K,O,q){K.ior.value=O.ior,O.sheen>0&&(K.sheenColor.value.copy(O.sheenColor).multiplyScalar(O.sheen),K.sheenRoughness.value=O.sheenRoughness,O.sheenColorMap&&(K.sheenColorMap.value=O.sheenColorMap),O.sheenRoughnessMap&&(K.sheenRoughnessMap.value=O.sheenRoughnessMap)),O.clearcoat>0&&(K.clearcoat.value=O.clearcoat,K.clearcoatRoughness.value=O.clearcoatRoughness,O.clearcoatMap&&(K.clearcoatMap.value=O.clearcoatMap),O.clearcoatRoughnessMap&&(K.clearcoatRoughnessMap.value=O.clearcoatRoughnessMap),O.clearcoatNormalMap&&(K.clearcoatNormalScale.value.copy(O.clearcoatNormalScale),K.clearcoatNormalMap.value=O.clearcoatNormalMap,O.side===Vs&&K.clearcoatNormalScale.value.negate())),O.iridescence>0&&(K.iridescence.value=O.iridescence,K.iridescenceIOR.value=O.iridescenceIOR,K.iridescenceThicknessMinimum.value=O.iridescenceThicknessRange[0],K.iridescenceThicknessMaximum.value=O.iridescenceThicknessRange[1],O.iridescenceMap&&(K.iridescenceMap.value=O.iridescenceMap),O.iridescenceThicknessMap&&(K.iridescenceThicknessMap.value=O.iridescenceThicknessMap)),O.transmission>0&&(K.transmission.value=O.transmission,K.transmissionSamplerMap.value=q.texture,K.transmissionSamplerSize.value.set(q.width,q.height),O.transmissionMap&&(K.transmissionMap.value=O.transmissionMap),K.thickness.value=O.thickness,O.thicknessMap&&(K.thicknessMap.value=O.thicknessMap),K.attenuationDistance.value=O.attenuationDistance,K.attenuationColor.value.copy(O.attenuationColor)),K.specularIntensity.value=O.specularIntensity,K.specularColor.value.copy(O.specularColor),O.specularIntensityMap&&(K.specularIntensityMap.value=O.specularIntensityMap),O.specularColorMap&&(K.specularColorMap.value=O.specularColorMap)}function X(K,O){O.matcap&&(K.matcap.value=O.matcap)}function ie(K,O){K.referencePosition.value.copy(O.referencePosition),K.nearDistance.value=O.nearDistance,K.farDistance.value=O.farDistance}return{refreshFogUniforms:i,refreshMaterialUniforms:l}}function sbe(){const w=c1("canvas");return w.style.display="block",w}function ure(w={}){this.isWebGLRenderer=!0;const t=w.canvas!==void 0?w.canvas:sbe(),i=w.context!==void 0?w.context:null,l=w.depth!==void 0?w.depth:!0,d=w.stencil!==void 0?w.stencil:!0,g=w.antialias!==void 0?w.antialias:!1,x=w.premultipliedAlpha!==void 0?w.premultipliedAlpha:!0,_=w.preserveDrawingBuffer!==void 0?w.preserveDrawingBuffer:!1,P=w.powerPreference!==void 0?w.powerPreference:"default",D=w.failIfMajorPerformanceCaveat!==void 0?w.failIfMajorPerformanceCaveat:!1;let B;i!==null?B=i.getContextAttributes().alpha:B=w.alpha!==void 0?w.alpha:!1;let F=null,V=null;const X=[],ie=[];this.domElement=t,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputEncoding=qh,this.physicallyCorrectLights=!1,this.toneMapping=qu,this.toneMappingExposure=1,Object.defineProperties(this,{gammaFactor:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaFactor has been removed."),2},set:function(){console.warn("THREE.WebGLRenderer: .gammaFactor has been removed.")}}});const K=this;let O=!1,q=0,_e=0,z=null,le=-1,Ee=null;const je=new xr,te=new xr;let me=null,Pe=t.width,Q=t.height,Je=1,Ut=null,Dt=null;const et=new xr(0,0,Pe,Q),be=new xr(0,0,Pe,Q);let tt=!1;const He=new CL;let yt=!1,dt=!1,vt=null;const Lt=new lr,Et=new er,Ot=new Ve,Yt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Qt(){return z===null?Je:1}let mt=i;function Jn(ge,Qe){for(let ut=0;ut<ge.length;ut++){const ot=ge[ut],bt=t.getContext(ot,Qe);if(bt!==null)return bt}return null}try{const ge={alpha:!0,depth:l,stencil:d,antialias:g,premultipliedAlpha:x,preserveDrawingBuffer:_,powerPreference:P,failIfMajorPerformanceCaveat:D};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${kL}`),t.addEventListener("webglcontextlost",De,!1),t.addEventListener("webglcontextrestored",Vt,!1),t.addEventListener("webglcontextcreationerror",Bt,!1),mt===null){const Qe=["webgl2","webgl","experimental-webgl"];if(K.isWebGL1Renderer===!0&&Qe.shift(),mt=Jn(Qe,ge),mt===null)throw Jn(Qe)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}mt.getShaderPrecisionFormat===void 0&&(mt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ge){throw console.error("THREE.WebGLRenderer: "+ge.message),ge}let Dn,wn,qt,On,Fn,hn,Br,Yr,ai,wr,$n,Zn,kr,vi,xe,he,ft,zt,Nt,Ht,Sn,ht,ln;function Jt(){Dn=new yve(mt),wn=new fve(mt,Dn,w),Dn.init(wn),ht=new tbe(mt,Dn,wn),qt=new Qye(mt,Dn,wn),On=new xve,Fn=new Bye,hn=new ebe(mt,Dn,qt,Fn,wn,ht,On),Br=new pve(K),Yr=new vve(K),ai=new Ome(mt,wn),ln=new cve(mt,Dn,ai,wn),wr=new bve(mt,ai,On,ln),$n=new kve(mt,wr,ai,On),Nt=new Eve(mt,wn,hn),he=new hve(Fn),Zn=new Fye(K,Br,Yr,Dn,wn,ln,he),kr=new abe(K,Fn),vi=new Uye,xe=new Kye(Dn,wn),zt=new uve(K,Br,qt,$n,B,x),ft=new Jye(K,$n,wn),Ht=new dve(mt,Dn,On,wn),Sn=new _ve(mt,Dn,On,wn),On.programs=Zn.programs,K.capabilities=wn,K.extensions=Dn,K.properties=Fn,K.renderLists=vi,K.shadowMap=ft,K.state=qt,K.info=On}Jt();const Kt=new obe(K,mt);this.xr=Kt,this.getContext=function(){return mt},this.getContextAttributes=function(){return mt.getContextAttributes()},this.forceContextLoss=function(){const ge=Dn.get("WEBGL_lose_context");ge&&ge.loseContext()},this.forceContextRestore=function(){const ge=Dn.get("WEBGL_lose_context");ge&&ge.restoreContext()},this.getPixelRatio=function(){return Je},this.setPixelRatio=function(ge){ge!==void 0&&(Je=ge,this.setSize(Pe,Q,!1))},this.getSize=function(ge){return ge.set(Pe,Q)},this.setSize=function(ge,Qe,ut){if(Kt.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}Pe=ge,Q=Qe,t.width=Math.floor(ge*Je),t.height=Math.floor(Qe*Je),ut!==!1&&(t.style.width=ge+"px",t.style.height=Qe+"px"),this.setViewport(0,0,ge,Qe)},this.getDrawingBufferSize=function(ge){return ge.set(Pe*Je,Q*Je).floor()},this.setDrawingBufferSize=function(ge,Qe,ut){Pe=ge,Q=Qe,Je=ut,t.width=Math.floor(ge*ut),t.height=Math.floor(Qe*ut),this.setViewport(0,0,ge,Qe)},this.getCurrentViewport=function(ge){return ge.copy(je)},this.getViewport=function(ge){return ge.copy(et)},this.setViewport=function(ge,Qe,ut,ot){ge.isVector4?et.set(ge.x,ge.y,ge.z,ge.w):et.set(ge,Qe,ut,ot),qt.viewport(je.copy(et).multiplyScalar(Je).floor())},this.getScissor=function(ge){return ge.copy(be)},this.setScissor=function(ge,Qe,ut,ot){ge.isVector4?be.set(ge.x,ge.y,ge.z,ge.w):be.set(ge,Qe,ut,ot),qt.scissor(te.copy(be).multiplyScalar(Je).floor())},this.getScissorTest=function(){return tt},this.setScissorTest=function(ge){qt.setScissorTest(tt=ge)},this.setOpaqueSort=function(ge){Ut=ge},this.setTransparentSort=function(ge){Dt=ge},this.getClearColor=function(ge){return ge.copy(zt.getClearColor())},this.setClearColor=function(){zt.setClearColor.apply(zt,arguments)},this.getClearAlpha=function(){return zt.getClearAlpha()},this.setClearAlpha=function(){zt.setClearAlpha.apply(zt,arguments)},this.clear=function(ge=!0,Qe=!0,ut=!0){let ot=0;ge&&(ot|=16384),Qe&&(ot|=256),ut&&(ot|=1024),mt.clear(ot)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",De,!1),t.removeEventListener("webglcontextrestored",Vt,!1),t.removeEventListener("webglcontextcreationerror",Bt,!1),vi.dispose(),xe.dispose(),Fn.dispose(),Br.dispose(),Yr.dispose(),$n.dispose(),ln.dispose(),Zn.dispose(),Kt.dispose(),Kt.removeEventListener("sessionstart",Rn),Kt.removeEventListener("sessionend",Bn),vt&&(vt.dispose(),vt=null),Jr.stop()};function De(ge){ge.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),O=!0}function Vt(){console.log("THREE.WebGLRenderer: Context Restored."),O=!1;const ge=On.autoReset,Qe=ft.enabled,ut=ft.autoUpdate,ot=ft.needsUpdate,bt=ft.type;Jt(),On.autoReset=ge,ft.enabled=Qe,ft.autoUpdate=ut,ft.needsUpdate=ot,ft.type=bt}function Bt(ge){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ge.statusMessage)}function pn(ge){const Qe=ge.target;Qe.removeEventListener("dispose",pn),$t(Qe)}function $t(ge){cn(ge),Fn.remove(ge)}function cn(ge){const Qe=Fn.get(ge).programs;Qe!==void 0&&(Qe.forEach(function(ut){Zn.releaseProgram(ut)}),ge.isShaderMaterial&&Zn.releaseShaderCache(ge))}this.renderBufferDirect=function(ge,Qe,ut,ot,bt,_n){Qe===null&&(Qe=Yt);const En=bt.isMesh&&bt.matrixWorld.determinant()<0,xn=yi(ge,Qe,ut,ot,bt);qt.setMaterial(ot,En);let An=ut.index;const Un=ut.attributes.position;if(An===null){if(Un===void 0||Un.count===0)return}else if(An.count===0)return;let Nn=1;ot.wireframe===!0&&(An=wr.getWireframeAttribute(ut),Nn=2),ln.setup(bt,ot,xn,ut,An);let Vn,yr=Ht;An!==null&&(Vn=ai.get(An),yr=Sn,yr.setIndex(Vn));const Yo=An!==null?An.count:Un.count,Qr=ut.drawRange.start*Nn,Mi=ut.drawRange.count*Nn,Qi=_n!==null?_n.start*Nn:0,Hn=_n!==null?_n.count*Nn:1/0,Jo=Math.max(Qr,Qi),Sr=Math.min(Yo,Qr+Mi,Qi+Hn)-1,Fi=Math.max(0,Sr-Jo+1);if(Fi!==0){if(bt.isMesh)ot.wireframe===!0?(qt.setLineWidth(ot.wireframeLinewidth*Qt()),yr.setMode(1)):yr.setMode(4);else if(bt.isLine){let si=ot.linewidth;si===void 0&&(si=1),qt.setLineWidth(si*Qt()),bt.isLineSegments?yr.setMode(1):bt.isLineLoop?yr.setMode(2):yr.setMode(3)}else bt.isPoints?yr.setMode(0):bt.isSprite&&yr.setMode(4);if(bt.isInstancedMesh)yr.renderInstances(Jo,Fi,bt.count);else if(ut.isInstancedBufferGeometry){const si=Math.min(ut.instanceCount,ut._maxInstanceCount);yr.renderInstances(Jo,Fi,si)}else yr.render(Jo,Fi)}},this.compile=function(ge,Qe){V=xe.get(ge),V.init(),ie.push(V),ge.traverseVisible(function(ut){ut.isLight&&ut.layers.test(Qe.layers)&&(V.pushLight(ut),ut.castShadow&&V.pushShadow(ut))}),V.setupLights(K.physicallyCorrectLights),ge.traverse(function(ut){const ot=ut.material;if(ot)if(Array.isArray(ot))for(let bt=0;bt<ot.length;bt++){const _n=ot[bt];Ja(_n,ge,ut)}else Ja(ot,ge,ut)}),ie.pop(),V=null};let Rt=null;function fn(ge){Rt&&Rt(ge)}function Rn(){Jr.stop()}function Bn(){Jr.start()}const Jr=new rre;Jr.setAnimationLoop(fn),typeof self!="undefined"&&Jr.setContext(self),this.setAnimationLoop=function(ge){Rt=ge,Kt.setAnimationLoop(ge),ge===null?Jr.stop():Jr.start()},Kt.addEventListener("sessionstart",Rn),Kt.addEventListener("sessionend",Bn),this.render=function(ge,Qe){if(Qe!==void 0&&Qe.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(O===!0)return;ge.autoUpdate===!0&&ge.updateMatrixWorld(),Qe.parent===null&&Qe.updateMatrixWorld(),Kt.enabled===!0&&Kt.isPresenting===!0&&(Kt.cameraAutoUpdate===!0&&Kt.updateCamera(Qe),Qe=Kt.getCamera()),ge.isScene===!0&&ge.onBeforeRender(K,ge,Qe,z),V=xe.get(ge,ie.length),V.init(),ie.push(V),Lt.multiplyMatrices(Qe.projectionMatrix,Qe.matrixWorldInverse),He.setFromProjectionMatrix(Lt),dt=this.localClippingEnabled,yt=he.init(this.clippingPlanes,dt,Qe),F=vi.get(ge,X.length),F.init(),X.push(F),zi(ge,Qe,0,K.sortObjects),F.finish(),K.sortObjects===!0&&F.sort(Ut,Dt),yt===!0&&he.beginShadows();const ut=V.state.shadowsArray;if(ft.render(ut,ge,Qe),yt===!0&&he.endShadows(),this.info.autoReset===!0&&this.info.reset(),zt.render(F,ge),V.setupLights(K.physicallyCorrectLights),Qe.isArrayCamera){const ot=Qe.cameras;for(let bt=0,_n=ot.length;bt<_n;bt++){const En=ot[bt];No(F,ge,En,En.viewport)}}else No(F,ge,Qe);z!==null&&(hn.updateMultisampleRenderTarget(z),hn.updateRenderTargetMipmap(z)),ge.isScene===!0&&ge.onAfterRender(K,ge,Qe),ln.resetDefaultState(),le=-1,Ee=null,ie.pop(),ie.length>0?V=ie[ie.length-1]:V=null,X.pop(),X.length>0?F=X[X.length-1]:F=null};function zi(ge,Qe,ut,ot){if(ge.visible===!1)return;if(ge.layers.test(Qe.layers)){if(ge.isGroup)ut=ge.renderOrder;else if(ge.isLOD)ge.autoUpdate===!0&&ge.update(Qe);else if(ge.isLight)V.pushLight(ge),ge.castShadow&&V.pushShadow(ge);else if(ge.isSprite){if(!ge.frustumCulled||He.intersectsSprite(ge)){ot&&Ot.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(Lt);const En=$n.update(ge),xn=ge.material;xn.visible&&F.push(ge,En,xn,ut,Ot.z,null)}}else if((ge.isMesh||ge.isLine||ge.isPoints)&&(ge.isSkinnedMesh&&ge.skeleton.frame!==On.render.frame&&(ge.skeleton.update(),ge.skeleton.frame=On.render.frame),!ge.frustumCulled||He.intersectsObject(ge))){ot&&Ot.setFromMatrixPosition(ge.matrixWorld).applyMatrix4(Lt);const En=$n.update(ge),xn=ge.material;if(Array.isArray(xn)){const An=En.groups;for(let Un=0,Nn=An.length;Un<Nn;Un++){const Vn=An[Un],yr=xn[Vn.materialIndex];yr&&yr.visible&&F.push(ge,En,yr,ut,Ot.z,Vn)}}else xn.visible&&F.push(ge,En,xn,ut,Ot.z,null)}}const _n=ge.children;for(let En=0,xn=_n.length;En<xn;En++)zi(_n[En],Qe,ut,ot)}function No(ge,Qe,ut,ot){const bt=ge.opaque,_n=ge.transmissive,En=ge.transparent;V.setupLightsView(ut),_n.length>0&&Ya(bt,Qe,ut),ot&&qt.viewport(je.copy(ot)),bt.length>0&&Gs(bt,Qe,ut),_n.length>0&&Gs(_n,Qe,ut),En.length>0&&Gs(En,Qe,ut),qt.buffers.depth.setTest(!0),qt.buffers.depth.setMask(!0),qt.buffers.color.setMask(!0),qt.setPolygonOffset(!1)}function Ya(ge,Qe,ut){const ot=wn.isWebGL2;vt===null&&(vt=new Kh(1,1,{generateMipmaps:!0,type:Dn.has("EXT_color_buffer_half_float")?s1:Wh,minFilter:w0,samples:ot&&g===!0?4:0})),K.getDrawingBufferSize(Et),ot?vt.setSize(Et.x,Et.y):vt.setSize(KM(Et.x),KM(Et.y));const bt=K.getRenderTarget();K.setRenderTarget(vt),K.clear();const _n=K.toneMapping;K.toneMapping=qu,Gs(ge,Qe,ut),K.toneMapping=_n,hn.updateMultisampleRenderTarget(vt),hn.updateRenderTargetMipmap(vt),K.setRenderTarget(bt)}function Gs(ge,Qe,ut){const ot=Qe.isScene===!0?Qe.overrideMaterial:null;for(let bt=0,_n=ge.length;bt<_n;bt++){const En=ge[bt],xn=En.object,An=En.geometry,Un=ot===null?En.material:ot,Nn=En.group;xn.layers.test(ut.layers)&&Ti(xn,Qe,ut,An,Un,Nn)}}function Ti(ge,Qe,ut,ot,bt,_n){ge.onBeforeRender(K,Qe,ut,ot,bt,_n),ge.modelViewMatrix.multiplyMatrices(ut.matrixWorldInverse,ge.matrixWorld),ge.normalMatrix.getNormalMatrix(ge.modelViewMatrix),bt.onBeforeRender(K,Qe,ut,ot,ge,_n),bt.transparent===!0&&bt.side===Gh?(bt.side=Vs,bt.needsUpdate=!0,K.renderBufferDirect(ut,Qe,ot,bt,ge,_n),bt.side=p0,bt.needsUpdate=!0,K.renderBufferDirect(ut,Qe,ot,bt,ge,_n),bt.side=Gh):K.renderBufferDirect(ut,Qe,ot,bt,ge,_n),ge.onAfterRender(K,Qe,ut,ot,bt,_n)}function Ja(ge,Qe,ut){Qe.isScene!==!0&&(Qe=Yt);const ot=Fn.get(ge),bt=V.state.lights,_n=V.state.shadowsArray,En=bt.state.version,xn=Zn.getParameters(ge,bt.state,_n,Qe,ut),An=Zn.getProgramCacheKey(xn);let Un=ot.programs;ot.environment=ge.isMeshStandardMaterial?Qe.environment:null,ot.fog=Qe.fog,ot.envMap=(ge.isMeshStandardMaterial?Yr:Br).get(ge.envMap||ot.environment),Un===void 0&&(ge.addEventListener("dispose",pn),Un=new Map,ot.programs=Un);let Nn=Un.get(An);if(Nn!==void 0){if(ot.currentProgram===Nn&&ot.lightsStateVersion===En)return Fl(ge,xn),Nn}else xn.uniforms=Zn.getUniforms(ge),ge.onBuild(ut,xn,K),ge.onBeforeCompile(xn,K),Nn=Zn.acquireProgram(xn,An),Un.set(An,Nn),ot.uniforms=xn.uniforms;const Vn=ot.uniforms;(!ge.isShaderMaterial&&!ge.isRawShaderMaterial||ge.clipping===!0)&&(Vn.clippingPlanes=he.uniform),Fl(ge,xn),ot.needsLights=Zu(ge),ot.lightsStateVersion=En,ot.needsLights&&(Vn.ambientLightColor.value=bt.state.ambient,Vn.lightProbe.value=bt.state.probe,Vn.directionalLights.value=bt.state.directional,Vn.directionalLightShadows.value=bt.state.directionalShadow,Vn.spotLights.value=bt.state.spot,Vn.spotLightShadows.value=bt.state.spotShadow,Vn.rectAreaLights.value=bt.state.rectArea,Vn.ltc_1.value=bt.state.rectAreaLTC1,Vn.ltc_2.value=bt.state.rectAreaLTC2,Vn.pointLights.value=bt.state.point,Vn.pointLightShadows.value=bt.state.pointShadow,Vn.hemisphereLights.value=bt.state.hemi,Vn.directionalShadowMap.value=bt.state.directionalShadowMap,Vn.directionalShadowMatrix.value=bt.state.directionalShadowMatrix,Vn.spotShadowMap.value=bt.state.spotShadowMap,Vn.spotShadowMatrix.value=bt.state.spotShadowMatrix,Vn.pointShadowMap.value=bt.state.pointShadowMap,Vn.pointShadowMatrix.value=bt.state.pointShadowMatrix);const yr=Nn.getUniforms(),Yo=WM.seqWithValue(yr.seq,Vn);return ot.currentProgram=Nn,ot.uniformsList=Yo,Nn}function Fl(ge,Qe){const ut=Fn.get(ge);ut.outputEncoding=Qe.outputEncoding,ut.instancing=Qe.instancing,ut.skinning=Qe.skinning,ut.morphTargets=Qe.morphTargets,ut.morphNormals=Qe.morphNormals,ut.morphColors=Qe.morphColors,ut.morphTargetsCount=Qe.morphTargetsCount,ut.numClippingPlanes=Qe.numClippingPlanes,ut.numIntersection=Qe.numClipIntersection,ut.vertexAlphas=Qe.vertexAlphas,ut.vertexTangents=Qe.vertexTangents,ut.toneMapping=Qe.toneMapping}function yi(ge,Qe,ut,ot,bt){Qe.isScene!==!0&&(Qe=Yt),hn.resetTextureUnits();const _n=Qe.fog,En=ot.isMeshStandardMaterial?Qe.environment:null,xn=z===null?K.outputEncoding:z.isXRRenderTarget===!0?z.texture.encoding:qh,An=(ot.isMeshStandardMaterial?Yr:Br).get(ot.envMap||En),Un=ot.vertexColors===!0&&!!ut.attributes.color&&ut.attributes.color.itemSize===4,Nn=!!ot.normalMap&&!!ut.attributes.tangent,Vn=!!ut.morphAttributes.position,yr=!!ut.morphAttributes.normal,Yo=!!ut.morphAttributes.color,Qr=ot.toneMapped?K.toneMapping:qu,Mi=ut.morphAttributes.position||ut.morphAttributes.normal||ut.morphAttributes.color,Qi=Mi!==void 0?Mi.length:0,Hn=Fn.get(ot),Jo=V.state.lights;if(yt===!0&&(dt===!0||ge!==Ee)){const li=ge===Ee&&ot.id===le;he.setState(ot,ge,li)}let Sr=!1;ot.version===Hn.__version?(Hn.needsLights&&Hn.lightsStateVersion!==Jo.state.version||Hn.outputEncoding!==xn||bt.isInstancedMesh&&Hn.instancing===!1||!bt.isInstancedMesh&&Hn.instancing===!0||bt.isSkinnedMesh&&Hn.skinning===!1||!bt.isSkinnedMesh&&Hn.skinning===!0||Hn.envMap!==An||ot.fog===!0&&Hn.fog!==_n||Hn.numClippingPlanes!==void 0&&(Hn.numClippingPlanes!==he.numPlanes||Hn.numIntersection!==he.numIntersection)||Hn.vertexAlphas!==Un||Hn.vertexTangents!==Nn||Hn.morphTargets!==Vn||Hn.morphNormals!==yr||Hn.morphColors!==Yo||Hn.toneMapping!==Qr||wn.isWebGL2===!0&&Hn.morphTargetsCount!==Qi)&&(Sr=!0):(Sr=!0,Hn.__version=ot.version);let Fi=Hn.currentProgram;Sr===!0&&(Fi=Ja(ot,Qe,bt));let si=!1,bi=!1,Qo=!1;const ei=Fi.getUniforms(),ea=Hn.uniforms;if(qt.useProgram(Fi.program)&&(si=!0,bi=!0,Qo=!0),ot.id!==le&&(le=ot.id,bi=!0),si||Ee!==ge){if(ei.setValue(mt,"projectionMatrix",ge.projectionMatrix),wn.logarithmicDepthBuffer&&ei.setValue(mt,"logDepthBufFC",2/(Math.log(ge.far+1)/Math.LN2)),Ee!==ge&&(Ee=ge,bi=!0,Qo=!0),ot.isShaderMaterial||ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshStandardMaterial||ot.envMap){const li=ei.map.cameraPosition;li!==void 0&&li.setValue(mt,Ot.setFromMatrixPosition(ge.matrixWorld))}(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial)&&ei.setValue(mt,"isOrthographic",ge.isOrthographicCamera===!0),(ot.isMeshPhongMaterial||ot.isMeshToonMaterial||ot.isMeshLambertMaterial||ot.isMeshBasicMaterial||ot.isMeshStandardMaterial||ot.isShaderMaterial||ot.isShadowMaterial||bt.isSkinnedMesh)&&ei.setValue(mt,"viewMatrix",ge.matrixWorldInverse)}if(bt.isSkinnedMesh){ei.setOptional(mt,bt,"bindMatrix"),ei.setOptional(mt,bt,"bindMatrixInverse");const li=bt.skeleton;li&&(wn.floatVertexTextures?(li.boneTexture===null&&li.computeBoneTexture(),ei.setValue(mt,"boneTexture",li.boneTexture,hn),ei.setValue(mt,"boneTextureSize",li.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const po=ut.morphAttributes;return(po.position!==void 0||po.normal!==void 0||po.color!==void 0&&wn.isWebGL2===!0)&&Nt.update(bt,ut,ot,Fi),(bi||Hn.receiveShadow!==bt.receiveShadow)&&(Hn.receiveShadow=bt.receiveShadow,ei.setValue(mt,"receiveShadow",bt.receiveShadow)),bi&&(ei.setValue(mt,"toneMappingExposure",K.toneMappingExposure),Hn.needsLights&&Ni(ea,Qo),_n&&ot.fog===!0&&kr.refreshFogUniforms(ea,_n),kr.refreshMaterialUniforms(ea,ot,Je,Q,vt),WM.upload(mt,Hn.uniformsList,ea,hn)),ot.isShaderMaterial&&ot.uniformsNeedUpdate===!0&&(WM.upload(mt,Hn.uniformsList,ea,hn),ot.uniformsNeedUpdate=!1),ot.isSpriteMaterial&&ei.setValue(mt,"center",bt.center),ei.setValue(mt,"modelViewMatrix",bt.modelViewMatrix),ei.setValue(mt,"normalMatrix",bt.normalMatrix),ei.setValue(mt,"modelMatrix",bt.matrixWorld),Fi}function Ni(ge,Qe){ge.ambientLightColor.needsUpdate=Qe,ge.lightProbe.needsUpdate=Qe,ge.directionalLights.needsUpdate=Qe,ge.directionalLightShadows.needsUpdate=Qe,ge.pointLights.needsUpdate=Qe,ge.pointLightShadows.needsUpdate=Qe,ge.spotLights.needsUpdate=Qe,ge.spotLightShadows.needsUpdate=Qe,ge.rectAreaLights.needsUpdate=Qe,ge.hemisphereLights.needsUpdate=Qe}function Zu(ge){return ge.isMeshLambertMaterial||ge.isMeshToonMaterial||ge.isMeshPhongMaterial||ge.isMeshStandardMaterial||ge.isShadowMaterial||ge.isShaderMaterial&&ge.lights===!0}this.getActiveCubeFace=function(){return q},this.getActiveMipmapLevel=function(){return _e},this.getRenderTarget=function(){return z},this.setRenderTargetTextures=function(ge,Qe,ut){Fn.get(ge.texture).__webglTexture=Qe,Fn.get(ge.depthTexture).__webglTexture=ut;const ot=Fn.get(ge);ot.__hasExternalTextures=!0,ot.__hasExternalTextures&&(ot.__autoAllocateDepthBuffer=ut===void 0,ot.__autoAllocateDepthBuffer||Dn.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),ot.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ge,Qe){const ut=Fn.get(ge);ut.__webglFramebuffer=Qe,ut.__useDefaultFramebuffer=Qe===void 0},this.setRenderTarget=function(ge,Qe=0,ut=0){z=ge,q=Qe,_e=ut;let ot=!0;if(ge){const An=Fn.get(ge);An.__useDefaultFramebuffer!==void 0?(qt.bindFramebuffer(36160,null),ot=!1):An.__webglFramebuffer===void 0?hn.setupRenderTarget(ge):An.__hasExternalTextures&&hn.rebindTextures(ge,Fn.get(ge.texture).__webglTexture,Fn.get(ge.depthTexture).__webglTexture)}let bt=null,_n=!1,En=!1;if(ge){const An=ge.texture;(An.isData3DTexture||An.isDataArrayTexture)&&(En=!0);const Un=Fn.get(ge).__webglFramebuffer;ge.isWebGLCubeRenderTarget?(bt=Un[Qe],_n=!0):wn.isWebGL2&&ge.samples>0&&hn.useMultisampledRTT(ge)===!1?bt=Fn.get(ge).__webglMultisampledFramebuffer:bt=Un,je.copy(ge.viewport),te.copy(ge.scissor),me=ge.scissorTest}else je.copy(et).multiplyScalar(Je).floor(),te.copy(be).multiplyScalar(Je).floor(),me=tt;if(qt.bindFramebuffer(36160,bt)&&wn.drawBuffers&&ot&&qt.drawBuffers(ge,bt),qt.viewport(je),qt.scissor(te),qt.setScissorTest(me),_n){const An=Fn.get(ge.texture);mt.framebufferTexture2D(36160,36064,34069+Qe,An.__webglTexture,ut)}else if(En){const An=Fn.get(ge.texture),Un=Qe||0;mt.framebufferTextureLayer(36160,36064,An.__webglTexture,ut||0,Un)}le=-1},this.readRenderTargetPixels=function(ge,Qe,ut,ot,bt,_n,En){if(!(ge&&ge.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let xn=Fn.get(ge).__webglFramebuffer;if(ge.isWebGLCubeRenderTarget&&En!==void 0&&(xn=xn[En]),xn){qt.bindFramebuffer(36160,xn);try{const An=ge.texture,Un=An.format,Nn=An.type;if(Un!==Us&&ht.convert(Un)!==mt.getParameter(35739)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Vn=Nn===s1&&(Dn.has("EXT_color_buffer_half_float")||wn.isWebGL2&&Dn.has("EXT_color_buffer_float"));if(Nn!==Wh&&ht.convert(Nn)!==mt.getParameter(35738)&&!(Nn===jd&&(wn.isWebGL2||Dn.has("OES_texture_float")||Dn.has("WEBGL_color_buffer_float")))&&!Vn){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Qe>=0&&Qe<=ge.width-ot&&ut>=0&&ut<=ge.height-bt&&mt.readPixels(Qe,ut,ot,bt,ht.convert(Un),ht.convert(Nn),_n)}finally{const An=z!==null?Fn.get(z).__webglFramebuffer:null;qt.bindFramebuffer(36160,An)}}},this.copyFramebufferToTexture=function(ge,Qe,ut=0){const ot=Math.pow(2,-ut),bt=Math.floor(Qe.image.width*ot),_n=Math.floor(Qe.image.height*ot);hn.setTexture2D(Qe,0),mt.copyTexSubImage2D(3553,ut,0,0,ge.x,ge.y,bt,_n),qt.unbindTexture()},this.copyTextureToTexture=function(ge,Qe,ut,ot=0){const bt=Qe.image.width,_n=Qe.image.height,En=ht.convert(ut.format),xn=ht.convert(ut.type);hn.setTexture2D(ut,0),mt.pixelStorei(37440,ut.flipY),mt.pixelStorei(37441,ut.premultiplyAlpha),mt.pixelStorei(3317,ut.unpackAlignment),Qe.isDataTexture?mt.texSubImage2D(3553,ot,ge.x,ge.y,bt,_n,En,xn,Qe.image.data):Qe.isCompressedTexture?mt.compressedTexSubImage2D(3553,ot,ge.x,ge.y,Qe.mipmaps[0].width,Qe.mipmaps[0].height,En,Qe.mipmaps[0].data):mt.texSubImage2D(3553,ot,ge.x,ge.y,En,xn,Qe.image),ot===0&&ut.generateMipmaps&&mt.generateMipmap(3553),qt.unbindTexture()},this.copyTextureToTexture3D=function(ge,Qe,ut,ot,bt=0){if(K.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const _n=ge.max.x-ge.min.x+1,En=ge.max.y-ge.min.y+1,xn=ge.max.z-ge.min.z+1,An=ht.convert(ot.format),Un=ht.convert(ot.type);let Nn;if(ot.isData3DTexture)hn.setTexture3D(ot,0),Nn=32879;else if(ot.isDataArrayTexture)hn.setTexture2DArray(ot,0),Nn=35866;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}mt.pixelStorei(37440,ot.flipY),mt.pixelStorei(37441,ot.premultiplyAlpha),mt.pixelStorei(3317,ot.unpackAlignment);const Vn=mt.getParameter(3314),yr=mt.getParameter(32878),Yo=mt.getParameter(3316),Qr=mt.getParameter(3315),Mi=mt.getParameter(32877),Qi=ut.isCompressedTexture?ut.mipmaps[0]:ut.image;mt.pixelStorei(3314,Qi.width),mt.pixelStorei(32878,Qi.height),mt.pixelStorei(3316,ge.min.x),mt.pixelStorei(3315,ge.min.y),mt.pixelStorei(32877,ge.min.z),ut.isDataTexture||ut.isData3DTexture?mt.texSubImage3D(Nn,bt,Qe.x,Qe.y,Qe.z,_n,En,xn,An,Un,Qi.data):ut.isCompressedTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),mt.compressedTexSubImage3D(Nn,bt,Qe.x,Qe.y,Qe.z,_n,En,xn,An,Qi.data)):mt.texSubImage3D(Nn,bt,Qe.x,Qe.y,Qe.z,_n,En,xn,An,Un,Qi),mt.pixelStorei(3314,Vn),mt.pixelStorei(32878,yr),mt.pixelStorei(3316,Yo),mt.pixelStorei(3315,Qr),mt.pixelStorei(32877,Mi),bt===0&&ot.generateMipmaps&&mt.generateMipmap(Nn),qt.unbindTexture()},this.initTexture=function(ge){ge.isCubeTexture?hn.setTextureCube(ge,0):ge.isData3DTexture?hn.setTexture3D(ge,0):ge.isDataArrayTexture?hn.setTexture2DArray(ge,0):hn.setTexture2D(ge,0),qt.unbindTexture()},this.resetState=function(){q=0,_e=0,z=null,qt.reset(),ln.reset()},typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}class lbe extends ure{}lbe.prototype.isWebGL1Renderer=!0;class ube extends gi{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,i){return super.copy(t,i),t.background!==null&&(this.background=t.background.clone()),t.environment!==null&&(this.environment=t.environment.clone()),t.fog!==null&&(this.fog=t.fog.clone()),t.overrideMaterial!==null&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const i=super.toJSON(t);return this.fog!==null&&(i.object.fog=this.fog.toJSON()),i}}class cbe{constructor(t,i){this.isInterleavedBuffer=!0,this.array=t,this.stride=i,this.count=t!==void 0?t.length/i:0,this.usage=hL,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Hs()}onUploadCallback(){}set needsUpdate(t){t===!0&&this.version++}setUsage(t){return this.usage=t,this}copy(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this}copyAt(t,i,l){t*=this.stride,l*=i.stride;for(let d=0,g=this.stride;d<g;d++)this.array[t+d]=i.array[l+d];return this}set(t,i=0){return this.array.set(t,i),this}clone(t){t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const i=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),l=new this.constructor(i,this.stride);return l.setUsage(this.usage),l}onUpload(t){return this.onUploadCallback=t,this}toJSON(t){return t.arrayBuffers===void 0&&(t.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Hs()),t.arrayBuffers[this.array.buffer._uuid]===void 0&&(t.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Io=new Ve;class OL{constructor(t,i,l,d=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=t,this.itemSize=i,this.offset=l,this.normalized=d===!0}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(t){this.data.needsUpdate=t}applyMatrix4(t){for(let i=0,l=this.data.count;i<l;i++)Io.fromBufferAttribute(this,i),Io.applyMatrix4(t),this.setXYZ(i,Io.x,Io.y,Io.z);return this}applyNormalMatrix(t){for(let i=0,l=this.count;i<l;i++)Io.fromBufferAttribute(this,i),Io.applyNormalMatrix(t),this.setXYZ(i,Io.x,Io.y,Io.z);return this}transformDirection(t){for(let i=0,l=this.count;i<l;i++)Io.fromBufferAttribute(this,i),Io.transformDirection(t),this.setXYZ(i,Io.x,Io.y,Io.z);return this}setX(t,i){return this.data.array[t*this.data.stride+this.offset]=i,this}setY(t,i){return this.data.array[t*this.data.stride+this.offset+1]=i,this}setZ(t,i){return this.data.array[t*this.data.stride+this.offset+2]=i,this}setW(t,i){return this.data.array[t*this.data.stride+this.offset+3]=i,this}getX(t){return this.data.array[t*this.data.stride+this.offset]}getY(t){return this.data.array[t*this.data.stride+this.offset+1]}getZ(t){return this.data.array[t*this.data.stride+this.offset+2]}getW(t){return this.data.array[t*this.data.stride+this.offset+3]}setXY(t,i,l){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this}setXYZ(t,i,l,d){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this.data.array[t+2]=d,this}setXYZW(t,i,l,d,g){return t=t*this.data.stride+this.offset,this.data.array[t+0]=i,this.data.array[t+1]=l,this.data.array[t+2]=d,this.data.array[t+3]=g,this}clone(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will deinterleave buffer data.");const i=[];for(let l=0;l<this.count;l++){const d=l*this.data.stride+this.offset;for(let g=0;g<this.itemSize;g++)i.push(this.data.array[d+g])}return new va(new this.array.constructor(i),this.itemSize,this.normalized)}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new OL(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(t){if(t===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will deinterleave buffer data.");const i=[];for(let l=0;l<this.count;l++){const d=l*this.data.stride+this.offset;for(let g=0;g<this.itemSize;g++)i.push(this.data.array[d+g])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:i,normalized:this.normalized}}else return t.interleavedBuffers===void 0&&(t.interleavedBuffers={}),t.interleavedBuffers[this.data.uuid]===void 0&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}const mne=new Ve,gne=new xr,vne=new xr,dbe=new Ve,yne=new lr;class fbe extends Rl{constructor(t,i){super(t,i),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new lr,this.bindMatrixInverse=new lr}copy(t,i){return super.copy(t,i),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this}bind(t,i){this.skeleton=t,i===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),i=this.matrixWorld),this.bindMatrix.copy(i),this.bindMatrixInverse.copy(i).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const t=new xr,i=this.geometry.attributes.skinWeight;for(let l=0,d=i.count;l<d;l++){t.fromBufferAttribute(i,l);const g=1/t.manhattanLength();g!==1/0?t.multiplyScalar(g):t.set(1,0,0,0),i.setXYZW(l,t.x,t.y,t.z,t.w)}}updateMatrixWorld(t){super.updateMatrixWorld(t),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}boneTransform(t,i){const l=this.skeleton,d=this.geometry;gne.fromBufferAttribute(d.attributes.skinIndex,t),vne.fromBufferAttribute(d.attributes.skinWeight,t),mne.copy(i).applyMatrix4(this.bindMatrix),i.set(0,0,0);for(let g=0;g<4;g++){const x=vne.getComponent(g);if(x!==0){const _=gne.getComponent(g);yne.multiplyMatrices(l.bones[_].matrixWorld,l.boneInverses[_]),i.addScaledVector(dbe.copy(mne).applyMatrix4(yne),x)}}return i.applyMatrix4(this.bindMatrixInverse)}}class cre extends gi{constructor(){super(),this.isBone=!0,this.type="Bone"}}class hbe extends Ro{constructor(t=null,i=1,l=1,d,g,x,_,P,D=Ji,B=Ji,F,V){super(null,x,_,P,D,B,d,g,F,V),this.isDataTexture=!0,this.image={data:t,width:i,height:l},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bne=new lr,pbe=new lr;class RL{constructor(t=[],i=[]){this.uuid=Hs(),this.bones=t.slice(0),this.boneInverses=i,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}init(){const t=this.bones,i=this.boneInverses;if(this.boneMatrices=new Float32Array(t.length*16),i.length===0)this.calculateInverses();else if(t.length!==i.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let l=0,d=this.bones.length;l<d;l++)this.boneInverses.push(new lr)}}calculateInverses(){this.boneInverses.length=0;for(let t=0,i=this.bones.length;t<i;t++){const l=new lr;this.bones[t]&&l.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(l)}}pose(){for(let t=0,i=this.bones.length;t<i;t++){const l=this.bones[t];l&&l.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,i=this.bones.length;t<i;t++){const l=this.bones[t];l&&(l.parent&&l.parent.isBone?(l.matrix.copy(l.parent.matrixWorld).invert(),l.matrix.multiply(l.matrixWorld)):l.matrix.copy(l.matrixWorld),l.matrix.decompose(l.position,l.quaternion,l.scale))}}update(){const t=this.bones,i=this.boneInverses,l=this.boneMatrices,d=this.boneTexture;for(let g=0,x=t.length;g<x;g++){const _=t[g]?t[g].matrixWorld:pbe;bne.multiplyMatrices(_,i[g]),bne.toArray(l,g*16)}d!==null&&(d.needsUpdate=!0)}clone(){return new RL(this.bones,this.boneInverses)}computeBoneTexture(){let t=Math.sqrt(this.bones.length*4);t=qne(t),t=Math.max(t,4);const i=new Float32Array(t*t*4);i.set(this.boneMatrices);const l=new hbe(i,t,t,Us,jd);return l.needsUpdate=!0,this.boneMatrices=i,this.boneTexture=l,this.boneTextureSize=t,this}getBoneByName(t){for(let i=0,l=this.bones.length;i<l;i++){const d=this.bones[i];if(d.name===t)return d}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(t,i){this.uuid=t.uuid;for(let l=0,d=t.bones.length;l<d;l++){const g=t.bones[l];let x=i[g];x===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",g),x=new cre),this.bones.push(x),this.boneInverses.push(new lr().fromArray(t.boneInverses[l]))}return this.init(),this}toJSON(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const i=this.bones,l=this.boneInverses;for(let d=0,g=i.length;d<g;d++){const x=i[d];t.bones.push(x.uuid);const _=l[d];t.boneInverses.push(_.toArray())}return t}}class dre extends Ll{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new zn(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const _ne=new Ve,xne=new Ve,wne=new lr,oL=new PL,jM=new k0;class LL extends gi{constructor(t=new zl,i=new dre){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,l=[0];for(let d=1,g=i.count;d<g;d++)_ne.fromBufferAttribute(i,d-1),xne.fromBufferAttribute(i,d),l[d]=l[d-1],l[d]+=_ne.distanceTo(xne);t.setAttribute("lineDistance",new Ku(l,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,i){const l=this.geometry,d=this.matrixWorld,g=t.params.Line.threshold,x=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),jM.copy(l.boundingSphere),jM.applyMatrix4(d),jM.radius+=g,t.ray.intersectsSphere(jM)===!1)return;wne.copy(d).invert(),oL.copy(t.ray).applyMatrix4(wne);const _=g/((this.scale.x+this.scale.y+this.scale.z)/3),P=_*_,D=new Ve,B=new Ve,F=new Ve,V=new Ve,X=this.isLineSegments?2:1,ie=l.index,O=l.attributes.position;if(ie!==null){const q=Math.max(0,x.start),_e=Math.min(ie.count,x.start+x.count);for(let z=q,le=_e-1;z<le;z+=X){const Ee=ie.getX(z),je=ie.getX(z+1);if(D.fromBufferAttribute(O,Ee),B.fromBufferAttribute(O,je),oL.distanceSqToSegment(D,B,V,F)>P)continue;V.applyMatrix4(this.matrixWorld);const me=t.ray.origin.distanceTo(V);me<t.near||me>t.far||i.push({distance:me,point:F.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}}else{const q=Math.max(0,x.start),_e=Math.min(O.count,x.start+x.count);for(let z=q,le=_e-1;z<le;z+=X){if(D.fromBufferAttribute(O,z),B.fromBufferAttribute(O,z+1),oL.distanceSqToSegment(D,B,V,F)>P)continue;V.applyMatrix4(this.matrixWorld);const je=t.ray.origin.distanceTo(V);je<t.near||je>t.far||i.push({distance:je,point:F.clone().applyMatrix4(this.matrixWorld),index:z,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,x=d.length;g<x;g++){const _=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=g}}}}}const Sne=new Ve,Ene=new Ve;class mbe extends LL{constructor(t,i){super(t,i),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const t=this.geometry;if(t.index===null){const i=t.attributes.position,l=[];for(let d=0,g=i.count;d<g;d+=2)Sne.fromBufferAttribute(i,d),Ene.fromBufferAttribute(i,d+1),l[d]=d===0?0:l[d-1],l[d+1]=l[d]+Sne.distanceTo(Ene);t.setAttribute("lineDistance",new Ku(l,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class gbe extends LL{constructor(t,i){super(t,i),this.isLineLoop=!0,this.type="LineLoop"}}class fre extends Ll{constructor(t){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new zn(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.fog=t.fog,this}}const kne=new lr,vL=new PL,UM=new k0,VM=new Ve;class vbe extends gi{constructor(t=new zl,i=new fre){super(),this.isPoints=!0,this.type="Points",this.geometry=t,this.material=i,this.updateMorphTargets()}copy(t,i){return super.copy(t,i),this.material=t.material,this.geometry=t.geometry,this}raycast(t,i){const l=this.geometry,d=this.matrixWorld,g=t.params.Points.threshold,x=l.drawRange;if(l.boundingSphere===null&&l.computeBoundingSphere(),UM.copy(l.boundingSphere),UM.applyMatrix4(d),UM.radius+=g,t.ray.intersectsSphere(UM)===!1)return;kne.copy(d).invert(),vL.copy(t.ray).applyMatrix4(kne);const _=g/((this.scale.x+this.scale.y+this.scale.z)/3),P=_*_,D=l.index,F=l.attributes.position;if(D!==null){const V=Math.max(0,x.start),X=Math.min(D.count,x.start+x.count);for(let ie=V,K=X;ie<K;ie++){const O=D.getX(ie);VM.fromBufferAttribute(F,O),Tne(VM,O,P,d,t,i,this)}}else{const V=Math.max(0,x.start),X=Math.min(F.count,x.start+x.count);for(let ie=V,K=X;ie<K;ie++)VM.fromBufferAttribute(F,ie),Tne(VM,ie,P,d,t,i,this)}}updateMorphTargets(){const i=this.geometry.morphAttributes,l=Object.keys(i);if(l.length>0){const d=i[l[0]];if(d!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let g=0,x=d.length;g<x;g++){const _=d[g].name||String(g);this.morphTargetInfluences.push(0),this.morphTargetDictionary[_]=g}}}}}function Tne(w,t,i,l,d,g,x){const _=vL.distanceSqToPoint(w);if(_<i){const P=new Ve;vL.closestPointToPoint(w,P),P.applyMatrix4(l);const D=d.ray.origin.distanceTo(P);if(D<d.near||D>d.far)return;g.push({distance:D,distanceToRay:Math.sqrt(_),point:P,index:t,face:null,object:x})}}class ZM extends Ll{constructor(t){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new zn(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new zn(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=TL,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.flatShading=t.flatShading,this.fog=t.fog,this}}class Zh extends ZM{constructor(t){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new er(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Do(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(i){this.ior=(1+.4*i)/(1-.4*i)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new zn(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=0,this.attenuationColor=new zn(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new zn(1,1,1),this.specularColorMap=null,this._sheen=0,this._clearcoat=0,this._iridescence=0,this._transmission=0,this.setValues(t)}get sheen(){return this._sheen}set sheen(t){this._sheen>0!=t>0&&this.version++,this._sheen=t}get clearcoat(){return this._clearcoat}set clearcoat(t){this._clearcoat>0!=t>0&&this.version++,this._clearcoat=t}get iridescence(){return this._iridescence}set iridescence(t){this._iridescence>0!=t>0&&this.version++,this._iridescence=t}get transmission(){return this._transmission}set transmission(t){this._transmission>0!=t>0&&this.version++,this._transmission=t}copy(t){return super.copy(t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.ior=t.ior,this.iridescence=t.iridescence,this.iridescenceMap=t.iridescenceMap,this.iridescenceIOR=t.iridescenceIOR,this.iridescenceThicknessRange=[...t.iridescenceThicknessRange],this.iridescenceThicknessMap=t.iridescenceThicknessMap,this.sheen=t.sheen,this.sheenColor.copy(t.sheenColor),this.sheenColorMap=t.sheenColorMap,this.sheenRoughness=t.sheenRoughness,this.sheenRoughnessMap=t.sheenRoughnessMap,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this.thickness=t.thickness,this.thicknessMap=t.thicknessMap,this.attenuationDistance=t.attenuationDistance,this.attenuationColor.copy(t.attenuationColor),this.specularIntensity=t.specularIntensity,this.specularIntensityMap=t.specularIntensityMap,this.specularColor.copy(t.specularColor),this.specularColorMap=t.specularColorMap,this}}const Fr={arraySlice:function(w,t,i){return Fr.isTypedArray(w)?new w.constructor(w.subarray(t,i!==void 0?i:w.length)):w.slice(t,i)},convertArray:function(w,t,i){return!w||!i&&w.constructor===t?w:typeof t.BYTES_PER_ELEMENT=="number"?new t(w):Array.prototype.slice.call(w)},isTypedArray:function(w){return ArrayBuffer.isView(w)&&!(w instanceof DataView)},getKeyframeOrder:function(w){function t(d,g){return w[d]-w[g]}const i=w.length,l=new Array(i);for(let d=0;d!==i;++d)l[d]=d;return l.sort(t),l},sortedArray:function(w,t,i){const l=w.length,d=new w.constructor(l);for(let g=0,x=0;x!==l;++g){const _=i[g]*t;for(let P=0;P!==t;++P)d[x++]=w[_+P]}return d},flattenJSON:function(w,t,i,l){let d=1,g=w[0];for(;g!==void 0&&g[l]===void 0;)g=w[d++];if(g===void 0)return;let x=g[l];if(x!==void 0)if(Array.isArray(x))do x=g[l],x!==void 0&&(t.push(g.time),i.push.apply(i,x)),g=w[d++];while(g!==void 0);else if(x.toArray!==void 0)do x=g[l],x!==void 0&&(t.push(g.time),x.toArray(i,i.length)),g=w[d++];while(g!==void 0);else do x=g[l],x!==void 0&&(t.push(g.time),i.push(x)),g=w[d++];while(g!==void 0)},subclip:function(w,t,i,l,d=30){const g=w.clone();g.name=t;const x=[];for(let P=0;P<g.tracks.length;++P){const D=g.tracks[P],B=D.getValueSize(),F=[],V=[];for(let X=0;X<D.times.length;++X){const ie=D.times[X]*d;if(!(ie<i||ie>=l)){F.push(D.times[X]);for(let K=0;K<B;++K)V.push(D.values[X*B+K])}}F.length!==0&&(D.times=Fr.convertArray(F,D.times.constructor),D.values=Fr.convertArray(V,D.values.constructor),x.push(D))}g.tracks=x;let _=1/0;for(let P=0;P<g.tracks.length;++P)_>g.tracks[P].times[0]&&(_=g.tracks[P].times[0]);for(let P=0;P<g.tracks.length;++P)g.tracks[P].shift(-1*_);return g.resetDuration(),g},makeClipAdditive:function(w,t=0,i=w,l=30){l<=0&&(l=30);const d=i.tracks.length,g=t/l;for(let x=0;x<d;++x){const _=i.tracks[x],P=_.ValueTypeName;if(P==="bool"||P==="string")continue;const D=w.tracks.find(function(q){return q.name===_.name&&q.ValueTypeName===P});if(D===void 0)continue;let B=0;const F=_.getValueSize();_.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(B=F/3);let V=0;const X=D.getValueSize();D.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(V=X/3);const ie=_.times.length-1;let K;if(g<=_.times[0]){const q=B,_e=F-B;K=Fr.arraySlice(_.values,q,_e)}else if(g>=_.times[ie]){const q=ie*F+B,_e=q+F-B;K=Fr.arraySlice(_.values,q,_e)}else{const q=_.createInterpolant(),_e=B,z=F-B;q.evaluate(g),K=Fr.arraySlice(q.resultBuffer,_e,z)}P==="quaternion"&&new $u().fromArray(K).normalize().conjugate().toArray(K);const O=D.times.length;for(let q=0;q<O;++q){const _e=q*X+V;if(P==="quaternion")$u.multiplyQuaternionsFlat(D.values,_e,K,0,D.values,_e);else{const z=X-V*2;for(let le=0;le<z;++le)D.values[_e+le]-=K[le]}}}return w.blendMode=qpe,w}};class g1{constructor(t,i,l,d){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=d!==void 0?d:new i.constructor(l),this.sampleValues=i,this.valueSize=l,this.settings=null,this.DefaultSettings_={}}evaluate(t){const i=this.parameterPositions;let l=this._cachedIndex,d=i[l],g=i[l-1];e:{t:{let x;n:{r:if(!(t<d)){for(let _=l+2;;){if(d===void 0){if(t<g)break r;return l=i.length,this._cachedIndex=l,this.copySampleValue_(l-1)}if(l===_)break;if(g=d,d=i[++l],t<d)break t}x=i.length;break n}if(!(t>=g)){const _=i[1];t<_&&(l=2,g=_);for(let P=l-2;;){if(g===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(l===P)break;if(d=g,g=i[--l-1],t>=g)break t}x=l,l=0;break n}break e}for(;l<x;){const _=l+x>>>1;t<i[_]?x=_:l=_+1}if(d=i[l],g=i[l-1],g===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(d===void 0)return l=i.length,this._cachedIndex=l,this.copySampleValue_(l-1)}this._cachedIndex=l,this.intervalChanged_(l,g,d)}return this.interpolate_(l,g,t,d)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const i=this.resultBuffer,l=this.sampleValues,d=this.valueSize,g=t*d;for(let x=0;x!==d;++x)i[x]=l[g+x];return i}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class ybe extends g1{constructor(t,i,l,d){super(t,i,l,d),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ite,endingEnd:Ite}}intervalChanged_(t,i,l){const d=this.parameterPositions;let g=t-2,x=t+1,_=d[g],P=d[x];if(_===void 0)switch(this.getSettings_().endingStart){case Dte:g=t,_=2*i-l;break;case Ote:g=d.length-2,_=i+d[g]-d[g+1];break;default:g=t,_=l}if(P===void 0)switch(this.getSettings_().endingEnd){case Dte:x=t,P=2*l-i;break;case Ote:x=1,P=l+d[1]-d[0];break;default:x=t-1,P=i}const D=(l-i)*.5,B=this.valueSize;this._weightPrev=D/(i-_),this._weightNext=D/(P-l),this._offsetPrev=g*B,this._offsetNext=x*B}interpolate_(t,i,l,d){const g=this.resultBuffer,x=this.sampleValues,_=this.valueSize,P=t*_,D=P-_,B=this._offsetPrev,F=this._offsetNext,V=this._weightPrev,X=this._weightNext,ie=(l-i)/(d-i),K=ie*ie,O=K*ie,q=-V*O+2*V*K-V*ie,_e=(1+V)*O+(-1.5-2*V)*K+(-.5+V)*ie+1,z=(-1-X)*O+(1.5+X)*K+.5*ie,le=X*O-X*K;for(let Ee=0;Ee!==_;++Ee)g[Ee]=q*x[B+Ee]+_e*x[D+Ee]+z*x[P+Ee]+le*x[F+Ee];return g}}class bbe extends g1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t,i,l,d){const g=this.resultBuffer,x=this.sampleValues,_=this.valueSize,P=t*_,D=P-_,B=(l-i)/(d-i),F=1-B;for(let V=0;V!==_;++V)g[V]=x[D+V]*F+x[P+V]*B;return g}}class _be extends g1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t){return this.copySampleValue_(t-1)}}class Nl{constructor(t,i,l,d){if(t===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(i===void 0||i.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Fr.convertArray(i,this.TimeBufferType),this.values=Fr.convertArray(l,this.ValueBufferType),this.setInterpolation(d||this.DefaultInterpolation)}static toJSON(t){const i=t.constructor;let l;if(i.toJSON!==this.toJSON)l=i.toJSON(t);else{l={name:t.name,times:Fr.convertArray(t.times,Array),values:Fr.convertArray(t.values,Array)};const d=t.getInterpolation();d!==t.DefaultInterpolation&&(l.interpolation=d)}return l.type=t.ValueTypeName,l}InterpolantFactoryMethodDiscrete(t){return new _be(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new bbe(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new ybe(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let i;switch(t){case l1:i=this.InterpolantFactoryMethodDiscrete;break;case b0:i=this.InterpolantFactoryMethodLinear;break;case I4:i=this.InterpolantFactoryMethodSmooth;break}if(i===void 0){const l="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(t!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(l);return console.warn("THREE.KeyframeTrack:",l),this}return this.createInterpolant=i,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return l1;case this.InterpolantFactoryMethodLinear:return b0;case this.InterpolantFactoryMethodSmooth:return I4}}getValueSize(){return this.values.length/this.times.length}shift(t){if(t!==0){const i=this.times;for(let l=0,d=i.length;l!==d;++l)i[l]+=t}return this}scale(t){if(t!==1){const i=this.times;for(let l=0,d=i.length;l!==d;++l)i[l]*=t}return this}trim(t,i){const l=this.times,d=l.length;let g=0,x=d-1;for(;g!==d&&l[g]<t;)++g;for(;x!==-1&&l[x]>i;)--x;if(++x,g!==0||x!==d){g>=x&&(x=Math.max(x,1),g=x-1);const _=this.getValueSize();this.times=Fr.arraySlice(l,g,x),this.values=Fr.arraySlice(this.values,g*_,x*_)}return this}validate(){let t=!0;const i=this.getValueSize();i-Math.floor(i)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const l=this.times,d=this.values,g=l.length;g===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let x=null;for(let _=0;_!==g;_++){const P=l[_];if(typeof P=="number"&&isNaN(P)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,_,P),t=!1;break}if(x!==null&&x>P){console.error("THREE.KeyframeTrack: Out of order keys.",this,_,P,x),t=!1;break}x=P}if(d!==void 0&&Fr.isTypedArray(d))for(let _=0,P=d.length;_!==P;++_){const D=d[_];if(isNaN(D)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,_,D),t=!1;break}}return t}optimize(){const t=Fr.arraySlice(this.times),i=Fr.arraySlice(this.values),l=this.getValueSize(),d=this.getInterpolation()===I4,g=t.length-1;let x=1;for(let _=1;_<g;++_){let P=!1;const D=t[_],B=t[_+1];if(D!==B&&(_!==1||D!==t[0]))if(d)P=!0;else{const F=_*l,V=F-l,X=F+l;for(let ie=0;ie!==l;++ie){const K=i[F+ie];if(K!==i[V+ie]||K!==i[X+ie]){P=!0;break}}}if(P){if(_!==x){t[x]=t[_];const F=_*l,V=x*l;for(let X=0;X!==l;++X)i[V+X]=i[F+X]}++x}}if(g>0){t[x]=t[g];for(let _=g*l,P=x*l,D=0;D!==l;++D)i[P+D]=i[_+D];++x}return x!==t.length?(this.times=Fr.arraySlice(t,0,x),this.values=Fr.arraySlice(i,0,x*l)):(this.times=t,this.values=i),this}clone(){const t=Fr.arraySlice(this.times,0),i=Fr.arraySlice(this.values,0),l=this.constructor,d=new l(this.name,t,i);return d.createInterpolant=this.createInterpolant,d}}Nl.prototype.TimeBufferType=Float32Array;Nl.prototype.ValueBufferType=Float32Array;Nl.prototype.DefaultInterpolation=b0;class M0 extends Nl{}M0.prototype.ValueTypeName="bool";M0.prototype.ValueBufferType=Array;M0.prototype.DefaultInterpolation=l1;M0.prototype.InterpolantFactoryMethodLinear=void 0;M0.prototype.InterpolantFactoryMethodSmooth=void 0;class hre extends Nl{}hre.prototype.ValueTypeName="color";class d1 extends Nl{}d1.prototype.ValueTypeName="number";class xbe extends g1{constructor(t,i,l,d){super(t,i,l,d)}interpolate_(t,i,l,d){const g=this.resultBuffer,x=this.sampleValues,_=this.valueSize,P=(l-i)/(d-i);let D=t*_;for(let B=D+_;D!==B;D+=4)$u.slerpFlat(g,0,x,D-_,x,D,P);return g}}class $h extends Nl{InterpolantFactoryMethodLinear(t){return new xbe(this.times,this.values,this.getValueSize(),t)}}$h.prototype.ValueTypeName="quaternion";$h.prototype.DefaultInterpolation=b0;$h.prototype.InterpolantFactoryMethodSmooth=void 0;class P0 extends Nl{}P0.prototype.ValueTypeName="string";P0.prototype.ValueBufferType=Array;P0.prototype.DefaultInterpolation=l1;P0.prototype.InterpolantFactoryMethodLinear=void 0;P0.prototype.InterpolantFactoryMethodSmooth=void 0;class f1 extends Nl{}f1.prototype.ValueTypeName="vector";class wbe{constructor(t,i=-1,l,d=Wpe){this.name=t,this.tracks=l,this.duration=i,this.blendMode=d,this.uuid=Hs(),this.duration<0&&this.resetDuration()}static parse(t){const i=[],l=t.tracks,d=1/(t.fps||1);for(let x=0,_=l.length;x!==_;++x)i.push(Ebe(l[x]).scale(d));const g=new this(t.name,t.duration,i,t.blendMode);return g.uuid=t.uuid,g}static toJSON(t){const i=[],l=t.tracks,d={name:t.name,duration:t.duration,tracks:i,uuid:t.uuid,blendMode:t.blendMode};for(let g=0,x=l.length;g!==x;++g)i.push(Nl.toJSON(l[g]));return d}static CreateFromMorphTargetSequence(t,i,l,d){const g=i.length,x=[];for(let _=0;_<g;_++){let P=[],D=[];P.push((_+g-1)%g,_,(_+1)%g),D.push(0,1,0);const B=Fr.getKeyframeOrder(P);P=Fr.sortedArray(P,1,B),D=Fr.sortedArray(D,1,B),!d&&P[0]===0&&(P.push(g),D.push(D[0])),x.push(new d1(".morphTargetInfluences["+i[_].name+"]",P,D).scale(1/l))}return new this(t,-1,x)}static findByName(t,i){let l=t;if(!Array.isArray(t)){const d=t;l=d.geometry&&d.geometry.animations||d.animations}for(let d=0;d<l.length;d++)if(l[d].name===i)return l[d];return null}static CreateClipsFromMorphTargetSequences(t,i,l){const d={},g=/^([\w-]*?)([\d]+)$/;for(let _=0,P=t.length;_<P;_++){const D=t[_],B=D.name.match(g);if(B&&B.length>1){const F=B[1];let V=d[F];V||(d[F]=V=[]),V.push(D)}}const x=[];for(const _ in d)x.push(this.CreateFromMorphTargetSequence(_,d[_],i,l));return x}static parseAnimation(t,i){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const l=function(F,V,X,ie,K){if(X.length!==0){const O=[],q=[];Fr.flattenJSON(X,O,q,ie),O.length!==0&&K.push(new F(V,O,q))}},d=[],g=t.name||"default",x=t.fps||30,_=t.blendMode;let P=t.length||-1;const D=t.hierarchy||[];for(let F=0;F<D.length;F++){const V=D[F].keys;if(!(!V||V.length===0))if(V[0].morphTargets){const X={};let ie;for(ie=0;ie<V.length;ie++)if(V[ie].morphTargets)for(let K=0;K<V[ie].morphTargets.length;K++)X[V[ie].morphTargets[K]]=-1;for(const K in X){const O=[],q=[];for(let _e=0;_e!==V[ie].morphTargets.length;++_e){const z=V[ie];O.push(z.time),q.push(z.morphTarget===K?1:0)}d.push(new d1(".morphTargetInfluence["+K+"]",O,q))}P=X.length*x}else{const X=".bones["+i[F].name+"]";l(f1,X+".position",V,"pos",d),l($h,X+".quaternion",V,"rot",d),l(f1,X+".scale",V,"scl",d)}}return d.length===0?null:new this(g,P,d,_)}resetDuration(){const t=this.tracks;let i=0;for(let l=0,d=t.length;l!==d;++l){const g=this.tracks[l];i=Math.max(i,g.times[g.times.length-1])}return this.duration=i,this}trim(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this}validate(){let t=!0;for(let i=0;i<this.tracks.length;i++)t=t&&this.tracks[i].validate();return t}optimize(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this}clone(){const t=[];for(let i=0;i<this.tracks.length;i++)t.push(this.tracks[i].clone());return new this.constructor(this.name,this.duration,t,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function Sbe(w){switch(w.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return d1;case"vector":case"vector2":case"vector3":case"vector4":return f1;case"color":return hre;case"quaternion":return $h;case"bool":case"boolean":return M0;case"string":return P0}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+w)}function Ebe(w){if(w.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=Sbe(w.type);if(w.times===void 0){const i=[],l=[];Fr.flattenJSON(w.keys,i,l,"value"),w.times=i,w.values=l}return t.parse!==void 0?t.parse(w):new t(w.name,w.times,w.values,w.interpolation)}const x0={enabled:!1,files:{},add:function(w,t){this.enabled!==!1&&(this.files[w]=t)},get:function(w){if(this.enabled!==!1)return this.files[w]},remove:function(w){delete this.files[w]},clear:function(){this.files={}}};class kbe{constructor(t,i,l){const d=this;let g=!1,x=0,_=0,P;const D=[];this.onStart=void 0,this.onLoad=t,this.onProgress=i,this.onError=l,this.itemStart=function(B){_++,g===!1&&d.onStart!==void 0&&d.onStart(B,x,_),g=!0},this.itemEnd=function(B){x++,d.onProgress!==void 0&&d.onProgress(B,x,_),x===_&&(g=!1,d.onLoad!==void 0&&d.onLoad())},this.itemError=function(B){d.onError!==void 0&&d.onError(B)},this.resolveURL=function(B){return P?P(B):B},this.setURLModifier=function(B){return P=B,this},this.addHandler=function(B,F){return D.push(B,F),this},this.removeHandler=function(B){const F=D.indexOf(B);return F!==-1&&D.splice(F,2),this},this.getHandler=function(B){for(let F=0,V=D.length;F<V;F+=2){const X=D[F],ie=D[F+1];if(X.global&&(X.lastIndex=0),X.test(B))return ie}return null}}}const Tbe=new kbe;class v1{constructor(t){this.manager=t!==void 0?t:Tbe,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,i){const l=this;return new Promise(function(d,g){l.load(t,d,i,g)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}const Vu={};class pre extends v1{constructor(t){super(t)}load(t,i,l,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=x0.get(t);if(g!==void 0)return this.manager.itemStart(t),setTimeout(()=>{i&&i(g),this.manager.itemEnd(t)},0),g;if(Vu[t]!==void 0){Vu[t].push({onLoad:i,onProgress:l,onError:d});return}Vu[t]=[],Vu[t].push({onLoad:i,onProgress:l,onError:d});const x=new Request(t,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),_=this.mimeType,P=this.responseType;fetch(x).then(D=>{if(D.status===200||D.status===0){if(D.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream=="undefined"||D.body===void 0||D.body.getReader===void 0)return D;const B=Vu[t],F=D.body.getReader(),V=D.headers.get("Content-Length"),X=V?parseInt(V):0,ie=X!==0;let K=0;const O=new ReadableStream({start(q){_e();function _e(){F.read().then(({done:z,value:le})=>{if(z)q.close();else{K+=le.byteLength;const Ee=new ProgressEvent("progress",{lengthComputable:ie,loaded:K,total:X});for(let je=0,te=B.length;je<te;je++){const me=B[je];me.onProgress&&me.onProgress(Ee)}q.enqueue(le),_e()}})}}});return new Response(O)}else throw Error(`fetch for "${D.url}" responded with ${D.status}: ${D.statusText}`)}).then(D=>{switch(P){case"arraybuffer":return D.arrayBuffer();case"blob":return D.blob();case"document":return D.text().then(B=>new DOMParser().parseFromString(B,_));case"json":return D.json();default:if(_===void 0)return D.text();{const F=/charset="?([^;"\s]*)"?/i.exec(_),V=F&&F[1]?F[1].toLowerCase():void 0,X=new TextDecoder(V);return D.arrayBuffer().then(ie=>X.decode(ie))}}}).then(D=>{x0.add(t,D);const B=Vu[t];delete Vu[t];for(let F=0,V=B.length;F<V;F++){const X=B[F];X.onLoad&&X.onLoad(D)}}).catch(D=>{const B=Vu[t];if(B===void 0)throw this.manager.itemError(t),D;delete Vu[t];for(let F=0,V=B.length;F<V;F++){const X=B[F];X.onError&&X.onError(D)}this.manager.itemError(t)}).finally(()=>{this.manager.itemEnd(t)}),this.manager.itemStart(t)}setResponseType(t){return this.responseType=t,this}setMimeType(t){return this.mimeType=t,this}}class Mbe extends v1{constructor(t){super(t)}load(t,i,l,d){this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=this,x=x0.get(t);if(x!==void 0)return g.manager.itemStart(t),setTimeout(function(){i&&i(x),g.manager.itemEnd(t)},0),x;const _=c1("img");function P(){B(),x0.add(t,this),i&&i(this),g.manager.itemEnd(t)}function D(F){B(),d&&d(F),g.manager.itemError(t),g.manager.itemEnd(t)}function B(){_.removeEventListener("load",P,!1),_.removeEventListener("error",D,!1)}return _.addEventListener("load",P,!1),_.addEventListener("error",D,!1),t.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(_.crossOrigin=this.crossOrigin),g.manager.itemStart(t),_.src=t,_}}class Pbe extends v1{constructor(t){super(t)}load(t,i,l,d){const g=new Ro,x=new Mbe(this.manager);return x.setCrossOrigin(this.crossOrigin),x.setPath(this.path),x.load(t,function(_){g.image=_,g.needsUpdate=!0,i!==void 0&&i(g)},l,d),g}}class YM extends gi{constructor(t,i=1){super(),this.isLight=!0,this.type="Light",this.color=new zn(t),this.intensity=i}dispose(){}copy(t,i){return super.copy(t,i),this.color.copy(t.color),this.intensity=t.intensity,this}toJSON(t){const i=super.toJSON(t);return i.object.color=this.color.getHex(),i.object.intensity=this.intensity,this.groundColor!==void 0&&(i.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(i.object.distance=this.distance),this.angle!==void 0&&(i.object.angle=this.angle),this.decay!==void 0&&(i.object.decay=this.decay),this.penumbra!==void 0&&(i.object.penumbra=this.penumbra),this.shadow!==void 0&&(i.object.shadow=this.shadow.toJSON()),i}}const Mne=new lr,Pne=new Ve,Cne=new Ve;class zL{constructor(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new er(512,512),this.map=null,this.mapPass=null,this.matrix=new lr,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new CL,this._frameExtents=new er(1,1),this._viewportCount=1,this._viewports=[new xr(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(t){const i=this.camera,l=this.matrix;Pne.setFromMatrixPosition(t.matrixWorld),i.position.copy(Pne),Cne.setFromMatrixPosition(t.target.matrixWorld),i.lookAt(Cne),i.updateMatrixWorld(),Mne.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Mne),l.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),l.multiply(i.projectionMatrix),l.multiply(i.matrixWorldInverse)}getViewport(t){return this._viewports[t]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const t={};return this.bias!==0&&(t.bias=this.bias),this.normalBias!==0&&(t.normalBias=this.normalBias),this.radius!==1&&(t.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}class Cbe extends zL{constructor(){super(new Oo(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(t){const i=this.camera,l=u1*2*t.angle*this.focus,d=this.mapSize.width/this.mapSize.height,g=t.distance||i.far;(l!==i.fov||d!==i.aspect||g!==i.far)&&(i.fov=l,i.aspect=d,i.far=g,i.updateProjectionMatrix()),super.updateMatrices(t)}copy(t){return super.copy(t),this.focus=t.focus,this}}class Abe extends YM{constructor(t,i,l=0,d=Math.PI/3,g=0,x=1){super(t,i),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(gi.DefaultUp),this.updateMatrix(),this.target=new gi,this.distance=l,this.angle=d,this.penumbra=g,this.decay=x,this.shadow=new Cbe}get power(){return this.intensity*Math.PI}set power(t){this.intensity=t/Math.PI}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}const Ane=new lr,e1=new Ve,aL=new Ve;class Ibe extends zL{constructor(){super(new Oo(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new er(4,2),this._viewportCount=6,this._viewports=[new xr(2,1,1,1),new xr(0,1,1,1),new xr(3,1,1,1),new xr(1,1,1,1),new xr(3,0,1,1),new xr(1,0,1,1)],this._cubeDirections=[new Ve(1,0,0),new Ve(-1,0,0),new Ve(0,0,1),new Ve(0,0,-1),new Ve(0,1,0),new Ve(0,-1,0)],this._cubeUps=[new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,1,0),new Ve(0,0,1),new Ve(0,0,-1)]}updateMatrices(t,i=0){const l=this.camera,d=this.matrix,g=t.distance||l.far;g!==l.far&&(l.far=g,l.updateProjectionMatrix()),e1.setFromMatrixPosition(t.matrixWorld),l.position.copy(e1),aL.copy(l.position),aL.add(this._cubeDirections[i]),l.up.copy(this._cubeUps[i]),l.lookAt(aL),l.updateMatrixWorld(),d.makeTranslation(-e1.x,-e1.y,-e1.z),Ane.multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse),this._frustum.setFromProjectionMatrix(Ane)}}class Dbe extends YM{constructor(t,i,l=0,d=1){super(t,i),this.isPointLight=!0,this.type="PointLight",this.distance=l,this.decay=d,this.shadow=new Ibe}get power(){return this.intensity*4*Math.PI}set power(t){this.intensity=t/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(t,i){return super.copy(t,i),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}class Obe extends zL{constructor(){super(new IL(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class mre extends YM{constructor(t,i){super(t,i),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(gi.DefaultUp),this.updateMatrix(),this.target=new gi,this.shadow=new Obe}dispose(){this.shadow.dispose()}copy(t){return super.copy(t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}class Rbe extends YM{constructor(t,i){super(t,i),this.isAmbientLight=!0,this.type="AmbientLight"}}class Hh{static decodeText(t){if(typeof TextDecoder!="undefined")return new TextDecoder().decode(t);let i="";for(let l=0,d=t.length;l<d;l++)i+=String.fromCharCode(t[l]);try{return decodeURIComponent(escape(i))}catch{return i}}static extractUrlBase(t){const i=t.lastIndexOf("/");return i===-1?"./":t.slice(0,i+1)}static resolveURL(t,i){return typeof t!="string"||t===""?"":(/^https?:\/\//i.test(i)&&/^\//.test(t)&&(i=i.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(t)||/^data:.*,.*$/i.test(t)||/^blob:.*$/i.test(t)?t:i+t)}}class Lbe extends v1{constructor(t){super(t),this.isImageBitmapLoader=!0,typeof createImageBitmap=="undefined"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch=="undefined"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(t){return this.options=t,this}load(t,i,l,d){t===void 0&&(t=""),this.path!==void 0&&(t=this.path+t),t=this.manager.resolveURL(t);const g=this,x=x0.get(t);if(x!==void 0)return g.manager.itemStart(t),setTimeout(function(){i&&i(x),g.manager.itemEnd(t)},0),x;const _={};_.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",_.headers=this.requestHeader,fetch(t,_).then(function(P){return P.blob()}).then(function(P){return createImageBitmap(P,Object.assign(g.options,{colorSpaceConversion:"none"}))}).then(function(P){x0.add(t,P),i&&i(P),g.manager.itemEnd(t)}).catch(function(P){d&&d(P),g.manager.itemError(t),g.manager.itemEnd(t)}),g.manager.itemStart(t)}}const NL="\\[\\]\\.:\\/",zbe=new RegExp("["+NL+"]","g"),FL="[^"+NL+"]",Nbe="[^"+NL.replace("\\.","")+"]",Fbe=/((?:WC+[\/:])*)/.source.replace("WC",FL),Bbe=/(WCOD+)?/.source.replace("WCOD",Nbe),jbe=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",FL),Ube=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",FL),Vbe=new RegExp("^"+Fbe+Bbe+jbe+Ube+"$"),Hbe=["material","materials","bones"];class Gbe{constructor(t,i,l){const d=l||vr.parseTrackName(i);this._targetGroup=t,this._bindings=t.subscribe_(i,d)}getValue(t,i){this.bind();const l=this._targetGroup.nCachedObjects_,d=this._bindings[l];d!==void 0&&d.getValue(t,i)}setValue(t,i){const l=this._bindings;for(let d=this._targetGroup.nCachedObjects_,g=l.length;d!==g;++d)l[d].setValue(t,i)}bind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,l=t.length;i!==l;++i)t[i].bind()}unbind(){const t=this._bindings;for(let i=this._targetGroup.nCachedObjects_,l=t.length;i!==l;++i)t[i].unbind()}}class vr{constructor(t,i,l){this.path=i,this.parsedPath=l||vr.parseTrackName(i),this.node=vr.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,i,l){return t&&t.isAnimationObjectGroup?new vr.Composite(t,i,l):new vr(t,i,l)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(zbe,"")}static parseTrackName(t){const i=Vbe.exec(t);if(i===null)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const l={nodeName:i[2],objectName:i[3],objectIndex:i[4],propertyName:i[5],propertyIndex:i[6]},d=l.nodeName&&l.nodeName.lastIndexOf(".");if(d!==void 0&&d!==-1){const g=l.nodeName.substring(d+1);Hbe.indexOf(g)!==-1&&(l.nodeName=l.nodeName.substring(0,d),l.objectName=g)}if(l.propertyName===null||l.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return l}static findNode(t,i){if(i===void 0||i===""||i==="."||i===-1||i===t.name||i===t.uuid)return t;if(t.skeleton){const l=t.skeleton.getBoneByName(i);if(l!==void 0)return l}if(t.children){const l=function(g){for(let x=0;x<g.length;x++){const _=g[x];if(_.name===i||_.uuid===i)return _;const P=l(_.children);if(P)return P}return null},d=l(t.children);if(d)return d}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,i){t[i]=this.targetObject[this.propertyName]}_getValue_array(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)t[i++]=l[d]}_getValue_arrayElement(t,i){t[i]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,i){this.resolvedProperty.toArray(t,i)}_setValue_direct(t,i){this.targetObject[this.propertyName]=t[i]}_setValue_direct_setNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,i){this.targetObject[this.propertyName]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++]}_setValue_array_setNeedsUpdate(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,i){const l=this.resolvedProperty;for(let d=0,g=l.length;d!==g;++d)l[d]=t[i++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,i){this.resolvedProperty[this.propertyIndex]=t[i]}_setValue_arrayElement_setNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty[this.propertyIndex]=t[i],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,i){this.resolvedProperty.fromArray(t,i)}_setValue_fromArray_setNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,i){this.resolvedProperty.fromArray(t,i),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,i){this.bind(),this.getValue(t,i)}_setValue_unbound(t,i){this.bind(),this.setValue(t,i)}bind(){let t=this.node;const i=this.parsedPath,l=i.objectName,d=i.propertyName;let g=i.propertyIndex;if(t||(t=vr.findNode(this.rootNode,i.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t){console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");return}if(l){let D=i.objectIndex;switch(l){case"materials":if(!t.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!t.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}t=t.material.materials;break;case"bones":if(!t.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}t=t.skeleton.bones;for(let B=0;B<t.length;B++)if(t[B].name===D){D=B;break}break;default:if(t[l]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}t=t[l]}if(D!==void 0){if(t[D]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);return}t=t[D]}}const x=t[d];if(x===void 0){const D=i.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+D+"."+d+" but it wasn't found.",t);return}let _=this.Versioning.None;this.targetObject=t,t.needsUpdate!==void 0?_=this.Versioning.NeedsUpdate:t.matrixWorldNeedsUpdate!==void 0&&(_=this.Versioning.MatrixWorldNeedsUpdate);let P=this.BindingType.Direct;if(g!==void 0){if(d==="morphTargetInfluences"){if(!t.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!t.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}t.morphTargetDictionary[g]!==void 0&&(g=t.morphTargetDictionary[g])}P=this.BindingType.ArrayElement,this.resolvedProperty=x,this.propertyIndex=g}else x.fromArray!==void 0&&x.toArray!==void 0?(P=this.BindingType.HasFromToArray,this.resolvedProperty=x):Array.isArray(x)?(P=this.BindingType.EntireArray,this.resolvedProperty=x):this.propertyName=d;this.getValue=this.GetterByBindingType[P],this.setValue=this.SetterByBindingTypeAndVersioning[P][_]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}vr.Composite=Gbe;vr.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};vr.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};vr.prototype.GetterByBindingType=[vr.prototype._getValue_direct,vr.prototype._getValue_array,vr.prototype._getValue_arrayElement,vr.prototype._getValue_toArray];vr.prototype.SetterByBindingTypeAndVersioning=[[vr.prototype._setValue_direct,vr.prototype._setValue_direct_setNeedsUpdate,vr.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_array,vr.prototype._setValue_array_setNeedsUpdate,vr.prototype._setValue_array_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_arrayElement,vr.prototype._setValue_arrayElement_setNeedsUpdate,vr.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[vr.prototype._setValue_fromArray,vr.prototype._setValue_fromArray_setNeedsUpdate,vr.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];typeof __THREE_DEVTOOLS__!="undefined"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:kL}}));typeof window!="undefined"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=kL);class Wbe extends v1{constructor(t){super(t),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new Zbe(i)}),this.register(function(i){return new r_e(i)}),this.register(function(i){return new i_e(i)}),this.register(function(i){return new Jbe(i)}),this.register(function(i){return new Qbe(i)}),this.register(function(i){return new e_e(i)}),this.register(function(i){return new t_e(i)}),this.register(function(i){return new $be(i)}),this.register(function(i){return new n_e(i)}),this.register(function(i){return new Ybe(i)}),this.register(function(i){return new Kbe(i)}),this.register(function(i){return new o_e(i)})}load(t,i,l,d){const g=this;let x;this.resourcePath!==""?x=this.resourcePath:this.path!==""?x=this.path:x=Hh.extractUrlBase(t),this.manager.itemStart(t);const _=function(D){d?d(D):console.error(D),g.manager.itemError(t),g.manager.itemEnd(t)},P=new pre(this.manager);P.setPath(this.path),P.setResponseType("arraybuffer"),P.setRequestHeader(this.requestHeader),P.setWithCredentials(this.withCredentials),P.load(t,function(D){try{g.parse(D,x,function(B){i(B),g.manager.itemEnd(t)},_)}catch(B){_(B)}},l,_)}setDRACOLoader(t){return this.dracoLoader=t,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(t){return this.ktx2Loader=t,this}setMeshoptDecoder(t){return this.meshoptDecoder=t,this}register(t){return this.pluginCallbacks.indexOf(t)===-1&&this.pluginCallbacks.push(t),this}unregister(t){return this.pluginCallbacks.indexOf(t)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(t),1),this}parse(t,i,l,d){let g;const x={},_={};if(typeof t=="string")g=t;else if(Hh.decodeText(new Uint8Array(t,0,4))===gre){try{x[qn.KHR_BINARY_GLTF]=new a_e(t)}catch(F){d&&d(F);return}g=x[qn.KHR_BINARY_GLTF].content}else g=Hh.decodeText(new Uint8Array(t));const P=JSON.parse(g);if(P.asset===void 0||P.asset.version[0]<2){d&&d(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const D=new b_e(P,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});D.fileLoader.setRequestHeader(this.requestHeader);for(let B=0;B<this.pluginCallbacks.length;B++){const F=this.pluginCallbacks[B](D);_[F.name]=F,x[F.name]=!0}if(P.extensionsUsed)for(let B=0;B<P.extensionsUsed.length;++B){const F=P.extensionsUsed[B],V=P.extensionsRequired||[];switch(F){case qn.KHR_MATERIALS_UNLIT:x[F]=new Xbe;break;case qn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:x[F]=new u_e;break;case qn.KHR_DRACO_MESH_COMPRESSION:x[F]=new s_e(P,this.dracoLoader);break;case qn.KHR_TEXTURE_TRANSFORM:x[F]=new l_e;break;case qn.KHR_MESH_QUANTIZATION:x[F]=new c_e;break;default:V.indexOf(F)>=0&&_[F]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+F+'".')}}D.setExtensions(x),D.setPlugins(_),D.parse(l,d)}parseAsync(t,i){const l=this;return new Promise(function(d,g){l.parse(t,i,d,g)})}}function qbe(){let w={};return{get:function(t){return w[t]},add:function(t,i){w[t]=i},remove:function(t){delete w[t]},removeAll:function(){w={}}}}const qn={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression"};class Kbe{constructor(t){this.parser=t,this.name=qn.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const t=this.parser,i=this.parser.json.nodes||[];for(let l=0,d=i.length;l<d;l++){const g=i[l];g.extensions&&g.extensions[this.name]&&g.extensions[this.name].light!==void 0&&t._addNodeRef(this.cache,g.extensions[this.name].light)}}_loadLight(t){const i=this.parser,l="light:"+t;let d=i.cache.get(l);if(d)return d;const g=i.json,P=((g.extensions&&g.extensions[this.name]||{}).lights||[])[t];let D;const B=new zn(16777215);P.color!==void 0&&B.fromArray(P.color);const F=P.range!==void 0?P.range:0;switch(P.type){case"directional":D=new mre(B),D.target.position.set(0,0,-1),D.add(D.target);break;case"point":D=new Dbe(B),D.distance=F;break;case"spot":D=new Abe(B),D.distance=F,P.spot=P.spot||{},P.spot.innerConeAngle=P.spot.innerConeAngle!==void 0?P.spot.innerConeAngle:0,P.spot.outerConeAngle=P.spot.outerConeAngle!==void 0?P.spot.outerConeAngle:Math.PI/4,D.angle=P.spot.outerConeAngle,D.penumbra=1-P.spot.innerConeAngle/P.spot.outerConeAngle,D.target.position.set(0,0,-1),D.add(D.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+P.type)}return D.position.set(0,0,0),D.decay=2,P.intensity!==void 0&&(D.intensity=P.intensity),D.name=i.createUniqueName(P.name||"light_"+t),d=Promise.resolve(D),i.cache.add(l,d),d}createNodeAttachment(t){const i=this,l=this.parser,g=l.json.nodes[t],_=(g.extensions&&g.extensions[this.name]||{}).light;return _===void 0?null:this._loadLight(_).then(function(P){return l._getNodeRef(i.cache,_,P)})}}class Xbe{constructor(){this.name=qn.KHR_MATERIALS_UNLIT}getMaterialType(){return Bh}extendParams(t,i,l){const d=[];t.color=new zn(1,1,1),t.opacity=1;const g=i.pbrMetallicRoughness;if(g){if(Array.isArray(g.baseColorFactor)){const x=g.baseColorFactor;t.color.fromArray(x),t.opacity=x[3]}g.baseColorTexture!==void 0&&d.push(l.assignTexture(t,"map",g.baseColorTexture,gr))}return Promise.all(d)}}class $be{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(t,i){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=d.extensions[this.name].emissiveStrength;return g!==void 0&&(i.emissiveIntensity=g),Promise.resolve()}}class Zbe{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_CLEARCOAT}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],x=d.extensions[this.name];if(x.clearcoatFactor!==void 0&&(i.clearcoat=x.clearcoatFactor),x.clearcoatTexture!==void 0&&g.push(l.assignTexture(i,"clearcoatMap",x.clearcoatTexture)),x.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=x.clearcoatRoughnessFactor),x.clearcoatRoughnessTexture!==void 0&&g.push(l.assignTexture(i,"clearcoatRoughnessMap",x.clearcoatRoughnessTexture)),x.clearcoatNormalTexture!==void 0&&(g.push(l.assignTexture(i,"clearcoatNormalMap",x.clearcoatNormalTexture)),x.clearcoatNormalTexture.scale!==void 0)){const _=x.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new er(_,_)}return Promise.all(g)}}class Ybe{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_IRIDESCENCE}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],x=d.extensions[this.name];return x.iridescenceFactor!==void 0&&(i.iridescence=x.iridescenceFactor),x.iridescenceTexture!==void 0&&g.push(l.assignTexture(i,"iridescenceMap",x.iridescenceTexture)),x.iridescenceIor!==void 0&&(i.iridescenceIOR=x.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),x.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=x.iridescenceThicknessMinimum),x.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=x.iridescenceThicknessMaximum),x.iridescenceThicknessTexture!==void 0&&g.push(l.assignTexture(i,"iridescenceThicknessMap",x.iridescenceThicknessTexture)),Promise.all(g)}}class Jbe{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_SHEEN}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[];i.sheenColor=new zn(0,0,0),i.sheenRoughness=0,i.sheen=1;const x=d.extensions[this.name];return x.sheenColorFactor!==void 0&&i.sheenColor.fromArray(x.sheenColorFactor),x.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=x.sheenRoughnessFactor),x.sheenColorTexture!==void 0&&g.push(l.assignTexture(i,"sheenColorMap",x.sheenColorTexture,gr)),x.sheenRoughnessTexture!==void 0&&g.push(l.assignTexture(i,"sheenRoughnessMap",x.sheenRoughnessTexture)),Promise.all(g)}}class Qbe{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_TRANSMISSION}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],x=d.extensions[this.name];return x.transmissionFactor!==void 0&&(i.transmission=x.transmissionFactor),x.transmissionTexture!==void 0&&g.push(l.assignTexture(i,"transmissionMap",x.transmissionTexture)),Promise.all(g)}}class e_e{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_VOLUME}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],x=d.extensions[this.name];i.thickness=x.thicknessFactor!==void 0?x.thicknessFactor:0,x.thicknessTexture!==void 0&&g.push(l.assignTexture(i,"thicknessMap",x.thicknessTexture)),i.attenuationDistance=x.attenuationDistance||0;const _=x.attenuationColor||[1,1,1];return i.attenuationColor=new zn(_[0],_[1],_[2]),Promise.all(g)}}class t_e{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_IOR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const d=this.parser.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=d.extensions[this.name];return i.ior=g.ior!==void 0?g.ior:1.5,Promise.resolve()}}class n_e{constructor(t){this.parser=t,this.name=qn.KHR_MATERIALS_SPECULAR}getMaterialType(t){const l=this.parser.json.materials[t];return!l.extensions||!l.extensions[this.name]?null:Zh}extendMaterialParams(t,i){const l=this.parser,d=l.json.materials[t];if(!d.extensions||!d.extensions[this.name])return Promise.resolve();const g=[],x=d.extensions[this.name];i.specularIntensity=x.specularFactor!==void 0?x.specularFactor:1,x.specularTexture!==void 0&&g.push(l.assignTexture(i,"specularIntensityMap",x.specularTexture));const _=x.specularColorFactor||[1,1,1];return i.specularColor=new zn(_[0],_[1],_[2]),x.specularColorTexture!==void 0&&g.push(l.assignTexture(i,"specularColorMap",x.specularColorTexture,gr)),Promise.all(g)}}class r_e{constructor(t){this.parser=t,this.name=qn.KHR_TEXTURE_BASISU}loadTexture(t){const i=this.parser,l=i.json,d=l.textures[t];if(!d.extensions||!d.extensions[this.name])return null;const g=d.extensions[this.name],x=i.options.ktx2Loader;if(!x){if(l.extensionsRequired&&l.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(t,g.source,x)}}class i_e{constructor(t){this.parser=t,this.name=qn.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(t){const i=this.name,l=this.parser,d=l.json,g=d.textures[t];if(!g.extensions||!g.extensions[i])return null;const x=g.extensions[i],_=d.images[x.source];let P=l.textureLoader;if(_.uri){const D=l.options.manager.getHandler(_.uri);D!==null&&(P=D)}return this.detectSupport().then(function(D){if(D)return l.loadTextureImage(t,x.source,P);if(d.extensionsRequired&&d.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return l.loadTexture(t)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(t){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){t(i.height===1)}})),this.isSupported}}class o_e{constructor(t){this.name=qn.EXT_MESHOPT_COMPRESSION,this.parser=t}loadBufferView(t){const i=this.parser.json,l=i.bufferViews[t];if(l.extensions&&l.extensions[this.name]){const d=l.extensions[this.name],g=this.parser.getDependency("buffer",d.buffer),x=this.parser.options.meshoptDecoder;if(!x||!x.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([g,x.ready]).then(function(_){const P=d.byteOffset||0,D=d.byteLength||0,B=d.count,F=d.byteStride,V=new ArrayBuffer(B*F),X=new Uint8Array(_[0],P,D);return x.decodeGltfBuffer(new Uint8Array(V),B,F,X,d.mode,d.filter),V})}else return null}}const gre="glTF",t1=12,Ine={JSON:1313821514,BIN:5130562};class a_e{constructor(t){this.name=qn.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(t,0,t1);if(this.header={magic:Hh.decodeText(new Uint8Array(t.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==gre)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const l=this.header.length-t1,d=new DataView(t,t1);let g=0;for(;g<l;){const x=d.getUint32(g,!0);g+=4;const _=d.getUint32(g,!0);if(g+=4,_===Ine.JSON){const P=new Uint8Array(t,t1+g,x);this.content=Hh.decodeText(P)}else if(_===Ine.BIN){const P=t1+g;this.body=t.slice(P,P+x)}g+=x}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class s_e{constructor(t,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=qn.KHR_DRACO_MESH_COMPRESSION,this.json=t,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(t,i){const l=this.json,d=this.dracoLoader,g=t.extensions[this.name].bufferView,x=t.extensions[this.name].attributes,_={},P={},D={};for(const B in x){const F=bL[B]||B.toLowerCase();_[F]=x[B]}for(const B in t.attributes){const F=bL[B]||B.toLowerCase();if(x[B]!==void 0){const V=l.accessors[t.attributes[B]],X=h1[V.componentType];D[F]=X,P[F]=V.normalized===!0}}return i.getDependency("bufferView",g).then(function(B){return new Promise(function(F){d.decodeDracoFile(B,function(V){for(const X in V.attributes){const ie=V.attributes[X],K=P[X];K!==void 0&&(ie.normalized=K)}F(V)},_,D)})})}}class l_e{constructor(){this.name=qn.KHR_TEXTURE_TRANSFORM}extendTexture(t,i){return i.texCoord!==void 0&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(t=t.clone(),i.offset!==void 0&&t.offset.fromArray(i.offset),i.rotation!==void 0&&(t.rotation=i.rotation),i.scale!==void 0&&t.repeat.fromArray(i.scale),t.needsUpdate=!0),t}}class yL extends ZM{constructor(t){super(),this.isGLTFSpecularGlossinessMaterial=!0;const i=["#ifdef USE_SPECULARMAP","	uniform sampler2D specularMap;","#endif"].join(`
`),l=["#ifdef USE_GLOSSINESSMAP","	uniform sampler2D glossinessMap;","#endif"].join(`
`),d=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","	vec4 texelSpecular = texture2D( specularMap, vUv );","	// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","	specularFactor *= texelSpecular.rgb;","#endif"].join(`
`),g=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","	vec4 texelGlossiness = texture2D( glossinessMap, vUv );","	// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","	glossinessFactor *= texelGlossiness.a;","#endif"].join(`
`),x=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.roughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.roughness += geometryRoughness;","material.roughness = min( material.roughness, 1.0 );","material.specularColor = specularFactor;"].join(`
`),_={specular:{value:new zn().setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=_,this.onBeforeCompile=function(P){for(const D in _)P.uniforms[D]=_[D];P.fragmentShader=P.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",i).replace("#include <metalnessmap_pars_fragment>",l).replace("#include <roughnessmap_fragment>",d).replace("#include <metalnessmap_fragment>",g).replace("#include <lights_physical_fragment>",x)},Object.defineProperties(this,{specular:{get:function(){return _.specular.value},set:function(P){_.specular.value=P}},specularMap:{get:function(){return _.specularMap.value},set:function(P){_.specularMap.value=P,P?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return _.glossiness.value},set:function(P){_.glossiness.value=P}},glossinessMap:{get:function(){return _.glossinessMap.value},set:function(P){_.glossinessMap.value=P,P?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(t)}copy(t){return super.copy(t),this.specularMap=t.specularMap,this.specular.copy(t.specular),this.glossinessMap=t.glossinessMap,this.glossiness=t.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this}}class u_e{constructor(){this.name=qn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,this.specularGlossinessParams=["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity"]}getMaterialType(){return yL}extendParams(t,i,l){const d=i.extensions[this.name];t.color=new zn(1,1,1),t.opacity=1;const g=[];if(Array.isArray(d.diffuseFactor)){const x=d.diffuseFactor;t.color.fromArray(x),t.opacity=x[3]}if(d.diffuseTexture!==void 0&&g.push(l.assignTexture(t,"map",d.diffuseTexture,gr)),t.emissive=new zn(0,0,0),t.glossiness=d.glossinessFactor!==void 0?d.glossinessFactor:1,t.specular=new zn(1,1,1),Array.isArray(d.specularFactor)&&t.specular.fromArray(d.specularFactor),d.specularGlossinessTexture!==void 0){const x=d.specularGlossinessTexture;g.push(l.assignTexture(t,"glossinessMap",x)),g.push(l.assignTexture(t,"specularMap",x,gr))}return Promise.all(g)}createMaterial(t){const i=new yL(t);return i.fog=!0,i.color=t.color,i.map=t.map===void 0?null:t.map,i.lightMap=null,i.lightMapIntensity=1,i.aoMap=t.aoMap===void 0?null:t.aoMap,i.aoMapIntensity=1,i.emissive=t.emissive,i.emissiveIntensity=t.emissiveIntensity===void 0?1:t.emissiveIntensity,i.emissiveMap=t.emissiveMap===void 0?null:t.emissiveMap,i.bumpMap=t.bumpMap===void 0?null:t.bumpMap,i.bumpScale=1,i.normalMap=t.normalMap===void 0?null:t.normalMap,i.normalMapType=TL,t.normalScale&&(i.normalScale=t.normalScale),i.displacementMap=null,i.displacementScale=1,i.displacementBias=0,i.specularMap=t.specularMap===void 0?null:t.specularMap,i.specular=t.specular,i.glossinessMap=t.glossinessMap===void 0?null:t.glossinessMap,i.glossiness=t.glossiness,i.alphaMap=null,i.envMap=t.envMap===void 0?null:t.envMap,i.envMapIntensity=1,i}}class c_e{constructor(){this.name=qn.KHR_MESH_QUANTIZATION}}class vre extends g1{constructor(t,i,l,d){super(t,i,l,d)}copySampleValue_(t){const i=this.resultBuffer,l=this.sampleValues,d=this.valueSize,g=t*d*3+d;for(let x=0;x!==d;x++)i[x]=l[g+x];return i}interpolate_(t,i,l,d){const g=this.resultBuffer,x=this.sampleValues,_=this.valueSize,P=_*2,D=_*3,B=d-i,F=(l-i)/B,V=F*F,X=V*F,ie=t*D,K=ie-D,O=-2*X+3*V,q=X-V,_e=1-O,z=q-V+F;for(let le=0;le!==_;le++){const Ee=x[K+le+_],je=x[K+le+P]*B,te=x[ie+le+_],me=x[ie+le]*B;g[le]=_e*Ee+z*je+O*te+q*me}return g}}const d_e=new $u;class f_e extends vre{interpolate_(t,i,l,d){const g=super.interpolate_(t,i,l,d);return d_e.fromArray(g).normalize().toArray(g),g}}const Hu={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},h1={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Dne={9728:Ji,9729:Zo,9984:dL,9985:Hne,9986:fL,9987:w0},One={33071:$a,33648:qM,10497:v0},Rne={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},bL={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Bd={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},h_e={CUBICSPLINE:void 0,LINEAR:b0,STEP:l1},sL={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function p_e(w){return w.DefaultMaterial===void 0&&(w.DefaultMaterial=new ZM({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:p0})),w.DefaultMaterial}function n1(w,t,i){for(const l in i.extensions)w[l]===void 0&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[l]=i.extensions[l])}function Lh(w,t){t.extras!==void 0&&(typeof t.extras=="object"?Object.assign(w.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function m_e(w,t,i){let l=!1,d=!1,g=!1;for(let D=0,B=t.length;D<B;D++){const F=t[D];if(F.POSITION!==void 0&&(l=!0),F.NORMAL!==void 0&&(d=!0),F.COLOR_0!==void 0&&(g=!0),l&&d&&g)break}if(!l&&!d&&!g)return Promise.resolve(w);const x=[],_=[],P=[];for(let D=0,B=t.length;D<B;D++){const F=t[D];if(l){const V=F.POSITION!==void 0?i.getDependency("accessor",F.POSITION):w.attributes.position;x.push(V)}if(d){const V=F.NORMAL!==void 0?i.getDependency("accessor",F.NORMAL):w.attributes.normal;_.push(V)}if(g){const V=F.COLOR_0!==void 0?i.getDependency("accessor",F.COLOR_0):w.attributes.color;P.push(V)}}return Promise.all([Promise.all(x),Promise.all(_),Promise.all(P)]).then(function(D){const B=D[0],F=D[1],V=D[2];return l&&(w.morphAttributes.position=B),d&&(w.morphAttributes.normal=F),g&&(w.morphAttributes.color=V),w.morphTargetsRelative=!0,w})}function g_e(w,t){if(w.updateMorphTargets(),t.weights!==void 0)for(let i=0,l=t.weights.length;i<l;i++)w.morphTargetInfluences[i]=t.weights[i];if(t.extras&&Array.isArray(t.extras.targetNames)){const i=t.extras.targetNames;if(w.morphTargetInfluences.length===i.length){w.morphTargetDictionary={};for(let l=0,d=i.length;l<d;l++)w.morphTargetDictionary[i[l]]=l}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function v_e(w){const t=w.extensions&&w.extensions[qn.KHR_DRACO_MESH_COMPRESSION];let i;return t?i="draco:"+t.bufferView+":"+t.indices+":"+Lne(t.attributes):i=w.indices+":"+Lne(w.attributes)+":"+w.mode,i}function Lne(w){let t="";const i=Object.keys(w).sort();for(let l=0,d=i.length;l<d;l++)t+=i[l]+":"+w[i[l]]+";";return t}function _L(w){switch(w){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function y_e(w){return w.search(/\.jpe?g($|\?)/i)>0||w.search(/^data\:image\/jpeg/)===0?"image/jpeg":w.search(/\.webp($|\?)/i)>0||w.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}class b_e{constructor(t={},i={}){this.json=t,this.extensions={},this.plugins={},this.options=i,this.cache=new qbe,this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};const l=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,d=navigator.userAgent.indexOf("Firefox")>-1,g=d?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1;typeof createImageBitmap=="undefined"||l||d&&g<98?this.textureLoader=new Pbe(this.options.manager):this.textureLoader=new Lbe(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new pre(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(t){this.extensions=t}setPlugins(t){this.plugins=t}parse(t,i){const l=this,d=this.json,g=this.extensions;this.cache.removeAll(),this._invokeAll(function(x){return x._markDefs&&x._markDefs()}),Promise.all(this._invokeAll(function(x){return x.beforeRoot&&x.beforeRoot()})).then(function(){return Promise.all([l.getDependencies("scene"),l.getDependencies("animation"),l.getDependencies("camera")])}).then(function(x){const _={scene:x[0][d.scene||0],scenes:x[0],animations:x[1],cameras:x[2],asset:d.asset,parser:l,userData:{}};n1(g,_,d),Lh(_,d),Promise.all(l._invokeAll(function(P){return P.afterRoot&&P.afterRoot(_)})).then(function(){t(_)})}).catch(i)}_markDefs(){const t=this.json.nodes||[],i=this.json.skins||[],l=this.json.meshes||[];for(let d=0,g=i.length;d<g;d++){const x=i[d].joints;for(let _=0,P=x.length;_<P;_++)t[x[_]].isBone=!0}for(let d=0,g=t.length;d<g;d++){const x=t[d];x.mesh!==void 0&&(this._addNodeRef(this.meshCache,x.mesh),x.skin!==void 0&&(l[x.mesh].isSkinnedMesh=!0)),x.camera!==void 0&&this._addNodeRef(this.cameraCache,x.camera)}}_addNodeRef(t,i){i!==void 0&&(t.refs[i]===void 0&&(t.refs[i]=t.uses[i]=0),t.refs[i]++)}_getNodeRef(t,i,l){if(t.refs[i]<=1)return l;const d=l.clone(),g=(x,_)=>{const P=this.associations.get(x);P!=null&&this.associations.set(_,P);for(const[D,B]of x.children.entries())g(B,_.children[D])};return g(l,d),d.name+="_instance_"+t.uses[i]++,d}_invokeOne(t){const i=Object.values(this.plugins);i.push(this);for(let l=0;l<i.length;l++){const d=t(i[l]);if(d)return d}return null}_invokeAll(t){const i=Object.values(this.plugins);i.unshift(this);const l=[];for(let d=0;d<i.length;d++){const g=t(i[d]);g&&l.push(g)}return l}getDependency(t,i){const l=t+":"+i;let d=this.cache.get(l);if(!d){switch(t){case"scene":d=this.loadScene(i);break;case"node":d=this.loadNode(i);break;case"mesh":d=this._invokeOne(function(g){return g.loadMesh&&g.loadMesh(i)});break;case"accessor":d=this.loadAccessor(i);break;case"bufferView":d=this._invokeOne(function(g){return g.loadBufferView&&g.loadBufferView(i)});break;case"buffer":d=this.loadBuffer(i);break;case"material":d=this._invokeOne(function(g){return g.loadMaterial&&g.loadMaterial(i)});break;case"texture":d=this._invokeOne(function(g){return g.loadTexture&&g.loadTexture(i)});break;case"skin":d=this.loadSkin(i);break;case"animation":d=this._invokeOne(function(g){return g.loadAnimation&&g.loadAnimation(i)});break;case"camera":d=this.loadCamera(i);break;default:throw new Error("Unknown type: "+t)}this.cache.add(l,d)}return d}getDependencies(t){let i=this.cache.get(t);if(!i){const l=this,d=this.json[t+(t==="mesh"?"es":"s")]||[];i=Promise.all(d.map(function(g,x){return l.getDependency(t,x)})),this.cache.add(t,i)}return i}loadBuffer(t){const i=this.json.buffers[t],l=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&t===0)return Promise.resolve(this.extensions[qn.KHR_BINARY_GLTF].body);const d=this.options;return new Promise(function(g,x){l.load(Hh.resolveURL(i.uri,d.path),g,void 0,function(){x(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(t){const i=this.json.bufferViews[t];return this.getDependency("buffer",i.buffer).then(function(l){const d=i.byteLength||0,g=i.byteOffset||0;return l.slice(g,g+d)})}loadAccessor(t){const i=this,l=this.json,d=this.json.accessors[t];if(d.bufferView===void 0&&d.sparse===void 0)return Promise.resolve(null);const g=[];return d.bufferView!==void 0?g.push(this.getDependency("bufferView",d.bufferView)):g.push(null),d.sparse!==void 0&&(g.push(this.getDependency("bufferView",d.sparse.indices.bufferView)),g.push(this.getDependency("bufferView",d.sparse.values.bufferView))),Promise.all(g).then(function(x){const _=x[0],P=Rne[d.type],D=h1[d.componentType],B=D.BYTES_PER_ELEMENT,F=B*P,V=d.byteOffset||0,X=d.bufferView!==void 0?l.bufferViews[d.bufferView].byteStride:void 0,ie=d.normalized===!0;let K,O;if(X&&X!==F){const q=Math.floor(V/X),_e="InterleavedBuffer:"+d.bufferView+":"+d.componentType+":"+q+":"+d.count;let z=i.cache.get(_e);z||(K=new D(_,q*X,d.count*X/B),z=new cbe(K,X/B),i.cache.add(_e,z)),O=new OL(z,P,V%X/B,ie)}else _===null?K=new D(d.count*P):K=new D(_,V,d.count*P),O=new va(K,P,ie);if(d.sparse!==void 0){const q=Rne.SCALAR,_e=h1[d.sparse.indices.componentType],z=d.sparse.indices.byteOffset||0,le=d.sparse.values.byteOffset||0,Ee=new _e(x[1],z,d.sparse.count*q),je=new D(x[2],le,d.sparse.count*P);_!==null&&(O=new va(O.array.slice(),O.itemSize,O.normalized));for(let te=0,me=Ee.length;te<me;te++){const Pe=Ee[te];if(O.setX(Pe,je[te*P]),P>=2&&O.setY(Pe,je[te*P+1]),P>=3&&O.setZ(Pe,je[te*P+2]),P>=4&&O.setW(Pe,je[te*P+3]),P>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return O})}loadTexture(t){const i=this.json,l=this.options,g=i.textures[t].source,x=i.images[g];let _=this.textureLoader;if(x.uri){const P=l.manager.getHandler(x.uri);P!==null&&(_=P)}return this.loadTextureImage(t,g,_)}loadTextureImage(t,i,l){const d=this,g=this.json,x=g.textures[t],_=g.images[i],P=(_.uri||_.bufferView)+":"+x.sampler;if(this.textureCache[P])return this.textureCache[P];const D=this.loadImageSource(i,l).then(function(B){B.flipY=!1,x.name&&(B.name=x.name);const V=(g.samplers||{})[x.sampler]||{};return B.magFilter=Dne[V.magFilter]||Zo,B.minFilter=Dne[V.minFilter]||w0,B.wrapS=One[V.wrapS]||v0,B.wrapT=One[V.wrapT]||v0,d.associations.set(B,{textures:t}),B}).catch(function(){return null});return this.textureCache[P]=D,D}loadImageSource(t,i){const l=this,d=this.json,g=this.options;if(this.sourceCache[t]!==void 0)return this.sourceCache[t].then(F=>F.clone());const x=d.images[t],_=self.URL||self.webkitURL;let P=x.uri||"",D=!1;if(x.bufferView!==void 0)P=l.getDependency("bufferView",x.bufferView).then(function(F){D=!0;const V=new Blob([F],{type:x.mimeType});return P=_.createObjectURL(V),P});else if(x.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+t+" is missing URI and bufferView");const B=Promise.resolve(P).then(function(F){return new Promise(function(V,X){let ie=V;i.isImageBitmapLoader===!0&&(ie=function(K){const O=new Ro(K);O.needsUpdate=!0,V(O)}),i.load(Hh.resolveURL(F,g.path),ie,void 0,X)})}).then(function(F){return D===!0&&_.revokeObjectURL(P),F.userData.mimeType=x.mimeType||y_e(x.uri),F}).catch(function(F){throw console.error("THREE.GLTFLoader: Couldn't load texture",P),F});return this.sourceCache[t]=B,B}assignTexture(t,i,l,d){const g=this;return this.getDependency("texture",l.index).then(function(x){if(l.texCoord!==void 0&&l.texCoord!=0&&!(i==="aoMap"&&l.texCoord==1)&&console.warn("THREE.GLTFLoader: Custom UV set "+l.texCoord+" for texture "+i+" not yet supported."),g.extensions[qn.KHR_TEXTURE_TRANSFORM]){const _=l.extensions!==void 0?l.extensions[qn.KHR_TEXTURE_TRANSFORM]:void 0;if(_){const P=g.associations.get(x);x=g.extensions[qn.KHR_TEXTURE_TRANSFORM].extendTexture(x,_),g.associations.set(x,P)}}return d!==void 0&&(x.encoding=d),t[i]=x,x})}assignFinalMaterial(t){const i=t.geometry;let l=t.material;const d=i.attributes.tangent===void 0,g=i.attributes.color!==void 0,x=i.attributes.normal===void 0;if(t.isPoints){const _="PointsMaterial:"+l.uuid;let P=this.cache.get(_);P||(P=new fre,Ll.prototype.copy.call(P,l),P.color.copy(l.color),P.map=l.map,P.sizeAttenuation=!1,this.cache.add(_,P)),l=P}else if(t.isLine){const _="LineBasicMaterial:"+l.uuid;let P=this.cache.get(_);P||(P=new dre,Ll.prototype.copy.call(P,l),P.color.copy(l.color),this.cache.add(_,P)),l=P}if(d||g||x){let _="ClonedMaterial:"+l.uuid+":";l.isGLTFSpecularGlossinessMaterial&&(_+="specular-glossiness:"),d&&(_+="derivative-tangents:"),g&&(_+="vertex-colors:"),x&&(_+="flat-shading:");let P=this.cache.get(_);P||(P=l.clone(),g&&(P.vertexColors=!0),x&&(P.flatShading=!0),d&&(P.normalScale&&(P.normalScale.y*=-1),P.clearcoatNormalScale&&(P.clearcoatNormalScale.y*=-1)),this.cache.add(_,P),this.associations.set(P,this.associations.get(l))),l=P}l.aoMap&&i.attributes.uv2===void 0&&i.attributes.uv!==void 0&&i.setAttribute("uv2",i.attributes.uv),t.material=l}getMaterialType(){return ZM}loadMaterial(t){const i=this,l=this.json,d=this.extensions,g=l.materials[t];let x;const _={},P=g.extensions||{},D=[];if(P[qn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){const F=d[qn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];x=F.getMaterialType(),D.push(F.extendParams(_,g,i))}else if(P[qn.KHR_MATERIALS_UNLIT]){const F=d[qn.KHR_MATERIALS_UNLIT];x=F.getMaterialType(),D.push(F.extendParams(_,g,i))}else{const F=g.pbrMetallicRoughness||{};if(_.color=new zn(1,1,1),_.opacity=1,Array.isArray(F.baseColorFactor)){const V=F.baseColorFactor;_.color.fromArray(V),_.opacity=V[3]}F.baseColorTexture!==void 0&&D.push(i.assignTexture(_,"map",F.baseColorTexture,gr)),_.metalness=F.metallicFactor!==void 0?F.metallicFactor:1,_.roughness=F.roughnessFactor!==void 0?F.roughnessFactor:1,F.metallicRoughnessTexture!==void 0&&(D.push(i.assignTexture(_,"metalnessMap",F.metallicRoughnessTexture)),D.push(i.assignTexture(_,"roughnessMap",F.metallicRoughnessTexture))),x=this._invokeOne(function(V){return V.getMaterialType&&V.getMaterialType(t)}),D.push(Promise.all(this._invokeAll(function(V){return V.extendMaterialParams&&V.extendMaterialParams(t,_)})))}g.doubleSided===!0&&(_.side=Gh);const B=g.alphaMode||sL.OPAQUE;if(B===sL.BLEND?(_.transparent=!0,_.depthWrite=!1):(_.transparent=!1,B===sL.MASK&&(_.alphaTest=g.alphaCutoff!==void 0?g.alphaCutoff:.5)),g.normalTexture!==void 0&&x!==Bh&&(D.push(i.assignTexture(_,"normalMap",g.normalTexture)),_.normalScale=new er(1,1),g.normalTexture.scale!==void 0)){const F=g.normalTexture.scale;_.normalScale.set(F,F)}return g.occlusionTexture!==void 0&&x!==Bh&&(D.push(i.assignTexture(_,"aoMap",g.occlusionTexture)),g.occlusionTexture.strength!==void 0&&(_.aoMapIntensity=g.occlusionTexture.strength)),g.emissiveFactor!==void 0&&x!==Bh&&(_.emissive=new zn().fromArray(g.emissiveFactor)),g.emissiveTexture!==void 0&&x!==Bh&&D.push(i.assignTexture(_,"emissiveMap",g.emissiveTexture,gr)),Promise.all(D).then(function(){let F;return x===yL?F=d[qn.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(_):F=new x(_),g.name&&(F.name=g.name),Lh(F,g),i.associations.set(F,{materials:t}),g.extensions&&n1(d,F,g),F})}createUniqueName(t){const i=vr.sanitizeNodeName(t||"");let l=i;for(let d=1;this.nodeNamesUsed[l];++d)l=i+"_"+d;return this.nodeNamesUsed[l]=!0,l}loadGeometries(t){const i=this,l=this.extensions,d=this.primitiveCache;function g(_){return l[qn.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(_,i).then(function(P){return zne(P,_,i)})}const x=[];for(let _=0,P=t.length;_<P;_++){const D=t[_],B=v_e(D),F=d[B];if(F)x.push(F.promise);else{let V;D.extensions&&D.extensions[qn.KHR_DRACO_MESH_COMPRESSION]?V=g(D):V=zne(new zl,D,i),d[B]={primitive:D,promise:V},x.push(V)}}return Promise.all(x)}loadMesh(t){const i=this,l=this.json,d=this.extensions,g=l.meshes[t],x=g.primitives,_=[];for(let P=0,D=x.length;P<D;P++){const B=x[P].material===void 0?p_e(this.cache):this.getDependency("material",x[P].material);_.push(B)}return _.push(i.loadGeometries(x)),Promise.all(_).then(function(P){const D=P.slice(0,P.length-1),B=P[P.length-1],F=[];for(let X=0,ie=B.length;X<ie;X++){const K=B[X],O=x[X];let q;const _e=D[X];if(O.mode===Hu.TRIANGLES||O.mode===Hu.TRIANGLE_STRIP||O.mode===Hu.TRIANGLE_FAN||O.mode===void 0)q=g.isSkinnedMesh===!0?new fbe(K,_e):new Rl(K,_e),q.isSkinnedMesh===!0&&!q.geometry.attributes.skinWeight.normalized&&q.normalizeSkinWeights(),O.mode===Hu.TRIANGLE_STRIP?q.geometry=Nne(q.geometry,Kpe):O.mode===Hu.TRIANGLE_FAN&&(q.geometry=Nne(q.geometry,Wne));else if(O.mode===Hu.LINES)q=new mbe(K,_e);else if(O.mode===Hu.LINE_STRIP)q=new LL(K,_e);else if(O.mode===Hu.LINE_LOOP)q=new gbe(K,_e);else if(O.mode===Hu.POINTS)q=new vbe(K,_e);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+O.mode);Object.keys(q.geometry.morphAttributes).length>0&&g_e(q,g),q.name=i.createUniqueName(g.name||"mesh_"+t),Lh(q,g),O.extensions&&n1(d,q,O),i.assignFinalMaterial(q),F.push(q)}for(let X=0,ie=F.length;X<ie;X++)i.associations.set(F[X],{meshes:t,primitives:X});if(F.length===1)return F[0];const V=new jh;i.associations.set(V,{meshes:t});for(let X=0,ie=F.length;X<ie;X++)V.add(F[X]);return V})}loadCamera(t){let i;const l=this.json.cameras[t],d=l[l.type];if(!d){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return l.type==="perspective"?i=new Oo(hme.radToDeg(d.yfov),d.aspectRatio||1,d.znear||1,d.zfar||2e6):l.type==="orthographic"&&(i=new IL(-d.xmag,d.xmag,d.ymag,-d.ymag,d.znear,d.zfar)),l.name&&(i.name=this.createUniqueName(l.name)),Lh(i,l),Promise.resolve(i)}loadSkin(t){const i=this.json.skins[t],l={joints:i.joints};return i.inverseBindMatrices===void 0?Promise.resolve(l):this.getDependency("accessor",i.inverseBindMatrices).then(function(d){return l.inverseBindMatrices=d,l})}loadAnimation(t){const l=this.json.animations[t],d=[],g=[],x=[],_=[],P=[];for(let D=0,B=l.channels.length;D<B;D++){const F=l.channels[D],V=l.samplers[F.sampler],X=F.target,ie=X.node!==void 0?X.node:X.id,K=l.parameters!==void 0?l.parameters[V.input]:V.input,O=l.parameters!==void 0?l.parameters[V.output]:V.output;d.push(this.getDependency("node",ie)),g.push(this.getDependency("accessor",K)),x.push(this.getDependency("accessor",O)),_.push(V),P.push(X)}return Promise.all([Promise.all(d),Promise.all(g),Promise.all(x),Promise.all(_),Promise.all(P)]).then(function(D){const B=D[0],F=D[1],V=D[2],X=D[3],ie=D[4],K=[];for(let q=0,_e=B.length;q<_e;q++){const z=B[q],le=F[q],Ee=V[q],je=X[q],te=ie[q];if(z===void 0)continue;z.updateMatrix(),z.matrixAutoUpdate=!0;let me;switch(Bd[te.path]){case Bd.weights:me=d1;break;case Bd.rotation:me=$h;break;case Bd.position:case Bd.scale:default:me=f1;break}const Pe=z.name?z.name:z.uuid,Q=je.interpolation!==void 0?h_e[je.interpolation]:b0,Je=[];Bd[te.path]===Bd.weights?z.traverse(function(Dt){Dt.morphTargetInfluences&&Je.push(Dt.name?Dt.name:Dt.uuid)}):Je.push(Pe);let Ut=Ee.array;if(Ee.normalized){const Dt=_L(Ut.constructor),et=new Float32Array(Ut.length);for(let be=0,tt=Ut.length;be<tt;be++)et[be]=Ut[be]*Dt;Ut=et}for(let Dt=0,et=Je.length;Dt<et;Dt++){const be=new me(Je[Dt]+"."+Bd[te.path],le.array,Ut,Q);je.interpolation==="CUBICSPLINE"&&(be.createInterpolant=function(He){const yt=this instanceof $h?f_e:vre;return new yt(this.times,this.values,this.getValueSize()/3,He)},be.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),K.push(be)}}const O=l.name?l.name:"animation_"+t;return new wbe(O,void 0,K)})}createNodeMesh(t){const i=this.json,l=this,d=i.nodes[t];return d.mesh===void 0?null:l.getDependency("mesh",d.mesh).then(function(g){const x=l._getNodeRef(l.meshCache,d.mesh,g);return d.weights!==void 0&&x.traverse(function(_){if(!!_.isMesh)for(let P=0,D=d.weights.length;P<D;P++)_.morphTargetInfluences[P]=d.weights[P]}),x})}loadNode(t){const i=this.json,l=this.extensions,d=this,g=i.nodes[t],x=g.name?d.createUniqueName(g.name):"";return function(){const _=[],P=d._invokeOne(function(D){return D.createNodeMesh&&D.createNodeMesh(t)});return P&&_.push(P),g.camera!==void 0&&_.push(d.getDependency("camera",g.camera).then(function(D){return d._getNodeRef(d.cameraCache,g.camera,D)})),d._invokeAll(function(D){return D.createNodeAttachment&&D.createNodeAttachment(t)}).forEach(function(D){_.push(D)}),Promise.all(_)}().then(function(_){let P;if(g.isBone===!0?P=new cre:_.length>1?P=new jh:_.length===1?P=_[0]:P=new gi,P!==_[0])for(let D=0,B=_.length;D<B;D++)P.add(_[D]);if(g.name&&(P.userData.name=g.name,P.name=x),Lh(P,g),g.extensions&&n1(l,P,g),g.matrix!==void 0){const D=new lr;D.fromArray(g.matrix),P.applyMatrix4(D)}else g.translation!==void 0&&P.position.fromArray(g.translation),g.rotation!==void 0&&P.quaternion.fromArray(g.rotation),g.scale!==void 0&&P.scale.fromArray(g.scale);return d.associations.has(P)||d.associations.set(P,{}),d.associations.get(P).nodes=t,P})}loadScene(t){const i=this.json,l=this.extensions,d=this.json.scenes[t],g=this,x=new jh;d.name&&(x.name=g.createUniqueName(d.name)),Lh(x,d),d.extensions&&n1(l,x,d);const _=d.nodes||[],P=[];for(let D=0,B=_.length;D<B;D++)P.push(yre(_[D],x,i,g));return Promise.all(P).then(function(){const D=B=>{const F=new Map;for(const[V,X]of g.associations)(V instanceof Ll||V instanceof Ro)&&F.set(V,X);return B.traverse(V=>{const X=g.associations.get(V);X!=null&&F.set(V,X)}),F};return g.associations=D(x),x})}}function yre(w,t,i,l){const d=i.nodes[w];return l.getDependency("node",w).then(function(g){if(d.skin===void 0)return g;let x;return l.getDependency("skin",d.skin).then(function(_){x=_;const P=[];for(let D=0,B=x.joints.length;D<B;D++)P.push(l.getDependency("node",x.joints[D]));return Promise.all(P)}).then(function(_){return g.traverse(function(P){if(!P.isMesh)return;const D=[],B=[];for(let F=0,V=_.length;F<V;F++){const X=_[F];if(X){D.push(X);const ie=new lr;x.inverseBindMatrices!==void 0&&ie.fromArray(x.inverseBindMatrices.array,F*16),B.push(ie)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',x.joints[F])}P.bind(new RL(D,B),P.matrixWorld)}),g})}).then(function(g){t.add(g);const x=[];if(d.children){const _=d.children;for(let P=0,D=_.length;P<D;P++){const B=_[P];x.push(yre(B,g,i,l))}}return Promise.all(x)})}function __e(w,t,i){const l=t.attributes,d=new E0;if(l.POSITION!==void 0){const _=i.json.accessors[l.POSITION],P=_.min,D=_.max;if(P!==void 0&&D!==void 0){if(d.set(new Ve(P[0],P[1],P[2]),new Ve(D[0],D[1],D[2])),_.normalized){const B=_L(h1[_.componentType]);d.min.multiplyScalar(B),d.max.multiplyScalar(B)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const g=t.targets;if(g!==void 0){const _=new Ve,P=new Ve;for(let D=0,B=g.length;D<B;D++){const F=g[D];if(F.POSITION!==void 0){const V=i.json.accessors[F.POSITION],X=V.min,ie=V.max;if(X!==void 0&&ie!==void 0){if(P.setX(Math.max(Math.abs(X[0]),Math.abs(ie[0]))),P.setY(Math.max(Math.abs(X[1]),Math.abs(ie[1]))),P.setZ(Math.max(Math.abs(X[2]),Math.abs(ie[2]))),V.normalized){const K=_L(h1[V.componentType]);P.multiplyScalar(K)}_.max(P)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}d.expandByVector(_)}w.boundingBox=d;const x=new k0;d.getCenter(x.center),x.radius=d.min.distanceTo(d.max)/2,w.boundingSphere=x}function zne(w,t,i){const l=t.attributes,d=[];function g(x,_){return i.getDependency("accessor",x).then(function(P){w.setAttribute(_,P)})}for(const x in l){const _=bL[x]||x.toLowerCase();_ in w.attributes||d.push(g(l[x],_))}if(t.indices!==void 0&&!w.index){const x=i.getDependency("accessor",t.indices).then(function(_){w.setIndex(_)});d.push(x)}return Lh(w,t),__e(w,t,i),Promise.all(d).then(function(){return t.targets!==void 0?m_e(w,t.targets,i):w})}function Nne(w,t){let i=w.getIndex();if(i===null){const x=[],_=w.getAttribute("position");if(_!==void 0){for(let P=0;P<_.count;P++)x.push(P);w.setIndex(x),i=w.getIndex()}else return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),w}const l=i.count-2,d=[];if(t===Wne)for(let x=1;x<=l;x++)d.push(i.getX(0)),d.push(i.getX(x)),d.push(i.getX(x+1));else for(let x=0;x<l;x++)x%2===0?(d.push(i.getX(x)),d.push(i.getX(x+1)),d.push(i.getX(x+2))):(d.push(i.getX(x+2)),d.push(i.getX(x+1)),d.push(i.getX(x)));d.length/3!==l&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const g=w.clone();return g.setIndex(d),g}var qr=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function x_e(w){return w&&w.__esModule&&Object.prototype.hasOwnProperty.call(w,"default")?w.default:w}function HM(w){throw new Error('Could not dynamically require "'+w+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xL={exports:{}},St={};(function(w){var t=Object.defineProperty,i=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,g=Object.prototype.hasOwnProperty,x=Object.prototype.propertyIsEnumerable,_=(Z,fe,Oe)=>fe in Z?t(Z,fe,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Z[fe]=Oe,P=(Z,fe)=>{for(var Oe in fe||(fe={}))g.call(fe,Oe)&&_(Z,Oe,fe[Oe]);if(d)for(var Oe of d(fe))x.call(fe,Oe)&&_(Z,Oe,fe[Oe]);return Z},D=(Z,fe)=>i(Z,l(fe)),B=Z=>t(Z,"__esModule",{value:!0}),F=(Z,fe)=>{B(Z);for(var Oe in fe)t(Z,Oe,{get:fe[Oe],enumerable:!0})};F(w,{Atom:()=>Pp,PointerProxy:()=>hc,Ticker:()=>Ip,getPointerParts:()=>jl,isPointer:()=>wa,isPrism:()=>Vl,iterateAndCountTicks:()=>Qd,iterateOver:()=>Dp,pointer:()=>Xd,pointerToPrism:()=>fc,prism:()=>Ea,val:()=>Jd});var V=Array.isArray,X=V,ie=typeof qr=="object"&&qr&&qr.Object===Object&&qr,K=ie,O=typeof self=="object"&&self&&self.Object===Object&&self,q=K||O||Function("return this")(),_e=q,z=_e.Symbol,le=z,Ee=Object.prototype,je=Ee.hasOwnProperty,te=Ee.toString,me=le?le.toStringTag:void 0;function Pe(Z){var fe=je.call(Z,me),Oe=Z[me];try{Z[me]=void 0;var st=!0}catch{}var vn=te.call(Z);return st&&(fe?Z[me]=Oe:delete Z[me]),vn}var Q=Pe,Je=Object.prototype,Ut=Je.toString;function Dt(Z){return Ut.call(Z)}var et=Dt,be="[object Null]",tt="[object Undefined]",He=le?le.toStringTag:void 0;function yt(Z){return Z==null?Z===void 0?tt:be:He&&He in Object(Z)?Q(Z):et(Z)}var dt=yt;function vt(Z){return Z!=null&&typeof Z=="object"}var Lt=vt,Et="[object Symbol]";function Ot(Z){return typeof Z=="symbol"||Lt(Z)&&dt(Z)==Et}var Yt=Ot,Qt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mt=/^\w*$/;function Jn(Z,fe){if(X(Z))return!1;var Oe=typeof Z;return Oe=="number"||Oe=="symbol"||Oe=="boolean"||Z==null||Yt(Z)?!0:mt.test(Z)||!Qt.test(Z)||fe!=null&&Z in Object(fe)}var Dn=Jn;function wn(Z){var fe=typeof Z;return Z!=null&&(fe=="object"||fe=="function")}var qt=wn,On="[object AsyncFunction]",Fn="[object Function]",hn="[object GeneratorFunction]",Br="[object Proxy]";function Yr(Z){if(!qt(Z))return!1;var fe=dt(Z);return fe==Fn||fe==hn||fe==On||fe==Br}var ai=Yr,wr=_e["__core-js_shared__"],$n=wr,Zn=function(){var Z=/[^.]+$/.exec($n&&$n.keys&&$n.keys.IE_PROTO||"");return Z?"Symbol(src)_1."+Z:""}();function kr(Z){return!!Zn&&Zn in Z}var vi=kr,xe=Function.prototype,he=xe.toString;function ft(Z){if(Z!=null){try{return he.call(Z)}catch{}try{return Z+""}catch{}}return""}var zt=ft,Nt=/[\\^$.*+?()[\]{}|]/g,Ht=/^\[object .+?Constructor\]$/,Sn=Function.prototype,ht=Object.prototype,ln=Sn.toString,Jt=ht.hasOwnProperty,Kt=RegExp("^"+ln.call(Jt).replace(Nt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function De(Z){if(!qt(Z)||vi(Z))return!1;var fe=ai(Z)?Kt:Ht;return fe.test(zt(Z))}var Vt=De;function Bt(Z,fe){return Z==null?void 0:Z[fe]}var pn=Bt;function $t(Z,fe){var Oe=pn(Z,fe);return Vt(Oe)?Oe:void 0}var cn=$t,Rt=cn(Object,"create"),fn=Rt;function Rn(){this.__data__=fn?fn(null):{},this.size=0}var Bn=Rn;function Jr(Z){var fe=this.has(Z)&&delete this.__data__[Z];return this.size-=fe?1:0,fe}var zi=Jr,No="__lodash_hash_undefined__",Ya=Object.prototype,Gs=Ya.hasOwnProperty;function Ti(Z){var fe=this.__data__;if(fn){var Oe=fe[Z];return Oe===No?void 0:Oe}return Gs.call(fe,Z)?fe[Z]:void 0}var Ja=Ti,Fl=Object.prototype,yi=Fl.hasOwnProperty;function Ni(Z){var fe=this.__data__;return fn?fe[Z]!==void 0:yi.call(fe,Z)}var Zu=Ni,ge="__lodash_hash_undefined__";function Qe(Z,fe){var Oe=this.__data__;return this.size+=this.has(Z)?0:1,Oe[Z]=fn&&fe===void 0?ge:fe,this}var ut=Qe;function ot(Z){var fe=-1,Oe=Z==null?0:Z.length;for(this.clear();++fe<Oe;){var st=Z[fe];this.set(st[0],st[1])}}ot.prototype.clear=Bn,ot.prototype.delete=zi,ot.prototype.get=Ja,ot.prototype.has=Zu,ot.prototype.set=ut;var bt=ot;function _n(){this.__data__=[],this.size=0}var En=_n;function xn(Z,fe){return Z===fe||Z!==Z&&fe!==fe}var An=xn;function Un(Z,fe){for(var Oe=Z.length;Oe--;)if(An(Z[Oe][0],fe))return Oe;return-1}var Nn=Un,Vn=Array.prototype,yr=Vn.splice;function Yo(Z){var fe=this.__data__,Oe=Nn(fe,Z);if(Oe<0)return!1;var st=fe.length-1;return Oe==st?fe.pop():yr.call(fe,Oe,1),--this.size,!0}var Qr=Yo;function Mi(Z){var fe=this.__data__,Oe=Nn(fe,Z);return Oe<0?void 0:fe[Oe][1]}var Qi=Mi;function Hn(Z){return Nn(this.__data__,Z)>-1}var Jo=Hn;function Sr(Z,fe){var Oe=this.__data__,st=Nn(Oe,Z);return st<0?(++this.size,Oe.push([Z,fe])):Oe[st][1]=fe,this}var Fi=Sr;function si(Z){var fe=-1,Oe=Z==null?0:Z.length;for(this.clear();++fe<Oe;){var st=Z[fe];this.set(st[0],st[1])}}si.prototype.clear=En,si.prototype.delete=Qr,si.prototype.get=Qi,si.prototype.has=Jo,si.prototype.set=Fi;var bi=si,Qo=cn(_e,"Map"),ei=Qo;function ea(){this.size=0,this.__data__={hash:new bt,map:new(ei||bi),string:new bt}}var po=ea;function li(Z){var fe=typeof Z;return fe=="string"||fe=="number"||fe=="symbol"||fe=="boolean"?Z!=="__proto__":Z===null}var Yh=li;function C0(Z,fe){var Oe=Z.__data__;return Yh(fe)?Oe[typeof fe=="string"?"string":"hash"]:Oe.map}var ya=C0;function Ws(Z){var fe=ya(this,Z).delete(Z);return this.size-=fe?1:0,fe}var A0=Ws;function ba(Z){return ya(this,Z).get(Z)}var Yu=ba;function I0(Z){return ya(this,Z).has(Z)}var Jh=I0;function Qh(Z,fe){var Oe=ya(this,Z),st=Oe.size;return Oe.set(Z,fe),this.size+=Oe.size==st?0:1,this}var ep=Qh;function Qa(Z){var fe=-1,Oe=Z==null?0:Z.length;for(this.clear();++fe<Oe;){var st=Z[fe];this.set(st[0],st[1])}}Qa.prototype.clear=po,Qa.prototype.delete=A0,Qa.prototype.get=Yu,Qa.prototype.has=Jh,Qa.prototype.set=ep;var Ju=Qa,tp="Expected a function";function Qu(Z,fe){if(typeof Z!="function"||fe!=null&&typeof fe!="function")throw new TypeError(tp);var Oe=function(){var st=arguments,vn=fe?fe.apply(this,st):st[0],Kn=Oe.cache;if(Kn.has(vn))return Kn.get(vn);var _i=Z.apply(this,st);return Oe.cache=Kn.set(vn,_i)||Kn,_i};return Oe.cache=new(Qu.Cache||Ju),Oe}Qu.Cache=Ju;var ec=Qu,qs=500;function tc(Z){var fe=ec(Z,function(st){return Oe.size===qs&&Oe.clear(),st}),Oe=fe.cache;return fe}var Vd=tc,Ks=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,D0=/\\(\\)?/g,O0=Vd(function(Z){var fe=[];return Z.charCodeAt(0)===46&&fe.push(""),Z.replace(Ks,function(Oe,st,vn,Kn){fe.push(vn?Kn.replace(D0,"$1"):st||Oe)}),fe}),np=O0;function rp(Z,fe){for(var Oe=-1,st=Z==null?0:Z.length,vn=Array(st);++Oe<st;)vn[Oe]=fe(Z[Oe],Oe,Z);return vn}var _a=rp,Bl=1/0,ip=le?le.prototype:void 0,Hd=ip?ip.toString:void 0;function Gd(Z){if(typeof Z=="string")return Z;if(X(Z))return _a(Z,Gd)+"";if(Yt(Z))return Hd?Hd.call(Z):"";var fe=Z+"";return fe=="0"&&1/Z==-Bl?"-0":fe}var op=Gd;function ap(Z){return Z==null?"":op(Z)}var sp=ap;function lp(Z,fe){return X(Z)?Z:Dn(Z,fe)?[Z]:np(sp(Z))}var up=lp,es=1/0;function nc(Z){if(typeof Z=="string"||Yt(Z))return Z;var fe=Z+"";return fe=="0"&&1/Z==-es?"-0":fe}var R0=nc;function rc(Z,fe){fe=up(fe,Z);for(var Oe=0,st=fe.length;Z!=null&&Oe<st;)Z=Z[R0(fe[Oe++])];return Oe&&Oe==st?Z:void 0}var L0=rc;function z0(Z,fe,Oe){var st=Z==null?void 0:L0(Z,fe);return st===void 0?Oe:st}var xa=z0;function ts(Z,fe){return function(Oe){return Z(fe(Oe))}}var cp=ts,ic=cp(Object.getPrototypeOf,Object),N0=ic,F0="[object Object]",dp=Function.prototype,B0=Object.prototype,fp=dp.toString,Wd=B0.hasOwnProperty,hp=fp.call(Object);function pp(Z){if(!Lt(Z)||dt(Z)!=F0)return!1;var fe=N0(Z);if(fe===null)return!0;var Oe=Wd.call(fe,"constructor")&&fe.constructor;return typeof Oe=="function"&&Oe instanceof Oe&&fp.call(Oe)==hp}var qd=pp;function j0(Z){var fe=Z==null?0:Z.length;return fe?Z[fe-1]:void 0}var mp=j0,oc=new WeakMap,Xs=new WeakMap,Kd=Symbol("pointerMeta"),gp={get(Z,fe){if(fe===Kd)return oc.get(Z);let Oe=Xs.get(Z);Oe||(Oe=new Map,Xs.set(Z,Oe));const st=Oe.get(fe);if(st!==void 0)return st;const vn=oc.get(Z),Kn=Ul({root:vn.root,path:[...vn.path,fe]});return Oe.set(fe,Kn),Kn}},ta=Z=>Z[Kd],jl=Z=>{const{root:fe,path:Oe}=ta(Z);return{root:fe,path:Oe}};function Ul(Z){var fe;const Oe={root:Z.root,path:(fe=Z.path)!=null?fe:[]},st={};return oc.set(st,Oe),new Proxy(st,gp)}var Xd=Ul,wa=Z=>Z&&!!ta(Z);function $s(Z,fe,Oe){return fe.length===0?Oe(Z):ns(Z,fe,Oe)}var ns=(Z,fe,Oe)=>{if(fe.length===0)return Oe(Z);if(Array.isArray(Z)){let[st,...vn]=fe;st=parseInt(String(st),10),isNaN(st)&&(st=0);const Kn=Z[st],_i=ns(Kn,vn,Oe);if(Kn===_i)return Z;const Fo=[...Z];return Fo.splice(st,1,_i),Fo}else if(typeof Z=="object"&&Z!==null){const[st,...vn]=fe,Kn=Z[st],_i=ns(Kn,vn,Oe);return Kn===_i?Z:D(P({},Z),{[st]:_i})}else{const[st,...vn]=fe;return{[st]:ns(void 0,vn,Oe)}}},Kr=class{constructor(){this._head=void 0}peek(){return this._head&&this._head.data}pop(){const Z=this._head;if(!!Z)return this._head=Z.next,Z.data}push(Z){const fe={next:this._head,data:Z};this._head=fe}};function Vl(Z){return!!(Z&&Z.isPrism&&Z.isPrism===!0)}function $d(){const Z=()=>{},fe=new Kr,Oe=Z;return{type:"Dataverse_discoveryMechanism",startIgnoringDependencies:()=>{fe.push(Oe)},stopIgnoringDependencies:()=>{fe.peek()!==Oe||fe.pop()},reportResolutionStart:rs=>{const Kl=fe.peek();Kl&&Kl(rs),fe.push(Oe)},reportResolutionEnd:rs=>{fe.pop()},pushCollector:rs=>{fe.push(rs)},popCollector:rs=>{if(fe.peek()!==rs)throw new Error("Popped collector is not on top of the stack");fe.pop()}}}function vp(){const Z="__dataverse_discoveryMechanism_sharedStack",fe=typeof window!="undefined"?window:typeof qr!="undefined"?qr:{};if(fe){const Oe=fe[Z];if(Oe&&typeof Oe=="object"&&Oe.type==="Dataverse_discoveryMechanism")return Oe;{const st=$d();return fe[Z]=st,st}}else return $d()}var{startIgnoringDependencies:Sa,stopIgnoringDependencies:Hl,reportResolutionEnd:U0,reportResolutionStart:ac,pushCollector:Gl,popCollector:V0}=vp(),Zd=()=>{},H0=class{constructor(Z,fe){this._fn=Z,this._prismInstance=fe,this._didMarkDependentsAsStale=!1,this._isFresh=!1,this._cacheOfDendencyValues=new Map,this._dependents=new Set,this._dependencies=new Set,this._possiblyStaleDeps=new Set,this._scope=new bp(this),this._lastValue=void 0,this._forciblySetToStale=!1,this._reactToDependencyGoingStale=Oe=>{this._possiblyStaleDeps.add(Oe),this._markAsStale()};for(const Oe of this._dependencies)Oe._addDependent(this._reactToDependencyGoingStale);Sa(),this.getValue(),Hl()}get hasDependents(){return this._dependents.size>0}removeDependent(Z){this._dependents.delete(Z)}addDependent(Z){this._dependents.add(Z)}destroy(){for(const Z of this._dependencies)Z._removeDependent(this._reactToDependencyGoingStale);_p(this._scope)}getValue(){if(!this._isFresh){const Z=this._recalculate();this._lastValue=Z,this._isFresh=!0,this._didMarkDependentsAsStale=!1,this._forciblySetToStale=!1}return this._lastValue}_recalculate(){let Z;if(!this._forciblySetToStale&&this._possiblyStaleDeps.size>0){let st=!1;Sa();for(const vn of this._possiblyStaleDeps)if(this._cacheOfDendencyValues.get(vn)!==vn.getValue()){st=!0;break}if(Hl(),this._possiblyStaleDeps.clear(),!st)return this._lastValue}const fe=new Set;this._cacheOfDendencyValues.clear();const Oe=st=>{fe.add(st),this._addDependency(st)};Gl(Oe),ti.push(this._scope);try{Z=this._fn()}catch(st){console.error(st)}finally{ti.pop()!==this._scope&&console.warn("The Prism hook stack has slipped. This is a bug.")}V0(Oe);for(const st of this._dependencies)fe.has(st)||this._removeDependency(st);this._dependencies=fe,Sa();for(const st of fe)this._cacheOfDendencyValues.set(st,st.getValue());return Hl(),Z}forceStale(){this._forciblySetToStale=!0,this._markAsStale()}_markAsStale(){if(!this._didMarkDependentsAsStale){this._didMarkDependentsAsStale=!0,this._isFresh=!1;for(const Z of this._dependents)Z(this._prismInstance)}}_addDependency(Z){this._dependencies.has(Z)||(this._dependencies.add(Z),Z._addDependent(this._reactToDependencyGoingStale))}_removeDependency(Z){!this._dependencies.has(Z)||(this._dependencies.delete(Z),Z._removeDependent(this._reactToDependencyGoingStale))}},Yd={},yp=class{constructor(Z){this._fn=Z,this.isPrism=!0,this._state={hot:!1,handle:void 0}}get isHot(){return this._state.hot}onChange(Z,fe,Oe=!1){const st=()=>{Z.onThisOrNextTick(Kn)};let vn=Yd;const Kn=()=>{const Fo=this.getValue();Fo!==vn&&(vn=Fo,fe(Fo))};return this._addDependent(st),Oe&&(vn=this.getValue(),fe(vn)),()=>{this._removeDependent(st),Z.offThisOrNextTick(Kn),Z.offNextTick(Kn)}}onStale(Z){const fe=()=>{this._removeDependent(Oe)},Oe=()=>Z();return this._addDependent(Oe),fe}keepHot(){return this.onStale(()=>{})}_addDependent(Z){this._state.hot||this._goHot(),this._state.handle.addDependent(Z)}_goHot(){const Z=new H0(this._fn,this);this._state={hot:!0,handle:Z}}_removeDependent(Z){const fe=this._state;if(!fe.hot)return;const Oe=fe.handle;Oe.removeDependent(Z),Oe.hasDependents||(this._state={hot:!1,handle:void 0},Oe.destroy())}getValue(){ac(this);const Z=this._state;let fe;return Z.hot?fe=Z.handle.getValue():fe=na(this._fn),U0(this),fe}},bp=class{constructor(Z){this._hotHandle=Z,this._refs=new Map,this.isPrismScope=!0,this.subs={},this.effects=new Map,this.memos=new Map}ref(Z,fe){let Oe=this._refs.get(Z);if(Oe!==void 0)return Oe;{const st={current:fe};return this._refs.set(Z,st),st}}effect(Z,fe,Oe){let st=this.effects.get(Z);st===void 0&&(st={cleanup:Zd,deps:void 0},this.effects.set(Z,st)),xp(st.deps,Oe)&&(st.cleanup(),Sa(),st.cleanup=Zs(fe,Zd).value,Hl(),st.deps=Oe)}memo(Z,fe,Oe){let st=this.memos.get(Z);return st===void 0&&(st={cachedValue:null,deps:void 0},this.memos.set(Z,st)),xp(st.deps,Oe)&&(Sa(),st.cachedValue=Zs(fe,void 0).value,Hl(),st.deps=Oe),st.cachedValue}state(Z,fe){const{value:Oe,setValue:st}=this.memo("state/"+Z,()=>{const vn={current:fe};return{value:vn,setValue:_i=>{vn.current=_i,this._hotHandle.forceStale()}}},[]);return[Oe.current,st]}sub(Z){return this.subs[Z]||(this.subs[Z]=new bp(this._hotHandle)),this.subs[Z]}cleanupEffects(){for(const Z of this.effects.values())Zs(Z.cleanup,void 0);this.effects.clear()}source(Z,fe){const Oe="$$source/blah";return this.effect(Oe,()=>Z(()=>{this._hotHandle.forceStale()}),[Z]),fe()}};function _p(Z){for(const fe of Object.values(Z.subs))_p(fe);Z.cleanupEffects()}function Zs(Z,fe){try{return{value:Z(),ok:!0}}catch(Oe){return setTimeout(function(){throw Oe}),{value:fe,ok:!1}}}var ti=new Kr;function G0(Z,fe){const Oe=ti.peek();if(!Oe)throw new Error("prism.ref() is called outside of a prism() call.");return Oe.ref(Z,fe)}function sc(Z,fe,Oe){const st=ti.peek();if(!st)throw new Error("prism.effect() is called outside of a prism() call.");return st.effect(Z,fe,Oe)}function xp(Z,fe){if(Z===void 0||fe===void 0)return!0;const Oe=Z.length;if(Oe!==fe.length)return!0;for(let st=0;st<Oe;st++)if(Z[st]!==fe[st])return!0;return!1}function wp(Z,fe,Oe){const st=ti.peek();if(!st)throw new Error("prism.memo() is called outside of a prism() call.");return st.memo(Z,fe,Oe)}function Pi(Z,fe){const Oe=ti.peek();if(!Oe)throw new Error("prism.state() is called outside of a prism() call.");return Oe.state(Z,fe)}function Sp(){if(!ti.peek())throw new Error("The parent function is called outside of a prism() call.")}function Wl(Z,fe){const Oe=ti.peek();if(!Oe)throw new Error("prism.scope() is called outside of a prism() call.");const st=Oe.sub(Z);ti.push(st);const vn=Zs(fe,void 0).value;return ti.pop(),vn}function lc(Z,fe,Oe){return wp(Z,()=>jr(fe),Oe).getValue()}function Ep(){return!!ti.peek()}function uc(Z,fe){const Oe=ti.peek();if(!Oe)throw new Error("prism.source() is called outside of a prism() call.");return Oe.source(Z,fe)}var jr=Z=>new yp(Z),ql=class{effect(Z,fe,Oe){console.warn("prism.effect() does not run in cold prisms")}memo(Z,fe,Oe){return fe()}state(Z,fe){return[fe,()=>{}]}ref(Z,fe){return{current:fe}}sub(Z){return new ql}source(Z,fe){return fe()}};function na(Z){const fe=new ql;ti.push(fe);let Oe;try{Oe=Z()}catch(st){console.error(st)}finally{ti.pop()!==fe&&console.warn("The Prism hook stack has slipped. This is a bug.")}return Oe}jr.ref=G0,jr.effect=sc,jr.memo=wp,jr.ensurePrism=Sp,jr.state=Pi,jr.scope=Wl,jr.sub=lc,jr.inPrism=Ep,jr.source=uc;var Ea=jr,kp;(function(Z){Z[Z.Dict=0]="Dict",Z[Z.Array=1]="Array",Z[Z.Other=2]="Other"})(kp||(kp={}));var or=Z=>Array.isArray(Z)?1:qd(Z)?0:2,cc=(Z,fe,Oe=or(Z))=>Oe===0&&typeof fe=="string"||Oe===1&&Tp(fe)?Z[fe]:void 0,Tp=Z=>{const fe=typeof Z=="number"?Z:parseInt(Z,10);return!isNaN(fe)&&fe>=0&&fe<1/0&&(fe|0)===fe},Mp=class{constructor(Z,fe){this._parent=Z,this._path=fe,this.children=new Map,this.identityChangeListeners=new Set}addIdentityChangeListener(Z){this.identityChangeListeners.add(Z)}removeIdentityChangeListener(Z){this.identityChangeListeners.delete(Z),this._checkForGC()}removeChild(Z){this.children.delete(Z),this._checkForGC()}getChild(Z){return this.children.get(Z)}getOrCreateChild(Z){let fe=this.children.get(Z);return fe||(fe=fe=new Mp(this,this._path.concat([Z])),this.children.set(Z,fe)),fe}_checkForGC(){this.identityChangeListeners.size>0||this.children.size>0||this._parent&&this._parent.removeChild(mp(this._path))}},Pp=class{constructor(Z){this.$$isPointerToPrismProvider=!0,this.pointer=Xd({root:this,path:[]}),this.prism=this.pointerToPrism(this.pointer),this._onPointerValueChange=(fe,Oe)=>{const{path:st}=jl(fe),vn=this._getOrCreateScopeForPath(st);return vn.identityChangeListeners.add(Oe),()=>{vn.identityChangeListeners.delete(Oe)}},this._currentState=Z,this._rootScope=new Mp(void 0,[])}set(Z){const fe=this._currentState;this._currentState=Z,this._checkUpdates(this._rootScope,fe,Z)}get(){return this._currentState}getByPointer(Z){const fe=wa(Z)?Z:Z(this.pointer),Oe=jl(fe).path;return this._getIn(Oe)}_getIn(Z){return Z.length===0?this.get():xa(this.get(),Z)}reduce(Z){this.set(Z(this.get()))}reduceByPointer(Z,fe){const Oe=wa(Z)?Z:Z(this.pointer),st=jl(Oe).path,vn=$s(this.get(),st,fe);this.set(vn)}setByPointer(Z,fe){this.reduceByPointer(Z,()=>fe)}_checkUpdates(Z,fe,Oe){if(fe===Oe)return;for(const Kn of Z.identityChangeListeners)Kn(Oe);if(Z.children.size===0)return;const st=or(fe),vn=or(Oe);if(!(st===2&&st===vn))for(const[Kn,_i]of Z.children){const Fo=cc(fe,Kn,st),ef=cc(Oe,Kn,vn);this._checkUpdates(_i,Fo,ef)}}_getOrCreateScopeForPath(Z){let fe=this._rootScope;for(const Oe of Z)fe=fe.getOrCreateChild(Oe);return fe}pointerToPrism(Z){const{path:fe}=jl(Z),Oe=vn=>this._onPointerValueChange(Z,vn),st=()=>this._getIn(fe);return Ea(()=>Ea.source(Oe,st))}},dc=new WeakMap;function Cp(Z){return typeof Z=="object"&&Z!==null&&Z.$$isPointerToPrismProvider===!0}var fc=Z=>{const fe=ta(Z);let Oe=dc.get(fe);if(!Oe){const st=fe.root;if(!Cp(st))throw new Error("Cannot run pointerToPrism() on a pointer whose root is not an PointerToPrismProvider");Oe=st.pointerToPrism(Z),dc.set(fe,Oe)}return Oe},Jd=Z=>wa(Z)?fc(Z).getValue():Vl(Z)?Z.getValue():Z;function*Qd(Z){let fe;if(wa(Z))fe=fc(Z);else if(Vl(Z))fe=Z;else throw new Error("Only pointers and prisms are supported");let Oe=0;const st=fe.onStale(()=>{Oe++});try{for(;;){const vn=Oe;Oe=0,yield{value:fe.getValue(),ticks:vn}}}finally{st()}}var Ap=60*3,Ip=class{constructor(Z){this._conf=Z,this._ticking=!1,this._dormant=!0,this._numberOfDormantTicks=0,this.__ticks=0,this._scheduledForThisOrNextTick=new Set,this._scheduledForNextTick=new Set,this._timeAtCurrentTick=0}get dormant(){return this._dormant}onThisOrNextTick(Z){this._scheduledForThisOrNextTick.add(Z),this._dormant&&this._goActive()}onNextTick(Z){this._scheduledForNextTick.add(Z),this._dormant&&this._goActive()}offThisOrNextTick(Z){this._scheduledForThisOrNextTick.delete(Z)}offNextTick(Z){this._scheduledForNextTick.delete(Z)}get time(){return this._ticking?this._timeAtCurrentTick:performance.now()}_goActive(){var Z,fe;!this._dormant||(this._dormant=!1,(fe=(Z=this._conf)==null?void 0:Z.onActive)==null||fe.call(Z))}_goDormant(){var Z,fe;this._dormant||(this._dormant=!0,this._numberOfDormantTicks=0,(fe=(Z=this._conf)==null?void 0:Z.onDormant)==null||fe.call(Z))}tick(Z=performance.now()){if(this.__ticks++,!this._dormant&&this._scheduledForNextTick.size===0&&this._scheduledForThisOrNextTick.size===0&&(this._numberOfDormantTicks++,this._numberOfDormantTicks>=Ap)){this._goDormant();return}this._ticking=!0,this._timeAtCurrentTick=Z;for(const fe of this._scheduledForNextTick)this._scheduledForThisOrNextTick.add(fe);this._scheduledForNextTick.clear(),this._tick(0),this._ticking=!1}_tick(Z){const fe=this.time;if(Z>10&&console.warn("_tick() recursing for 10 times"),Z>100)throw new Error("Maximum recursion limit for _tick()");const Oe=this._scheduledForThisOrNextTick;this._scheduledForThisOrNextTick=new Set;for(const st of Oe)st(fe);if(this._scheduledForThisOrNextTick.size>0)return this._tick(Z+1)}};function*Dp(Z){let fe;if(wa(Z))fe=fc(Z);else if(Vl(Z))fe=Z;else throw new Error("Only pointers and prisms are supported");const Oe=new Ip,st=fe.onChange(Oe,vn=>{});try{for(;;)Oe.tick(),yield fe.getValue()}finally{st()}}var hc=class{constructor(Z){this.$$isPointerToPrismProvider=!0,this._currentPointerBox=new Pp(Z),this.pointer=Xd({root:this,path:[]})}setPointer(Z){this._currentPointerBox.set(Z)}pointerToPrism(Z){const{path:fe}=ta(Z);return Ea(()=>{const Oe=this._currentPointerBox.prism.getValue(),st=fe.reduce((vn,Kn)=>vn[Kn],Oe);return Jd(st)})}}})(St);(function(w,t){var i=Object.create,l=Object.freeze,d=Object.defineProperty,g=Object.defineProperties,x=Object.getOwnPropertyDescriptor,_=Object.getOwnPropertyDescriptors,P=Object.getOwnPropertyNames,D=Object.getOwnPropertySymbols,B=Object.getPrototypeOf,F=Object.prototype.hasOwnProperty,V=Object.prototype.propertyIsEnumerable,X=(e,n)=>{if(n=Symbol[e])return n;throw Error("Symbol."+e+" is not defined")},ie=Math.pow,K=(e,n,r)=>n in e?d(e,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[n]=r,O=(e,n)=>{for(var r in n||(n={}))F.call(n,r)&&K(e,r,n[r]);if(D)for(var r of D(n))V.call(n,r)&&K(e,r,n[r]);return e},q=(e,n)=>g(e,_(n)),_e=(e,n)=>{var r={};for(var a in e)F.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&D)for(var a of D(e))n.indexOf(a)<0&&V.call(e,a)&&(r[a]=e[a]);return r},z=(e,n)=>()=>(e&&(n=e(e=0)),n),le=(e,n)=>()=>(n||e((n={exports:{}}).exports,n),n.exports),Ee=(e,n)=>{for(var r in n)d(e,r,{get:n[r],enumerable:!0})},je=(e,n,r,a)=>{if(n&&typeof n=="object"||typeof n=="function")for(let u of P(n))!F.call(e,u)&&u!==r&&d(e,u,{get:()=>n[u],enumerable:!(a=x(n,u))||a.enumerable});return e},te=(e,n,r)=>(r=e!=null?i(B(e)):{},je(n||!e||!e.__esModule?d(r,"default",{value:e,enumerable:!0}):r,e)),me=e=>je(d({},"__esModule",{value:!0}),e),Pe=(e,n,r)=>(K(e,typeof n!="symbol"?n+"":n,r),r),Q=(e,n)=>l(d(e,"raw",{value:l(n||e.slice())})),Je=(e,n,r)=>new Promise((a,u)=>{var c=v=>{try{p(r.next(v))}catch(y){u(y)}},f=v=>{try{p(r.throw(v))}catch(y){u(y)}},p=v=>v.done?a(v.value):Promise.resolve(v.value).then(c,f);p((r=r.apply(e,n)).next())}),Ut=function(e,n){this[0]=e,this[1]=n},Dt=e=>{var n=e[X("asyncIterator")],r=!1,a,u={};return n==null?(n=e[X("iterator")](),a=c=>u[c]=f=>n[c](f)):(n=n.call(e),a=c=>u[c]=f=>{if(r){if(r=!1,c==="throw")throw f;return f}return r=!0,{done:!1,value:new Ut(new Promise(p=>{var v=n[c](f);if(!(v instanceof Object))throw TypeError("Object expected");p(v)}),1)}}),u[X("iterator")]=()=>u,a("next"),"throw"in n?a("throw"):u.throw=c=>{throw c},"return"in n&&a("return"),u};function et(e){tt=e}function be(){return tt}var tt,He=z(()=>{});function yt(e,n,r=[]){if(typeof e=="object"&&e){if(dt(e)||vt(e)){n(e,r);return}for(let[a,u]of Object.entries(e))yt(u,n,[...r,a])}else{if(e==null)return;n(e,r)}}var dt,vt,Lt=z(()=>{dt=e=>typeof e=="object"&&e!==null&&Object.hasOwnProperty.call(e,"type")&&e.type==="image"&&Object.hasOwnProperty.call(e,"id")&&typeof e.id=="string"&&e.id!=="",vt=e=>typeof e=="object"&&e!==null&&Object.hasOwnProperty.call(e,"r")&&Object.hasOwnProperty.call(e,"g")&&Object.hasOwnProperty.call(e,"b")&&Object.hasOwnProperty.call(e,"a")&&typeof e.r=="number"&&typeof e.g=="number"&&typeof e.b=="number"&&typeof e.a=="number"});function Et(e){return n=>typeof n=="object"&&!!n&&n.type===e}var Ot,Yt,Qt,mt,Jn,Dn,wn,qt,On=z(()=>{Ot=Et("Theatre_Project"),Yt=Et("Theatre_Sheet"),Qt=Et("Theatre_SheetTemplate"),mt=Et("Theatre_SheetObject"),Jn=Et("Theatre_Sequence"),Dn=Et("Theatre_SheetObjectTemplate"),wn=Et("Theatre_Sheet_PublicAPI"),qt=Et("Theatre_SheetObject_PublicAPI")}),Fn,hn,Br=z(()=>{Fn=typeof qr=="object"&&qr&&qr.Object===Object&&qr,hn=Fn}),Yr,ai,wr,$n=z(()=>{Br(),Yr=typeof self=="object"&&self&&self.Object===Object&&self,ai=hn||Yr||Function("return this")(),wr=ai}),Zn,kr,vi=z(()=>{$n(),Zn=wr.Symbol,kr=Zn});function xe(e){var n=ft.call(e,Nt),r=e[Nt];try{e[Nt]=void 0;var a=!0}catch{}var u=zt.call(e);return a&&(n?e[Nt]=r:delete e[Nt]),u}var he,ft,zt,Nt,Ht,Sn=z(()=>{vi(),he=Object.prototype,ft=he.hasOwnProperty,zt=he.toString,Nt=kr?kr.toStringTag:void 0,Ht=xe});function ht(e){return Jt.call(e)}var ln,Jt,Kt,De=z(()=>{ln=Object.prototype,Jt=ln.toString,Kt=ht});function Vt(e){return e==null?e===void 0?pn:Bt:$t&&$t in Object(e)?Ht(e):Kt(e)}var Bt,pn,$t,cn,Rt=z(()=>{vi(),Sn(),De(),Bt="[object Null]",pn="[object Undefined]",$t=kr?kr.toStringTag:void 0,cn=Vt});function fn(e){return e!=null&&typeof e=="object"}var Rn,Bn=z(()=>{Rn=fn});function Jr(e){return typeof e=="symbol"||Rn(e)&&cn(e)==zi}var zi,No,Ya=z(()=>{Rt(),Bn(),zi="[object Symbol]",No=Jr});function Gs(e,n){for(var r=-1,a=e==null?0:e.length,u=Array(a);++r<a;)u[r]=n(e[r],r,e);return u}var Ti,Ja=z(()=>{Ti=Gs}),Fl,yi,Ni=z(()=>{Fl=Array.isArray,yi=Fl});function Zu(e){if(typeof e=="string")return e;if(yi(e))return Ti(e,Zu)+"";if(No(e))return ut?ut.call(e):"";var n=e+"";return n=="0"&&1/e==-ge?"-0":n}var ge,Qe,ut,ot,bt=z(()=>{vi(),Ja(),Ni(),Ya(),ge=1/0,Qe=kr?kr.prototype:void 0,ut=Qe?Qe.toString:void 0,ot=Zu});function _n(e){for(var n=e.length;n--&&En.test(e.charAt(n)););return n}var En,xn,An=z(()=>{En=/\s/,xn=_n});function Un(e){return e&&e.slice(0,xn(e)+1).replace(Nn,"")}var Nn,Vn,yr=z(()=>{An(),Nn=/^\s+/,Vn=Un});function Yo(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var Qr,Mi=z(()=>{Qr=Yo});function Qi(e){if(typeof e=="number")return e;if(No(e))return Hn;if(Qr(e)){var n=typeof e.valueOf=="function"?e.valueOf():e;e=Qr(n)?n+"":n}if(typeof e!="string")return e===0?e:+e;e=Vn(e);var r=Sr.test(e);return r||Fi.test(e)?si(e.slice(2),r?2:8):Jo.test(e)?Hn:+e}var Hn,Jo,Sr,Fi,si,bi,Qo=z(()=>{yr(),Mi(),Ya(),Hn=0/0,Jo=/^[-+]0x[0-9a-f]+$/i,Sr=/^0b[01]+$/i,Fi=/^0o[0-7]+$/i,si=parseInt,bi=Qi});function ei(e){if(!e)return e===0?e:0;if(e=bi(e),e===ea||e===-ea){var n=e<0?-1:1;return n*po}return e===e?e:0}var ea,po,li,Yh=z(()=>{Qo(),ea=1/0,po=17976931348623157e292,li=ei});function C0(e){var n=li(e),r=n%1;return n===n?r?n-r:n:0}var ya,Ws=z(()=>{Yh(),ya=C0});function A0(e){return e}var ba,Yu=z(()=>{ba=A0});function I0(e){if(!Qr(e))return!1;var n=cn(e);return n==Qh||n==ep||n==Jh||n==Qa}var Jh,Qh,ep,Qa,Ju,tp=z(()=>{Rt(),Mi(),Jh="[object AsyncFunction]",Qh="[object Function]",ep="[object GeneratorFunction]",Qa="[object Proxy]",Ju=I0}),Qu,ec,qs=z(()=>{$n(),Qu=wr["__core-js_shared__"],ec=Qu});function tc(e){return!!Vd&&Vd in e}var Vd,Ks,D0=z(()=>{qs(),Vd=function(){var e=/[^.]+$/.exec(ec&&ec.keys&&ec.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),Ks=tc});function O0(e){if(e!=null){try{return rp.call(e)}catch{}try{return e+""}catch{}}return""}var np,rp,_a,Bl=z(()=>{np=Function.prototype,rp=np.toString,_a=O0});function ip(e){if(!Qr(e)||Ks(e))return!1;var n=Ju(e)?up:Gd;return n.test(_a(e))}var Hd,Gd,op,ap,sp,lp,up,es,nc=z(()=>{tp(),D0(),Mi(),Bl(),Hd=/[\\^$.*+?()[\]{}|]/g,Gd=/^\[object .+?Constructor\]$/,op=Function.prototype,ap=Object.prototype,sp=op.toString,lp=ap.hasOwnProperty,up=RegExp("^"+sp.call(lp).replace(Hd,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),es=ip});function R0(e,n){return e==null?void 0:e[n]}var rc,L0=z(()=>{rc=R0});function z0(e,n){var r=rc(e,n);return es(r)?r:void 0}var xa,ts=z(()=>{nc(),L0(),xa=z0}),cp,ic,N0=z(()=>{ts(),$n(),cp=xa(wr,"WeakMap"),ic=cp});function F0(e,n,r){switch(r.length){case 0:return e.call(n);case 1:return e.call(n,r[0]);case 2:return e.call(n,r[0],r[1]);case 3:return e.call(n,r[0],r[1],r[2])}return e.apply(n,r)}var dp,B0=z(()=>{dp=F0});function fp(){}var Wd,hp=z(()=>{Wd=fp});function pp(e,n){var r=-1,a=e.length;for(n||(n=Array(a));++r<a;)n[r]=e[r];return n}var qd,j0=z(()=>{qd=pp});function mp(e){var n=0,r=0;return function(){var a=Kd(),u=Xs-(a-r);if(r=a,u>0){if(++n>=oc)return arguments[0]}else n=0;return e.apply(void 0,arguments)}}var oc,Xs,Kd,gp,ta=z(()=>{oc=800,Xs=16,Kd=Date.now,gp=mp});function jl(e){return function(){return e}}var Ul,Xd=z(()=>{Ul=jl}),wa,$s,ns=z(()=>{ts(),wa=function(){try{var e=xa(Object,"defineProperty");return e({},"",{}),e}catch{}}(),$s=wa}),Kr,Vl,$d=z(()=>{Xd(),ns(),Yu(),Kr=$s?function(e,n){return $s(e,"toString",{configurable:!0,enumerable:!1,value:Ul(n),writable:!0})}:ba,Vl=Kr}),vp,Sa,Hl=z(()=>{$d(),ta(),vp=gp(Vl),Sa=vp});function U0(e,n,r,a){for(var u=e.length,c=r+(a?1:-1);a?c--:++c<u;)if(n(e[c],c,e))return c;return-1}var ac,Gl=z(()=>{ac=U0});function V0(e){return e!==e}var Zd,H0=z(()=>{Zd=V0});function Yd(e,n,r){for(var a=r-1,u=e.length;++a<u;)if(e[a]===n)return a;return-1}var yp,bp=z(()=>{yp=Yd});function _p(e,n,r){return n===n?yp(e,n,r):ac(e,Zd,r)}var Zs,ti=z(()=>{Gl(),H0(),bp(),Zs=_p});function G0(e,n){var r=e==null?0:e.length;return!!r&&Zs(e,n,0)>-1}var sc,xp=z(()=>{ti(),sc=G0});function wp(e,n){var r=typeof e;return n=n==null?Pi:n,!!n&&(r=="number"||r!="symbol"&&Sp.test(e))&&e>-1&&e%1==0&&e<n}var Pi,Sp,Wl,lc=z(()=>{Pi=9007199254740991,Sp=/^(?:0|[1-9]\d*)$/,Wl=wp});function Ep(e,n,r){n=="__proto__"&&$s?$s(e,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[n]=r}var uc,jr=z(()=>{ns(),uc=Ep});function ql(e,n){return e===n||e!==e&&n!==n}var na,Ea=z(()=>{na=ql});function kp(e,n,r){var a=e[n];(!(cc.call(e,n)&&na(a,r))||r===void 0&&!(n in e))&&uc(e,n,r)}var or,cc,Tp,Mp=z(()=>{jr(),Ea(),or=Object.prototype,cc=or.hasOwnProperty,Tp=kp});function Pp(e,n,r){return n=dc(n===void 0?e.length-1:n,0),function(){for(var a=arguments,u=-1,c=dc(a.length-n,0),f=Array(c);++u<c;)f[u]=a[n+u];u=-1;for(var p=Array(n+1);++u<n;)p[u]=a[u];return p[n]=r(f),dp(e,this,p)}}var dc,Cp,fc=z(()=>{B0(),dc=Math.max,Cp=Pp});function Jd(e,n){return Sa(Cp(e,n,ba),e+"")}var Qd,Ap=z(()=>{Yu(),fc(),Hl(),Qd=Jd});function Ip(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=Dp}var Dp,hc,Z=z(()=>{Dp=9007199254740991,hc=Ip});function fe(e){return e!=null&&hc(e.length)&&!Ju(e)}var Oe,st=z(()=>{tp(),Z(),Oe=fe});function vn(e,n,r){if(!Qr(r))return!1;var a=typeof n;return(a=="number"?Oe(r)&&Wl(n,r.length):a=="string"&&n in r)?na(r[n],e):!1}var Kn,_i=z(()=>{Ea(),st(),lc(),Mi(),Kn=vn});function Fo(e){var n=e&&e.constructor,r=typeof n=="function"&&n.prototype||ef;return e===r}var ef,rs,Kl=z(()=>{ef=Object.prototype,rs=Fo});function _1(e,n){for(var r=-1,a=Array(e);++r<e;)a[r]=n(r);return a}var x1,JM=z(()=>{x1=_1});function QM(e){return Rn(e)&&cn(e)==w1}var w1,W0,eP=z(()=>{Rt(),Bn(),w1="[object Arguments]",W0=QM}),q0,tf,S1,E1,pc,K0=z(()=>{eP(),Bn(),q0=Object.prototype,tf=q0.hasOwnProperty,S1=q0.propertyIsEnumerable,E1=W0(function(){return arguments}())?W0:function(e){return Rn(e)&&tf.call(e,"callee")&&!S1.call(e,"callee")},pc=E1});function k1(){return!1}var T1,tP=z(()=>{T1=k1}),nf,X0,M1,$0,P1,Z0,rf,C1=z(()=>{$n(),tP(),nf=t&&!t.nodeType&&t,X0=nf&&!0&&w&&!w.nodeType&&w,M1=X0&&X0.exports===nf,$0=M1?wr.Buffer:void 0,P1=$0?$0.isBuffer:void 0,Z0=P1||T1,rf=Z0});function nP(e){return Rn(e)&&hc(e.length)&&!!br[cn(e)]}var A1,Y0,I1,D1,J0,Q0,O1,ev,R1,L1,of,z1,N1,F1,B1,j1,U1,V1,H1,G1,W1,q1,K1,X1,br,$1,rP=z(()=>{Rt(),Z(),Bn(),A1="[object Arguments]",Y0="[object Array]",I1="[object Boolean]",D1="[object Date]",J0="[object Error]",Q0="[object Function]",O1="[object Map]",ev="[object Number]",R1="[object Object]",L1="[object RegExp]",of="[object Set]",z1="[object String]",N1="[object WeakMap]",F1="[object ArrayBuffer]",B1="[object DataView]",j1="[object Float32Array]",U1="[object Float64Array]",V1="[object Int8Array]",H1="[object Int16Array]",G1="[object Int32Array]",W1="[object Uint8Array]",q1="[object Uint8ClampedArray]",K1="[object Uint16Array]",X1="[object Uint32Array]",br={},br[j1]=br[U1]=br[V1]=br[H1]=br[G1]=br[W1]=br[q1]=br[K1]=br[X1]=!0,br[A1]=br[Y0]=br[F1]=br[I1]=br[B1]=br[D1]=br[J0]=br[Q0]=br[O1]=br[ev]=br[R1]=br[L1]=br[of]=br[z1]=br[N1]=!1,$1=nP});function iP(e){return function(n){return e(n)}}var Op,tv=z(()=>{Op=iP}),nv,mc,Z1,Rp,Y1,fr,oP=z(()=>{Br(),nv=t&&!t.nodeType&&t,mc=nv&&!0&&w&&!w.nodeType&&w,Z1=mc&&mc.exports===nv,Rp=Z1&&hn.process,Y1=function(){try{var e=mc&&mc.require&&mc.require("util").types;return e||Rp&&Rp.binding&&Rp.binding("util")}catch{}}(),fr=Y1}),rv,J1,af,iv=z(()=>{rP(),tv(),oP(),rv=fr&&fr.isTypedArray,J1=rv?Op(rv):$1,af=J1});function sf(e,n){var r=yi(e),a=!r&&pc(e),u=!r&&!a&&rf(e),c=!r&&!a&&!u&&af(e),f=r||a||u||c,p=f?x1(e.length,String):[],v=p.length;for(var y in e)(n||Lp.call(e,y))&&!(f&&(y=="length"||u&&(y=="offset"||y=="parent")||c&&(y=="buffer"||y=="byteLength"||y=="byteOffset")||Wl(y,v)))&&p.push(y);return p}var Q1,Lp,ex,gc=z(()=>{JM(),K0(),Ni(),C1(),lc(),iv(),Q1=Object.prototype,Lp=Q1.hasOwnProperty,ex=sf});function tx(e,n){return function(r){return e(n(r))}}var ov,av=z(()=>{ov=tx}),nx,rx,aP=z(()=>{av(),nx=ov(Object.keys,Object),rx=nx});function ix(e){if(!rs(e))return rx(e);var n=[];for(var r in Object(e))sv.call(e,r)&&r!="constructor"&&n.push(r);return n}var ox,sv,ax,sP=z(()=>{Kl(),aP(),ox=Object.prototype,sv=ox.hasOwnProperty,ax=ix});function lP(e){return Oe(e)?ex(e):ax(e)}var zp,lv=z(()=>{gc(),sP(),st(),zp=lP});function uP(e,n){if(yi(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||No(e)?!0:vc.test(e)||!sx.test(e)||n!=null&&e in Object(n)}var sx,vc,Np,uv=z(()=>{Ni(),Ya(),sx=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vc=/^\w*$/,Np=uP}),lx,yc,Fp=z(()=>{ts(),lx=xa(Object,"create"),yc=lx});function cP(){this.__data__=yc?yc(null):{},this.size=0}var ux,cv=z(()=>{Fp(),ux=cP});function dP(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var dv,fP=z(()=>{dv=dP});function fv(e){var n=this.__data__;if(yc){var r=n[e];return r===cx?void 0:r}return fx.call(n,e)?n[e]:void 0}var cx,dx,fx,hv,hP=z(()=>{Fp(),cx="__lodash_hash_undefined__",dx=Object.prototype,fx=dx.hasOwnProperty,hv=fv});function pP(e){var n=this.__data__;return yc?n[e]!==void 0:px.call(n,e)}var hx,px,mx,gx=z(()=>{Fp(),hx=Object.prototype,px=hx.hasOwnProperty,mx=pP});function mP(e,n){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=yc&&n===void 0?vx:n,this}var vx,yx,gP=z(()=>{Fp(),vx="__lodash_hash_undefined__",yx=mP});function bc(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var pv,vP=z(()=>{cv(),fP(),hP(),gx(),gP(),bc.prototype.clear=ux,bc.prototype.delete=dv,bc.prototype.get=hv,bc.prototype.has=mx,bc.prototype.set=yx,pv=bc});function yP(){this.__data__=[],this.size=0}var bx,bP=z(()=>{bx=yP});function _P(e,n){for(var r=e.length;r--;)if(na(e[r][0],n))return r;return-1}var Xl,Bp=z(()=>{Ea(),Xl=_P});function xP(e){var n=this.__data__,r=Xl(n,e);if(r<0)return!1;var a=n.length-1;return r==a?n.pop():_x.call(n,r,1),--this.size,!0}var mv,_x,xx,wP=z(()=>{Bp(),mv=Array.prototype,_x=mv.splice,xx=xP});function SP(e){var n=this.__data__,r=Xl(n,e);return r<0?void 0:n[r][1]}var wx,EP=z(()=>{Bp(),wx=SP});function gv(e){return Xl(this.__data__,e)>-1}var jp,kP=z(()=>{Bp(),jp=gv});function Sx(e,n){var r=this.__data__,a=Xl(r,e);return a<0?(++this.size,r.push([e,n])):r[a][1]=n,this}var vv,Ex=z(()=>{Bp(),vv=Sx});function _c(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var xc,lf=z(()=>{bP(),wP(),EP(),kP(),Ex(),_c.prototype.clear=bx,_c.prototype.delete=xx,_c.prototype.get=wx,_c.prototype.has=jp,_c.prototype.set=vv,xc=_c}),kx,wc,yv=z(()=>{ts(),$n(),kx=xa(wr,"Map"),wc=kx});function TP(){this.size=0,this.__data__={hash:new pv,map:new(wc||xc),string:new pv}}var Tx,MP=z(()=>{vP(),lf(),yv(),Tx=TP});function PP(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var Mx,CP=z(()=>{Mx=PP});function AP(e,n){var r=e.__data__;return Mx(n)?r[typeof n=="string"?"string":"hash"]:r.map}var uf,cf=z(()=>{CP(),uf=AP});function IP(e){var n=uf(this,e).delete(e);return this.size-=n?1:0,n}var Px,DP=z(()=>{cf(),Px=IP});function OP(e){return uf(this,e).get(e)}var Cx,RP=z(()=>{cf(),Cx=OP});function LP(e){return uf(this,e).has(e)}var Ax,zP=z(()=>{cf(),Ax=LP});function NP(e,n){var r=uf(this,e),a=r.size;return r.set(e,n),this.size+=r.size==a?0:1,this}var Ix,Sc=z(()=>{cf(),Ix=NP});function ka(e){var n=-1,r=e==null?0:e.length;for(this.clear();++n<r;){var a=e[n];this.set(a[0],a[1])}}var df,bv=z(()=>{MP(),DP(),RP(),zP(),Sc(),ka.prototype.clear=Tx,ka.prototype.delete=Px,ka.prototype.get=Cx,ka.prototype.has=Ax,ka.prototype.set=Ix,df=ka});function _v(e,n){if(typeof e!="function"||n!=null&&typeof n!="function")throw new TypeError(Dx);var r=function(){var a=arguments,u=n?n.apply(this,a):a[0],c=r.cache;if(c.has(u))return c.get(u);var f=e.apply(this,a);return r.cache=c.set(u,f)||c,f};return r.cache=new(_v.Cache||df),r}var Dx,Up,xv=z(()=>{bv(),Dx="Expected a function",_v.Cache=df,Up=_v});function FP(e){var n=Up(e,function(a){return r.size===wv&&r.clear(),a}),r=n.cache;return n}var wv,Sv,BP=z(()=>{xv(),wv=500,Sv=FP}),Ox,Rx,Lx,zx,Nx=z(()=>{BP(),Ox=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Rx=/\\(\\)?/g,Lx=Sv(function(e){var n=[];return e.charCodeAt(0)===46&&n.push(""),e.replace(Ox,function(r,a,u,c){n.push(u?c.replace(Rx,"$1"):a||r)}),n}),zx=Lx});function jP(e){return e==null?"":ot(e)}var Vp,Ev=z(()=>{bt(),Vp=jP});function UP(e,n){return yi(e)?e:Np(e,n)?[e]:zx(Vp(e))}var Ec,kv=z(()=>{Ni(),uv(),Nx(),Ev(),Ec=UP});function VP(e){if(typeof e=="string"||No(e))return e;var n=e+"";return n=="0"&&1/e==-Fx?"-0":n}var Fx,kc,Tc=z(()=>{Ya(),Fx=1/0,kc=VP});function HP(e,n){n=Ec(n,e);for(var r=0,a=n.length;e!=null&&r<a;)e=e[kc(n[r++])];return r&&r==a?e:void 0}var Hp,Tv=z(()=>{kv(),Tc(),Hp=HP});function Bx(e,n,r){var a=e==null?void 0:Hp(e,n);return a===void 0?r:a}var $l,Zl=z(()=>{Tv(),$l=Bx});function GP(e,n){for(var r=-1,a=n.length,u=e.length;++r<a;)e[u+r]=n[r];return e}var Mv,jx=z(()=>{Mv=GP});function Pv(e){return yi(e)||pc(e)||!!(Cv&&e&&e[Cv])}var Cv,Gp,WP=z(()=>{vi(),K0(),Ni(),Cv=kr?kr.isConcatSpreadable:void 0,Gp=Pv});function Wp(e,n,r,a,u){var c=-1,f=e.length;for(r||(r=Gp),u||(u=[]);++c<f;){var p=e[c];n>0&&r(p)?n>1?Wp(p,n-1,r,a,u):Mv(u,p):a||(u[u.length]=p)}return u}var Av,qP=z(()=>{jx(),WP(),Av=Wp}),Iv,Dv,Ux=z(()=>{av(),Iv=ov(Object.getPrototypeOf,Object),Dv=Iv});function Vx(e){if(!Rn(e)||cn(e)!=Hx)return!1;var n=Dv(e);if(n===null)return!0;var r=qx.call(n,"constructor")&&n.constructor;return typeof r=="function"&&r instanceof r&&Ov.call(r)==Ys}var Hx,Gx,Wx,Ov,qx,Ys,Js,Kx=z(()=>{Rt(),Ux(),Bn(),Hx="[object Object]",Gx=Function.prototype,Wx=Object.prototype,Ov=Gx.toString,qx=Wx.hasOwnProperty,Ys=Ov.call(Object),Js=Vx});function KP(e){var n=Math[e];return function(r,a){if(r=bi(r),a=a==null?0:$x(ya(a),292),a&&Xx(r)){var u=(Vp(r)+"e").split("e"),c=n(u[0]+"e"+(+u[1]+a));return u=(Vp(c)+"e").split("e"),+(u[0]+"e"+(+u[1]-a))}return n(r)}}var Xx,$x,Zx,qp=z(()=>{$n(),Ws(),Qo(),Ev(),Xx=wr.isFinite,$x=Math.min,Zx=KP});function XP(e,n,r){return e===e&&(r!==void 0&&(e=e<=r?e:r),n!==void 0&&(e=e>=n?e:n)),e}var Kp,$P=z(()=>{Kp=XP});function ZP(e,n,r){return r===void 0&&(r=n,n=void 0),r!==void 0&&(r=bi(r),r=r===r?r:0),n!==void 0&&(n=bi(n),n=n===n?n:0),Kp(bi(e),n,r)}var Tr,Xp=z(()=>{$P(),Qo(),Tr=ZP});function YP(){this.__data__=new xc,this.size=0}var Rv,Yx=z(()=>{lf(),Rv=YP});function JP(e){var n=this.__data__,r=n.delete(e);return this.size=n.size,r}var Jx,QP=z(()=>{Jx=JP});function eC(e){return this.__data__.get(e)}var Qx,tC=z(()=>{Qx=eC});function nC(e){return this.__data__.has(e)}var ew,rC=z(()=>{ew=nC});function iC(e,n){var r=this.__data__;if(r instanceof xc){var a=r.__data__;if(!wc||a.length<tw-1)return a.push([e,n]),this.size=++r.size,this;r=this.__data__=new df(a)}return r.set(e,n),this.size=r.size,this}var tw,nw,oC=z(()=>{lf(),yv(),bv(),tw=200,nw=iC});function Mc(e){var n=this.__data__=new xc(e);this.size=n.size}var ff,rw=z(()=>{lf(),Yx(),QP(),tC(),rC(),oC(),Mc.prototype.clear=Rv,Mc.prototype.delete=Jx,Mc.prototype.get=Qx,Mc.prototype.has=ew,Mc.prototype.set=nw,ff=Mc});function aC(e,n){for(var r=-1,a=e==null?0:e.length,u=0,c=[];++r<a;){var f=e[r];n(f,r,e)&&(c[u++]=f)}return c}var iw,sC=z(()=>{iw=aC});function lC(){return[]}var ow,uC=z(()=>{ow=lC}),aw,sw,Lv,lw,uw,cC=z(()=>{sC(),uC(),aw=Object.prototype,sw=aw.propertyIsEnumerable,Lv=Object.getOwnPropertySymbols,lw=Lv?function(e){return e==null?[]:(e=Object(e),iw(Lv(e),function(n){return sw.call(e,n)}))}:ow,uw=lw});function dC(e,n,r){var a=n(e);return yi(e)?a:Mv(a,r(e))}var cw,dw=z(()=>{jx(),Ni(),cw=dC});function fC(e){return cw(e,zp,uw)}var zv,hC=z(()=>{dw(),cC(),lv(),zv=fC}),fw,$p,hw=z(()=>{ts(),$n(),fw=xa(wr,"DataView"),$p=fw}),pw,Zp,pC=z(()=>{ts(),$n(),pw=xa(wr,"Promise"),Zp=pw}),mw,Yl,Nv=z(()=>{ts(),$n(),mw=xa(wr,"Set"),Yl=mw}),Fv,gw,Bv,jv,Yp,Uv,vw,yw,Vv,bw,_w,Qs,Hv,mC=z(()=>{hw(),yv(),pC(),Nv(),N0(),Rt(),Bl(),Fv="[object Map]",gw="[object Object]",Bv="[object Promise]",jv="[object Set]",Yp="[object WeakMap]",Uv="[object DataView]",vw=_a($p),yw=_a(wc),Vv=_a(Zp),bw=_a(Yl),_w=_a(ic),Qs=cn,($p&&Qs(new $p(new ArrayBuffer(1)))!=Uv||wc&&Qs(new wc)!=Fv||Zp&&Qs(Zp.resolve())!=Bv||Yl&&Qs(new Yl)!=jv||ic&&Qs(new ic)!=Yp)&&(Qs=function(e){var n=cn(e),r=n==gw?e.constructor:void 0,a=r?_a(r):"";if(a)switch(a){case vw:return Uv;case yw:return Fv;case Vv:return Bv;case bw:return jv;case _w:return Yp}return n}),Hv=Qs}),xw,Gv,gC=z(()=>{$n(),xw=wr.Uint8Array,Gv=xw});function vC(e){return this.__data__.set(e,ww),this}var ww,Sw,yC=z(()=>{ww="__lodash_hash_undefined__",Sw=vC});function bC(e){return this.__data__.has(e)}var Ew,_C=z(()=>{Ew=bC});function Jp(e){var n=-1,r=e==null?0:e.length;for(this.__data__=new df;++n<r;)this.add(e[n])}var cr,hf=z(()=>{bv(),yC(),_C(),Jp.prototype.add=Jp.prototype.push=Sw,Jp.prototype.has=Ew,cr=Jp});function xC(e,n){for(var r=-1,a=e==null?0:e.length;++r<a;)if(n(e[r],r,e))return!0;return!1}var kw,wC=z(()=>{kw=xC});function SC(e,n){return e.has(n)}var Wv,Tw=z(()=>{Wv=SC});function EC(e,n,r,a,u,c){var f=r&Mw,p=e.length,v=n.length;if(p!=v&&!(f&&v>p))return!1;var y=c.get(e),k=c.get(n);if(y&&k)return y==n&&k==e;var M=-1,T=!0,E=r&Pw?new cr:void 0;for(c.set(e,n),c.set(n,e);++M<p;){var A=e[M],C=n[M];if(a)var R=f?a(C,A,M,n,e,c):a(A,C,M,e,n,c);if(R!==void 0){if(R)continue;T=!1;break}if(E){if(!kw(n,function(N,j){if(!Wv(E,j)&&(A===N||u(A,N,r,a,c)))return E.push(j)})){T=!1;break}}else if(!(A===C||u(A,C,r,a,c))){T=!1;break}}return c.delete(e),c.delete(n),T}var Mw,Pw,qv,pf=z(()=>{hf(),wC(),Tw(),Mw=1,Pw=2,qv=EC});function kC(e){var n=-1,r=Array(e.size);return e.forEach(function(a,u){r[++n]=[u,a]}),r}var Cw,TC=z(()=>{Cw=kC});function MC(e){var n=-1,r=Array(e.size);return e.forEach(function(a){r[++n]=a}),r}var Qp,Kv=z(()=>{Qp=MC});function PC(e,n,r,a,u,c,f){switch(r){case Uw:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case jw:return!(e.byteLength!=n.byteLength||!c(new Gv(e),new Gv(n)));case Iw:case Dw:case Lw:return na(+e,+n);case Ow:return e.name==n.name&&e.message==n.message;case zw:case Fw:return e==n+"";case Rw:var p=Cw;case Nw:var v=a&Aw;if(p||(p=Qp),e.size!=n.size&&!v)return!1;var y=f.get(e);if(y)return y==n;a|=Xv,f.set(e,n);var k=qv(p(e),p(n),a,u,c,f);return f.delete(e),k;case Bw:if(em)return em.call(e)==em.call(n)}return!1}var Aw,Xv,Iw,Dw,Ow,Rw,Lw,zw,Nw,Fw,Bw,jw,Uw,$v,em,Vw,CC=z(()=>{vi(),gC(),Ea(),pf(),TC(),Kv(),Aw=1,Xv=2,Iw="[object Boolean]",Dw="[object Date]",Ow="[object Error]",Rw="[object Map]",Lw="[object Number]",zw="[object RegExp]",Nw="[object Set]",Fw="[object String]",Bw="[object Symbol]",jw="[object ArrayBuffer]",Uw="[object DataView]",$v=kr?kr.prototype:void 0,em=$v?$v.valueOf:void 0,Vw=PC});function AC(e,n,r,a,u,c){var f=r&Hw,p=zv(e),v=p.length,y=zv(n),k=y.length;if(v!=k&&!f)return!1;for(var M=v;M--;){var T=p[M];if(!(f?T in n:tm.call(n,T)))return!1}var E=c.get(e),A=c.get(n);if(E&&A)return E==n&&A==e;var C=!0;c.set(e,n),c.set(n,e);for(var R=f;++M<v;){T=p[M];var N=e[T],j=n[T];if(a)var G=f?a(j,N,T,n,e,c):a(N,j,T,e,n,c);if(!(G===void 0?N===j||u(N,j,r,a,c):G)){C=!1;break}R||(R=T=="constructor")}if(C&&!R){var J=e.constructor,Y=n.constructor;J!=Y&&"constructor"in e&&"constructor"in n&&!(typeof J=="function"&&J instanceof J&&typeof Y=="function"&&Y instanceof Y)&&(C=!1)}return c.delete(e),c.delete(n),C}var Hw,Zv,tm,Gw,IC=z(()=>{hC(),Hw=1,Zv=Object.prototype,tm=Zv.hasOwnProperty,Gw=AC});function DC(e,n,r,a,u,c){var f=yi(e),p=yi(n),v=f?Jv:Hv(e),y=p?Jv:Hv(n);v=v==Yv?mf:v,y=y==Yv?mf:y;var k=v==mf,M=y==mf,T=v==y;if(T&&rf(e)){if(!rf(n))return!1;f=!0,k=!1}if(T&&!k)return c||(c=new ff),f||af(e)?qv(e,n,r,a,u,c):Vw(e,n,v,r,a,u,c);if(!(r&Ww)){var E=k&&nm.call(e,"__wrapped__"),A=M&&nm.call(n,"__wrapped__");if(E||A){var C=E?e.value():e,R=A?n.value():n;return c||(c=new ff),u(C,R,r,a,c)}}return T?(c||(c=new ff),Gw(e,n,r,a,u,c)):!1}var Ww,Yv,Jv,mf,qw,nm,Qv,rm=z(()=>{rw(),pf(),CC(),IC(),mC(),Ni(),C1(),iv(),Ww=1,Yv="[object Arguments]",Jv="[object Array]",mf="[object Object]",qw=Object.prototype,nm=qw.hasOwnProperty,Qv=DC});function Kw(e,n,r,a,u){return e===n?!0:e==null||n==null||!Rn(e)&&!Rn(n)?e!==e&&n!==n:Qv(e,n,r,a,Kw,u)}var im,Xw=z(()=>{rm(),Bn(),im=Kw});function OC(e,n,r,a){var u=r.length,c=u,f=!a;if(e==null)return!c;for(e=Object(e);u--;){var p=r[u];if(f&&p[2]?p[1]!==e[p[0]]:!(p[0]in e))return!1}for(;++u<c;){p=r[u];var v=p[0],y=e[v],k=p[1];if(f&&p[2]){if(y===void 0&&!(v in e))return!1}else{var M=new ff;if(a)var T=a(y,k,v,e,n,M);if(!(T===void 0?im(k,y,ey|ty,a,M):T))return!1}}return!0}var ey,ty,$w,RC=z(()=>{rw(),Xw(),ey=1,ty=2,$w=OC});function LC(e){return e===e&&!Qr(e)}var ny,Zw=z(()=>{Mi(),ny=LC});function Yw(e){for(var n=zp(e),r=n.length;r--;){var a=n[r],u=e[a];n[r]=[a,u,ny(u)]}return n}var Jw,zC=z(()=>{Zw(),lv(),Jw=Yw});function NC(e,n){return function(r){return r==null?!1:r[e]===n&&(n!==void 0||e in Object(r))}}var om,Qw=z(()=>{om=NC});function FC(e){var n=Jw(e);return n.length==1&&n[0][2]?om(n[0][0],n[0][1]):function(r){return r===e||$w(r,e,n)}}var eS,BC=z(()=>{RC(),zC(),Qw(),eS=FC});function jC(e,n){return e!=null&&n in Object(e)}var tS,UC=z(()=>{tS=jC});function VC(e,n,r){n=Ec(n,e);for(var a=-1,u=n.length,c=!1;++a<u;){var f=kc(n[a]);if(!(c=e!=null&&r(e,f)))break;e=e[f]}return c||++a!=u?c:(u=e==null?0:e.length,!!u&&hc(u)&&Wl(f,u)&&(yi(e)||pc(e)))}var nS,HC=z(()=>{kv(),K0(),Ni(),lc(),Z(),Tc(),nS=VC});function GC(e,n){return e!=null&&nS(e,n,tS)}var rS,WC=z(()=>{UC(),HC(),rS=GC});function iS(e,n){return Np(e)&&ny(n)?om(kc(e),n):function(r){var a=$l(r,e);return a===void 0&&a===n?rS(r,e):im(n,a,oS|aS)}}var oS,aS,sS,qC=z(()=>{Xw(),Zl(),WC(),uv(),Zw(),Qw(),Tc(),oS=1,aS=2,sS=iS});function KC(e){return function(n){return n==null?void 0:n[e]}}var lS,XC=z(()=>{lS=KC});function $C(e){return function(n){return Hp(n,e)}}var uS,ZC=z(()=>{Tv(),uS=$C});function YC(e){return Np(e)?lS(kc(e)):uS(e)}var cS,JC=z(()=>{XC(),ZC(),uv(),Tc(),cS=YC});function ry(e){return typeof e=="function"?e:e==null?ba:typeof e=="object"?yi(e)?sS(e[0],e[1]):eS(e):cS(e)}var Pc,gf=z(()=>{BC(),qC(),Yu(),Ni(),JC(),Pc=ry});function QC(e,n,r,a){for(var u=-1,c=e==null?0:e.length;++u<c;){var f=e[u];n(a,f,r(f),e)}return a}var dS,e3=z(()=>{dS=QC});function t3(e){return function(n,r,a){for(var u=-1,c=Object(n),f=a(n),p=f.length;p--;){var v=f[e?p:++u];if(r(c[v],v,c)===!1)break}return n}}var fS,n3=z(()=>{fS=t3}),hS,pS,r3=z(()=>{n3(),hS=fS(),pS=hS});function i3(e,n){return e&&pS(e,n,zp)}var iy,mS=z(()=>{r3(),lv(),iy=i3});function o3(e,n){return function(r,a){if(r==null)return r;if(!Oe(r))return e(r,a);for(var u=r.length,c=n?u:-1,f=Object(r);(n?c--:++c<u)&&a(f[c],c,f)!==!1;);return r}}var gS,a3=z(()=>{st(),gS=o3}),vS,am,yS=z(()=>{mS(),a3(),vS=gS(iy),am=vS});function s3(e,n,r,a){return am(e,function(u,c,f){n(a,u,r(u),f)}),a}var oy,l3=z(()=>{yS(),oy=s3});function u3(e,n){return function(r,a){var u=yi(r)?dS:oy,c=n?n():{};return u(r,e,Pc(a,2),c)}}var bS,c3=z(()=>{e3(),l3(),gf(),Ni(),bS=u3}),_S,sm,ay=z(()=>{$n(),_S=function(){return wr.Date.now()},sm=_S});function sy(e,n,r){var a,u,c,f,p,v,y=0,k=!1,M=!1,T=!0;if(typeof e!="function")throw new TypeError(xS);n=bi(n)||0,Qr(r)&&(k=!!r.leading,M="maxWait"in r,c=M?ly(bi(r.maxWait)||0,n):c,T="trailing"in r?!!r.trailing:T);function E(re){var ye=a,ke=u;return a=u=void 0,y=re,f=e.apply(ke,ye),f}function A(re){return y=re,p=setTimeout(N,n),k?E(re):f}function C(re){var ye=re-v,ke=re-y,ce=n-ye;return M?uy(ce,c-ke):ce}function R(re){var ye=re-v,ke=re-y;return v===void 0||ye>=n||ye<0||M&&ke>=c}function N(){var re=sm();if(R(re))return j(re);p=setTimeout(N,C(re))}function j(re){return p=void 0,T&&a?E(re):(a=u=void 0,f)}function G(){p!==void 0&&clearTimeout(p),y=0,a=v=u=p=void 0}function J(){return p===void 0?f:j(sm())}function Y(){var re=sm(),ye=R(re);if(a=arguments,u=this,v=re,ye){if(p===void 0)return A(v);if(M)return clearTimeout(p),p=setTimeout(N,n),E(v)}return p===void 0&&(p=setTimeout(N,n)),f}return Y.cancel=G,Y.flush=J,Y}var xS,ly,uy,lm,wS=z(()=>{Mi(),ay(),Qo(),xS="Expected a function",ly=Math.max,uy=Math.min,lm=sy});function SS(e,n,r){for(var a=-1,u=e==null?0:e.length;++a<u;)if(r(n,e[a]))return!0;return!1}var cy,d3=z(()=>{cy=SS});function f3(e){var n=e==null?0:e.length;return n?e[n-1]:void 0}var Jl,vf=z(()=>{Jl=f3});function h3(e,n,r){var a=e==null?0:e.length;if(!a)return-1;var u=r==null?0:ya(r);return u<0&&(u=ES(a+u,0)),ac(e,Pc(n,3),u)}var ES,dy,kS=z(()=>{Gl(),gf(),Ws(),ES=Math.max,dy=h3});function p3(e,n,r){var a=e==null?0:e.length;if(!a)return-1;var u=a-1;return r!==void 0&&(u=ya(r),u=r<0?TS(a+u,0):MS(u,a-1)),ac(e,Pc(n,3),u,!0)}var TS,MS,PS,yf=z(()=>{Gl(),gf(),Ws(),TS=Math.max,MS=Math.min,PS=p3});function m3(e,n){var r=-1,a=Oe(e)?Array(e.length):[];return am(e,function(u,c,f){a[++r]=n(u,c,f)}),a}var fy,g3=z(()=>{yS(),st(),fy=m3});function v3(e,n,r){return e>=bf(n,r)&&e<CS(n,r)}var CS,bf,um,y3=z(()=>{CS=Math.max,bf=Math.min,um=v3});function b3(e,n,r){return n=li(n),r===void 0?(r=n,n=0):r=li(r),e=bi(e),um(e,n,r)}var dr,mo=z(()=>{y3(),Yh(),Qo(),dr=b3});function go(e){return typeof e=="number"&&e==ya(e)}var is,hr=z(()=>{Ws(),is=go}),Ta,Cc,_3=z(()=>{jr(),c3(),Ta=bS(function(e,n,r){uc(e,r,n)}),Cc=Ta});function x3(e,n){var r={};return n=Pc(n,3),iy(e,function(a,u,c){uc(r,u,n(a,u,c))}),r}var Ql,AS=z(()=>{jr(),mS(),gf(),Ql=x3});function w3(e,n,r,a){if(!Qr(e))return e;n=Ec(n,e);for(var u=-1,c=n.length,f=c-1,p=e;p!=null&&++u<c;){var v=kc(n[u]),y=r;if(v==="__proto__"||v==="constructor"||v==="prototype")return e;if(u!=f){var k=p[v];y=a?a(k,v,p):void 0,y===void 0&&(y=Qr(k)?k:Wl(n[u+1])?[]:{})}Tp(p,v,y),p=p[v]}return e}var hy,IS=z(()=>{Mp(),kv(),lc(),Mi(),Tc(),hy=w3});function cm(e,n){var r=e.length;for(e.sort(n);r--;)e[r]=e[r].value;return e}var py,S3=z(()=>{py=cm});function DS(e,n){if(e!==n){var r=e!==void 0,a=e===null,u=e===e,c=No(e),f=n!==void 0,p=n===null,v=n===n,y=No(n);if(!p&&!y&&!c&&e>n||c&&f&&v&&!p&&!y||a&&f&&v||!r&&v||!u)return 1;if(!a&&!c&&!y&&e<n||y&&r&&u&&!a&&!c||p&&r&&u||!f&&u||!v)return-1}return 0}var my,OS=z(()=>{Ya(),my=DS});function E3(e,n,r){for(var a=-1,u=e.criteria,c=n.criteria,f=u.length,p=r.length;++a<f;){var v=my(u[a],c[a]);if(v){if(a>=p)return v;var y=r[a];return v*(y=="desc"?-1:1)}}return e.index-n.index}var RS,LS=z(()=>{OS(),RS=E3});function k3(e,n,r){n.length?n=Ti(n,function(c){return yi(c)?function(f){return Hp(f,c.length===1?c[0]:c)}:c}):n=[ba];var a=-1;n=Ti(n,Op(Pc));var u=fy(e,function(c,f,p){var v=Ti(n,function(y){return y(c)});return{criteria:v,index:++a,value:c}});return py(u,function(c,f){return RS(c,f,r)})}var zS,_f=z(()=>{Ja(),Tv(),gf(),g3(),S3(),tv(),LS(),Yu(),Ni(),zS=k3});function NS(e,n,r,a){for(var u=r-1,c=e.length;++u<c;)if(a(e[u],n))return u;return-1}var FS,T3=z(()=>{FS=NS});function ui(e,n,r,a){var u=a?FS:Zs,c=-1,f=n.length,p=e;for(e===n&&(n=qd(n)),r&&(p=Ti(e,Op(r)));++c<f;)for(var v=0,y=n[c],k=r?r(y):y;(v=u(p,k,v,a))>-1;)p!==e&&gy.call(p,v,1),gy.call(e,v,1);return e}var os,gy,xf,M3=z(()=>{Ja(),ti(),T3(),tv(),j0(),os=Array.prototype,gy=os.splice,xf=ui});function P3(e,n){return e&&e.length&&n&&n.length?xf(e,n):e}var BS,C3=z(()=>{M3(),BS=P3}),dm,jS,fm=z(()=>{Ap(),C3(),dm=Qd(BS),jS=dm}),eu,US,A3=z(()=>{qp(),eu=Zx("round"),US=eu});function VS(e,n,r){return e==null?e:hy(e,n,r)}var el,vy=z(()=>{IS(),el=VS}),wf,yy,HS=z(()=>{qP(),_f(),Ap(),_i(),wf=Qd(function(e,n){if(e==null)return[];var r=n.length;return r>1&&Kn(e,n[0],n[1])?n=[]:r>2&&Kn(n[0],n[1],n[2])&&(n=[n[0]]),zS(e,Av(n,1),[])}),yy=wf}),GS,WS,qS,I3=z(()=>{Nv(),hp(),Kv(),GS=1/0,WS=Yl&&1/Qp(new Yl([,-0]))[1]==GS?function(e){return new Yl(e)}:Wd,qS=WS});function D3(e,n,r){var a=-1,u=sc,c=e.length,f=!0,p=[],v=p;if(r)f=!1,u=cy;else if(c>=KS){var y=n?null:qS(e);if(y)return Qp(y);f=!1,u=Wv,v=new cr}else v=n?[]:p;e:for(;++a<c;){var k=e[a],M=n?n(k):k;if(k=r||k!==0?k:0,f&&M===M){for(var T=v.length;T--;)if(v[T]===M)continue e;n&&v.push(M),p.push(k)}else u(v,M,r)||(v!==p&&v.push(M),p.push(k))}return p}var KS,XS,tu=z(()=>{hf(),xp(),d3(),Tw(),I3(),Kv(),KS=200,XS=D3});function nu(e){return e&&e.length?XS(e):[]}var vo,by=z(()=>{tu(),vo=nu}),Xr=z(()=>{Xp(),wS(),kS(),mo(),hr(),Kx(),vf(),AS(),xv(),A3(),by()}),O3=le((e,n)=>{var r;n.exports=typeof queueMicrotask=="function"?queueMicrotask.bind(typeof window!="undefined"?window:qr):a=>(r||(r=Promise.resolve())).then(a).catch(u=>setTimeout(()=>{throw u},0))}),$S=le(e=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),c=Symbol.for("react.profiler"),f=Symbol.for("react.provider"),p=Symbol.for("react.context"),v=Symbol.for("react.forward_ref"),y=Symbol.for("react.suspense"),k=Symbol.for("react.memo"),M=Symbol.for("react.lazy"),T=Symbol.iterator;function E(ae){return ae===null||typeof ae!="object"?null:(ae=T&&ae[T]||ae["@@iterator"],typeof ae=="function"?ae:null)}var A={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,R={};function N(ae,de,Ke){this.props=ae,this.context=de,this.refs=R,this.updater=Ke||A}N.prototype.isReactComponent={},N.prototype.setState=function(ae,de){if(typeof ae!="object"&&typeof ae!="function"&&ae!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ae,de,"setState")},N.prototype.forceUpdate=function(ae){this.updater.enqueueForceUpdate(this,ae,"forceUpdate")};function j(){}j.prototype=N.prototype;function G(ae,de,Ke){this.props=ae,this.context=de,this.refs=R,this.updater=Ke||A}var J=G.prototype=new j;J.constructor=G,C(J,N.prototype),J.isPureReactComponent=!0;var Y=Array.isArray,re=Object.prototype.hasOwnProperty,ye={current:null},ke={key:!0,ref:!0,__self:!0,__source:!0};function ce(ae,de,Ke){var Ze,nt={},Fe=null,Gt=null;if(de!=null)for(Ze in de.ref!==void 0&&(Gt=de.ref),de.key!==void 0&&(Fe=""+de.key),de)re.call(de,Ze)&&!ke.hasOwnProperty(Ze)&&(nt[Ze]=de[Ze]);var ct=arguments.length-2;if(ct===1)nt.children=Ke;else if(1<ct){for(var jt=Array(ct),nn=0;nn<ct;nn++)jt[nn]=arguments[nn+2];nt.children=jt}if(ae&&ae.defaultProps)for(Ze in ct=ae.defaultProps,ct)nt[Ze]===void 0&&(nt[Ze]=ct[Ze]);return{$$typeof:n,type:ae,key:Fe,ref:Gt,props:nt,_owner:ye.current}}function Ce(ae,de){return{$$typeof:n,type:ae.type,key:de,ref:ae.ref,props:ae.props,_owner:ae._owner}}function Ge(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===n}function oe(ae){var de={"=":"=0",":":"=2"};return"$"+ae.replace(/[=:]/g,function(Ke){return de[Ke]})}var Ae=/\/+/g;function W(ae,de){return typeof ae=="object"&&ae!==null&&ae.key!=null?oe(""+ae.key):de.toString(36)}function Le(ae,de,Ke,Ze,nt){var Fe=typeof ae;(Fe==="undefined"||Fe==="boolean")&&(ae=null);var Gt=!1;if(ae===null)Gt=!0;else switch(Fe){case"string":case"number":Gt=!0;break;case"object":switch(ae.$$typeof){case n:case r:Gt=!0}}if(Gt)return Gt=ae,nt=nt(Gt),ae=Ze===""?"."+W(Gt,0):Ze,Y(nt)?(Ke="",ae!=null&&(Ke=ae.replace(Ae,"$&/")+"/"),Le(nt,de,Ke,"",function(nn){return nn})):nt!=null&&(Ge(nt)&&(nt=Ce(nt,Ke+(!nt.key||Gt&&Gt.key===nt.key?"":(""+nt.key).replace(Ae,"$&/")+"/")+ae)),de.push(nt)),1;if(Gt=0,Ze=Ze===""?".":Ze+":",Y(ae))for(var ct=0;ct<ae.length;ct++){Fe=ae[ct];var jt=Ze+W(Fe,ct);Gt+=Le(Fe,de,Ke,jt,nt)}else if(jt=E(ae),typeof jt=="function")for(ae=jt.call(ae),ct=0;!(Fe=ae.next()).done;)Fe=Fe.value,jt=Ze+W(Fe,ct++),Gt+=Le(Fe,de,Ke,jt,nt);else if(Fe==="object")throw de=String(ae),Error("Objects are not valid as a React child (found: "+(de==="[object Object]"?"object with keys {"+Object.keys(ae).join(", ")+"}":de)+"). If you meant to render a collection of children, use an array instead.");return Gt}function kt(ae,de,Ke){if(ae==null)return ae;var Ze=[],nt=0;return Le(ae,Ze,"","",function(Fe){return de.call(Ke,Fe,nt++)}),Ze}function Te(ae){if(ae._status===-1){var de=ae._result;de=de(),de.then(function(Ke){(ae._status===0||ae._status===-1)&&(ae._status=1,ae._result=Ke)},function(Ke){(ae._status===0||ae._status===-1)&&(ae._status=2,ae._result=Ke)}),ae._status===-1&&(ae._status=0,ae._result=de)}if(ae._status===1)return ae._result.default;throw ae._result}var Se={current:null},Ne={transition:null},pt={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:Ne,ReactCurrentOwner:ye};e.Children={map:kt,forEach:function(ae,de,Ke){kt(ae,function(){de.apply(this,arguments)},Ke)},count:function(ae){var de=0;return kt(ae,function(){de++}),de},toArray:function(ae){return kt(ae,function(de){return de})||[]},only:function(ae){if(!Ge(ae))throw Error("React.Children.only expected to receive a single React element child.");return ae}},e.Component=N,e.Fragment=a,e.Profiler=c,e.PureComponent=G,e.StrictMode=u,e.Suspense=y,e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pt,e.cloneElement=function(ae,de,Ke){if(ae==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+ae+".");var Ze=C({},ae.props),nt=ae.key,Fe=ae.ref,Gt=ae._owner;if(de!=null){if(de.ref!==void 0&&(Fe=de.ref,Gt=ye.current),de.key!==void 0&&(nt=""+de.key),ae.type&&ae.type.defaultProps)var ct=ae.type.defaultProps;for(jt in de)re.call(de,jt)&&!ke.hasOwnProperty(jt)&&(Ze[jt]=de[jt]===void 0&&ct!==void 0?ct[jt]:de[jt])}var jt=arguments.length-2;if(jt===1)Ze.children=Ke;else if(1<jt){ct=Array(jt);for(var nn=0;nn<jt;nn++)ct[nn]=arguments[nn+2];Ze.children=ct}return{$$typeof:n,type:ae.type,key:nt,ref:Fe,props:Ze,_owner:Gt}},e.createContext=function(ae){return ae={$$typeof:p,_currentValue:ae,_currentValue2:ae,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},ae.Provider={$$typeof:f,_context:ae},ae.Consumer=ae},e.createElement=ce,e.createFactory=function(ae){var de=ce.bind(null,ae);return de.type=ae,de},e.createRef=function(){return{current:null}},e.forwardRef=function(ae){return{$$typeof:v,render:ae}},e.isValidElement=Ge,e.lazy=function(ae){return{$$typeof:M,_payload:{_status:-1,_result:ae},_init:Te}},e.memo=function(ae,de){return{$$typeof:k,type:ae,compare:de===void 0?null:de}},e.startTransition=function(ae){var de=Ne.transition;Ne.transition={};try{ae()}finally{Ne.transition=de}},e.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},e.useCallback=function(ae,de){return Se.current.useCallback(ae,de)},e.useContext=function(ae){return Se.current.useContext(ae)},e.useDebugValue=function(){},e.useDeferredValue=function(ae){return Se.current.useDeferredValue(ae)},e.useEffect=function(ae,de){return Se.current.useEffect(ae,de)},e.useId=function(){return Se.current.useId()},e.useImperativeHandle=function(ae,de,Ke){return Se.current.useImperativeHandle(ae,de,Ke)},e.useInsertionEffect=function(ae,de){return Se.current.useInsertionEffect(ae,de)},e.useLayoutEffect=function(ae,de){return Se.current.useLayoutEffect(ae,de)},e.useMemo=function(ae,de){return Se.current.useMemo(ae,de)},e.useReducer=function(ae,de,Ke){return Se.current.useReducer(ae,de,Ke)},e.useRef=function(ae){return Se.current.useRef(ae)},e.useState=function(ae){return Se.current.useState(ae)},e.useSyncExternalStore=function(ae,de,Ke){return Se.current.useSyncExternalStore(ae,de,Ke)},e.useTransition=function(){return Se.current.useTransition()},e.version="18.2.0"}),Ie=le((e,n)=>{n.exports=$S()}),_y=le(e=>{function n(Se,Ne){var pt=Se.length;Se.push(Ne);e:for(;0<pt;){var ae=pt-1>>>1,de=Se[ae];if(0<u(de,Ne))Se[ae]=Ne,Se[pt]=de,pt=ae;else break e}}function r(Se){return Se.length===0?null:Se[0]}function a(Se){if(Se.length===0)return null;var Ne=Se[0],pt=Se.pop();if(pt!==Ne){Se[0]=pt;e:for(var ae=0,de=Se.length,Ke=de>>>1;ae<Ke;){var Ze=2*(ae+1)-1,nt=Se[Ze],Fe=Ze+1,Gt=Se[Fe];if(0>u(nt,pt))Fe<de&&0>u(Gt,nt)?(Se[ae]=Gt,Se[Fe]=pt,ae=Fe):(Se[ae]=nt,Se[Ze]=pt,ae=Ze);else if(Fe<de&&0>u(Gt,pt))Se[ae]=Gt,Se[Fe]=pt,ae=Fe;else break e}}return Ne}function u(Se,Ne){var pt=Se.sortIndex-Ne.sortIndex;return pt!==0?pt:Se.id-Ne.id}typeof performance=="object"&&typeof performance.now=="function"?(c=performance,e.unstable_now=function(){return c.now()}):(f=Date,p=f.now(),e.unstable_now=function(){return f.now()-p});var c,f,p,v=[],y=[],k=1,M=null,T=3,E=!1,A=!1,C=!1,R=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function G(Se){for(var Ne=r(y);Ne!==null;){if(Ne.callback===null)a(y);else if(Ne.startTime<=Se)a(y),Ne.sortIndex=Ne.expirationTime,n(v,Ne);else break;Ne=r(y)}}function J(Se){if(C=!1,G(Se),!A)if(r(v)!==null)A=!0,kt(Y);else{var Ne=r(y);Ne!==null&&Te(J,Ne.startTime-Se)}}function Y(Se,Ne){A=!1,C&&(C=!1,N(ke),ke=-1),E=!0;var pt=T;try{for(G(Ne),M=r(v);M!==null&&(!(M.expirationTime>Ne)||Se&&!Ge());){var ae=M.callback;if(typeof ae=="function"){M.callback=null,T=M.priorityLevel;var de=ae(M.expirationTime<=Ne);Ne=e.unstable_now(),typeof de=="function"?M.callback=de:M===r(v)&&a(v),G(Ne)}else a(v);M=r(v)}if(M!==null)var Ke=!0;else{var Ze=r(y);Ze!==null&&Te(J,Ze.startTime-Ne),Ke=!1}return Ke}finally{M=null,T=pt,E=!1}}var re=!1,ye=null,ke=-1,ce=5,Ce=-1;function Ge(){return!(e.unstable_now()-Ce<ce)}function oe(){if(ye!==null){var Se=e.unstable_now();Ce=Se;var Ne=!0;try{Ne=ye(!0,Se)}finally{Ne?Ae():(re=!1,ye=null)}}else re=!1}var Ae;typeof j=="function"?Ae=function(){j(oe)}:typeof MessageChannel!="undefined"?(W=new MessageChannel,Le=W.port2,W.port1.onmessage=oe,Ae=function(){Le.postMessage(null)}):Ae=function(){R(oe,0)};var W,Le;function kt(Se){ye=Se,re||(re=!0,Ae())}function Te(Se,Ne){ke=R(function(){Se(e.unstable_now())},Ne)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Se){Se.callback=null},e.unstable_continueExecution=function(){A||E||(A=!0,kt(Y))},e.unstable_forceFrameRate=function(Se){0>Se||125<Se?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ce=0<Se?Math.floor(1e3/Se):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return r(v)},e.unstable_next=function(Se){switch(T){case 1:case 2:case 3:var Ne=3;break;default:Ne=T}var pt=T;T=Ne;try{return Se()}finally{T=pt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Se,Ne){switch(Se){case 1:case 2:case 3:case 4:case 5:break;default:Se=3}var pt=T;T=Se;try{return Ne()}finally{T=pt}},e.unstable_scheduleCallback=function(Se,Ne,pt){var ae=e.unstable_now();switch(typeof pt=="object"&&pt!==null?(pt=pt.delay,pt=typeof pt=="number"&&0<pt?ae+pt:ae):pt=ae,Se){case 1:var de=-1;break;case 2:de=250;break;case 5:de=1073741823;break;case 4:de=1e4;break;default:de=5e3}return de=pt+de,Se={id:k++,callback:Ne,priorityLevel:Se,startTime:pt,expirationTime:de,sortIndex:-1},pt>ae?(Se.sortIndex=pt,n(y,Se),r(v)===null&&Se===r(y)&&(C?(N(ke),ke=-1):C=!0,Te(J,pt-ae))):(Se.sortIndex=de,n(v,Se),A||E||(A=!0,kt(Y))),Se},e.unstable_shouldYield=Ge,e.unstable_wrapCallback=function(Se){var Ne=T;return function(){var pt=T;T=Ne;try{return Se.apply(this,arguments)}finally{T=pt}}}}),R3=le((e,n)=>{n.exports=_y()}),L3=le(e=>{var n=Ie(),r=R3();function a(o){for(var s="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)s+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,c={};function f(o,s){p(o,s),p(o+"Capture",s)}function p(o,s){for(c[o]=s,o=0;o<s.length;o++)u.add(s[o])}var v=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),y=Object.prototype.hasOwnProperty,k=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,M={},T={};function E(o){return y.call(T,o)?!0:y.call(M,o)?!1:k.test(o)?T[o]=!0:(M[o]=!0,!1)}function A(o,s,m,S){if(m!==null&&m.type===0)return!1;switch(typeof s){case"function":case"symbol":return!0;case"boolean":return S?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function C(o,s,m,S){if(s===null||typeof s=="undefined"||A(o,s,m,S))return!0;if(S)return!1;if(m!==null)switch(m.type){case 3:return!s;case 4:return s===!1;case 5:return isNaN(s);case 6:return isNaN(s)||1>s}return!1}function R(o,s,m,S,L,U,ne){this.acceptsBooleans=s===2||s===3||s===4,this.attributeName=S,this.attributeNamespace=L,this.mustUseProperty=m,this.propertyName=o,this.type=s,this.sanitizeURL=U,this.removeEmptyString=ne}var N={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){N[o]=new R(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var s=o[0];N[s]=new R(s,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){N[o]=new R(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){N[o]=new R(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){N[o]=new R(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){N[o]=new R(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){N[o]=new R(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){N[o]=new R(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){N[o]=new R(o,5,!1,o.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function G(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var s=o.replace(j,G);N[s]=new R(s,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var s=o.replace(j,G);N[s]=new R(s,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var s=o.replace(j,G);N[s]=new R(s,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){N[o]=new R(o,1,!1,o.toLowerCase(),null,!1,!1)}),N.xlinkHref=new R("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){N[o]=new R(o,1,!1,o.toLowerCase(),null,!0,!0)});function J(o,s,m,S){var L=N.hasOwnProperty(s)?N[s]:null;(L!==null?L.type!==0:S||!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(C(s,m,L,S)&&(m=null),S||L===null?E(s)&&(m===null?o.removeAttribute(s):o.setAttribute(s,""+m)):L.mustUseProperty?o[L.propertyName]=m===null?L.type===3?!1:"":m:(s=L.attributeName,S=L.attributeNamespace,m===null?o.removeAttribute(s):(L=L.type,m=L===3||L===4&&m===!0?"":""+m,S?o.setAttributeNS(S,s,m):o.setAttribute(s,m))))}var Y=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,re=Symbol.for("react.element"),ye=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),ce=Symbol.for("react.strict_mode"),Ce=Symbol.for("react.profiler"),Ge=Symbol.for("react.provider"),oe=Symbol.for("react.context"),Ae=Symbol.for("react.forward_ref"),W=Symbol.for("react.suspense"),Le=Symbol.for("react.suspense_list"),kt=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),Ne=Symbol.iterator;function pt(o){return o===null||typeof o!="object"?null:(o=Ne&&o[Ne]||o["@@iterator"],typeof o=="function"?o:null)}var ae=Object.assign,de;function Ke(o){if(de===void 0)try{throw Error()}catch(m){var s=m.stack.trim().match(/\n( *(at )?)/);de=s&&s[1]||""}return`
`+de+o}var Ze=!1;function nt(o,s){if(!o||Ze)return"";Ze=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(s)if(s=function(){throw Error()},Object.defineProperty(s.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(s,[])}catch(at){var S=at}Reflect.construct(o,[],s)}else{try{s.call()}catch(at){S=at}o.call(s.prototype)}else{try{throw Error()}catch(at){S=at}o()}}catch(at){if(at&&S&&typeof at.stack=="string"){for(var L=at.stack.split(`
`),U=S.stack.split(`
`),ne=L.length-1,we=U.length-1;1<=ne&&0<=we&&L[ne]!==U[we];)we--;for(;1<=ne&&0<=we;ne--,we--)if(L[ne]!==U[we]){if(ne!==1||we!==1)do if(ne--,we--,0>we||L[ne]!==U[we]){var Re=`
`+L[ne].replace(" at new "," at ");return o.displayName&&Re.includes("<anonymous>")&&(Re=Re.replace("<anonymous>",o.displayName)),Re}while(1<=ne&&0<=we);break}}}finally{Ze=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?Ke(o):""}function Fe(o){switch(o.tag){case 5:return Ke(o.type);case 16:return Ke("Lazy");case 13:return Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 2:case 15:return o=nt(o.type,!1),o;case 11:return o=nt(o.type.render,!1),o;case 1:return o=nt(o.type,!0),o;default:return""}}function Gt(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ke:return"Fragment";case ye:return"Portal";case Ce:return"Profiler";case ce:return"StrictMode";case W:return"Suspense";case Le:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case oe:return(o.displayName||"Context")+".Consumer";case Ge:return(o._context.displayName||"Context")+".Provider";case Ae:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case kt:return s=o.displayName||null,s!==null?s:Gt(o.type)||"Memo";case Te:s=o._payload,o=o._init;try{return Gt(o(s))}catch{}}return null}function ct(o){var s=o.type;switch(o.tag){case 24:return"Cache";case 9:return(s.displayName||"Context")+".Consumer";case 10:return(s._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=s.render,o=o.displayName||o.name||"",s.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return s;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gt(s);case 8:return s===ce?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s}return null}function jt(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function nn(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function gn(o){var s=nn(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,s),S=""+o[s];if(!o.hasOwnProperty(s)&&typeof m!="undefined"&&typeof m.get=="function"&&typeof m.set=="function"){var L=m.get,U=m.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return L.call(this)},set:function(ne){S=""+ne,U.call(this,ne)}}),Object.defineProperty(o,s,{enumerable:m.enumerable}),{getValue:function(){return S},setValue:function(ne){S=""+ne},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function dn(o){o._valueTracker||(o._valueTracker=gn(o))}function ar(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var m=s.getValue(),S="";return o&&(S=nn(o)?o.checked?"true":"false":o.value),o=S,o!==m?(s.setValue(o),!0):!1}function $(o){if(o=o||(typeof document!="undefined"?document:void 0),typeof o=="undefined")return null;try{return o.activeElement||o.body}catch{return o.body}}function it(o,s){var m=s.checked;return ae({},s,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m!=null?m:o._wrapperState.initialChecked})}function rt(o,s){var m=s.defaultValue==null?"":s.defaultValue,S=s.checked!=null?s.checked:s.defaultChecked;m=jt(s.value!=null?s.value:m),o._wrapperState={initialChecked:S,initialValue:m,controlled:s.type==="checkbox"||s.type==="radio"?s.checked!=null:s.value!=null}}function ve(o,s){s=s.checked,s!=null&&J(o,"checked",s,!1)}function pe(o,s){ve(o,s);var m=jt(s.value),S=s.type;if(m!=null)S==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(S==="submit"||S==="reset"){o.removeAttribute("value");return}s.hasOwnProperty("value")?gt(o,s.type,m):s.hasOwnProperty("defaultValue")&&gt(o,s.type,jt(s.defaultValue)),s.checked==null&&s.defaultChecked!=null&&(o.defaultChecked=!!s.defaultChecked)}function Be(o,s,m){if(s.hasOwnProperty("value")||s.hasOwnProperty("defaultValue")){var S=s.type;if(!(S!=="submit"&&S!=="reset"||s.value!==void 0&&s.value!==null))return;s=""+o._wrapperState.initialValue,m||s===o.value||(o.value=s),o.defaultValue=s}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function gt(o,s,m){(s!=="number"||$(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var xt=Array.isArray;function Xe(o,s,m,S){if(o=o.options,s){s={};for(var L=0;L<m.length;L++)s["$"+m[L]]=!0;for(m=0;m<o.length;m++)L=s.hasOwnProperty("$"+o[m].value),o[m].selected!==L&&(o[m].selected=L),L&&S&&(o[m].defaultSelected=!0)}else{for(m=""+jt(m),s=null,L=0;L<o.length;L++){if(o[L].value===m){o[L].selected=!0,S&&(o[L].defaultSelected=!0);return}s!==null||o[L].disabled||(s=o[L])}s!==null&&(s.selected=!0)}}function Tt(o,s){if(s.dangerouslySetInnerHTML!=null)throw Error(a(91));return ae({},s,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function _t(o,s){var m=s.value;if(m==null){if(m=s.children,s=s.defaultValue,m!=null){if(s!=null)throw Error(a(92));if(xt(m)){if(1<m.length)throw Error(a(93));m=m[0]}s=m}s==null&&(s=""),m=s}o._wrapperState={initialValue:jt(m)}}function wt(o,s){var m=jt(s.value),S=jt(s.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),s.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),S!=null&&(o.defaultValue=""+S)}function un(o){var s=o.textContent;s===o._wrapperState.initialValue&&s!==""&&s!==null&&(o.value=s)}function rr(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Mn(o,s){return o==null||o==="http://www.w3.org/1999/xhtml"?rr(s):o==="http://www.w3.org/2000/svg"&&s==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var $i,fd=function(o){return typeof MSApp!="undefined"&&MSApp.execUnsafeLocalFunction?function(s,m,S,L){MSApp.execUnsafeLocalFunction(function(){return o(s,m,S,L)})}:o}(function(o,s){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=s;else{for($i=$i||document.createElement("div"),$i.innerHTML="<svg>"+s.valueOf().toString()+"</svg>",s=$i.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;s.firstChild;)o.appendChild(s.firstChild)}});function ao(o,s){if(s){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=s;return}}o.textContent=s}var Ms={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Hr=["Webkit","ms","Moz","O"];Object.keys(Ms).forEach(function(o){Hr.forEach(function(s){s=s+o.charAt(0).toUpperCase()+o.substring(1),Ms[s]=Ms[o]})});function gh(o,s,m){return s==null||typeof s=="boolean"||s===""?"":m||typeof s!="number"||s===0||Ms.hasOwnProperty(o)&&Ms[o]?(""+s).trim():s+"px"}function Eg(o,s){o=o.style;for(var m in s)if(s.hasOwnProperty(m)){var S=m.indexOf("--")===0,L=gh(m,s[m],S);m==="float"&&(m="cssFloat"),S?o.setProperty(m,L):o[m]=L}}var Ps=ae({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kg(o,s){if(s){if(Ps[o]&&(s.children!=null||s.dangerouslySetInnerHTML!=null))throw Error(a(137,o));if(s.dangerouslySetInnerHTML!=null){if(s.children!=null)throw Error(a(60));if(typeof s.dangerouslySetInnerHTML!="object"||!("__html"in s.dangerouslySetInnerHTML))throw Error(a(61))}if(s.style!=null&&typeof s.style!="object")throw Error(a(62))}}function f_(o,s){if(o.indexOf("-")===-1)return typeof s.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var h_=null;function p_(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Tg=null,ja=null,Cs=null;function yJ(o){if(o=L_(o)){if(typeof Tg!="function")throw Error(a(280));var s=o.stateNode;s&&(s=zT(s),Tg(o.stateNode,o.type,s))}}function bJ(o){ja?Cs?Cs.push(o):Cs=[o]:ja=o}function _J(){if(ja){var o=ja,s=Cs;if(Cs=ja=null,yJ(o),s)for(o=0;o<s.length;o++)yJ(s[o])}}function xJ(o,s){return o(s)}function wJ(){}var K5=!1;function SJ(o,s,m){if(K5)return o(s,m);K5=!0;try{return xJ(o,s,m)}finally{K5=!1,(ja!==null||Cs!==null)&&(wJ(),_J())}}function m_(o,s){var m=o.stateNode;if(m===null)return null;var S=zT(m);if(S===null)return null;m=S[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(S=!S.disabled)||(o=o.type,S=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!S;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(a(231,s,typeof m));return m}var X5=!1;if(v)try{Mg={},Object.defineProperty(Mg,"passive",{get:function(){X5=!0}}),window.addEventListener("test",Mg,Mg),window.removeEventListener("test",Mg,Mg)}catch{X5=!1}var Mg;function sfe(o,s,m,S,L,U,ne,we,Re){var at=Array.prototype.slice.call(arguments,3);try{s.apply(m,at)}catch(Ct){this.onError(Ct)}}var g_=!1,dT=null,fT=!1,$5=null,lfe={onError:function(o){g_=!0,dT=o}};function ufe(o,s,m,S,L,U,ne,we,Re){g_=!1,dT=null,sfe.apply(lfe,arguments)}function cfe(o,s,m,S,L,U,ne,we,Re){if(ufe.apply(this,arguments),g_){if(g_){var at=dT;g_=!1,dT=null}else throw Error(a(198));fT||(fT=!0,$5=at)}}function vh(o){var s=o,m=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,s.flags&4098&&(m=s.return),o=s.return;while(o)}return s.tag===3?m:null}function EJ(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function kJ(o){if(vh(o)!==o)throw Error(a(188))}function dfe(o){var s=o.alternate;if(!s){if(s=vh(o),s===null)throw Error(a(188));return s!==o?null:o}for(var m=o,S=s;;){var L=m.return;if(L===null)break;var U=L.alternate;if(U===null){if(S=L.return,S!==null){m=S;continue}break}if(L.child===U.child){for(U=L.child;U;){if(U===m)return kJ(L),o;if(U===S)return kJ(L),s;U=U.sibling}throw Error(a(188))}if(m.return!==S.return)m=L,S=U;else{for(var ne=!1,we=L.child;we;){if(we===m){ne=!0,m=L,S=U;break}if(we===S){ne=!0,S=L,m=U;break}we=we.sibling}if(!ne){for(we=U.child;we;){if(we===m){ne=!0,m=U,S=L;break}if(we===S){ne=!0,S=U,m=L;break}we=we.sibling}if(!ne)throw Error(a(189))}}if(m.alternate!==S)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?o:s}function TJ(o){return o=dfe(o),o!==null?MJ(o):null}function MJ(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var s=MJ(o);if(s!==null)return s;o=o.sibling}return null}var PJ=r.unstable_scheduleCallback,CJ=r.unstable_cancelCallback,ffe=r.unstable_shouldYield,hfe=r.unstable_requestPaint,ii=r.unstable_now,pfe=r.unstable_getCurrentPriorityLevel,Z5=r.unstable_ImmediatePriority,AJ=r.unstable_UserBlockingPriority,hT=r.unstable_NormalPriority,mfe=r.unstable_LowPriority,IJ=r.unstable_IdlePriority,pT=null,Pl=null;function gfe(o){if(Pl&&typeof Pl.onCommitFiberRoot=="function")try{Pl.onCommitFiberRoot(pT,o,void 0,(o.current.flags&128)===128)}catch{}}var As=Math.clz32?Math.clz32:bfe,vfe=Math.log,yfe=Math.LN2;function bfe(o){return o>>>=0,o===0?32:31-(vfe(o)/yfe|0)|0}var mT=64,gT=4194304;function v_(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function vT(o,s){var m=o.pendingLanes;if(m===0)return 0;var S=0,L=o.suspendedLanes,U=o.pingedLanes,ne=m&268435455;if(ne!==0){var we=ne&~L;we!==0?S=v_(we):(U&=ne,U!==0&&(S=v_(U)))}else ne=m&~L,ne!==0?S=v_(ne):U!==0&&(S=v_(U));if(S===0)return 0;if(s!==0&&s!==S&&!(s&L)&&(L=S&-S,U=s&-s,L>=U||L===16&&(U&4194240)!==0))return s;if(S&4&&(S|=m&16),s=o.entangledLanes,s!==0)for(o=o.entanglements,s&=S;0<s;)m=31-As(s),L=1<<m,S|=o[m],s&=~L;return S}function _fe(o,s){switch(o){case 1:case 2:case 4:return s+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xfe(o,s){for(var m=o.suspendedLanes,S=o.pingedLanes,L=o.expirationTimes,U=o.pendingLanes;0<U;){var ne=31-As(U),we=1<<ne,Re=L[ne];Re===-1?(!(we&m)||we&S)&&(L[ne]=_fe(we,s)):Re<=s&&(o.expiredLanes|=we),U&=~we}}function Y5(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function DJ(){var o=mT;return mT<<=1,!(mT&4194240)&&(mT=64),o}function J5(o){for(var s=[],m=0;31>m;m++)s.push(o);return s}function y_(o,s,m){o.pendingLanes|=s,s!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,s=31-As(s),o[s]=m}function wfe(o,s){var m=o.pendingLanes&~s;o.pendingLanes=s,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=s,o.mutableReadLanes&=s,o.entangledLanes&=s,s=o.entanglements;var S=o.eventTimes;for(o=o.expirationTimes;0<m;){var L=31-As(m),U=1<<L;s[L]=0,S[L]=-1,o[L]=-1,m&=~U}}function Q5(o,s){var m=o.entangledLanes|=s;for(o=o.entanglements;m;){var S=31-As(m),L=1<<S;L&s|o[S]&s&&(o[S]|=s),m&=~L}}var mr=0;function OJ(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var RJ,eR,LJ,zJ,NJ,tR=!1,yT=[],hd=null,pd=null,md=null,b_=new Map,__=new Map,gd=[],Sfe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function FJ(o,s){switch(o){case"focusin":case"focusout":hd=null;break;case"dragenter":case"dragleave":pd=null;break;case"mouseover":case"mouseout":md=null;break;case"pointerover":case"pointerout":b_.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":__.delete(s.pointerId)}}function x_(o,s,m,S,L,U){return o===null||o.nativeEvent!==U?(o={blockedOn:s,domEventName:m,eventSystemFlags:S,nativeEvent:U,targetContainers:[L]},s!==null&&(s=L_(s),s!==null&&eR(s)),o):(o.eventSystemFlags|=S,s=o.targetContainers,L!==null&&s.indexOf(L)===-1&&s.push(L),o)}function Efe(o,s,m,S,L){switch(s){case"focusin":return hd=x_(hd,o,s,m,S,L),!0;case"dragenter":return pd=x_(pd,o,s,m,S,L),!0;case"mouseover":return md=x_(md,o,s,m,S,L),!0;case"pointerover":var U=L.pointerId;return b_.set(U,x_(b_.get(U)||null,o,s,m,S,L)),!0;case"gotpointercapture":return U=L.pointerId,__.set(U,x_(__.get(U)||null,o,s,m,S,L)),!0}return!1}function BJ(o){var s=yh(o.target);if(s!==null){var m=vh(s);if(m!==null){if(s=m.tag,s===13){if(s=EJ(m),s!==null){o.blockedOn=s,NJ(o.priority,function(){LJ(m)});return}}else if(s===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function bT(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var m=rR(o.domEventName,o.eventSystemFlags,s[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var S=new m.constructor(m.type,m);h_=S,m.target.dispatchEvent(S),h_=null}else return s=L_(m),s!==null&&eR(s),o.blockedOn=m,!1;s.shift()}return!0}function jJ(o,s,m){bT(o)&&m.delete(s)}function kfe(){tR=!1,hd!==null&&bT(hd)&&(hd=null),pd!==null&&bT(pd)&&(pd=null),md!==null&&bT(md)&&(md=null),b_.forEach(jJ),__.forEach(jJ)}function w_(o,s){o.blockedOn===s&&(o.blockedOn=null,tR||(tR=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,kfe)))}function S_(o){function s(L){return w_(L,o)}if(0<yT.length){w_(yT[0],o);for(var m=1;m<yT.length;m++){var S=yT[m];S.blockedOn===o&&(S.blockedOn=null)}}for(hd!==null&&w_(hd,o),pd!==null&&w_(pd,o),md!==null&&w_(md,o),b_.forEach(s),__.forEach(s),m=0;m<gd.length;m++)S=gd[m],S.blockedOn===o&&(S.blockedOn=null);for(;0<gd.length&&(m=gd[0],m.blockedOn===null);)BJ(m),m.blockedOn===null&&gd.shift()}var Pg=Y.ReactCurrentBatchConfig,_T=!0;function Tfe(o,s,m,S){var L=mr,U=Pg.transition;Pg.transition=null;try{mr=1,nR(o,s,m,S)}finally{mr=L,Pg.transition=U}}function Mfe(o,s,m,S){var L=mr,U=Pg.transition;Pg.transition=null;try{mr=4,nR(o,s,m,S)}finally{mr=L,Pg.transition=U}}function nR(o,s,m,S){if(_T){var L=rR(o,s,m,S);if(L===null)yR(o,s,S,xT,m),FJ(o,S);else if(Efe(L,o,s,m,S))S.stopPropagation();else if(FJ(o,S),s&4&&-1<Sfe.indexOf(o)){for(;L!==null;){var U=L_(L);if(U!==null&&RJ(U),U=rR(o,s,m,S),U===null&&yR(o,s,S,xT,m),U===L)break;L=U}L!==null&&S.stopPropagation()}else yR(o,s,S,null,m)}}var xT=null;function rR(o,s,m,S){if(xT=null,o=p_(S),o=yh(o),o!==null)if(s=vh(o),s===null)o=null;else if(m=s.tag,m===13){if(o=EJ(s),o!==null)return o;o=null}else if(m===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null);return xT=o,null}function UJ(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pfe()){case Z5:return 1;case AJ:return 4;case hT:case mfe:return 16;case IJ:return 536870912;default:return 16}default:return 16}}var vd=null,iR=null,wT=null;function VJ(){if(wT)return wT;var o,s=iR,m=s.length,S,L="value"in vd?vd.value:vd.textContent,U=L.length;for(o=0;o<m&&s[o]===L[o];o++);var ne=m-o;for(S=1;S<=ne&&s[m-S]===L[U-S];S++);return wT=L.slice(o,1<S?1-S:void 0)}function ST(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function ET(){return!0}function HJ(){return!1}function da(o){function s(m,S,L,U,ne){this._reactName=m,this._targetInst=L,this.type=S,this.nativeEvent=U,this.target=ne,this.currentTarget=null;for(var we in o)o.hasOwnProperty(we)&&(m=o[we],this[we]=m?m(U):U[we]);return this.isDefaultPrevented=(U.defaultPrevented!=null?U.defaultPrevented:U.returnValue===!1)?ET:HJ,this.isPropagationStopped=HJ,this}return ae(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ET)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ET)},persist:function(){},isPersistent:ET}),s}var Cg={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},oR=da(Cg),E_=ae({},Cg,{view:0,detail:0}),Pfe=da(E_),aR,sR,k_,kT=ae({},E_,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uR,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==k_&&(k_&&o.type==="mousemove"?(aR=o.screenX-k_.screenX,sR=o.screenY-k_.screenY):sR=aR=0,k_=o),aR)},movementY:function(o){return"movementY"in o?o.movementY:sR}}),GJ=da(kT),Cfe=ae({},kT,{dataTransfer:0}),Afe=da(Cfe),Ife=ae({},E_,{relatedTarget:0}),lR=da(Ife),Dfe=ae({},Cg,{animationName:0,elapsedTime:0,pseudoElement:0}),Ofe=da(Dfe),Rfe=ae({},Cg,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Lfe=da(Rfe),zfe=ae({},Cg,{data:0}),WJ=da(zfe),Nfe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ffe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bfe={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function jfe(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Bfe[o])?!!s[o]:!1}function uR(){return jfe}var Ufe=ae({},E_,{key:function(o){if(o.key){var s=Nfe[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=ST(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Ffe[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uR,charCode:function(o){return o.type==="keypress"?ST(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ST(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Vfe=da(Ufe),Hfe=ae({},kT,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qJ=da(Hfe),Gfe=ae({},E_,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uR}),Wfe=da(Gfe),qfe=ae({},Cg,{propertyName:0,elapsedTime:0,pseudoElement:0}),Kfe=da(qfe),Xfe=ae({},kT,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),$fe=da(Xfe),Zfe=[9,13,27,32],cR=v&&"CompositionEvent"in window,T_=null;v&&"documentMode"in document&&(T_=document.documentMode);var Yfe=v&&"TextEvent"in window&&!T_,KJ=v&&(!cR||T_&&8<T_&&11>=T_),XJ=String.fromCharCode(32),$J=!1;function ZJ(o,s){switch(o){case"keyup":return Zfe.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function YJ(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ag=!1;function Jfe(o,s){switch(o){case"compositionend":return YJ(s);case"keypress":return s.which!==32?null:($J=!0,XJ);case"textInput":return o=s.data,o===XJ&&$J?null:o;default:return null}}function Qfe(o,s){if(Ag)return o==="compositionend"||!cR&&ZJ(o,s)?(o=VJ(),wT=iR=vd=null,Ag=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return KJ&&s.locale!=="ko"?null:s.data;default:return null}}var ehe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function JJ(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!ehe[o.type]:s==="textarea"}function QJ(o,s,m,S){bJ(S),s=OT(s,"onChange"),0<s.length&&(m=new oR("onChange","change",null,m,S),o.push({event:m,listeners:s}))}var M_=null,P_=null;function the(o){yQ(o,0)}function TT(o){var s=Lg(o);if(ar(s))return o}function nhe(o,s){if(o==="change")return s}var eQ=!1;v&&(v?(MT="oninput"in document,MT||(fR=document.createElement("div"),fR.setAttribute("oninput","return;"),MT=typeof fR.oninput=="function"),dR=MT):dR=!1,eQ=dR&&(!document.documentMode||9<document.documentMode));var dR,MT,fR;function tQ(){M_&&(M_.detachEvent("onpropertychange",nQ),P_=M_=null)}function nQ(o){if(o.propertyName==="value"&&TT(P_)){var s=[];QJ(s,P_,o,p_(o)),SJ(the,s)}}function rhe(o,s,m){o==="focusin"?(tQ(),M_=s,P_=m,M_.attachEvent("onpropertychange",nQ)):o==="focusout"&&tQ()}function ihe(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return TT(P_)}function ohe(o,s){if(o==="click")return TT(s)}function ahe(o,s){if(o==="input"||o==="change")return TT(s)}function she(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var Is=typeof Object.is=="function"?Object.is:she;function C_(o,s){if(Is(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var m=Object.keys(o),S=Object.keys(s);if(m.length!==S.length)return!1;for(S=0;S<m.length;S++){var L=m[S];if(!y.call(s,L)||!Is(o[L],s[L]))return!1}return!0}function rQ(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function iQ(o,s){var m=rQ(o);o=0;for(var S;m;){if(m.nodeType===3){if(S=o+m.textContent.length,o<=s&&S>=s)return{node:m,offset:s-o};o=S}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=rQ(m)}}function oQ(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?oQ(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function aQ(){for(var o=window,s=$();s instanceof o.HTMLIFrameElement;){try{var m=typeof s.contentWindow.location.href=="string"}catch{m=!1}if(m)o=s.contentWindow;else break;s=$(o.document)}return s}function hR(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}function lhe(o){var s=aQ(),m=o.focusedElem,S=o.selectionRange;if(s!==m&&m&&m.ownerDocument&&oQ(m.ownerDocument.documentElement,m)){if(S!==null&&hR(m)){if(s=S.start,o=S.end,o===void 0&&(o=s),"selectionStart"in m)m.selectionStart=s,m.selectionEnd=Math.min(o,m.value.length);else if(o=(s=m.ownerDocument||document)&&s.defaultView||window,o.getSelection){o=o.getSelection();var L=m.textContent.length,U=Math.min(S.start,L);S=S.end===void 0?U:Math.min(S.end,L),!o.extend&&U>S&&(L=S,S=U,U=L),L=iQ(m,U);var ne=iQ(m,S);L&&ne&&(o.rangeCount!==1||o.anchorNode!==L.node||o.anchorOffset!==L.offset||o.focusNode!==ne.node||o.focusOffset!==ne.offset)&&(s=s.createRange(),s.setStart(L.node,L.offset),o.removeAllRanges(),U>S?(o.addRange(s),o.extend(ne.node,ne.offset)):(s.setEnd(ne.node,ne.offset),o.addRange(s)))}}for(s=[],o=m;o=o.parentNode;)o.nodeType===1&&s.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<s.length;m++)o=s[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var uhe=v&&"documentMode"in document&&11>=document.documentMode,Ig=null,pR=null,A_=null,mR=!1;function sQ(o,s,m){var S=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;mR||Ig==null||Ig!==$(S)||(S=Ig,"selectionStart"in S&&hR(S)?S={start:S.selectionStart,end:S.selectionEnd}:(S=(S.ownerDocument&&S.ownerDocument.defaultView||window).getSelection(),S={anchorNode:S.anchorNode,anchorOffset:S.anchorOffset,focusNode:S.focusNode,focusOffset:S.focusOffset}),A_&&C_(A_,S)||(A_=S,S=OT(pR,"onSelect"),0<S.length&&(s=new oR("onSelect","select",null,s,m),o.push({event:s,listeners:S}),s.target=Ig)))}function PT(o,s){var m={};return m[o.toLowerCase()]=s.toLowerCase(),m["Webkit"+o]="webkit"+s,m["Moz"+o]="moz"+s,m}var Dg={animationend:PT("Animation","AnimationEnd"),animationiteration:PT("Animation","AnimationIteration"),animationstart:PT("Animation","AnimationStart"),transitionend:PT("Transition","TransitionEnd")},gR={},lQ={};v&&(lQ=document.createElement("div").style,"AnimationEvent"in window||(delete Dg.animationend.animation,delete Dg.animationiteration.animation,delete Dg.animationstart.animation),"TransitionEvent"in window||delete Dg.transitionend.transition);function CT(o){if(gR[o])return gR[o];if(!Dg[o])return o;var s=Dg[o],m;for(m in s)if(s.hasOwnProperty(m)&&m in lQ)return gR[o]=s[m];return o}var uQ=CT("animationend"),cQ=CT("animationiteration"),dQ=CT("animationstart"),fQ=CT("transitionend"),hQ=new Map,pQ="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yd(o,s){hQ.set(o,s),f(s,[o])}for(IT=0;IT<pQ.length;IT++)AT=pQ[IT],mQ=AT.toLowerCase(),gQ=AT[0].toUpperCase()+AT.slice(1),yd(mQ,"on"+gQ);var AT,mQ,gQ,IT;yd(uQ,"onAnimationEnd"),yd(cQ,"onAnimationIteration"),yd(dQ,"onAnimationStart"),yd("dblclick","onDoubleClick"),yd("focusin","onFocus"),yd("focusout","onBlur"),yd(fQ,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),f("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),f("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),f("onBeforeInput",["compositionend","keypress","textInput","paste"]),f("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),f("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var I_="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),che=new Set("cancel close invalid load scroll toggle".split(" ").concat(I_));function vQ(o,s,m){var S=o.type||"unknown-event";o.currentTarget=m,cfe(S,s,void 0,o),o.currentTarget=null}function yQ(o,s){s=(s&4)!==0;for(var m=0;m<o.length;m++){var S=o[m],L=S.event;S=S.listeners;e:{var U=void 0;if(s)for(var ne=S.length-1;0<=ne;ne--){var we=S[ne],Re=we.instance,at=we.currentTarget;if(we=we.listener,Re!==U&&L.isPropagationStopped())break e;vQ(L,we,at),U=Re}else for(ne=0;ne<S.length;ne++){if(we=S[ne],Re=we.instance,at=we.currentTarget,we=we.listener,Re!==U&&L.isPropagationStopped())break e;vQ(L,we,at),U=Re}}}if(fT)throw o=$5,fT=!1,$5=null,o}function Rr(o,s){var m=s[ER];m===void 0&&(m=s[ER]=new Set);var S=o+"__bubble";m.has(S)||(bQ(s,o,2,!1),m.add(S))}function vR(o,s,m){var S=0;s&&(S|=4),bQ(m,o,S,s)}var DT="_reactListening"+Math.random().toString(36).slice(2);function D_(o){if(!o[DT]){o[DT]=!0,u.forEach(function(m){m!=="selectionchange"&&(che.has(m)||vR(m,!1,o),vR(m,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[DT]||(s[DT]=!0,vR("selectionchange",!1,s))}}function bQ(o,s,m,S){switch(UJ(s)){case 1:var L=Tfe;break;case 4:L=Mfe;break;default:L=nR}m=L.bind(null,s,m,o),L=void 0,!X5||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(L=!0),S?L!==void 0?o.addEventListener(s,m,{capture:!0,passive:L}):o.addEventListener(s,m,!0):L!==void 0?o.addEventListener(s,m,{passive:L}):o.addEventListener(s,m,!1)}function yR(o,s,m,S,L){var U=S;if(!(s&1)&&!(s&2)&&S!==null)e:for(;;){if(S===null)return;var ne=S.tag;if(ne===3||ne===4){var we=S.stateNode.containerInfo;if(we===L||we.nodeType===8&&we.parentNode===L)break;if(ne===4)for(ne=S.return;ne!==null;){var Re=ne.tag;if((Re===3||Re===4)&&(Re=ne.stateNode.containerInfo,Re===L||Re.nodeType===8&&Re.parentNode===L))return;ne=ne.return}for(;we!==null;){if(ne=yh(we),ne===null)return;if(Re=ne.tag,Re===5||Re===6){S=U=ne;continue e}we=we.parentNode}}S=S.return}SJ(function(){var at=U,Ct=p_(m),It=[];e:{var Mt=hQ.get(o);if(Mt!==void 0){var Zt=oR,rn=o;switch(o){case"keypress":if(ST(m)===0)break e;case"keydown":case"keyup":Zt=Vfe;break;case"focusin":rn="focus",Zt=lR;break;case"focusout":rn="blur",Zt=lR;break;case"beforeblur":case"afterblur":Zt=lR;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Zt=GJ;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Zt=Afe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Zt=Wfe;break;case uQ:case cQ:case dQ:Zt=Ofe;break;case fQ:Zt=Kfe;break;case"scroll":Zt=Pfe;break;case"wheel":Zt=$fe;break;case"copy":case"cut":case"paste":Zt=Lfe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Zt=qJ}var an=(s&4)!==0,oi=!an&&o==="scroll",$e=an?Mt!==null?Mt+"Capture":null:Mt;an=[];for(var ze=at,Ye;ze!==null;){Ye=ze;var Ft=Ye.stateNode;if(Ye.tag===5&&Ft!==null&&(Ye=Ft,$e!==null&&(Ft=m_(ze,$e),Ft!=null&&an.push(O_(ze,Ft,Ye)))),oi)break;ze=ze.return}0<an.length&&(Mt=new Zt(Mt,rn,null,m,Ct),It.push({event:Mt,listeners:an}))}}if(!(s&7)){e:{if(Mt=o==="mouseover"||o==="pointerover",Zt=o==="mouseout"||o==="pointerout",Mt&&m!==h_&&(rn=m.relatedTarget||m.fromElement)&&(yh(rn)||rn[Cu]))break e;if((Zt||Mt)&&(Mt=Ct.window===Ct?Ct:(Mt=Ct.ownerDocument)?Mt.defaultView||Mt.parentWindow:window,Zt?(rn=m.relatedTarget||m.toElement,Zt=at,rn=rn?yh(rn):null,rn!==null&&(oi=vh(rn),rn!==oi||rn.tag!==5&&rn.tag!==6)&&(rn=null)):(Zt=null,rn=at),Zt!==rn)){if(an=GJ,Ft="onMouseLeave",$e="onMouseEnter",ze="mouse",(o==="pointerout"||o==="pointerover")&&(an=qJ,Ft="onPointerLeave",$e="onPointerEnter",ze="pointer"),oi=Zt==null?Mt:Lg(Zt),Ye=rn==null?Mt:Lg(rn),Mt=new an(Ft,ze+"leave",Zt,m,Ct),Mt.target=oi,Mt.relatedTarget=Ye,Ft=null,yh(Ct)===at&&(an=new an($e,ze+"enter",rn,m,Ct),an.target=Ye,an.relatedTarget=oi,Ft=an),oi=Ft,Zt&&rn)t:{for(an=Zt,$e=rn,ze=0,Ye=an;Ye;Ye=Og(Ye))ze++;for(Ye=0,Ft=$e;Ft;Ft=Og(Ft))Ye++;for(;0<ze-Ye;)an=Og(an),ze--;for(;0<Ye-ze;)$e=Og($e),Ye--;for(;ze--;){if(an===$e||$e!==null&&an===$e.alternate)break t;an=Og(an),$e=Og($e)}an=null}else an=null;Zt!==null&&_Q(It,Mt,Zt,an,!1),rn!==null&&oi!==null&&_Q(It,oi,rn,an,!0)}}e:{if(Mt=at?Lg(at):window,Zt=Mt.nodeName&&Mt.nodeName.toLowerCase(),Zt==="select"||Zt==="input"&&Mt.type==="file")var sn=nhe;else if(JJ(Mt))if(eQ)sn=ahe;else{sn=ihe;var yn=rhe}else(Zt=Mt.nodeName)&&Zt.toLowerCase()==="input"&&(Mt.type==="checkbox"||Mt.type==="radio")&&(sn=ohe);if(sn&&(sn=sn(o,at))){QJ(It,sn,m,Ct);break e}yn&&yn(o,Mt,at),o==="focusout"&&(yn=Mt._wrapperState)&&yn.controlled&&Mt.type==="number"&&gt(Mt,"number",Mt.value)}switch(yn=at?Lg(at):window,o){case"focusin":(JJ(yn)||yn.contentEditable==="true")&&(Ig=yn,pR=at,A_=null);break;case"focusout":A_=pR=Ig=null;break;case"mousedown":mR=!0;break;case"contextmenu":case"mouseup":case"dragend":mR=!1,sQ(It,m,Ct);break;case"selectionchange":if(uhe)break;case"keydown":case"keyup":sQ(It,m,Ct)}var bn;if(cR)e:{switch(o){case"compositionstart":var Pn="onCompositionStart";break e;case"compositionend":Pn="onCompositionEnd";break e;case"compositionupdate":Pn="onCompositionUpdate";break e}Pn=void 0}else Ag?ZJ(o,m)&&(Pn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Pn="onCompositionStart");Pn&&(KJ&&m.locale!=="ko"&&(Ag||Pn!=="onCompositionStart"?Pn==="onCompositionEnd"&&Ag&&(bn=VJ()):(vd=Ct,iR="value"in vd?vd.value:vd.textContent,Ag=!0)),yn=OT(at,Pn),0<yn.length&&(Pn=new WJ(Pn,o,null,m,Ct),It.push({event:Pn,listeners:yn}),bn?Pn.data=bn:(bn=YJ(m),bn!==null&&(Pn.data=bn)))),(bn=Yfe?Jfe(o,m):Qfe(o,m))&&(at=OT(at,"onBeforeInput"),0<at.length&&(Ct=new WJ("onBeforeInput","beforeinput",null,m,Ct),It.push({event:Ct,listeners:at}),Ct.data=bn))}yQ(It,s)})}function O_(o,s,m){return{instance:o,listener:s,currentTarget:m}}function OT(o,s){for(var m=s+"Capture",S=[];o!==null;){var L=o,U=L.stateNode;L.tag===5&&U!==null&&(L=U,U=m_(o,m),U!=null&&S.unshift(O_(o,U,L)),U=m_(o,s),U!=null&&S.push(O_(o,U,L))),o=o.return}return S}function Og(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function _Q(o,s,m,S,L){for(var U=s._reactName,ne=[];m!==null&&m!==S;){var we=m,Re=we.alternate,at=we.stateNode;if(Re!==null&&Re===S)break;we.tag===5&&at!==null&&(we=at,L?(Re=m_(m,U),Re!=null&&ne.unshift(O_(m,Re,we))):L||(Re=m_(m,U),Re!=null&&ne.push(O_(m,Re,we)))),m=m.return}ne.length!==0&&o.push({event:s,listeners:ne})}var dhe=/\r\n?/g,fhe=/\u0000|\uFFFD/g;function xQ(o){return(typeof o=="string"?o:""+o).replace(dhe,`
`).replace(fhe,"")}function RT(o,s,m){if(s=xQ(s),xQ(o)!==s&&m)throw Error(a(425))}function LT(){}var bR=null,_R=null;function xR(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var wR=typeof setTimeout=="function"?setTimeout:void 0,hhe=typeof clearTimeout=="function"?clearTimeout:void 0,wQ=typeof Promise=="function"?Promise:void 0,phe=typeof queueMicrotask=="function"?queueMicrotask:typeof wQ!="undefined"?function(o){return wQ.resolve(null).then(o).catch(mhe)}:wR;function mhe(o){setTimeout(function(){throw o})}function SR(o,s){var m=s,S=0;do{var L=m.nextSibling;if(o.removeChild(m),L&&L.nodeType===8)if(m=L.data,m==="/$"){if(S===0){o.removeChild(L),S_(s);return}S--}else m!=="$"&&m!=="$?"&&m!=="$!"||S++;m=L}while(m);S_(s)}function bd(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?")break;if(s==="/$")return null}}return o}function SQ(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(s===0)return o;s--}else m==="/$"&&s++}o=o.previousSibling}return null}var Rg=Math.random().toString(36).slice(2),Cl="__reactFiber$"+Rg,R_="__reactProps$"+Rg,Cu="__reactContainer$"+Rg,ER="__reactEvents$"+Rg,ghe="__reactListeners$"+Rg,vhe="__reactHandles$"+Rg;function yh(o){var s=o[Cl];if(s)return s;for(var m=o.parentNode;m;){if(s=m[Cu]||m[Cl]){if(m=s.alternate,s.child!==null||m!==null&&m.child!==null)for(o=SQ(o);o!==null;){if(m=o[Cl])return m;o=SQ(o)}return s}o=m,m=o.parentNode}return null}function L_(o){return o=o[Cl]||o[Cu],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Lg(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(a(33))}function zT(o){return o[R_]||null}var kR=[],zg=-1;function _d(o){return{current:o}}function Lr(o){0>zg||(o.current=kR[zg],kR[zg]=null,zg--)}function Ar(o,s){zg++,kR[zg]=o.current,o.current=s}var xd={},so=_d(xd),Wo=_d(!1),bh=xd;function Ng(o,s){var m=o.type.contextTypes;if(!m)return xd;var S=o.stateNode;if(S&&S.__reactInternalMemoizedUnmaskedChildContext===s)return S.__reactInternalMemoizedMaskedChildContext;var L={},U;for(U in m)L[U]=s[U];return S&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=s,o.__reactInternalMemoizedMaskedChildContext=L),L}function qo(o){return o=o.childContextTypes,o!=null}function NT(){Lr(Wo),Lr(so)}function EQ(o,s,m){if(so.current!==xd)throw Error(a(168));Ar(so,s),Ar(Wo,m)}function kQ(o,s,m){var S=o.stateNode;if(s=s.childContextTypes,typeof S.getChildContext!="function")return m;S=S.getChildContext();for(var L in S)if(!(L in s))throw Error(a(108,ct(o)||"Unknown",L));return ae({},m,S)}function FT(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||xd,bh=so.current,Ar(so,o),Ar(Wo,Wo.current),!0}function TQ(o,s,m){var S=o.stateNode;if(!S)throw Error(a(169));m?(o=kQ(o,s,bh),S.__reactInternalMemoizedMergedChildContext=o,Lr(Wo),Lr(so),Ar(so,o)):Lr(Wo),Ar(Wo,m)}var Au=null,BT=!1,TR=!1;function MQ(o){Au===null?Au=[o]:Au.push(o)}function yhe(o){BT=!0,MQ(o)}function wd(){if(!TR&&Au!==null){TR=!0;var o=0,s=mr;try{var m=Au;for(mr=1;o<m.length;o++){var S=m[o];do S=S(!0);while(S!==null)}Au=null,BT=!1}catch(L){throw Au!==null&&(Au=Au.slice(o+1)),PJ(Z5,wd),L}finally{mr=s,TR=!1}}return null}var Fg=[],Bg=0,jT=null,UT=0,Ua=[],Va=0,_h=null,Iu=1,Du="";function xh(o,s){Fg[Bg++]=UT,Fg[Bg++]=jT,jT=o,UT=s}function PQ(o,s,m){Ua[Va++]=Iu,Ua[Va++]=Du,Ua[Va++]=_h,_h=o;var S=Iu;o=Du;var L=32-As(S)-1;S&=~(1<<L),m+=1;var U=32-As(s)+L;if(30<U){var ne=L-L%5;U=(S&(1<<ne)-1).toString(32),S>>=ne,L-=ne,Iu=1<<32-As(s)+L|m<<L|S,Du=U+o}else Iu=1<<U|m<<L|S,Du=o}function MR(o){o.return!==null&&(xh(o,1),PQ(o,1,0))}function PR(o){for(;o===jT;)jT=Fg[--Bg],Fg[Bg]=null,UT=Fg[--Bg],Fg[Bg]=null;for(;o===_h;)_h=Ua[--Va],Ua[Va]=null,Du=Ua[--Va],Ua[Va]=null,Iu=Ua[--Va],Ua[Va]=null}var fa=null,ha=null,Nr=!1,Ds=null;function CQ(o,s){var m=qa(5,null,null,0);m.elementType="DELETED",m.stateNode=s,m.return=o,s=o.deletions,s===null?(o.deletions=[m],o.flags|=16):s.push(m)}function AQ(o,s){switch(o.tag){case 5:var m=o.type;return s=s.nodeType!==1||m.toLowerCase()!==s.nodeName.toLowerCase()?null:s,s!==null?(o.stateNode=s,fa=o,ha=bd(s.firstChild),!0):!1;case 6:return s=o.pendingProps===""||s.nodeType!==3?null:s,s!==null?(o.stateNode=s,fa=o,ha=null,!0):!1;case 13:return s=s.nodeType!==8?null:s,s!==null?(m=_h!==null?{id:Iu,overflow:Du}:null,o.memoizedState={dehydrated:s,treeContext:m,retryLane:1073741824},m=qa(18,null,null,0),m.stateNode=s,m.return=o,o.child=m,fa=o,ha=null,!0):!1;default:return!1}}function CR(o){return(o.mode&1)!==0&&(o.flags&128)===0}function AR(o){if(Nr){var s=ha;if(s){var m=s;if(!AQ(o,s)){if(CR(o))throw Error(a(418));s=bd(m.nextSibling);var S=fa;s&&AQ(o,s)?CQ(S,m):(o.flags=o.flags&-4097|2,Nr=!1,fa=o)}}else{if(CR(o))throw Error(a(418));o.flags=o.flags&-4097|2,Nr=!1,fa=o}}}function IQ(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;fa=o}function VT(o){if(o!==fa)return!1;if(!Nr)return IQ(o),Nr=!0,!1;var s;if((s=o.tag!==3)&&!(s=o.tag!==5)&&(s=o.type,s=s!=="head"&&s!=="body"&&!xR(o.type,o.memoizedProps)),s&&(s=ha)){if(CR(o))throw DQ(),Error(a(418));for(;s;)CQ(o,s),s=bd(s.nextSibling)}if(IQ(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,s=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(s===0){ha=bd(o.nextSibling);break e}s--}else m!=="$"&&m!=="$!"&&m!=="$?"||s++}o=o.nextSibling}ha=null}}else ha=fa?bd(o.stateNode.nextSibling):null;return!0}function DQ(){for(var o=ha;o;)o=bd(o.nextSibling)}function jg(){ha=fa=null,Nr=!1}function IR(o){Ds===null?Ds=[o]:Ds.push(o)}var bhe=Y.ReactCurrentBatchConfig;function Os(o,s){if(o&&o.defaultProps){s=ae({},s),o=o.defaultProps;for(var m in o)s[m]===void 0&&(s[m]=o[m]);return s}return s}var HT=_d(null),GT=null,Ug=null,DR=null;function OR(){DR=Ug=GT=null}function RR(o){var s=HT.current;Lr(HT),o._currentValue=s}function LR(o,s,m){for(;o!==null;){var S=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,S!==null&&(S.childLanes|=s)):S!==null&&(S.childLanes&s)!==s&&(S.childLanes|=s),o===m)break;o=o.return}}function Vg(o,s){GT=o,DR=Ug=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&s&&(Ko=!0),o.firstContext=null)}function Ha(o){var s=o._currentValue;if(DR!==o)if(o={context:o,memoizedValue:s,next:null},Ug===null){if(GT===null)throw Error(a(308));Ug=o,GT.dependencies={lanes:0,firstContext:o}}else Ug=Ug.next=o;return s}var wh=null;function zR(o){wh===null?wh=[o]:wh.push(o)}function OQ(o,s,m,S){var L=s.interleaved;return L===null?(m.next=m,zR(s)):(m.next=L.next,L.next=m),s.interleaved=m,Ou(o,S)}function Ou(o,s){o.lanes|=s;var m=o.alternate;for(m!==null&&(m.lanes|=s),m=o,o=o.return;o!==null;)o.childLanes|=s,m=o.alternate,m!==null&&(m.childLanes|=s),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Sd=!1;function NR(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function RQ(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Ru(o,s){return{eventTime:o,lane:s,tag:0,payload:null,callback:null,next:null}}function Ed(o,s,m){var S=o.updateQueue;if(S===null)return null;if(S=S.shared,ir&2){var L=S.pending;return L===null?s.next=s:(s.next=L.next,L.next=s),S.pending=s,Ou(o,m)}return L=S.interleaved,L===null?(s.next=s,zR(S)):(s.next=L.next,L.next=s),S.interleaved=s,Ou(o,m)}function WT(o,s,m){if(s=s.updateQueue,s!==null&&(s=s.shared,(m&4194240)!==0)){var S=s.lanes;S&=o.pendingLanes,m|=S,s.lanes=m,Q5(o,m)}}function LQ(o,s){var m=o.updateQueue,S=o.alternate;if(S!==null&&(S=S.updateQueue,m===S)){var L=null,U=null;if(m=m.firstBaseUpdate,m!==null){do{var ne={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};U===null?L=U=ne:U=U.next=ne,m=m.next}while(m!==null);U===null?L=U=s:U=U.next=s}else L=U=s;m={baseState:S.baseState,firstBaseUpdate:L,lastBaseUpdate:U,shared:S.shared,effects:S.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=s:o.next=s,m.lastBaseUpdate=s}function qT(o,s,m,S){var L=o.updateQueue;Sd=!1;var U=L.firstBaseUpdate,ne=L.lastBaseUpdate,we=L.shared.pending;if(we!==null){L.shared.pending=null;var Re=we,at=Re.next;Re.next=null,ne===null?U=at:ne.next=at,ne=Re;var Ct=o.alternate;Ct!==null&&(Ct=Ct.updateQueue,we=Ct.lastBaseUpdate,we!==ne&&(we===null?Ct.firstBaseUpdate=at:we.next=at,Ct.lastBaseUpdate=Re))}if(U!==null){var It=L.baseState;ne=0,Ct=at=Re=null,we=U;do{var Mt=we.lane,Zt=we.eventTime;if((S&Mt)===Mt){Ct!==null&&(Ct=Ct.next={eventTime:Zt,lane:0,tag:we.tag,payload:we.payload,callback:we.callback,next:null});e:{var rn=o,an=we;switch(Mt=s,Zt=m,an.tag){case 1:if(rn=an.payload,typeof rn=="function"){It=rn.call(Zt,It,Mt);break e}It=rn;break e;case 3:rn.flags=rn.flags&-65537|128;case 0:if(rn=an.payload,Mt=typeof rn=="function"?rn.call(Zt,It,Mt):rn,Mt==null)break e;It=ae({},It,Mt);break e;case 2:Sd=!0}}we.callback!==null&&we.lane!==0&&(o.flags|=64,Mt=L.effects,Mt===null?L.effects=[we]:Mt.push(we))}else Zt={eventTime:Zt,lane:Mt,tag:we.tag,payload:we.payload,callback:we.callback,next:null},Ct===null?(at=Ct=Zt,Re=It):Ct=Ct.next=Zt,ne|=Mt;if(we=we.next,we===null){if(we=L.shared.pending,we===null)break;Mt=we,we=Mt.next,Mt.next=null,L.lastBaseUpdate=Mt,L.shared.pending=null}}while(1);if(Ct===null&&(Re=It),L.baseState=Re,L.firstBaseUpdate=at,L.lastBaseUpdate=Ct,s=L.shared.interleaved,s!==null){L=s;do ne|=L.lane,L=L.next;while(L!==s)}else U===null&&(L.shared.lanes=0);kh|=ne,o.lanes=ne,o.memoizedState=It}}function zQ(o,s,m){if(o=s.effects,s.effects=null,o!==null)for(s=0;s<o.length;s++){var S=o[s],L=S.callback;if(L!==null){if(S.callback=null,S=m,typeof L!="function")throw Error(a(191,L));L.call(S)}}}var NQ=new n.Component().refs;function FR(o,s,m,S){s=o.memoizedState,m=m(S,s),m=m==null?s:ae({},s,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var KT={isMounted:function(o){return(o=o._reactInternals)?vh(o)===o:!1},enqueueSetState:function(o,s,m){o=o._reactInternals;var S=Ao(),L=Pd(o),U=Ru(S,L);U.payload=s,m!=null&&(U.callback=m),s=Ed(o,U,L),s!==null&&(zs(s,o,L,S),WT(s,o,L))},enqueueReplaceState:function(o,s,m){o=o._reactInternals;var S=Ao(),L=Pd(o),U=Ru(S,L);U.tag=1,U.payload=s,m!=null&&(U.callback=m),s=Ed(o,U,L),s!==null&&(zs(s,o,L,S),WT(s,o,L))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var m=Ao(),S=Pd(o),L=Ru(m,S);L.tag=2,s!=null&&(L.callback=s),s=Ed(o,L,S),s!==null&&(zs(s,o,S,m),WT(s,o,S))}};function FQ(o,s,m,S,L,U,ne){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(S,U,ne):s.prototype&&s.prototype.isPureReactComponent?!C_(m,S)||!C_(L,U):!0}function BQ(o,s,m){var S=!1,L=xd,U=s.contextType;return typeof U=="object"&&U!==null?U=Ha(U):(L=qo(s)?bh:so.current,S=s.contextTypes,U=(S=S!=null)?Ng(o,L):xd),s=new s(m,U),o.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,s.updater=KT,o.stateNode=s,s._reactInternals=o,S&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=L,o.__reactInternalMemoizedMaskedChildContext=U),s}function jQ(o,s,m,S){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(m,S),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(m,S),s.state!==o&&KT.enqueueReplaceState(s,s.state,null)}function BR(o,s,m,S){var L=o.stateNode;L.props=m,L.state=o.memoizedState,L.refs=NQ,NR(o);var U=s.contextType;typeof U=="object"&&U!==null?L.context=Ha(U):(U=qo(s)?bh:so.current,L.context=Ng(o,U)),L.state=o.memoizedState,U=s.getDerivedStateFromProps,typeof U=="function"&&(FR(o,s,U,m),L.state=o.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof L.getSnapshotBeforeUpdate=="function"||typeof L.UNSAFE_componentWillMount!="function"&&typeof L.componentWillMount!="function"||(s=L.state,typeof L.componentWillMount=="function"&&L.componentWillMount(),typeof L.UNSAFE_componentWillMount=="function"&&L.UNSAFE_componentWillMount(),s!==L.state&&KT.enqueueReplaceState(L,L.state,null),qT(o,m,L,S),L.state=o.memoizedState),typeof L.componentDidMount=="function"&&(o.flags|=4194308)}function z_(o,s,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(a(309));var S=m.stateNode}if(!S)throw Error(a(147,o));var L=S,U=""+o;return s!==null&&s.ref!==null&&typeof s.ref=="function"&&s.ref._stringRef===U?s.ref:(s=function(ne){var we=L.refs;we===NQ&&(we=L.refs={}),ne===null?delete we[U]:we[U]=ne},s._stringRef=U,s)}if(typeof o!="string")throw Error(a(284));if(!m._owner)throw Error(a(290,o))}return o}function XT(o,s){throw o=Object.prototype.toString.call(s),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o))}function UQ(o){var s=o._init;return s(o._payload)}function VQ(o){function s($e,ze){if(o){var Ye=$e.deletions;Ye===null?($e.deletions=[ze],$e.flags|=16):Ye.push(ze)}}function m($e,ze){if(!o)return null;for(;ze!==null;)s($e,ze),ze=ze.sibling;return null}function S($e,ze){for($e=new Map;ze!==null;)ze.key!==null?$e.set(ze.key,ze):$e.set(ze.index,ze),ze=ze.sibling;return $e}function L($e,ze){return $e=Ad($e,ze),$e.index=0,$e.sibling=null,$e}function U($e,ze,Ye){return $e.index=Ye,o?(Ye=$e.alternate,Ye!==null?(Ye=Ye.index,Ye<ze?($e.flags|=2,ze):Ye):($e.flags|=2,ze)):($e.flags|=1048576,ze)}function ne($e){return o&&$e.alternate===null&&($e.flags|=2),$e}function we($e,ze,Ye,Ft){return ze===null||ze.tag!==6?(ze=x4(Ye,$e.mode,Ft),ze.return=$e,ze):(ze=L(ze,Ye),ze.return=$e,ze)}function Re($e,ze,Ye,Ft){var sn=Ye.type;return sn===ke?Ct($e,ze,Ye.props.children,Ft,Ye.key):ze!==null&&(ze.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===Te&&UQ(sn)===ze.type)?(Ft=L(ze,Ye.props),Ft.ref=z_($e,ze,Ye),Ft.return=$e,Ft):(Ft=hM(Ye.type,Ye.key,Ye.props,null,$e.mode,Ft),Ft.ref=z_($e,ze,Ye),Ft.return=$e,Ft)}function at($e,ze,Ye,Ft){return ze===null||ze.tag!==4||ze.stateNode.containerInfo!==Ye.containerInfo||ze.stateNode.implementation!==Ye.implementation?(ze=w4(Ye,$e.mode,Ft),ze.return=$e,ze):(ze=L(ze,Ye.children||[]),ze.return=$e,ze)}function Ct($e,ze,Ye,Ft,sn){return ze===null||ze.tag!==7?(ze=Ch(Ye,$e.mode,Ft,sn),ze.return=$e,ze):(ze=L(ze,Ye),ze.return=$e,ze)}function It($e,ze,Ye){if(typeof ze=="string"&&ze!==""||typeof ze=="number")return ze=x4(""+ze,$e.mode,Ye),ze.return=$e,ze;if(typeof ze=="object"&&ze!==null){switch(ze.$$typeof){case re:return Ye=hM(ze.type,ze.key,ze.props,null,$e.mode,Ye),Ye.ref=z_($e,null,ze),Ye.return=$e,Ye;case ye:return ze=w4(ze,$e.mode,Ye),ze.return=$e,ze;case Te:var Ft=ze._init;return It($e,Ft(ze._payload),Ye)}if(xt(ze)||pt(ze))return ze=Ch(ze,$e.mode,Ye,null),ze.return=$e,ze;XT($e,ze)}return null}function Mt($e,ze,Ye,Ft){var sn=ze!==null?ze.key:null;if(typeof Ye=="string"&&Ye!==""||typeof Ye=="number")return sn!==null?null:we($e,ze,""+Ye,Ft);if(typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case re:return Ye.key===sn?Re($e,ze,Ye,Ft):null;case ye:return Ye.key===sn?at($e,ze,Ye,Ft):null;case Te:return sn=Ye._init,Mt($e,ze,sn(Ye._payload),Ft)}if(xt(Ye)||pt(Ye))return sn!==null?null:Ct($e,ze,Ye,Ft,null);XT($e,Ye)}return null}function Zt($e,ze,Ye,Ft,sn){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number")return $e=$e.get(Ye)||null,we(ze,$e,""+Ft,sn);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case re:return $e=$e.get(Ft.key===null?Ye:Ft.key)||null,Re(ze,$e,Ft,sn);case ye:return $e=$e.get(Ft.key===null?Ye:Ft.key)||null,at(ze,$e,Ft,sn);case Te:var yn=Ft._init;return Zt($e,ze,Ye,yn(Ft._payload),sn)}if(xt(Ft)||pt(Ft))return $e=$e.get(Ye)||null,Ct(ze,$e,Ft,sn,null);XT(ze,Ft)}return null}function rn($e,ze,Ye,Ft){for(var sn=null,yn=null,bn=ze,Pn=ze=0,Ri=null;bn!==null&&Pn<Ye.length;Pn++){bn.index>Pn?(Ri=bn,bn=null):Ri=bn.sibling;var sr=Mt($e,bn,Ye[Pn],Ft);if(sr===null){bn===null&&(bn=Ri);break}o&&bn&&sr.alternate===null&&s($e,bn),ze=U(sr,ze,Pn),yn===null?sn=sr:yn.sibling=sr,yn=sr,bn=Ri}if(Pn===Ye.length)return m($e,bn),Nr&&xh($e,Pn),sn;if(bn===null){for(;Pn<Ye.length;Pn++)bn=It($e,Ye[Pn],Ft),bn!==null&&(ze=U(bn,ze,Pn),yn===null?sn=bn:yn.sibling=bn,yn=bn);return Nr&&xh($e,Pn),sn}for(bn=S($e,bn);Pn<Ye.length;Pn++)Ri=Zt(bn,$e,Pn,Ye[Pn],Ft),Ri!==null&&(o&&Ri.alternate!==null&&bn.delete(Ri.key===null?Pn:Ri.key),ze=U(Ri,ze,Pn),yn===null?sn=Ri:yn.sibling=Ri,yn=Ri);return o&&bn.forEach(function(Id){return s($e,Id)}),Nr&&xh($e,Pn),sn}function an($e,ze,Ye,Ft){var sn=pt(Ye);if(typeof sn!="function")throw Error(a(150));if(Ye=sn.call(Ye),Ye==null)throw Error(a(151));for(var yn=sn=null,bn=ze,Pn=ze=0,Ri=null,sr=Ye.next();bn!==null&&!sr.done;Pn++,sr=Ye.next()){bn.index>Pn?(Ri=bn,bn=null):Ri=bn.sibling;var Id=Mt($e,bn,sr.value,Ft);if(Id===null){bn===null&&(bn=Ri);break}o&&bn&&Id.alternate===null&&s($e,bn),ze=U(Id,ze,Pn),yn===null?sn=Id:yn.sibling=Id,yn=Id,bn=Ri}if(sr.done)return m($e,bn),Nr&&xh($e,Pn),sn;if(bn===null){for(;!sr.done;Pn++,sr=Ye.next())sr=It($e,sr.value,Ft),sr!==null&&(ze=U(sr,ze,Pn),yn===null?sn=sr:yn.sibling=sr,yn=sr);return Nr&&xh($e,Pn),sn}for(bn=S($e,bn);!sr.done;Pn++,sr=Ye.next())sr=Zt(bn,$e,Pn,sr.value,Ft),sr!==null&&(o&&sr.alternate!==null&&bn.delete(sr.key===null?Pn:sr.key),ze=U(sr,ze,Pn),yn===null?sn=sr:yn.sibling=sr,yn=sr);return o&&bn.forEach(function(Jhe){return s($e,Jhe)}),Nr&&xh($e,Pn),sn}function oi($e,ze,Ye,Ft){if(typeof Ye=="object"&&Ye!==null&&Ye.type===ke&&Ye.key===null&&(Ye=Ye.props.children),typeof Ye=="object"&&Ye!==null){switch(Ye.$$typeof){case re:e:{for(var sn=Ye.key,yn=ze;yn!==null;){if(yn.key===sn){if(sn=Ye.type,sn===ke){if(yn.tag===7){m($e,yn.sibling),ze=L(yn,Ye.props.children),ze.return=$e,$e=ze;break e}}else if(yn.elementType===sn||typeof sn=="object"&&sn!==null&&sn.$$typeof===Te&&UQ(sn)===yn.type){m($e,yn.sibling),ze=L(yn,Ye.props),ze.ref=z_($e,yn,Ye),ze.return=$e,$e=ze;break e}m($e,yn);break}else s($e,yn);yn=yn.sibling}Ye.type===ke?(ze=Ch(Ye.props.children,$e.mode,Ft,Ye.key),ze.return=$e,$e=ze):(Ft=hM(Ye.type,Ye.key,Ye.props,null,$e.mode,Ft),Ft.ref=z_($e,ze,Ye),Ft.return=$e,$e=Ft)}return ne($e);case ye:e:{for(yn=Ye.key;ze!==null;){if(ze.key===yn)if(ze.tag===4&&ze.stateNode.containerInfo===Ye.containerInfo&&ze.stateNode.implementation===Ye.implementation){m($e,ze.sibling),ze=L(ze,Ye.children||[]),ze.return=$e,$e=ze;break e}else{m($e,ze);break}else s($e,ze);ze=ze.sibling}ze=w4(Ye,$e.mode,Ft),ze.return=$e,$e=ze}return ne($e);case Te:return yn=Ye._init,oi($e,ze,yn(Ye._payload),Ft)}if(xt(Ye))return rn($e,ze,Ye,Ft);if(pt(Ye))return an($e,ze,Ye,Ft);XT($e,Ye)}return typeof Ye=="string"&&Ye!==""||typeof Ye=="number"?(Ye=""+Ye,ze!==null&&ze.tag===6?(m($e,ze.sibling),ze=L(ze,Ye),ze.return=$e,$e=ze):(m($e,ze),ze=x4(Ye,$e.mode,Ft),ze.return=$e,$e=ze),ne($e)):m($e,ze)}return oi}var Hg=VQ(!0),HQ=VQ(!1),N_={},Al=_d(N_),F_=_d(N_),B_=_d(N_);function Sh(o){if(o===N_)throw Error(a(174));return o}function jR(o,s){switch(Ar(B_,s),Ar(F_,o),Ar(Al,N_),o=s.nodeType,o){case 9:case 11:s=(s=s.documentElement)?s.namespaceURI:Mn(null,"");break;default:o=o===8?s.parentNode:s,s=o.namespaceURI||null,o=o.tagName,s=Mn(s,o)}Lr(Al),Ar(Al,s)}function Gg(){Lr(Al),Lr(F_),Lr(B_)}function GQ(o){Sh(B_.current);var s=Sh(Al.current),m=Mn(s,o.type);s!==m&&(Ar(F_,o),Ar(Al,m))}function UR(o){F_.current===o&&(Lr(Al),Lr(F_))}var Gr=_d(0);function $T(o){for(var s=o;s!==null;){if(s.tag===13){var m=s.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return s}else if(s.tag===19&&s.memoizedProps.revealOrder!==void 0){if(s.flags&128)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var VR=[];function HR(){for(var o=0;o<VR.length;o++)VR[o]._workInProgressVersionPrimary=null;VR.length=0}var ZT=Y.ReactCurrentDispatcher,GR=Y.ReactCurrentBatchConfig,Eh=0,Wr=null,Si=null,Di=null,YT=!1,j_=!1,U_=0,_he=0;function lo(){throw Error(a(321))}function WR(o,s){if(s===null)return!1;for(var m=0;m<s.length&&m<o.length;m++)if(!Is(o[m],s[m]))return!1;return!0}function qR(o,s,m,S,L,U){if(Eh=U,Wr=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,ZT.current=o===null||o.memoizedState===null?Ehe:khe,o=m(S,L),j_){U=0;do{if(j_=!1,U_=0,25<=U)throw Error(a(301));U+=1,Di=Si=null,s.updateQueue=null,ZT.current=The,o=m(S,L)}while(j_)}if(ZT.current=eM,s=Si!==null&&Si.next!==null,Eh=0,Di=Si=Wr=null,YT=!1,s)throw Error(a(300));return o}function KR(){var o=U_!==0;return U_=0,o}function Il(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Wr.memoizedState=Di=o:Di=Di.next=o,Di}function Ga(){if(Si===null){var o=Wr.alternate;o=o!==null?o.memoizedState:null}else o=Si.next;var s=Di===null?Wr.memoizedState:Di.next;if(s!==null)Di=s,Si=o;else{if(o===null)throw Error(a(310));Si=o,o={memoizedState:Si.memoizedState,baseState:Si.baseState,baseQueue:Si.baseQueue,queue:Si.queue,next:null},Di===null?Wr.memoizedState=Di=o:Di=Di.next=o}return Di}function V_(o,s){return typeof s=="function"?s(o):s}function XR(o){var s=Ga(),m=s.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var S=Si,L=S.baseQueue,U=m.pending;if(U!==null){if(L!==null){var ne=L.next;L.next=U.next,U.next=ne}S.baseQueue=L=U,m.pending=null}if(L!==null){U=L.next,S=S.baseState;var we=ne=null,Re=null,at=U;do{var Ct=at.lane;if((Eh&Ct)===Ct)Re!==null&&(Re=Re.next={lane:0,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),S=at.hasEagerState?at.eagerState:o(S,at.action);else{var It={lane:Ct,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null};Re===null?(we=Re=It,ne=S):Re=Re.next=It,Wr.lanes|=Ct,kh|=Ct}at=at.next}while(at!==null&&at!==U);Re===null?ne=S:Re.next=we,Is(S,s.memoizedState)||(Ko=!0),s.memoizedState=S,s.baseState=ne,s.baseQueue=Re,m.lastRenderedState=S}if(o=m.interleaved,o!==null){L=o;do U=L.lane,Wr.lanes|=U,kh|=U,L=L.next;while(L!==o)}else L===null&&(m.lanes=0);return[s.memoizedState,m.dispatch]}function $R(o){var s=Ga(),m=s.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var S=m.dispatch,L=m.pending,U=s.memoizedState;if(L!==null){m.pending=null;var ne=L=L.next;do U=o(U,ne.action),ne=ne.next;while(ne!==L);Is(U,s.memoizedState)||(Ko=!0),s.memoizedState=U,s.baseQueue===null&&(s.baseState=U),m.lastRenderedState=U}return[U,S]}function WQ(){}function qQ(o,s){var m=Wr,S=Ga(),L=s(),U=!Is(S.memoizedState,L);if(U&&(S.memoizedState=L,Ko=!0),S=S.queue,ZR($Q.bind(null,m,S,o),[o]),S.getSnapshot!==s||U||Di!==null&&Di.memoizedState.tag&1){if(m.flags|=2048,H_(9,XQ.bind(null,m,S,L,s),void 0,null),Oi===null)throw Error(a(349));Eh&30||KQ(m,s,L)}return L}function KQ(o,s,m){o.flags|=16384,o={getSnapshot:s,value:m},s=Wr.updateQueue,s===null?(s={lastEffect:null,stores:null},Wr.updateQueue=s,s.stores=[o]):(m=s.stores,m===null?s.stores=[o]:m.push(o))}function XQ(o,s,m,S){s.value=m,s.getSnapshot=S,ZQ(s)&&YQ(o)}function $Q(o,s,m){return m(function(){ZQ(s)&&YQ(o)})}function ZQ(o){var s=o.getSnapshot;o=o.value;try{var m=s();return!Is(o,m)}catch{return!0}}function YQ(o){var s=Ou(o,1);s!==null&&zs(s,o,1,-1)}function JQ(o){var s=Il();return typeof o=="function"&&(o=o()),s.memoizedState=s.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:V_,lastRenderedState:o},s.queue=o,o=o.dispatch=She.bind(null,Wr,o),[s.memoizedState,o]}function H_(o,s,m,S){return o={tag:o,create:s,destroy:m,deps:S,next:null},s=Wr.updateQueue,s===null?(s={lastEffect:null,stores:null},Wr.updateQueue=s,s.lastEffect=o.next=o):(m=s.lastEffect,m===null?s.lastEffect=o.next=o:(S=m.next,m.next=o,o.next=S,s.lastEffect=o)),o}function QQ(){return Ga().memoizedState}function JT(o,s,m,S){var L=Il();Wr.flags|=o,L.memoizedState=H_(1|s,m,void 0,S===void 0?null:S)}function QT(o,s,m,S){var L=Ga();S=S===void 0?null:S;var U=void 0;if(Si!==null){var ne=Si.memoizedState;if(U=ne.destroy,S!==null&&WR(S,ne.deps)){L.memoizedState=H_(s,m,U,S);return}}Wr.flags|=o,L.memoizedState=H_(1|s,m,U,S)}function eee(o,s){return JT(8390656,8,o,s)}function ZR(o,s){return QT(2048,8,o,s)}function tee(o,s){return QT(4,2,o,s)}function nee(o,s){return QT(4,4,o,s)}function ree(o,s){if(typeof s=="function")return o=o(),s(o),function(){s(null)};if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function iee(o,s,m){return m=m!=null?m.concat([o]):null,QT(4,4,ree.bind(null,s,o),m)}function YR(){}function oee(o,s){var m=Ga();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&WR(s,S[1])?S[0]:(m.memoizedState=[o,s],o)}function aee(o,s){var m=Ga();s=s===void 0?null:s;var S=m.memoizedState;return S!==null&&s!==null&&WR(s,S[1])?S[0]:(o=o(),m.memoizedState=[o,s],o)}function see(o,s,m){return Eh&21?(Is(m,s)||(m=DJ(),Wr.lanes|=m,kh|=m,o.baseState=!0),s):(o.baseState&&(o.baseState=!1,Ko=!0),o.memoizedState=m)}function xhe(o,s){var m=mr;mr=m!==0&&4>m?m:4,o(!0);var S=GR.transition;GR.transition={};try{o(!1),s()}finally{mr=m,GR.transition=S}}function lee(){return Ga().memoizedState}function whe(o,s,m){var S=Pd(o);if(m={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null},uee(o))cee(s,m);else if(m=OQ(o,s,m,S),m!==null){var L=Ao();zs(m,o,S,L),dee(m,s,S)}}function She(o,s,m){var S=Pd(o),L={lane:S,action:m,hasEagerState:!1,eagerState:null,next:null};if(uee(o))cee(s,L);else{var U=o.alternate;if(o.lanes===0&&(U===null||U.lanes===0)&&(U=s.lastRenderedReducer,U!==null))try{var ne=s.lastRenderedState,we=U(ne,m);if(L.hasEagerState=!0,L.eagerState=we,Is(we,ne)){var Re=s.interleaved;Re===null?(L.next=L,zR(s)):(L.next=Re.next,Re.next=L),s.interleaved=L;return}}catch{}finally{}m=OQ(o,s,L,S),m!==null&&(L=Ao(),zs(m,o,S,L),dee(m,s,S))}}function uee(o){var s=o.alternate;return o===Wr||s!==null&&s===Wr}function cee(o,s){j_=YT=!0;var m=o.pending;m===null?s.next=s:(s.next=m.next,m.next=s),o.pending=s}function dee(o,s,m){if(m&4194240){var S=s.lanes;S&=o.pendingLanes,m|=S,s.lanes=m,Q5(o,m)}}var eM={readContext:Ha,useCallback:lo,useContext:lo,useEffect:lo,useImperativeHandle:lo,useInsertionEffect:lo,useLayoutEffect:lo,useMemo:lo,useReducer:lo,useRef:lo,useState:lo,useDebugValue:lo,useDeferredValue:lo,useTransition:lo,useMutableSource:lo,useSyncExternalStore:lo,useId:lo,unstable_isNewReconciler:!1},Ehe={readContext:Ha,useCallback:function(o,s){return Il().memoizedState=[o,s===void 0?null:s],o},useContext:Ha,useEffect:eee,useImperativeHandle:function(o,s,m){return m=m!=null?m.concat([o]):null,JT(4194308,4,ree.bind(null,s,o),m)},useLayoutEffect:function(o,s){return JT(4194308,4,o,s)},useInsertionEffect:function(o,s){return JT(4,2,o,s)},useMemo:function(o,s){var m=Il();return s=s===void 0?null:s,o=o(),m.memoizedState=[o,s],o},useReducer:function(o,s,m){var S=Il();return s=m!==void 0?m(s):s,S.memoizedState=S.baseState=s,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:s},S.queue=o,o=o.dispatch=whe.bind(null,Wr,o),[S.memoizedState,o]},useRef:function(o){var s=Il();return o={current:o},s.memoizedState=o},useState:JQ,useDebugValue:YR,useDeferredValue:function(o){return Il().memoizedState=o},useTransition:function(){var o=JQ(!1),s=o[0];return o=xhe.bind(null,o[1]),Il().memoizedState=o,[s,o]},useMutableSource:function(){},useSyncExternalStore:function(o,s,m){var S=Wr,L=Il();if(Nr){if(m===void 0)throw Error(a(407));m=m()}else{if(m=s(),Oi===null)throw Error(a(349));Eh&30||KQ(S,s,m)}L.memoizedState=m;var U={value:m,getSnapshot:s};return L.queue=U,eee($Q.bind(null,S,U,o),[o]),S.flags|=2048,H_(9,XQ.bind(null,S,U,m,s),void 0,null),m},useId:function(){var o=Il(),s=Oi.identifierPrefix;if(Nr){var m=Du,S=Iu;m=(S&~(1<<32-As(S)-1)).toString(32)+m,s=":"+s+"R"+m,m=U_++,0<m&&(s+="H"+m.toString(32)),s+=":"}else m=_he++,s=":"+s+"r"+m.toString(32)+":";return o.memoizedState=s},unstable_isNewReconciler:!1},khe={readContext:Ha,useCallback:oee,useContext:Ha,useEffect:ZR,useImperativeHandle:iee,useInsertionEffect:tee,useLayoutEffect:nee,useMemo:aee,useReducer:XR,useRef:QQ,useState:function(){return XR(V_)},useDebugValue:YR,useDeferredValue:function(o){var s=Ga();return see(s,Si.memoizedState,o)},useTransition:function(){var o=XR(V_)[0],s=Ga().memoizedState;return[o,s]},useMutableSource:WQ,useSyncExternalStore:qQ,useId:lee,unstable_isNewReconciler:!1},The={readContext:Ha,useCallback:oee,useContext:Ha,useEffect:ZR,useImperativeHandle:iee,useInsertionEffect:tee,useLayoutEffect:nee,useMemo:aee,useReducer:$R,useRef:QQ,useState:function(){return $R(V_)},useDebugValue:YR,useDeferredValue:function(o){var s=Ga();return Si===null?s.memoizedState=o:see(s,Si.memoizedState,o)},useTransition:function(){var o=$R(V_)[0],s=Ga().memoizedState;return[o,s]},useMutableSource:WQ,useSyncExternalStore:qQ,useId:lee,unstable_isNewReconciler:!1};function Wg(o,s){try{var m="",S=s;do m+=Fe(S),S=S.return;while(S);var L=m}catch(U){L=`
Error generating stack: `+U.message+`
`+U.stack}return{value:o,source:s,stack:L,digest:null}}function JR(o,s,m){return{value:o,source:null,stack:m!=null?m:null,digest:s!=null?s:null}}function QR(o,s){try{console.error(s.value)}catch(m){setTimeout(function(){throw m})}}var Mhe=typeof WeakMap=="function"?WeakMap:Map;function fee(o,s,m){m=Ru(-1,m),m.tag=3,m.payload={element:null};var S=s.value;return m.callback=function(){sM||(sM=!0,h4=S),QR(o,s)},m}function hee(o,s,m){m=Ru(-1,m),m.tag=3;var S=o.type.getDerivedStateFromError;if(typeof S=="function"){var L=s.value;m.payload=function(){return S(L)},m.callback=function(){QR(o,s)}}var U=o.stateNode;return U!==null&&typeof U.componentDidCatch=="function"&&(m.callback=function(){QR(o,s),typeof S!="function"&&(Td===null?Td=new Set([this]):Td.add(this));var ne=s.stack;this.componentDidCatch(s.value,{componentStack:ne!==null?ne:""})}),m}function pee(o,s,m){var S=o.pingCache;if(S===null){S=o.pingCache=new Mhe;var L=new Set;S.set(s,L)}else L=S.get(s),L===void 0&&(L=new Set,S.set(s,L));L.has(m)||(L.add(m),o=Uhe.bind(null,o,s,m),s.then(o,o))}function mee(o){do{var s;if((s=o.tag===13)&&(s=o.memoizedState,s=s!==null?s.dehydrated!==null:!0),s)return o;o=o.return}while(o!==null);return null}function gee(o,s,m,S,L){return o.mode&1?(o.flags|=65536,o.lanes=L,o):(o===s?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(s=Ru(-1,1),s.tag=2,Ed(m,s,1))),m.lanes|=1),o)}var Phe=Y.ReactCurrentOwner,Ko=!1;function Co(o,s,m,S){s.child=o===null?HQ(s,null,m,S):Hg(s,o.child,m,S)}function vee(o,s,m,S,L){m=m.render;var U=s.ref;return Vg(s,L),S=qR(o,s,m,S,U,L),m=KR(),o!==null&&!Ko?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~L,Lu(o,s,L)):(Nr&&m&&MR(s),s.flags|=1,Co(o,s,S,L),s.child)}function yee(o,s,m,S,L){if(o===null){var U=m.type;return typeof U=="function"&&!_4(U)&&U.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(s.tag=15,s.type=U,bee(o,s,U,S,L)):(o=hM(m.type,null,S,s,s.mode,L),o.ref=s.ref,o.return=s,s.child=o)}if(U=o.child,!(o.lanes&L)){var ne=U.memoizedProps;if(m=m.compare,m=m!==null?m:C_,m(ne,S)&&o.ref===s.ref)return Lu(o,s,L)}return s.flags|=1,o=Ad(U,S),o.ref=s.ref,o.return=s,s.child=o}function bee(o,s,m,S,L){if(o!==null){var U=o.memoizedProps;if(C_(U,S)&&o.ref===s.ref)if(Ko=!1,s.pendingProps=S=U,(o.lanes&L)!==0)o.flags&131072&&(Ko=!0);else return s.lanes=o.lanes,Lu(o,s,L)}return e4(o,s,m,S,L)}function _ee(o,s,m){var S=s.pendingProps,L=S.children,U=o!==null?o.memoizedState:null;if(S.mode==="hidden")if(!(s.mode&1))s.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ar(Kg,pa),pa|=m;else{if(!(m&1073741824))return o=U!==null?U.baseLanes|m:m,s.lanes=s.childLanes=1073741824,s.memoizedState={baseLanes:o,cachePool:null,transitions:null},s.updateQueue=null,Ar(Kg,pa),pa|=o,null;s.memoizedState={baseLanes:0,cachePool:null,transitions:null},S=U!==null?U.baseLanes:m,Ar(Kg,pa),pa|=S}else U!==null?(S=U.baseLanes|m,s.memoizedState=null):S=m,Ar(Kg,pa),pa|=S;return Co(o,s,L,m),s.child}function xee(o,s){var m=s.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(s.flags|=512,s.flags|=2097152)}function e4(o,s,m,S,L){var U=qo(m)?bh:so.current;return U=Ng(s,U),Vg(s,L),m=qR(o,s,m,S,U,L),S=KR(),o!==null&&!Ko?(s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~L,Lu(o,s,L)):(Nr&&S&&MR(s),s.flags|=1,Co(o,s,m,L),s.child)}function wee(o,s,m,S,L){if(qo(m)){var U=!0;FT(s)}else U=!1;if(Vg(s,L),s.stateNode===null)nM(o,s),BQ(s,m,S),BR(s,m,S,L),S=!0;else if(o===null){var ne=s.stateNode,we=s.memoizedProps;ne.props=we;var Re=ne.context,at=m.contextType;typeof at=="object"&&at!==null?at=Ha(at):(at=qo(m)?bh:so.current,at=Ng(s,at));var Ct=m.getDerivedStateFromProps,It=typeof Ct=="function"||typeof ne.getSnapshotBeforeUpdate=="function";It||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(we!==S||Re!==at)&&jQ(s,ne,S,at),Sd=!1;var Mt=s.memoizedState;ne.state=Mt,qT(s,S,ne,L),Re=s.memoizedState,we!==S||Mt!==Re||Wo.current||Sd?(typeof Ct=="function"&&(FR(s,m,Ct,S),Re=s.memoizedState),(we=Sd||FQ(s,m,we,S,Mt,Re,at))?(It||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(s.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=S,s.memoizedState=Re),ne.props=S,ne.state=Re,ne.context=at,S=we):(typeof ne.componentDidMount=="function"&&(s.flags|=4194308),S=!1)}else{ne=s.stateNode,RQ(o,s),we=s.memoizedProps,at=s.type===s.elementType?we:Os(s.type,we),ne.props=at,It=s.pendingProps,Mt=ne.context,Re=m.contextType,typeof Re=="object"&&Re!==null?Re=Ha(Re):(Re=qo(m)?bh:so.current,Re=Ng(s,Re));var Zt=m.getDerivedStateFromProps;(Ct=typeof Zt=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(we!==It||Mt!==Re)&&jQ(s,ne,S,Re),Sd=!1,Mt=s.memoizedState,ne.state=Mt,qT(s,S,ne,L);var rn=s.memoizedState;we!==It||Mt!==rn||Wo.current||Sd?(typeof Zt=="function"&&(FR(s,m,Zt,S),rn=s.memoizedState),(at=Sd||FQ(s,m,at,S,Mt,rn,Re)||!1)?(Ct||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(S,rn,Re),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(S,rn,Re)),typeof ne.componentDidUpdate=="function"&&(s.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof ne.componentDidUpdate!="function"||we===o.memoizedProps&&Mt===o.memoizedState||(s.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||we===o.memoizedProps&&Mt===o.memoizedState||(s.flags|=1024),s.memoizedProps=S,s.memoizedState=rn),ne.props=S,ne.state=rn,ne.context=Re,S=at):(typeof ne.componentDidUpdate!="function"||we===o.memoizedProps&&Mt===o.memoizedState||(s.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||we===o.memoizedProps&&Mt===o.memoizedState||(s.flags|=1024),S=!1)}return t4(o,s,m,S,U,L)}function t4(o,s,m,S,L,U){xee(o,s);var ne=(s.flags&128)!==0;if(!S&&!ne)return L&&TQ(s,m,!1),Lu(o,s,U);S=s.stateNode,Phe.current=s;var we=ne&&typeof m.getDerivedStateFromError!="function"?null:S.render();return s.flags|=1,o!==null&&ne?(s.child=Hg(s,o.child,null,U),s.child=Hg(s,null,we,U)):Co(o,s,we,U),s.memoizedState=S.state,L&&TQ(s,m,!0),s.child}function See(o){var s=o.stateNode;s.pendingContext?EQ(o,s.pendingContext,s.pendingContext!==s.context):s.context&&EQ(o,s.context,!1),jR(o,s.containerInfo)}function Eee(o,s,m,S,L){return jg(),IR(L),s.flags|=256,Co(o,s,m,S),s.child}var n4={dehydrated:null,treeContext:null,retryLane:0};function r4(o){return{baseLanes:o,cachePool:null,transitions:null}}function kee(o,s,m){var S=s.pendingProps,L=Gr.current,U=!1,ne=(s.flags&128)!==0,we;if((we=ne)||(we=o!==null&&o.memoizedState===null?!1:(L&2)!==0),we?(U=!0,s.flags&=-129):(o===null||o.memoizedState!==null)&&(L|=1),Ar(Gr,L&1),o===null)return AR(s),o=s.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(s.mode&1?o.data==="$!"?s.lanes=8:s.lanes=1073741824:s.lanes=1,null):(ne=S.children,o=S.fallback,U?(S=s.mode,U=s.child,ne={mode:"hidden",children:ne},!(S&1)&&U!==null?(U.childLanes=0,U.pendingProps=ne):U=pM(ne,S,0,null),o=Ch(o,S,m,null),U.return=s,o.return=s,U.sibling=o,s.child=U,s.child.memoizedState=r4(m),s.memoizedState=n4,o):i4(s,ne));if(L=o.memoizedState,L!==null&&(we=L.dehydrated,we!==null))return Che(o,s,ne,S,we,L,m);if(U){U=S.fallback,ne=s.mode,L=o.child,we=L.sibling;var Re={mode:"hidden",children:S.children};return!(ne&1)&&s.child!==L?(S=s.child,S.childLanes=0,S.pendingProps=Re,s.deletions=null):(S=Ad(L,Re),S.subtreeFlags=L.subtreeFlags&14680064),we!==null?U=Ad(we,U):(U=Ch(U,ne,m,null),U.flags|=2),U.return=s,S.return=s,S.sibling=U,s.child=S,S=U,U=s.child,ne=o.child.memoizedState,ne=ne===null?r4(m):{baseLanes:ne.baseLanes|m,cachePool:null,transitions:ne.transitions},U.memoizedState=ne,U.childLanes=o.childLanes&~m,s.memoizedState=n4,S}return U=o.child,o=U.sibling,S=Ad(U,{mode:"visible",children:S.children}),!(s.mode&1)&&(S.lanes=m),S.return=s,S.sibling=null,o!==null&&(m=s.deletions,m===null?(s.deletions=[o],s.flags|=16):m.push(o)),s.child=S,s.memoizedState=null,S}function i4(o,s){return s=pM({mode:"visible",children:s},o.mode,0,null),s.return=o,o.child=s}function tM(o,s,m,S){return S!==null&&IR(S),Hg(s,o.child,null,m),o=i4(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function Che(o,s,m,S,L,U,ne){if(m)return s.flags&256?(s.flags&=-257,S=JR(Error(a(422))),tM(o,s,ne,S)):s.memoizedState!==null?(s.child=o.child,s.flags|=128,null):(U=S.fallback,L=s.mode,S=pM({mode:"visible",children:S.children},L,0,null),U=Ch(U,L,ne,null),U.flags|=2,S.return=s,U.return=s,S.sibling=U,s.child=S,s.mode&1&&Hg(s,o.child,null,ne),s.child.memoizedState=r4(ne),s.memoizedState=n4,U);if(!(s.mode&1))return tM(o,s,ne,null);if(L.data==="$!"){if(S=L.nextSibling&&L.nextSibling.dataset,S)var we=S.dgst;return S=we,U=Error(a(419)),S=JR(U,S,void 0),tM(o,s,ne,S)}if(we=(ne&o.childLanes)!==0,Ko||we){if(S=Oi,S!==null){switch(ne&-ne){case 4:L=2;break;case 16:L=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:L=32;break;case 536870912:L=268435456;break;default:L=0}L=L&(S.suspendedLanes|ne)?0:L,L!==0&&L!==U.retryLane&&(U.retryLane=L,Ou(o,L),zs(S,o,L,-1))}return b4(),S=JR(Error(a(421))),tM(o,s,ne,S)}return L.data==="$?"?(s.flags|=128,s.child=o.child,s=Vhe.bind(null,o),L._reactRetry=s,null):(o=U.treeContext,ha=bd(L.nextSibling),fa=s,Nr=!0,Ds=null,o!==null&&(Ua[Va++]=Iu,Ua[Va++]=Du,Ua[Va++]=_h,Iu=o.id,Du=o.overflow,_h=s),s=i4(s,S.children),s.flags|=4096,s)}function Tee(o,s,m){o.lanes|=s;var S=o.alternate;S!==null&&(S.lanes|=s),LR(o.return,s,m)}function o4(o,s,m,S,L){var U=o.memoizedState;U===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:S,tail:m,tailMode:L}:(U.isBackwards=s,U.rendering=null,U.renderingStartTime=0,U.last=S,U.tail=m,U.tailMode=L)}function Mee(o,s,m){var S=s.pendingProps,L=S.revealOrder,U=S.tail;if(Co(o,s,S.children,m),S=Gr.current,S&2)S=S&1|2,s.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Tee(o,m,s);else if(o.tag===19)Tee(o,m,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}S&=1}if(Ar(Gr,S),!(s.mode&1))s.memoizedState=null;else switch(L){case"forwards":for(m=s.child,L=null;m!==null;)o=m.alternate,o!==null&&$T(o)===null&&(L=m),m=m.sibling;m=L,m===null?(L=s.child,s.child=null):(L=m.sibling,m.sibling=null),o4(s,!1,L,m,U);break;case"backwards":for(m=null,L=s.child,s.child=null;L!==null;){if(o=L.alternate,o!==null&&$T(o)===null){s.child=L;break}o=L.sibling,L.sibling=m,m=L,L=o}o4(s,!0,m,null,U);break;case"together":o4(s,!1,null,null,void 0);break;default:s.memoizedState=null}return s.child}function nM(o,s){!(s.mode&1)&&o!==null&&(o.alternate=null,s.alternate=null,s.flags|=2)}function Lu(o,s,m){if(o!==null&&(s.dependencies=o.dependencies),kh|=s.lanes,!(m&s.childLanes))return null;if(o!==null&&s.child!==o.child)throw Error(a(153));if(s.child!==null){for(o=s.child,m=Ad(o,o.pendingProps),s.child=m,m.return=s;o.sibling!==null;)o=o.sibling,m=m.sibling=Ad(o,o.pendingProps),m.return=s;m.sibling=null}return s.child}function Ahe(o,s,m){switch(s.tag){case 3:See(s),jg();break;case 5:GQ(s);break;case 1:qo(s.type)&&FT(s);break;case 4:jR(s,s.stateNode.containerInfo);break;case 10:var S=s.type._context,L=s.memoizedProps.value;Ar(HT,S._currentValue),S._currentValue=L;break;case 13:if(S=s.memoizedState,S!==null)return S.dehydrated!==null?(Ar(Gr,Gr.current&1),s.flags|=128,null):m&s.child.childLanes?kee(o,s,m):(Ar(Gr,Gr.current&1),o=Lu(o,s,m),o!==null?o.sibling:null);Ar(Gr,Gr.current&1);break;case 19:if(S=(m&s.childLanes)!==0,o.flags&128){if(S)return Mee(o,s,m);s.flags|=128}if(L=s.memoizedState,L!==null&&(L.rendering=null,L.tail=null,L.lastEffect=null),Ar(Gr,Gr.current),S)break;return null;case 22:case 23:return s.lanes=0,_ee(o,s,m)}return Lu(o,s,m)}var Pee,a4,Cee,Aee;Pee=function(o,s){for(var m=s.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===s)break;for(;m.sibling===null;){if(m.return===null||m.return===s)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},a4=function(){},Cee=function(o,s,m,S){var L=o.memoizedProps;if(L!==S){o=s.stateNode,Sh(Al.current);var U=null;switch(m){case"input":L=it(o,L),S=it(o,S),U=[];break;case"select":L=ae({},L,{value:void 0}),S=ae({},S,{value:void 0}),U=[];break;case"textarea":L=Tt(o,L),S=Tt(o,S),U=[];break;default:typeof L.onClick!="function"&&typeof S.onClick=="function"&&(o.onclick=LT)}kg(m,S);var ne;m=null;for(at in L)if(!S.hasOwnProperty(at)&&L.hasOwnProperty(at)&&L[at]!=null)if(at==="style"){var we=L[at];for(ne in we)we.hasOwnProperty(ne)&&(m||(m={}),m[ne]="")}else at!=="dangerouslySetInnerHTML"&&at!=="children"&&at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&at!=="autoFocus"&&(c.hasOwnProperty(at)?U||(U=[]):(U=U||[]).push(at,null));for(at in S){var Re=S[at];if(we=L!=null?L[at]:void 0,S.hasOwnProperty(at)&&Re!==we&&(Re!=null||we!=null))if(at==="style")if(we){for(ne in we)!we.hasOwnProperty(ne)||Re&&Re.hasOwnProperty(ne)||(m||(m={}),m[ne]="");for(ne in Re)Re.hasOwnProperty(ne)&&we[ne]!==Re[ne]&&(m||(m={}),m[ne]=Re[ne])}else m||(U||(U=[]),U.push(at,m)),m=Re;else at==="dangerouslySetInnerHTML"?(Re=Re?Re.__html:void 0,we=we?we.__html:void 0,Re!=null&&we!==Re&&(U=U||[]).push(at,Re)):at==="children"?typeof Re!="string"&&typeof Re!="number"||(U=U||[]).push(at,""+Re):at!=="suppressContentEditableWarning"&&at!=="suppressHydrationWarning"&&(c.hasOwnProperty(at)?(Re!=null&&at==="onScroll"&&Rr("scroll",o),U||we===Re||(U=[])):(U=U||[]).push(at,Re))}m&&(U=U||[]).push("style",m);var at=U;(s.updateQueue=at)&&(s.flags|=4)}},Aee=function(o,s,m,S){m!==S&&(s.flags|=4)};function G_(o,s){if(!Nr)switch(o.tailMode){case"hidden":s=o.tail;for(var m=null;s!==null;)s.alternate!==null&&(m=s),s=s.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var S=null;m!==null;)m.alternate!==null&&(S=m),m=m.sibling;S===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:S.sibling=null}}function uo(o){var s=o.alternate!==null&&o.alternate.child===o.child,m=0,S=0;if(s)for(var L=o.child;L!==null;)m|=L.lanes|L.childLanes,S|=L.subtreeFlags&14680064,S|=L.flags&14680064,L.return=o,L=L.sibling;else for(L=o.child;L!==null;)m|=L.lanes|L.childLanes,S|=L.subtreeFlags,S|=L.flags,L.return=o,L=L.sibling;return o.subtreeFlags|=S,o.childLanes=m,s}function Ihe(o,s,m){var S=s.pendingProps;switch(PR(s),s.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return uo(s),null;case 1:return qo(s.type)&&NT(),uo(s),null;case 3:return S=s.stateNode,Gg(),Lr(Wo),Lr(so),HR(),S.pendingContext&&(S.context=S.pendingContext,S.pendingContext=null),(o===null||o.child===null)&&(VT(s)?s.flags|=4:o===null||o.memoizedState.isDehydrated&&!(s.flags&256)||(s.flags|=1024,Ds!==null&&(g4(Ds),Ds=null))),a4(o,s),uo(s),null;case 5:UR(s);var L=Sh(B_.current);if(m=s.type,o!==null&&s.stateNode!=null)Cee(o,s,m,S,L),o.ref!==s.ref&&(s.flags|=512,s.flags|=2097152);else{if(!S){if(s.stateNode===null)throw Error(a(166));return uo(s),null}if(o=Sh(Al.current),VT(s)){S=s.stateNode,m=s.type;var U=s.memoizedProps;switch(S[Cl]=s,S[R_]=U,o=(s.mode&1)!==0,m){case"dialog":Rr("cancel",S),Rr("close",S);break;case"iframe":case"object":case"embed":Rr("load",S);break;case"video":case"audio":for(L=0;L<I_.length;L++)Rr(I_[L],S);break;case"source":Rr("error",S);break;case"img":case"image":case"link":Rr("error",S),Rr("load",S);break;case"details":Rr("toggle",S);break;case"input":rt(S,U),Rr("invalid",S);break;case"select":S._wrapperState={wasMultiple:!!U.multiple},Rr("invalid",S);break;case"textarea":_t(S,U),Rr("invalid",S)}kg(m,U),L=null;for(var ne in U)if(U.hasOwnProperty(ne)){var we=U[ne];ne==="children"?typeof we=="string"?S.textContent!==we&&(U.suppressHydrationWarning!==!0&&RT(S.textContent,we,o),L=["children",we]):typeof we=="number"&&S.textContent!==""+we&&(U.suppressHydrationWarning!==!0&&RT(S.textContent,we,o),L=["children",""+we]):c.hasOwnProperty(ne)&&we!=null&&ne==="onScroll"&&Rr("scroll",S)}switch(m){case"input":dn(S),Be(S,U,!0);break;case"textarea":dn(S),un(S);break;case"select":case"option":break;default:typeof U.onClick=="function"&&(S.onclick=LT)}S=L,s.updateQueue=S,S!==null&&(s.flags|=4)}else{ne=L.nodeType===9?L:L.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=rr(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=ne.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof S.is=="string"?o=ne.createElement(m,{is:S.is}):(o=ne.createElement(m),m==="select"&&(ne=o,S.multiple?ne.multiple=!0:S.size&&(ne.size=S.size))):o=ne.createElementNS(o,m),o[Cl]=s,o[R_]=S,Pee(o,s,!1,!1),s.stateNode=o;e:{switch(ne=f_(m,S),m){case"dialog":Rr("cancel",o),Rr("close",o),L=S;break;case"iframe":case"object":case"embed":Rr("load",o),L=S;break;case"video":case"audio":for(L=0;L<I_.length;L++)Rr(I_[L],o);L=S;break;case"source":Rr("error",o),L=S;break;case"img":case"image":case"link":Rr("error",o),Rr("load",o),L=S;break;case"details":Rr("toggle",o),L=S;break;case"input":rt(o,S),L=it(o,S),Rr("invalid",o);break;case"option":L=S;break;case"select":o._wrapperState={wasMultiple:!!S.multiple},L=ae({},S,{value:void 0}),Rr("invalid",o);break;case"textarea":_t(o,S),L=Tt(o,S),Rr("invalid",o);break;default:L=S}kg(m,L),we=L;for(U in we)if(we.hasOwnProperty(U)){var Re=we[U];U==="style"?Eg(o,Re):U==="dangerouslySetInnerHTML"?(Re=Re?Re.__html:void 0,Re!=null&&fd(o,Re)):U==="children"?typeof Re=="string"?(m!=="textarea"||Re!=="")&&ao(o,Re):typeof Re=="number"&&ao(o,""+Re):U!=="suppressContentEditableWarning"&&U!=="suppressHydrationWarning"&&U!=="autoFocus"&&(c.hasOwnProperty(U)?Re!=null&&U==="onScroll"&&Rr("scroll",o):Re!=null&&J(o,U,Re,ne))}switch(m){case"input":dn(o),Be(o,S,!1);break;case"textarea":dn(o),un(o);break;case"option":S.value!=null&&o.setAttribute("value",""+jt(S.value));break;case"select":o.multiple=!!S.multiple,U=S.value,U!=null?Xe(o,!!S.multiple,U,!1):S.defaultValue!=null&&Xe(o,!!S.multiple,S.defaultValue,!0);break;default:typeof L.onClick=="function"&&(o.onclick=LT)}switch(m){case"button":case"input":case"select":case"textarea":S=!!S.autoFocus;break e;case"img":S=!0;break e;default:S=!1}}S&&(s.flags|=4)}s.ref!==null&&(s.flags|=512,s.flags|=2097152)}return uo(s),null;case 6:if(o&&s.stateNode!=null)Aee(o,s,o.memoizedProps,S);else{if(typeof S!="string"&&s.stateNode===null)throw Error(a(166));if(m=Sh(B_.current),Sh(Al.current),VT(s)){if(S=s.stateNode,m=s.memoizedProps,S[Cl]=s,(U=S.nodeValue!==m)&&(o=fa,o!==null))switch(o.tag){case 3:RT(S.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&RT(S.nodeValue,m,(o.mode&1)!==0)}U&&(s.flags|=4)}else S=(m.nodeType===9?m:m.ownerDocument).createTextNode(S),S[Cl]=s,s.stateNode=S}return uo(s),null;case 13:if(Lr(Gr),S=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(Nr&&ha!==null&&s.mode&1&&!(s.flags&128))DQ(),jg(),s.flags|=98560,U=!1;else if(U=VT(s),S!==null&&S.dehydrated!==null){if(o===null){if(!U)throw Error(a(318));if(U=s.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(a(317));U[Cl]=s}else jg(),!(s.flags&128)&&(s.memoizedState=null),s.flags|=4;uo(s),U=!1}else Ds!==null&&(g4(Ds),Ds=null),U=!0;if(!U)return s.flags&65536?s:null}return s.flags&128?(s.lanes=m,s):(S=S!==null,S!==(o!==null&&o.memoizedState!==null)&&S&&(s.child.flags|=8192,s.mode&1&&(o===null||Gr.current&1?Ei===0&&(Ei=3):b4())),s.updateQueue!==null&&(s.flags|=4),uo(s),null);case 4:return Gg(),a4(o,s),o===null&&D_(s.stateNode.containerInfo),uo(s),null;case 10:return RR(s.type._context),uo(s),null;case 17:return qo(s.type)&&NT(),uo(s),null;case 19:if(Lr(Gr),U=s.memoizedState,U===null)return uo(s),null;if(S=(s.flags&128)!==0,ne=U.rendering,ne===null)if(S)G_(U,!1);else{if(Ei!==0||o!==null&&o.flags&128)for(o=s.child;o!==null;){if(ne=$T(o),ne!==null){for(s.flags|=128,G_(U,!1),S=ne.updateQueue,S!==null&&(s.updateQueue=S,s.flags|=4),s.subtreeFlags=0,S=m,m=s.child;m!==null;)U=m,o=S,U.flags&=14680066,ne=U.alternate,ne===null?(U.childLanes=0,U.lanes=o,U.child=null,U.subtreeFlags=0,U.memoizedProps=null,U.memoizedState=null,U.updateQueue=null,U.dependencies=null,U.stateNode=null):(U.childLanes=ne.childLanes,U.lanes=ne.lanes,U.child=ne.child,U.subtreeFlags=0,U.deletions=null,U.memoizedProps=ne.memoizedProps,U.memoizedState=ne.memoizedState,U.updateQueue=ne.updateQueue,U.type=ne.type,o=ne.dependencies,U.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return Ar(Gr,Gr.current&1|2),s.child}o=o.sibling}U.tail!==null&&ii()>Xg&&(s.flags|=128,S=!0,G_(U,!1),s.lanes=4194304)}else{if(!S)if(o=$T(ne),o!==null){if(s.flags|=128,S=!0,m=o.updateQueue,m!==null&&(s.updateQueue=m,s.flags|=4),G_(U,!0),U.tail===null&&U.tailMode==="hidden"&&!ne.alternate&&!Nr)return uo(s),null}else 2*ii()-U.renderingStartTime>Xg&&m!==1073741824&&(s.flags|=128,S=!0,G_(U,!1),s.lanes=4194304);U.isBackwards?(ne.sibling=s.child,s.child=ne):(m=U.last,m!==null?m.sibling=ne:s.child=ne,U.last=ne)}return U.tail!==null?(s=U.tail,U.rendering=s,U.tail=s.sibling,U.renderingStartTime=ii(),s.sibling=null,m=Gr.current,Ar(Gr,S?m&1|2:m&1),s):(uo(s),null);case 22:case 23:return y4(),S=s.memoizedState!==null,o!==null&&o.memoizedState!==null!==S&&(s.flags|=8192),S&&s.mode&1?pa&1073741824&&(uo(s),s.subtreeFlags&6&&(s.flags|=8192)):uo(s),null;case 24:return null;case 25:return null}throw Error(a(156,s.tag))}function Dhe(o,s){switch(PR(s),s.tag){case 1:return qo(s.type)&&NT(),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return Gg(),Lr(Wo),Lr(so),HR(),o=s.flags,o&65536&&!(o&128)?(s.flags=o&-65537|128,s):null;case 5:return UR(s),null;case 13:if(Lr(Gr),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(a(340));jg()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return Lr(Gr),null;case 4:return Gg(),null;case 10:return RR(s.type._context),null;case 22:case 23:return y4(),null;case 24:return null;default:return null}}var rM=!1,co=!1,Ohe=typeof WeakSet=="function"?WeakSet:Set,tn=null;function qg(o,s){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(S){Zr(o,s,S)}else m.current=null}function Iee(o,s,m){try{m()}catch(S){Zr(o,s,S)}}var Dee=!1;function Rhe(o,s){if(bR=_T,o=aQ(),hR(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var S=m.getSelection&&m.getSelection();if(S&&S.rangeCount!==0){m=S.anchorNode;var L=S.anchorOffset,U=S.focusNode;S=S.focusOffset;try{m.nodeType,U.nodeType}catch{m=null;break e}var ne=0,we=-1,Re=-1,at=0,Ct=0,It=o,Mt=null;t:for(;;){for(var Zt;It!==m||L!==0&&It.nodeType!==3||(we=ne+L),It!==U||S!==0&&It.nodeType!==3||(Re=ne+S),It.nodeType===3&&(ne+=It.nodeValue.length),(Zt=It.firstChild)!==null;)Mt=It,It=Zt;for(;;){if(It===o)break t;if(Mt===m&&++at===L&&(we=ne),Mt===U&&++Ct===S&&(Re=ne),(Zt=It.nextSibling)!==null)break;It=Mt,Mt=It.parentNode}It=Zt}m=we===-1||Re===-1?null:{start:we,end:Re}}else m=null}m=m||{start:0,end:0}}else m=null;for(_R={focusedElem:o,selectionRange:m},_T=!1,tn=s;tn!==null;)if(s=tn,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,tn=o;else for(;tn!==null;){s=tn;try{var rn=s.alternate;if(s.flags&1024)switch(s.tag){case 0:case 11:case 15:break;case 1:if(rn!==null){var an=rn.memoizedProps,oi=rn.memoizedState,$e=s.stateNode,ze=$e.getSnapshotBeforeUpdate(s.elementType===s.type?an:Os(s.type,an),oi);$e.__reactInternalSnapshotBeforeUpdate=ze}break;case 3:var Ye=s.stateNode.containerInfo;Ye.nodeType===1?Ye.textContent="":Ye.nodeType===9&&Ye.documentElement&&Ye.removeChild(Ye.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(Ft){Zr(s,s.return,Ft)}if(o=s.sibling,o!==null){o.return=s.return,tn=o;break}tn=s.return}return rn=Dee,Dee=!1,rn}function W_(o,s,m){var S=s.updateQueue;if(S=S!==null?S.lastEffect:null,S!==null){var L=S=S.next;do{if((L.tag&o)===o){var U=L.destroy;L.destroy=void 0,U!==void 0&&Iee(s,m,U)}L=L.next}while(L!==S)}}function iM(o,s){if(s=s.updateQueue,s=s!==null?s.lastEffect:null,s!==null){var m=s=s.next;do{if((m.tag&o)===o){var S=m.create;m.destroy=S()}m=m.next}while(m!==s)}}function s4(o){var s=o.ref;if(s!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof s=="function"?s(o):s.current=o}}function Oee(o){var s=o.alternate;s!==null&&(o.alternate=null,Oee(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&(delete s[Cl],delete s[R_],delete s[ER],delete s[ghe],delete s[vhe])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ree(o){return o.tag===5||o.tag===3||o.tag===4}function Lee(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ree(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function l4(o,s,m){var S=o.tag;if(S===5||S===6)o=o.stateNode,s?m.nodeType===8?m.parentNode.insertBefore(o,s):m.insertBefore(o,s):(m.nodeType===8?(s=m.parentNode,s.insertBefore(o,m)):(s=m,s.appendChild(o)),m=m._reactRootContainer,m!=null||s.onclick!==null||(s.onclick=LT));else if(S!==4&&(o=o.child,o!==null))for(l4(o,s,m),o=o.sibling;o!==null;)l4(o,s,m),o=o.sibling}function u4(o,s,m){var S=o.tag;if(S===5||S===6)o=o.stateNode,s?m.insertBefore(o,s):m.appendChild(o);else if(S!==4&&(o=o.child,o!==null))for(u4(o,s,m),o=o.sibling;o!==null;)u4(o,s,m),o=o.sibling}var Zi=null,Rs=!1;function kd(o,s,m){for(m=m.child;m!==null;)zee(o,s,m),m=m.sibling}function zee(o,s,m){if(Pl&&typeof Pl.onCommitFiberUnmount=="function")try{Pl.onCommitFiberUnmount(pT,m)}catch{}switch(m.tag){case 5:co||qg(m,s);case 6:var S=Zi,L=Rs;Zi=null,kd(o,s,m),Zi=S,Rs=L,Zi!==null&&(Rs?(o=Zi,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):Zi.removeChild(m.stateNode));break;case 18:Zi!==null&&(Rs?(o=Zi,m=m.stateNode,o.nodeType===8?SR(o.parentNode,m):o.nodeType===1&&SR(o,m),S_(o)):SR(Zi,m.stateNode));break;case 4:S=Zi,L=Rs,Zi=m.stateNode.containerInfo,Rs=!0,kd(o,s,m),Zi=S,Rs=L;break;case 0:case 11:case 14:case 15:if(!co&&(S=m.updateQueue,S!==null&&(S=S.lastEffect,S!==null))){L=S=S.next;do{var U=L,ne=U.destroy;U=U.tag,ne!==void 0&&(U&2||U&4)&&Iee(m,s,ne),L=L.next}while(L!==S)}kd(o,s,m);break;case 1:if(!co&&(qg(m,s),S=m.stateNode,typeof S.componentWillUnmount=="function"))try{S.props=m.memoizedProps,S.state=m.memoizedState,S.componentWillUnmount()}catch(we){Zr(m,s,we)}kd(o,s,m);break;case 21:kd(o,s,m);break;case 22:m.mode&1?(co=(S=co)||m.memoizedState!==null,kd(o,s,m),co=S):kd(o,s,m);break;default:kd(o,s,m)}}function Nee(o){var s=o.updateQueue;if(s!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new Ohe),s.forEach(function(S){var L=Hhe.bind(null,o,S);m.has(S)||(m.add(S),S.then(L,L))})}}function Ls(o,s){var m=s.deletions;if(m!==null)for(var S=0;S<m.length;S++){var L=m[S];try{var U=o,ne=s,we=ne;e:for(;we!==null;){switch(we.tag){case 5:Zi=we.stateNode,Rs=!1;break e;case 3:Zi=we.stateNode.containerInfo,Rs=!0;break e;case 4:Zi=we.stateNode.containerInfo,Rs=!0;break e}we=we.return}if(Zi===null)throw Error(a(160));zee(U,ne,L),Zi=null,Rs=!1;var Re=L.alternate;Re!==null&&(Re.return=null),L.return=null}catch(at){Zr(L,s,at)}}if(s.subtreeFlags&12854)for(s=s.child;s!==null;)Fee(s,o),s=s.sibling}function Fee(o,s){var m=o.alternate,S=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Ls(s,o),Dl(o),S&4){try{W_(3,o,o.return),iM(3,o)}catch(an){Zr(o,o.return,an)}try{W_(5,o,o.return)}catch(an){Zr(o,o.return,an)}}break;case 1:Ls(s,o),Dl(o),S&512&&m!==null&&qg(m,m.return);break;case 5:if(Ls(s,o),Dl(o),S&512&&m!==null&&qg(m,m.return),o.flags&32){var L=o.stateNode;try{ao(L,"")}catch(an){Zr(o,o.return,an)}}if(S&4&&(L=o.stateNode,L!=null)){var U=o.memoizedProps,ne=m!==null?m.memoizedProps:U,we=o.type,Re=o.updateQueue;if(o.updateQueue=null,Re!==null)try{we==="input"&&U.type==="radio"&&U.name!=null&&ve(L,U),f_(we,ne);var at=f_(we,U);for(ne=0;ne<Re.length;ne+=2){var Ct=Re[ne],It=Re[ne+1];Ct==="style"?Eg(L,It):Ct==="dangerouslySetInnerHTML"?fd(L,It):Ct==="children"?ao(L,It):J(L,Ct,It,at)}switch(we){case"input":pe(L,U);break;case"textarea":wt(L,U);break;case"select":var Mt=L._wrapperState.wasMultiple;L._wrapperState.wasMultiple=!!U.multiple;var Zt=U.value;Zt!=null?Xe(L,!!U.multiple,Zt,!1):Mt!==!!U.multiple&&(U.defaultValue!=null?Xe(L,!!U.multiple,U.defaultValue,!0):Xe(L,!!U.multiple,U.multiple?[]:"",!1))}L[R_]=U}catch(an){Zr(o,o.return,an)}}break;case 6:if(Ls(s,o),Dl(o),S&4){if(o.stateNode===null)throw Error(a(162));L=o.stateNode,U=o.memoizedProps;try{L.nodeValue=U}catch(an){Zr(o,o.return,an)}}break;case 3:if(Ls(s,o),Dl(o),S&4&&m!==null&&m.memoizedState.isDehydrated)try{S_(s.containerInfo)}catch(an){Zr(o,o.return,an)}break;case 4:Ls(s,o),Dl(o);break;case 13:Ls(s,o),Dl(o),L=o.child,L.flags&8192&&(U=L.memoizedState!==null,L.stateNode.isHidden=U,!U||L.alternate!==null&&L.alternate.memoizedState!==null||(f4=ii())),S&4&&Nee(o);break;case 22:if(Ct=m!==null&&m.memoizedState!==null,o.mode&1?(co=(at=co)||Ct,Ls(s,o),co=at):Ls(s,o),Dl(o),S&8192){if(at=o.memoizedState!==null,(o.stateNode.isHidden=at)&&!Ct&&o.mode&1)for(tn=o,Ct=o.child;Ct!==null;){for(It=tn=Ct;tn!==null;){switch(Mt=tn,Zt=Mt.child,Mt.tag){case 0:case 11:case 14:case 15:W_(4,Mt,Mt.return);break;case 1:qg(Mt,Mt.return);var rn=Mt.stateNode;if(typeof rn.componentWillUnmount=="function"){S=Mt,m=Mt.return;try{s=S,rn.props=s.memoizedProps,rn.state=s.memoizedState,rn.componentWillUnmount()}catch(an){Zr(S,m,an)}}break;case 5:qg(Mt,Mt.return);break;case 22:if(Mt.memoizedState!==null){Uee(It);continue}}Zt!==null?(Zt.return=Mt,tn=Zt):Uee(It)}Ct=Ct.sibling}e:for(Ct=null,It=o;;){if(It.tag===5){if(Ct===null){Ct=It;try{L=It.stateNode,at?(U=L.style,typeof U.setProperty=="function"?U.setProperty("display","none","important"):U.display="none"):(we=It.stateNode,Re=It.memoizedProps.style,ne=Re!=null&&Re.hasOwnProperty("display")?Re.display:null,we.style.display=gh("display",ne))}catch(an){Zr(o,o.return,an)}}}else if(It.tag===6){if(Ct===null)try{It.stateNode.nodeValue=at?"":It.memoizedProps}catch(an){Zr(o,o.return,an)}}else if((It.tag!==22&&It.tag!==23||It.memoizedState===null||It===o)&&It.child!==null){It.child.return=It,It=It.child;continue}if(It===o)break e;for(;It.sibling===null;){if(It.return===null||It.return===o)break e;Ct===It&&(Ct=null),It=It.return}Ct===It&&(Ct=null),It.sibling.return=It.return,It=It.sibling}}break;case 19:Ls(s,o),Dl(o),S&4&&Nee(o);break;case 21:break;default:Ls(s,o),Dl(o)}}function Dl(o){var s=o.flags;if(s&2){try{e:{for(var m=o.return;m!==null;){if(Ree(m)){var S=m;break e}m=m.return}throw Error(a(160))}switch(S.tag){case 5:var L=S.stateNode;S.flags&32&&(ao(L,""),S.flags&=-33);var U=Lee(o);u4(o,U,L);break;case 3:case 4:var ne=S.stateNode.containerInfo,we=Lee(o);l4(o,we,ne);break;default:throw Error(a(161))}}catch(Re){Zr(o,o.return,Re)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Lhe(o,s,m){tn=o,Bee(o)}function Bee(o,s,m){for(var S=(o.mode&1)!==0;tn!==null;){var L=tn,U=L.child;if(L.tag===22&&S){var ne=L.memoizedState!==null||rM;if(!ne){var we=L.alternate,Re=we!==null&&we.memoizedState!==null||co;we=rM;var at=co;if(rM=ne,(co=Re)&&!at)for(tn=L;tn!==null;)ne=tn,Re=ne.child,ne.tag===22&&ne.memoizedState!==null?Vee(L):Re!==null?(Re.return=ne,tn=Re):Vee(L);for(;U!==null;)tn=U,Bee(U),U=U.sibling;tn=L,rM=we,co=at}jee(o)}else L.subtreeFlags&8772&&U!==null?(U.return=L,tn=U):jee(o)}}function jee(o){for(;tn!==null;){var s=tn;if(s.flags&8772){var m=s.alternate;try{if(s.flags&8772)switch(s.tag){case 0:case 11:case 15:co||iM(5,s);break;case 1:var S=s.stateNode;if(s.flags&4&&!co)if(m===null)S.componentDidMount();else{var L=s.elementType===s.type?m.memoizedProps:Os(s.type,m.memoizedProps);S.componentDidUpdate(L,m.memoizedState,S.__reactInternalSnapshotBeforeUpdate)}var U=s.updateQueue;U!==null&&zQ(s,U,S);break;case 3:var ne=s.updateQueue;if(ne!==null){if(m=null,s.child!==null)switch(s.child.tag){case 5:m=s.child.stateNode;break;case 1:m=s.child.stateNode}zQ(s,ne,m)}break;case 5:var we=s.stateNode;if(m===null&&s.flags&4){m=we;var Re=s.memoizedProps;switch(s.type){case"button":case"input":case"select":case"textarea":Re.autoFocus&&m.focus();break;case"img":Re.src&&(m.src=Re.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(s.memoizedState===null){var at=s.alternate;if(at!==null){var Ct=at.memoizedState;if(Ct!==null){var It=Ct.dehydrated;It!==null&&S_(It)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(a(163))}co||s.flags&512&&s4(s)}catch(Mt){Zr(s,s.return,Mt)}}if(s===o){tn=null;break}if(m=s.sibling,m!==null){m.return=s.return,tn=m;break}tn=s.return}}function Uee(o){for(;tn!==null;){var s=tn;if(s===o){tn=null;break}var m=s.sibling;if(m!==null){m.return=s.return,tn=m;break}tn=s.return}}function Vee(o){for(;tn!==null;){var s=tn;try{switch(s.tag){case 0:case 11:case 15:var m=s.return;try{iM(4,s)}catch(Re){Zr(s,m,Re)}break;case 1:var S=s.stateNode;if(typeof S.componentDidMount=="function"){var L=s.return;try{S.componentDidMount()}catch(Re){Zr(s,L,Re)}}var U=s.return;try{s4(s)}catch(Re){Zr(s,U,Re)}break;case 5:var ne=s.return;try{s4(s)}catch(Re){Zr(s,ne,Re)}}}catch(Re){Zr(s,s.return,Re)}if(s===o){tn=null;break}var we=s.sibling;if(we!==null){we.return=s.return,tn=we;break}tn=s.return}}var zhe=Math.ceil,oM=Y.ReactCurrentDispatcher,c4=Y.ReactCurrentOwner,Wa=Y.ReactCurrentBatchConfig,ir=0,Oi=null,pi=null,Yi=0,pa=0,Kg=_d(0),Ei=0,q_=null,kh=0,aM=0,d4=0,K_=null,Xo=null,f4=0,Xg=1/0,zu=null,sM=!1,h4=null,Td=null,lM=!1,Md=null,uM=0,X_=0,p4=null,cM=-1,dM=0;function Ao(){return ir&6?ii():cM!==-1?cM:cM=ii()}function Pd(o){return o.mode&1?ir&2&&Yi!==0?Yi&-Yi:bhe.transition!==null?(dM===0&&(dM=DJ()),dM):(o=mr,o!==0||(o=window.event,o=o===void 0?16:UJ(o.type)),o):1}function zs(o,s,m,S){if(50<X_)throw X_=0,p4=null,Error(a(185));y_(o,m,S),(!(ir&2)||o!==Oi)&&(o===Oi&&(!(ir&2)&&(aM|=m),Ei===4&&Cd(o,Yi)),$o(o,S),m===1&&ir===0&&!(s.mode&1)&&(Xg=ii()+500,BT&&wd()))}function $o(o,s){var m=o.callbackNode;xfe(o,s);var S=vT(o,o===Oi?Yi:0);if(S===0)m!==null&&CJ(m),o.callbackNode=null,o.callbackPriority=0;else if(s=S&-S,o.callbackPriority!==s){if(m!=null&&CJ(m),s===1)o.tag===0?yhe(Gee.bind(null,o)):MQ(Gee.bind(null,o)),phe(function(){!(ir&6)&&wd()}),m=null;else{switch(OJ(S)){case 1:m=Z5;break;case 4:m=AJ;break;case 16:m=hT;break;case 536870912:m=IJ;break;default:m=hT}m=Jee(m,Hee.bind(null,o))}o.callbackPriority=s,o.callbackNode=m}}function Hee(o,s){if(cM=-1,dM=0,ir&6)throw Error(a(327));var m=o.callbackNode;if($g()&&o.callbackNode!==m)return null;var S=vT(o,o===Oi?Yi:0);if(S===0)return null;if(S&30||S&o.expiredLanes||s)s=fM(o,S);else{s=S;var L=ir;ir|=2;var U=qee();(Oi!==o||Yi!==s)&&(zu=null,Xg=ii()+500,Mh(o,s));do try{Bhe();break}catch(we){Wee(o,we)}while(1);OR(),oM.current=U,ir=L,pi!==null?s=0:(Oi=null,Yi=0,s=Ei)}if(s!==0){if(s===2&&(L=Y5(o),L!==0&&(S=L,s=m4(o,L))),s===1)throw m=q_,Mh(o,0),Cd(o,S),$o(o,ii()),m;if(s===6)Cd(o,S);else{if(L=o.current.alternate,!(S&30)&&!Nhe(L)&&(s=fM(o,S),s===2&&(U=Y5(o),U!==0&&(S=U,s=m4(o,U))),s===1))throw m=q_,Mh(o,0),Cd(o,S),$o(o,ii()),m;switch(o.finishedWork=L,o.finishedLanes=S,s){case 0:case 1:throw Error(a(345));case 2:Ph(o,Xo,zu);break;case 3:if(Cd(o,S),(S&130023424)===S&&(s=f4+500-ii(),10<s)){if(vT(o,0)!==0)break;if(L=o.suspendedLanes,(L&S)!==S){Ao(),o.pingedLanes|=o.suspendedLanes&L;break}o.timeoutHandle=wR(Ph.bind(null,o,Xo,zu),s);break}Ph(o,Xo,zu);break;case 4:if(Cd(o,S),(S&4194240)===S)break;for(s=o.eventTimes,L=-1;0<S;){var ne=31-As(S);U=1<<ne,ne=s[ne],ne>L&&(L=ne),S&=~U}if(S=L,S=ii()-S,S=(120>S?120:480>S?480:1080>S?1080:1920>S?1920:3e3>S?3e3:4320>S?4320:1960*zhe(S/1960))-S,10<S){o.timeoutHandle=wR(Ph.bind(null,o,Xo,zu),S);break}Ph(o,Xo,zu);break;case 5:Ph(o,Xo,zu);break;default:throw Error(a(329))}}}return $o(o,ii()),o.callbackNode===m?Hee.bind(null,o):null}function m4(o,s){var m=K_;return o.current.memoizedState.isDehydrated&&(Mh(o,s).flags|=256),o=fM(o,s),o!==2&&(s=Xo,Xo=m,s!==null&&g4(s)),o}function g4(o){Xo===null?Xo=o:Xo.push.apply(Xo,o)}function Nhe(o){for(var s=o;;){if(s.flags&16384){var m=s.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var S=0;S<m.length;S++){var L=m[S],U=L.getSnapshot;L=L.value;try{if(!Is(U(),L))return!1}catch{return!1}}}if(m=s.child,s.subtreeFlags&16384&&m!==null)m.return=s,s=m;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Cd(o,s){for(s&=~d4,s&=~aM,o.suspendedLanes|=s,o.pingedLanes&=~s,o=o.expirationTimes;0<s;){var m=31-As(s),S=1<<m;o[m]=-1,s&=~S}}function Gee(o){if(ir&6)throw Error(a(327));$g();var s=vT(o,0);if(!(s&1))return $o(o,ii()),null;var m=fM(o,s);if(o.tag!==0&&m===2){var S=Y5(o);S!==0&&(s=S,m=m4(o,S))}if(m===1)throw m=q_,Mh(o,0),Cd(o,s),$o(o,ii()),m;if(m===6)throw Error(a(345));return o.finishedWork=o.current.alternate,o.finishedLanes=s,Ph(o,Xo,zu),$o(o,ii()),null}function v4(o,s){var m=ir;ir|=1;try{return o(s)}finally{ir=m,ir===0&&(Xg=ii()+500,BT&&wd())}}function Th(o){Md!==null&&Md.tag===0&&!(ir&6)&&$g();var s=ir;ir|=1;var m=Wa.transition,S=mr;try{if(Wa.transition=null,mr=1,o)return o()}finally{mr=S,Wa.transition=m,ir=s,!(ir&6)&&wd()}}function y4(){pa=Kg.current,Lr(Kg)}function Mh(o,s){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,hhe(m)),pi!==null)for(m=pi.return;m!==null;){var S=m;switch(PR(S),S.tag){case 1:S=S.type.childContextTypes,S!=null&&NT();break;case 3:Gg(),Lr(Wo),Lr(so),HR();break;case 5:UR(S);break;case 4:Gg();break;case 13:Lr(Gr);break;case 19:Lr(Gr);break;case 10:RR(S.type._context);break;case 22:case 23:y4()}m=m.return}if(Oi=o,pi=o=Ad(o.current,null),Yi=pa=s,Ei=0,q_=null,d4=aM=kh=0,Xo=K_=null,wh!==null){for(s=0;s<wh.length;s++)if(m=wh[s],S=m.interleaved,S!==null){m.interleaved=null;var L=S.next,U=m.pending;if(U!==null){var ne=U.next;U.next=L,S.next=ne}m.pending=S}wh=null}return o}function Wee(o,s){do{var m=pi;try{if(OR(),ZT.current=eM,YT){for(var S=Wr.memoizedState;S!==null;){var L=S.queue;L!==null&&(L.pending=null),S=S.next}YT=!1}if(Eh=0,Di=Si=Wr=null,j_=!1,U_=0,c4.current=null,m===null||m.return===null){Ei=1,q_=s,pi=null;break}e:{var U=o,ne=m.return,we=m,Re=s;if(s=Yi,we.flags|=32768,Re!==null&&typeof Re=="object"&&typeof Re.then=="function"){var at=Re,Ct=we,It=Ct.tag;if(!(Ct.mode&1)&&(It===0||It===11||It===15)){var Mt=Ct.alternate;Mt?(Ct.updateQueue=Mt.updateQueue,Ct.memoizedState=Mt.memoizedState,Ct.lanes=Mt.lanes):(Ct.updateQueue=null,Ct.memoizedState=null)}var Zt=mee(ne);if(Zt!==null){Zt.flags&=-257,gee(Zt,ne,we,U,s),Zt.mode&1&&pee(U,at,s),s=Zt,Re=at;var rn=s.updateQueue;if(rn===null){var an=new Set;an.add(Re),s.updateQueue=an}else rn.add(Re);break e}else{if(!(s&1)){pee(U,at,s),b4();break e}Re=Error(a(426))}}else if(Nr&&we.mode&1){var oi=mee(ne);if(oi!==null){!(oi.flags&65536)&&(oi.flags|=256),gee(oi,ne,we,U,s),IR(Wg(Re,we));break e}}U=Re=Wg(Re,we),Ei!==4&&(Ei=2),K_===null?K_=[U]:K_.push(U),U=ne;do{switch(U.tag){case 3:U.flags|=65536,s&=-s,U.lanes|=s;var $e=fee(U,Re,s);LQ(U,$e);break e;case 1:we=Re;var ze=U.type,Ye=U.stateNode;if(!(U.flags&128)&&(typeof ze.getDerivedStateFromError=="function"||Ye!==null&&typeof Ye.componentDidCatch=="function"&&(Td===null||!Td.has(Ye)))){U.flags|=65536,s&=-s,U.lanes|=s;var Ft=hee(U,we,s);LQ(U,Ft);break e}}U=U.return}while(U!==null)}Xee(m)}catch(sn){s=sn,pi===m&&m!==null&&(pi=m=m.return);continue}break}while(1)}function qee(){var o=oM.current;return oM.current=eM,o===null?eM:o}function b4(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),Oi===null||!(kh&268435455)&&!(aM&268435455)||Cd(Oi,Yi)}function fM(o,s){var m=ir;ir|=2;var S=qee();(Oi!==o||Yi!==s)&&(zu=null,Mh(o,s));do try{Fhe();break}catch(L){Wee(o,L)}while(1);if(OR(),ir=m,oM.current=S,pi!==null)throw Error(a(261));return Oi=null,Yi=0,Ei}function Fhe(){for(;pi!==null;)Kee(pi)}function Bhe(){for(;pi!==null&&!ffe();)Kee(pi)}function Kee(o){var s=Yee(o.alternate,o,pa);o.memoizedProps=o.pendingProps,s===null?Xee(o):pi=s,c4.current=null}function Xee(o){var s=o;do{var m=s.alternate;if(o=s.return,s.flags&32768){if(m=Dhe(m,s),m!==null){m.flags&=32767,pi=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Ei=6,pi=null;return}}else if(m=Ihe(m,s,pa),m!==null){pi=m;return}if(s=s.sibling,s!==null){pi=s;return}pi=s=o}while(s!==null);Ei===0&&(Ei=5)}function Ph(o,s,m){var S=mr,L=Wa.transition;try{Wa.transition=null,mr=1,jhe(o,s,m,S)}finally{Wa.transition=L,mr=S}return null}function jhe(o,s,m,S){do $g();while(Md!==null);if(ir&6)throw Error(a(327));m=o.finishedWork;var L=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(a(177));o.callbackNode=null,o.callbackPriority=0;var U=m.lanes|m.childLanes;if(wfe(o,U),o===Oi&&(pi=Oi=null,Yi=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||lM||(lM=!0,Jee(hT,function(){return $g(),null})),U=(m.flags&15990)!==0,m.subtreeFlags&15990||U){U=Wa.transition,Wa.transition=null;var ne=mr;mr=1;var we=ir;ir|=4,c4.current=null,Rhe(o,m),Fee(m,o),lhe(_R),_T=!!bR,_R=bR=null,o.current=m,Lhe(m),hfe(),ir=we,mr=ne,Wa.transition=U}else o.current=m;if(lM&&(lM=!1,Md=o,uM=L),U=o.pendingLanes,U===0&&(Td=null),gfe(m.stateNode),$o(o,ii()),s!==null)for(S=o.onRecoverableError,m=0;m<s.length;m++)L=s[m],S(L.value,{componentStack:L.stack,digest:L.digest});if(sM)throw sM=!1,o=h4,h4=null,o;return uM&1&&o.tag!==0&&$g(),U=o.pendingLanes,U&1?o===p4?X_++:(X_=0,p4=o):X_=0,wd(),null}function $g(){if(Md!==null){var o=OJ(uM),s=Wa.transition,m=mr;try{if(Wa.transition=null,mr=16>o?16:o,Md===null)var S=!1;else{if(o=Md,Md=null,uM=0,ir&6)throw Error(a(331));var L=ir;for(ir|=4,tn=o.current;tn!==null;){var U=tn,ne=U.child;if(tn.flags&16){var we=U.deletions;if(we!==null){for(var Re=0;Re<we.length;Re++){var at=we[Re];for(tn=at;tn!==null;){var Ct=tn;switch(Ct.tag){case 0:case 11:case 15:W_(8,Ct,U)}var It=Ct.child;if(It!==null)It.return=Ct,tn=It;else for(;tn!==null;){Ct=tn;var Mt=Ct.sibling,Zt=Ct.return;if(Oee(Ct),Ct===at){tn=null;break}if(Mt!==null){Mt.return=Zt,tn=Mt;break}tn=Zt}}}var rn=U.alternate;if(rn!==null){var an=rn.child;if(an!==null){rn.child=null;do{var oi=an.sibling;an.sibling=null,an=oi}while(an!==null)}}tn=U}}if(U.subtreeFlags&2064&&ne!==null)ne.return=U,tn=ne;else e:for(;tn!==null;){if(U=tn,U.flags&2048)switch(U.tag){case 0:case 11:case 15:W_(9,U,U.return)}var $e=U.sibling;if($e!==null){$e.return=U.return,tn=$e;break e}tn=U.return}}var ze=o.current;for(tn=ze;tn!==null;){ne=tn;var Ye=ne.child;if(ne.subtreeFlags&2064&&Ye!==null)Ye.return=ne,tn=Ye;else e:for(ne=ze;tn!==null;){if(we=tn,we.flags&2048)try{switch(we.tag){case 0:case 11:case 15:iM(9,we)}}catch(sn){Zr(we,we.return,sn)}if(we===ne){tn=null;break e}var Ft=we.sibling;if(Ft!==null){Ft.return=we.return,tn=Ft;break e}tn=we.return}}if(ir=L,wd(),Pl&&typeof Pl.onPostCommitFiberRoot=="function")try{Pl.onPostCommitFiberRoot(pT,o)}catch{}S=!0}return S}finally{mr=m,Wa.transition=s}}return!1}function $ee(o,s,m){s=Wg(m,s),s=fee(o,s,1),o=Ed(o,s,1),s=Ao(),o!==null&&(y_(o,1,s),$o(o,s))}function Zr(o,s,m){if(o.tag===3)$ee(o,o,m);else for(;s!==null;){if(s.tag===3){$ee(s,o,m);break}else if(s.tag===1){var S=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof S.componentDidCatch=="function"&&(Td===null||!Td.has(S))){o=Wg(m,o),o=hee(s,o,1),s=Ed(s,o,1),o=Ao(),s!==null&&(y_(s,1,o),$o(s,o));break}}s=s.return}}function Uhe(o,s,m){var S=o.pingCache;S!==null&&S.delete(s),s=Ao(),o.pingedLanes|=o.suspendedLanes&m,Oi===o&&(Yi&m)===m&&(Ei===4||Ei===3&&(Yi&130023424)===Yi&&500>ii()-f4?Mh(o,0):d4|=m),$o(o,s)}function Zee(o,s){s===0&&(o.mode&1?(s=gT,gT<<=1,!(gT&130023424)&&(gT=4194304)):s=1);var m=Ao();o=Ou(o,s),o!==null&&(y_(o,s,m),$o(o,m))}function Vhe(o){var s=o.memoizedState,m=0;s!==null&&(m=s.retryLane),Zee(o,m)}function Hhe(o,s){var m=0;switch(o.tag){case 13:var S=o.stateNode,L=o.memoizedState;L!==null&&(m=L.retryLane);break;case 19:S=o.stateNode;break;default:throw Error(a(314))}S!==null&&S.delete(s),Zee(o,m)}var Yee;Yee=function(o,s,m){if(o!==null)if(o.memoizedProps!==s.pendingProps||Wo.current)Ko=!0;else{if(!(o.lanes&m)&&!(s.flags&128))return Ko=!1,Ahe(o,s,m);Ko=!!(o.flags&131072)}else Ko=!1,Nr&&s.flags&1048576&&PQ(s,UT,s.index);switch(s.lanes=0,s.tag){case 2:var S=s.type;nM(o,s),o=s.pendingProps;var L=Ng(s,so.current);Vg(s,m),L=qR(null,s,S,o,L,m);var U=KR();return s.flags|=1,typeof L=="object"&&L!==null&&typeof L.render=="function"&&L.$$typeof===void 0?(s.tag=1,s.memoizedState=null,s.updateQueue=null,qo(S)?(U=!0,FT(s)):U=!1,s.memoizedState=L.state!==null&&L.state!==void 0?L.state:null,NR(s),L.updater=KT,s.stateNode=L,L._reactInternals=s,BR(s,S,o,m),s=t4(null,s,S,!0,U,m)):(s.tag=0,Nr&&U&&MR(s),Co(null,s,L,m),s=s.child),s;case 16:S=s.elementType;e:{switch(nM(o,s),o=s.pendingProps,L=S._init,S=L(S._payload),s.type=S,L=s.tag=Whe(S),o=Os(S,o),L){case 0:s=e4(null,s,S,o,m);break e;case 1:s=wee(null,s,S,o,m);break e;case 11:s=vee(null,s,S,o,m);break e;case 14:s=yee(null,s,S,Os(S.type,o),m);break e}throw Error(a(306,S,""))}return s;case 0:return S=s.type,L=s.pendingProps,L=s.elementType===S?L:Os(S,L),e4(o,s,S,L,m);case 1:return S=s.type,L=s.pendingProps,L=s.elementType===S?L:Os(S,L),wee(o,s,S,L,m);case 3:e:{if(See(s),o===null)throw Error(a(387));S=s.pendingProps,U=s.memoizedState,L=U.element,RQ(o,s),qT(s,S,null,m);var ne=s.memoizedState;if(S=ne.element,U.isDehydrated)if(U={element:S,isDehydrated:!1,cache:ne.cache,pendingSuspenseBoundaries:ne.pendingSuspenseBoundaries,transitions:ne.transitions},s.updateQueue.baseState=U,s.memoizedState=U,s.flags&256){L=Wg(Error(a(423)),s),s=Eee(o,s,S,m,L);break e}else if(S!==L){L=Wg(Error(a(424)),s),s=Eee(o,s,S,m,L);break e}else for(ha=bd(s.stateNode.containerInfo.firstChild),fa=s,Nr=!0,Ds=null,m=HQ(s,null,S,m),s.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(jg(),S===L){s=Lu(o,s,m);break e}Co(o,s,S,m)}s=s.child}return s;case 5:return GQ(s),o===null&&AR(s),S=s.type,L=s.pendingProps,U=o!==null?o.memoizedProps:null,ne=L.children,xR(S,L)?ne=null:U!==null&&xR(S,U)&&(s.flags|=32),xee(o,s),Co(o,s,ne,m),s.child;case 6:return o===null&&AR(s),null;case 13:return kee(o,s,m);case 4:return jR(s,s.stateNode.containerInfo),S=s.pendingProps,o===null?s.child=Hg(s,null,S,m):Co(o,s,S,m),s.child;case 11:return S=s.type,L=s.pendingProps,L=s.elementType===S?L:Os(S,L),vee(o,s,S,L,m);case 7:return Co(o,s,s.pendingProps,m),s.child;case 8:return Co(o,s,s.pendingProps.children,m),s.child;case 12:return Co(o,s,s.pendingProps.children,m),s.child;case 10:e:{if(S=s.type._context,L=s.pendingProps,U=s.memoizedProps,ne=L.value,Ar(HT,S._currentValue),S._currentValue=ne,U!==null)if(Is(U.value,ne)){if(U.children===L.children&&!Wo.current){s=Lu(o,s,m);break e}}else for(U=s.child,U!==null&&(U.return=s);U!==null;){var we=U.dependencies;if(we!==null){ne=U.child;for(var Re=we.firstContext;Re!==null;){if(Re.context===S){if(U.tag===1){Re=Ru(-1,m&-m),Re.tag=2;var at=U.updateQueue;if(at!==null){at=at.shared;var Ct=at.pending;Ct===null?Re.next=Re:(Re.next=Ct.next,Ct.next=Re),at.pending=Re}}U.lanes|=m,Re=U.alternate,Re!==null&&(Re.lanes|=m),LR(U.return,m,s),we.lanes|=m;break}Re=Re.next}}else if(U.tag===10)ne=U.type===s.type?null:U.child;else if(U.tag===18){if(ne=U.return,ne===null)throw Error(a(341));ne.lanes|=m,we=ne.alternate,we!==null&&(we.lanes|=m),LR(ne,m,s),ne=U.sibling}else ne=U.child;if(ne!==null)ne.return=U;else for(ne=U;ne!==null;){if(ne===s){ne=null;break}if(U=ne.sibling,U!==null){U.return=ne.return,ne=U;break}ne=ne.return}U=ne}Co(o,s,L.children,m),s=s.child}return s;case 9:return L=s.type,S=s.pendingProps.children,Vg(s,m),L=Ha(L),S=S(L),s.flags|=1,Co(o,s,S,m),s.child;case 14:return S=s.type,L=Os(S,s.pendingProps),L=Os(S.type,L),yee(o,s,S,L,m);case 15:return bee(o,s,s.type,s.pendingProps,m);case 17:return S=s.type,L=s.pendingProps,L=s.elementType===S?L:Os(S,L),nM(o,s),s.tag=1,qo(S)?(o=!0,FT(s)):o=!1,Vg(s,m),BQ(s,S,L),BR(s,S,L,m),t4(null,s,S,!0,o,m);case 19:return Mee(o,s,m);case 22:return _ee(o,s,m)}throw Error(a(156,s.tag))};function Jee(o,s){return PJ(o,s)}function Ghe(o,s,m,S){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=S,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function qa(o,s,m,S){return new Ghe(o,s,m,S)}function _4(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Whe(o){if(typeof o=="function")return _4(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Ae)return 11;if(o===kt)return 14}return 2}function Ad(o,s){var m=o.alternate;return m===null?(m=qa(o.tag,s,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=s,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,s=o.dependencies,m.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function hM(o,s,m,S,L,U){var ne=2;if(S=o,typeof o=="function")_4(o)&&(ne=1);else if(typeof o=="string")ne=5;else e:switch(o){case ke:return Ch(m.children,L,U,s);case ce:ne=8,L|=8;break;case Ce:return o=qa(12,m,s,L|2),o.elementType=Ce,o.lanes=U,o;case W:return o=qa(13,m,s,L),o.elementType=W,o.lanes=U,o;case Le:return o=qa(19,m,s,L),o.elementType=Le,o.lanes=U,o;case Se:return pM(m,L,U,s);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ge:ne=10;break e;case oe:ne=9;break e;case Ae:ne=11;break e;case kt:ne=14;break e;case Te:ne=16,S=null;break e}throw Error(a(130,o==null?o:typeof o,""))}return s=qa(ne,m,s,L),s.elementType=o,s.type=S,s.lanes=U,s}function Ch(o,s,m,S){return o=qa(7,o,S,s),o.lanes=m,o}function pM(o,s,m,S){return o=qa(22,o,S,s),o.elementType=Se,o.lanes=m,o.stateNode={isHidden:!1},o}function x4(o,s,m){return o=qa(6,o,null,s),o.lanes=m,o}function w4(o,s,m){return s=qa(4,o.children!==null?o.children:[],o.key,s),s.lanes=m,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}function qhe(o,s,m,S,L){this.tag=s,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=J5(0),this.expirationTimes=J5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=J5(0),this.identifierPrefix=S,this.onRecoverableError=L,this.mutableSourceEagerHydrationData=null}function S4(o,s,m,S,L,U,ne,we,Re){return o=new qhe(o,s,m,we,Re),s===1?(s=1,U===!0&&(s|=8)):s=0,U=qa(3,null,null,s),o.current=U,U.stateNode=o,U.memoizedState={element:S,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},NR(U),o}function Khe(o,s,m){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ye,key:S==null?null:""+S,children:o,containerInfo:s,implementation:m}}function Qee(o){if(!o)return xd;o=o._reactInternals;e:{if(vh(o)!==o||o.tag!==1)throw Error(a(170));var s=o;do{switch(s.tag){case 3:s=s.stateNode.context;break e;case 1:if(qo(s.type)){s=s.stateNode.__reactInternalMemoizedMergedChildContext;break e}}s=s.return}while(s!==null);throw Error(a(171))}if(o.tag===1){var m=o.type;if(qo(m))return kQ(o,m,s)}return s}function ete(o,s,m,S,L,U,ne,we,Re){return o=S4(m,S,!0,o,L,U,ne,we,Re),o.context=Qee(null),m=o.current,S=Ao(),L=Pd(m),U=Ru(S,L),U.callback=s!=null?s:null,Ed(m,U,L),o.current.lanes=L,y_(o,L,S),$o(o,S),o}function mM(o,s,m,S){var L=s.current,U=Ao(),ne=Pd(L);return m=Qee(m),s.context===null?s.context=m:s.pendingContext=m,s=Ru(U,ne),s.payload={element:o},S=S===void 0?null:S,S!==null&&(s.callback=S),o=Ed(L,s,ne),o!==null&&(zs(o,L,ne,U),WT(o,L,ne)),ne}function gM(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function tte(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<s?m:s}}function E4(o,s){tte(o,s),(o=o.alternate)&&tte(o,s)}function Xhe(){return null}var nte=typeof reportError=="function"?reportError:function(o){console.error(o)};function k4(o){this._internalRoot=o}vM.prototype.render=k4.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(a(409));mM(o,s,null,null)},vM.prototype.unmount=k4.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;Th(function(){mM(null,o,null,null)}),s[Cu]=null}};function vM(o){this._internalRoot=o}vM.prototype.unstable_scheduleHydration=function(o){if(o){var s=zJ();o={blockedOn:null,target:o,priority:s};for(var m=0;m<gd.length&&s!==0&&s<gd[m].priority;m++);gd.splice(m,0,o),m===0&&BJ(o)}};function T4(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function yM(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function rte(){}function $he(o,s,m,S,L){if(L){if(typeof S=="function"){var U=S;S=function(){var at=gM(ne);U.call(at)}}var ne=ete(s,S,o,0,null,!1,!1,"",rte);return o._reactRootContainer=ne,o[Cu]=ne.current,D_(o.nodeType===8?o.parentNode:o),Th(),ne}for(;L=o.lastChild;)o.removeChild(L);if(typeof S=="function"){var we=S;S=function(){var at=gM(Re);we.call(at)}}var Re=S4(o,0,!1,null,null,!1,!1,"",rte);return o._reactRootContainer=Re,o[Cu]=Re.current,D_(o.nodeType===8?o.parentNode:o),Th(function(){mM(s,Re,m,S)}),Re}function bM(o,s,m,S,L){var U=m._reactRootContainer;if(U){var ne=U;if(typeof L=="function"){var we=L;L=function(){var Re=gM(ne);we.call(Re)}}mM(s,ne,o,L)}else ne=$he(m,s,o,L,S);return gM(ne)}RJ=function(o){switch(o.tag){case 3:var s=o.stateNode;if(s.current.memoizedState.isDehydrated){var m=v_(s.pendingLanes);m!==0&&(Q5(s,m|1),$o(s,ii()),!(ir&6)&&(Xg=ii()+500,wd()))}break;case 13:Th(function(){var S=Ou(o,1);if(S!==null){var L=Ao();zs(S,o,1,L)}}),E4(o,1)}},eR=function(o){if(o.tag===13){var s=Ou(o,134217728);if(s!==null){var m=Ao();zs(s,o,134217728,m)}E4(o,134217728)}},LJ=function(o){if(o.tag===13){var s=Pd(o),m=Ou(o,s);if(m!==null){var S=Ao();zs(m,o,s,S)}E4(o,s)}},zJ=function(){return mr},NJ=function(o,s){var m=mr;try{return mr=o,s()}finally{mr=m}},Tg=function(o,s,m){switch(s){case"input":if(pe(o,m),s=m.name,m.type==="radio"&&s!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+s)+'][type="radio"]'),s=0;s<m.length;s++){var S=m[s];if(S!==o&&S.form===o.form){var L=zT(S);if(!L)throw Error(a(90));ar(S),pe(S,L)}}}break;case"textarea":wt(o,m);break;case"select":s=m.value,s!=null&&Xe(o,!!m.multiple,s,!1)}},xJ=v4,wJ=Th;var Zhe={usingClientEntryPoint:!1,Events:[L_,Lg,zT,bJ,_J,v4]},$_={findFiberByHostInstance:yh,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Yhe={bundleType:$_.bundleType,version:$_.version,rendererPackageName:$_.rendererPackageName,rendererConfig:$_.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Y.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=TJ(o),o===null?null:o.stateNode},findFiberByHostInstance:$_.findFiberByHostInstance||Xhe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Z_=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Z_.isDisabled&&Z_.supportsFiber))try{pT=Z_.inject(Yhe),Pl=Z_}catch{}var Z_;e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zhe,e.createPortal=function(o,s){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!T4(s))throw Error(a(200));return Khe(o,s,null,m)},e.createRoot=function(o,s){if(!T4(o))throw Error(a(299));var m=!1,S="",L=nte;return s!=null&&(s.unstable_strictMode===!0&&(m=!0),s.identifierPrefix!==void 0&&(S=s.identifierPrefix),s.onRecoverableError!==void 0&&(L=s.onRecoverableError)),s=S4(o,1,!1,null,null,m,!1,S,L),o[Cu]=s.current,D_(o.nodeType===8?o.parentNode:o),new k4(s)},e.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=TJ(s),o=o===null?null:o.stateNode,o},e.flushSync=function(o){return Th(o)},e.hydrate=function(o,s,m){if(!yM(s))throw Error(a(200));return bM(null,o,s,!0,m)},e.hydrateRoot=function(o,s,m){if(!T4(o))throw Error(a(405));var S=m!=null&&m.hydratedSources||null,L=!1,U="",ne=nte;if(m!=null&&(m.unstable_strictMode===!0&&(L=!0),m.identifierPrefix!==void 0&&(U=m.identifierPrefix),m.onRecoverableError!==void 0&&(ne=m.onRecoverableError)),s=ete(s,null,o,1,m!=null?m:null,L,!1,U,ne),o[Cu]=s.current,D_(o),S)for(o=0;o<S.length;o++)m=S[o],L=m._getVersion,L=L(m._source),s.mutableSourceEagerHydrationData==null?s.mutableSourceEagerHydrationData=[m,L]:s.mutableSourceEagerHydrationData.push(m,L);return new vM(s)},e.render=function(o,s,m){if(!yM(s))throw Error(a(200));return bM(null,o,s,!1,m)},e.unmountComponentAtNode=function(o){if(!yM(o))throw Error(a(40));return o._reactRootContainer?(Th(function(){bM(null,null,o,!1,function(){o._reactRootContainer=null,o[Cu]=null})}),!0):!1},e.unstable_batchedUpdates=v4,e.unstable_renderSubtreeIntoContainer=function(o,s,m,S){if(!yM(m))throw Error(a(200));if(o==null||o._reactInternals===void 0)throw Error(a(38));return bM(o,s,m,!1,S)},e.version="18.2.0-next-9e3b772b8-20220608"}),Ma=le((e,n)=>{function r(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(r)}catch(a){console.error(a)}}r(),n.exports=L3()});function ZS(e){let[,n]=(0,Pa.useState)(0);return(0,Pa.useCallback)(()=>{n(r=>r+1)},[])}function Tn(e,n,r){let a=(0,Pa.useCallback)(e,n),u=(0,Pa.useRef)(null);u.current?u.current.set(a):u.current=new hm.Atom(a);let c=(0,Pa.useRef)(null);return c.current||(c.current=(0,hm.prism)(()=>u.current.prism.getValue()())),Sf(c.current,r)}function as(){pm||(pm=!0,(0,YS.default)(()=>{(0,JS.unstable_batchedUpdates)(function(){for(var e,n;Bo.length>0;){let r=Bo.shift();Ac.delete(r);let a;ru&&((e=r.debug)==null||e.history.push("queue reached"));try{a=r.der.getValue()}catch(u){ru&&((n=r.debug)==null||n.history.push("queue: der.getValue() errored")),console.error("A `der.getValue()` in `usePrismInstance(der)` threw an error. This may be a zombie child issue, so we're gonna try to get its value again in a normal react render phase.If you see the same error again, then you either have an error in your prism code, or the deps array in `usePrism(fn, deps)` is missing a dependency and causing the prism to read stale values."),console.error(u),r.runUpdate();continue}a!==r.lastValue&&(r.lastValue=a,r.runUpdate())}pm=!1},1)}))}function Sf(e,n){var r;let a=ZS(),u=(0,Pa.useRef)(void 0);u.current||(xy++,u.current={order:xy,runUpdate:()=>{u.current.unmounted||a()},der:e,lastValue:void 0,unmounted:!1,queueUpdate:()=>{var f;ru&&((f=u.current.debug)==null||f.history.push("queueUpdate()")),QS(u.current)},untap:e.onStale(()=>{ru&&u.current.debug.history.push("onStale(cb)"),u.current.queueUpdate()})},ru&&(u.current.debug={label:n,traceOfFirstTimeRender:new Error,history:[]})),(0,Pa.useLayoutEffect)(()=>function(){u.current.unmounted=!0,u.current.untap(),wy(u.current)},[]),wy(u.current);let c=u.current.der.getValue();return u.current.lastValue=c,ru&&((r=u.current.debug)==null||r.history.push("rendered")),c}var hm,YS,Pa,JS,ru,Cn,xy,Bo,Ac,pm,QS,eE,wy,on=z(()=>{hm=St,Xr(),YS=te(O3()),Pa=te(Ie()),JS=te(Ma()),ru=!1,Cn=(e,n)=>Tn(()=>(0,hm.val)(e),[e],n),xy=0,Bo=[],Ac=new Set,pm=!1,QS=e=>{eE(e),as()},eE=e=>{if(!Ac.has(e))if(Ac.add(e),Bo.length===0)Bo.push(e);else{let n=dy(Bo,r=>r.order>=e.order);n===-1?Bo.push(e):Bo[n].order>e.order&&Bo.splice(n,0,e)}},wy=e=>{if(!Ac.has(e))return;Ac.delete(e);let n=dy(Bo,r=>r===e);Bo.splice(n,1)}}),tE=le(e=>{var n=60103,r=60106,a=60107,u=60108,c=60114,f=60109,p=60110,v=60112,y=60113,k=60120,M=60115,T=60116,E=60121,A=60122,C=60117,R=60129,N=60131;typeof Symbol=="function"&&Symbol.for&&(j=Symbol.for,n=j("react.element"),r=j("react.portal"),a=j("react.fragment"),u=j("react.strict_mode"),c=j("react.profiler"),f=j("react.provider"),p=j("react.context"),v=j("react.forward_ref"),y=j("react.suspense"),k=j("react.suspense_list"),M=j("react.memo"),T=j("react.lazy"),E=j("react.block"),A=j("react.server.block"),C=j("react.fundamental"),R=j("react.debug_trace_mode"),N=j("react.legacy_hidden"));var j;function G(W){if(typeof W=="object"&&W!==null){var Le=W.$$typeof;switch(Le){case n:switch(W=W.type,W){case a:case c:case u:case y:case k:return W;default:switch(W=W&&W.$$typeof,W){case p:case v:case T:case M:case f:return W;default:return Le}}case r:return Le}}}var J=f,Y=n,re=v,ye=a,ke=T,ce=M,Ce=r,Ge=c,oe=u,Ae=y;e.ContextConsumer=p,e.ContextProvider=J,e.Element=Y,e.ForwardRef=re,e.Fragment=ye,e.Lazy=ke,e.Memo=ce,e.Portal=Ce,e.Profiler=Ge,e.StrictMode=oe,e.Suspense=Ae,e.isAsyncMode=function(){return!1},e.isConcurrentMode=function(){return!1},e.isContextConsumer=function(W){return G(W)===p},e.isContextProvider=function(W){return G(W)===f},e.isElement=function(W){return typeof W=="object"&&W!==null&&W.$$typeof===n},e.isForwardRef=function(W){return G(W)===v},e.isFragment=function(W){return G(W)===a},e.isLazy=function(W){return G(W)===T},e.isMemo=function(W){return G(W)===M},e.isPortal=function(W){return G(W)===r},e.isProfiler=function(W){return G(W)===c},e.isStrictMode=function(W){return G(W)===u},e.isSuspense=function(W){return G(W)===y},e.isValidElementType=function(W){return typeof W=="string"||typeof W=="function"||W===a||W===c||W===R||W===u||W===y||W===k||W===N||typeof W=="object"&&W!==null&&(W.$$typeof===T||W.$$typeof===M||W.$$typeof===f||W.$$typeof===p||W.$$typeof===v||W.$$typeof===C||W.$$typeof===E||W[0]===A)},e.typeOf=G}),z3=le((e,n)=>{n.exports=tE()}),Ic=le((e,n)=>{n.exports=function(r,a,u,c){var f=u?u.call(c,r,a):void 0;if(f!==void 0)return!!f;if(r===a)return!0;if(typeof r!="object"||!r||typeof a!="object"||!a)return!1;var p=Object.keys(r),v=Object.keys(a);if(p.length!==v.length)return!1;for(var y=Object.prototype.hasOwnProperty.bind(a),k=0;k<p.length;k++){var M=p[k];if(!y(M))return!1;var T=r[M],E=a[M];if(f=u?u.call(c,T,E,M):void 0,f===!1||f===void 0&&T!==E)return!1}return!0}});function nE(e){function n(de,Ke,Ze,nt,Fe){for(var Gt=0,ct=0,jt=0,nn=0,gn,dn,ar=0,$=0,it,rt=it=gn=0,ve=0,pe=0,Be=0,gt=0,xt=Ze.length,Xe=xt-1,Tt,_t="",wt="",un="",rr="",Mn;ve<xt;){if(dn=Ze.charCodeAt(ve),ve===Xe&&ct+nn+jt+Gt!==0&&(ct!==0&&(dn=ct===47?10:47),nn=jt=Gt=0,xt++,Xe++),ct+nn+jt+Gt===0){if(ve===Xe&&(0<pe&&(_t=_t.replace(T,"")),0<_t.trim().length)){switch(dn){case 32:case 9:case 59:case 13:case 10:break;default:_t+=Ze.charAt(ve)}dn=59}switch(dn){case 123:for(_t=_t.trim(),gn=_t.charCodeAt(0),it=1,gt=++ve;ve<xt;){switch(dn=Ze.charCodeAt(ve)){case 123:it++;break;case 125:it--;break;case 47:switch(dn=Ze.charCodeAt(ve+1)){case 42:case 47:e:{for(rt=ve+1;rt<Xe;++rt)switch(Ze.charCodeAt(rt)){case 47:if(dn===42&&Ze.charCodeAt(rt-1)===42&&ve+2!==rt){ve=rt+1;break e}break;case 10:if(dn===47){ve=rt+1;break e}}ve=rt}}break;case 91:dn++;case 40:dn++;case 34:case 39:for(;ve++<Xe&&Ze.charCodeAt(ve)!==dn;);}if(it===0)break;ve++}switch(it=Ze.substring(gt,ve),gn===0&&(gn=(_t=_t.replace(M,"").trim()).charCodeAt(0)),gn){case 64:switch(0<pe&&(_t=_t.replace(T,"")),dn=_t.charCodeAt(1),dn){case 100:case 109:case 115:case 45:pe=Ke;break;default:pe=kt}if(it=n(Ke,pe,it,dn,Fe+1),gt=it.length,0<Se&&(pe=r(kt,_t,Be),Mn=p(3,it,pe,Ke,Ae,oe,gt,dn,Fe,nt),_t=pe.join(""),Mn!==void 0&&(gt=(it=Mn.trim()).length)===0&&(dn=0,it="")),0<gt)switch(dn){case 115:_t=_t.replace(re,f);case 100:case 109:case 45:it=_t+"{"+it+"}";break;case 107:_t=_t.replace(j,"$1 $2"),it=_t+"{"+it+"}",it=Le===1||Le===2&&c("@"+it,3)?"@-webkit-"+it+"@"+it:"@"+it;break;default:it=_t+it,nt===112&&(it=(wt+=it,""))}else it="";break;default:it=n(Ke,r(Ke,_t,Be),it,nt,Fe+1)}un+=it,it=Be=pe=rt=gn=0,_t="",dn=Ze.charCodeAt(++ve);break;case 125:case 59:if(_t=(0<pe?_t.replace(T,""):_t).trim(),1<(gt=_t.length))switch(rt===0&&(gn=_t.charCodeAt(0),gn===45||96<gn&&123>gn)&&(gt=(_t=_t.replace(" ",":")).length),0<Se&&(Mn=p(1,_t,Ke,de,Ae,oe,wt.length,nt,Fe,nt))!==void 0&&(gt=(_t=Mn.trim()).length)===0&&(_t="\0\0"),gn=_t.charCodeAt(0),dn=_t.charCodeAt(1),gn){case 0:break;case 64:if(dn===105||dn===99){rr+=_t+Ze.charAt(ve);break}default:_t.charCodeAt(gt-1)!==58&&(wt+=u(_t,gn,dn,_t.charCodeAt(2)))}Be=pe=rt=gn=0,_t="",dn=Ze.charCodeAt(++ve)}}switch(dn){case 13:case 10:ct===47?ct=0:1+gn===0&&nt!==107&&0<_t.length&&(pe=1,_t+="\0"),0<Se*pt&&p(0,_t,Ke,de,Ae,oe,wt.length,nt,Fe,nt),oe=1,Ae++;break;case 59:case 125:if(ct+nn+jt+Gt===0){oe++;break}default:switch(oe++,Tt=Ze.charAt(ve),dn){case 9:case 32:if(nn+Gt+ct===0)switch(ar){case 44:case 58:case 9:case 32:Tt="";break;default:dn!==32&&(Tt=" ")}break;case 0:Tt="\\0";break;case 12:Tt="\\f";break;case 11:Tt="\\v";break;case 38:nn+ct+Gt===0&&(pe=Be=1,Tt="\f"+Tt);break;case 108:if(nn+ct+Gt+W===0&&0<rt)switch(ve-rt){case 2:ar===112&&Ze.charCodeAt(ve-3)===58&&(W=ar);case 8:$===111&&(W=$)}break;case 58:nn+ct+Gt===0&&(rt=ve);break;case 44:ct+jt+nn+Gt===0&&(pe=1,Tt+="\r");break;case 34:case 39:ct===0&&(nn=nn===dn?0:nn===0?dn:nn);break;case 91:nn+ct+jt===0&&Gt++;break;case 93:nn+ct+jt===0&&Gt--;break;case 41:nn+ct+Gt===0&&jt--;break;case 40:if(nn+ct+Gt===0){if(gn===0)switch(2*ar+3*$){case 533:break;default:gn=1}jt++}break;case 64:ct+jt+nn+Gt+rt+it===0&&(it=1);break;case 42:case 47:if(!(0<nn+Gt+jt))switch(ct){case 0:switch(2*dn+3*Ze.charCodeAt(ve+1)){case 235:ct=47;break;case 220:gt=ve,ct=42}break;case 42:dn===47&&ar===42&&gt+2!==ve&&(Ze.charCodeAt(gt+2)===33&&(wt+=Ze.substring(gt,ve+1)),Tt="",ct=0)}}ct===0&&(_t+=Tt)}$=ar,ar=dn,ve++}if(gt=wt.length,0<gt){if(pe=Ke,0<Se&&(Mn=p(2,wt,pe,de,Ae,oe,gt,nt,Fe,nt),Mn!==void 0&&(wt=Mn).length===0))return rr+wt+un;if(wt=pe.join(",")+"{"+wt+"}",Le*W!==0){switch(Le!==2||c(wt,2)||(W=0),W){case 111:wt=wt.replace(J,":-moz-$1")+wt;break;case 112:wt=wt.replace(G,"::-webkit-input-$1")+wt.replace(G,"::-moz-$1")+wt.replace(G,":-ms-input-$1")+wt}W=0}}return rr+wt+un}function r(de,Ke,Ze){var nt=Ke.trim().split(R);Ke=nt;var Fe=nt.length,Gt=de.length;switch(Gt){case 0:case 1:var ct=0;for(de=Gt===0?"":de[0]+" ";ct<Fe;++ct)Ke[ct]=a(de,Ke[ct],Ze).trim();break;default:var jt=ct=0;for(Ke=[];ct<Fe;++ct)for(var nn=0;nn<Gt;++nn)Ke[jt++]=a(de[nn]+" ",nt[ct],Ze).trim()}return Ke}function a(de,Ke,Ze){var nt=Ke.charCodeAt(0);switch(33>nt&&(nt=(Ke=Ke.trim()).charCodeAt(0)),nt){case 38:return Ke.replace(N,"$1"+de.trim());case 58:return de.trim()+Ke.replace(N,"$1"+de.trim());default:if(0<1*Ze&&0<Ke.indexOf("\f"))return Ke.replace(N,(de.charCodeAt(0)===58?"":"$1")+de.trim())}return de+Ke}function u(de,Ke,Ze,nt){var Fe=de+";",Gt=2*Ke+3*Ze+4*nt;if(Gt===944){de=Fe.indexOf(":",9)+1;var ct=Fe.substring(de,Fe.length-1).trim();return ct=Fe.substring(0,de).trim()+ct+";",Le===1||Le===2&&c(ct,1)?"-webkit-"+ct+ct:ct}if(Le===0||Le===2&&!c(Fe,1))return Fe;switch(Gt){case 1015:return Fe.charCodeAt(10)===97?"-webkit-"+Fe+Fe:Fe;case 951:return Fe.charCodeAt(3)===116?"-webkit-"+Fe+Fe:Fe;case 963:return Fe.charCodeAt(5)===110?"-webkit-"+Fe+Fe:Fe;case 1009:if(Fe.charCodeAt(4)!==100)break;case 969:case 942:return"-webkit-"+Fe+Fe;case 978:return"-webkit-"+Fe+"-moz-"+Fe+Fe;case 1019:case 983:return"-webkit-"+Fe+"-moz-"+Fe+"-ms-"+Fe+Fe;case 883:if(Fe.charCodeAt(8)===45)return"-webkit-"+Fe+Fe;if(0<Fe.indexOf("image-set(",11))return Fe.replace(Ge,"$1-webkit-$2")+Fe;break;case 932:if(Fe.charCodeAt(4)===45)switch(Fe.charCodeAt(5)){case 103:return"-webkit-box-"+Fe.replace("-grow","")+"-webkit-"+Fe+"-ms-"+Fe.replace("grow","positive")+Fe;case 115:return"-webkit-"+Fe+"-ms-"+Fe.replace("shrink","negative")+Fe;case 98:return"-webkit-"+Fe+"-ms-"+Fe.replace("basis","preferred-size")+Fe}return"-webkit-"+Fe+"-ms-"+Fe+Fe;case 964:return"-webkit-"+Fe+"-ms-flex-"+Fe+Fe;case 1023:if(Fe.charCodeAt(8)!==99)break;return ct=Fe.substring(Fe.indexOf(":",15)).replace("flex-","").replace("space-between","justify"),"-webkit-box-pack"+ct+"-webkit-"+Fe+"-ms-flex-pack"+ct+Fe;case 1005:return A.test(Fe)?Fe.replace(E,":-webkit-")+Fe.replace(E,":-moz-")+Fe:Fe;case 1e3:switch(ct=Fe.substring(13).trim(),Ke=ct.indexOf("-")+1,ct.charCodeAt(0)+ct.charCodeAt(Ke)){case 226:ct=Fe.replace(Y,"tb");break;case 232:ct=Fe.replace(Y,"tb-rl");break;case 220:ct=Fe.replace(Y,"lr");break;default:return Fe}return"-webkit-"+Fe+"-ms-"+ct+Fe;case 1017:if(Fe.indexOf("sticky",9)===-1)break;case 975:switch(Ke=(Fe=de).length-10,ct=(Fe.charCodeAt(Ke)===33?Fe.substring(0,Ke):Fe).substring(de.indexOf(":",7)+1).trim(),Gt=ct.charCodeAt(0)+(ct.charCodeAt(7)|0)){case 203:if(111>ct.charCodeAt(8))break;case 115:Fe=Fe.replace(ct,"-webkit-"+ct)+";"+Fe;break;case 207:case 102:Fe=Fe.replace(ct,"-webkit-"+(102<Gt?"inline-":"")+"box")+";"+Fe.replace(ct,"-webkit-"+ct)+";"+Fe.replace(ct,"-ms-"+ct+"box")+";"+Fe}return Fe+";";case 938:if(Fe.charCodeAt(5)===45)switch(Fe.charCodeAt(6)){case 105:return ct=Fe.replace("-items",""),"-webkit-"+Fe+"-webkit-box-"+ct+"-ms-flex-"+ct+Fe;case 115:return"-webkit-"+Fe+"-ms-flex-item-"+Fe.replace(ke,"")+Fe;default:return"-webkit-"+Fe+"-ms-flex-line-pack"+Fe.replace("align-content","").replace(ke,"")+Fe}break;case 973:case 989:if(Fe.charCodeAt(3)!==45||Fe.charCodeAt(4)===122)break;case 931:case 953:if(Ce.test(de)===!0)return(ct=de.substring(de.indexOf(":")+1)).charCodeAt(0)===115?u(de.replace("stretch","fill-available"),Ke,Ze,nt).replace(":fill-available",":stretch"):Fe.replace(ct,"-webkit-"+ct)+Fe.replace(ct,"-moz-"+ct.replace("fill-",""))+Fe;break;case 962:if(Fe="-webkit-"+Fe+(Fe.charCodeAt(5)===102?"-ms-"+Fe:"")+Fe,Ze+nt===211&&Fe.charCodeAt(13)===105&&0<Fe.indexOf("transform",10))return Fe.substring(0,Fe.indexOf(";",27)+1).replace(C,"$1-webkit-$2")+Fe}return Fe}function c(de,Ke){var Ze=de.indexOf(Ke===1?":":"{"),nt=de.substring(0,Ke!==3?Ze:10);return Ze=de.substring(Ze+1,de.length-1),Ne(Ke!==2?nt:nt.replace(ce,"$1"),Ze,Ke)}function f(de,Ke){var Ze=u(Ke,Ke.charCodeAt(0),Ke.charCodeAt(1),Ke.charCodeAt(2));return Ze!==Ke+";"?Ze.replace(ye," or ($1)").substring(4):"("+Ke+")"}function p(de,Ke,Ze,nt,Fe,Gt,ct,jt,nn,gn){for(var dn=0,ar=Ke,$;dn<Se;++dn)switch($=Te[dn].call(k,de,ar,Ze,nt,Fe,Gt,ct,jt,nn,gn)){case void 0:case!1:case!0:case null:break;default:ar=$}if(ar!==Ke)return ar}function v(de){switch(de){case void 0:case null:Se=Te.length=0;break;default:if(typeof de=="function")Te[Se++]=de;else if(typeof de=="object")for(var Ke=0,Ze=de.length;Ke<Ze;++Ke)v(de[Ke]);else pt=!!de|0}return v}function y(de){return de=de.prefix,de!==void 0&&(Ne=null,de?typeof de!="function"?Le=1:(Le=2,Ne=de):Le=0),y}function k(de,Ke){var Ze=de;if(33>Ze.charCodeAt(0)&&(Ze=Ze.trim()),ae=Ze,Ze=[ae],0<Se){var nt=p(-1,Ke,Ze,Ze,Ae,oe,0,0,0,0);nt!==void 0&&typeof nt=="string"&&(Ke=nt)}var Fe=n(kt,Ze,Ke,0,0);return 0<Se&&(nt=p(-2,Fe,Ze,Ze,Ae,oe,Fe.length,0,0,0),nt!==void 0&&(Fe=nt)),ae="",W=0,oe=Ae=1,Fe}var M=/^\0+/g,T=/[\0\r\f]/g,E=/: */g,A=/zoo|gra/,C=/([,: ])(transform)/g,R=/,\r+?/g,N=/([\t\r\n ])*\f?&/g,j=/@(k\w+)\s*(\S*)\s*/,G=/::(place)/g,J=/:(read-only)/g,Y=/[svh]\w+-[tblr]{2}/,re=/\(\s*(.*)\s*\)/g,ye=/([\s\S]*?);/g,ke=/-self|flex-/g,ce=/[^]*?(:[rp][el]a[\w-]+)[^]*/,Ce=/stretch|:\s*\w+\-(?:conte|avail)/,Ge=/([^-])(image-set\()/,oe=1,Ae=1,W=0,Le=1,kt=[],Te=[],Se=0,Ne=null,pt=0,ae="";return k.use=v,k.set=y,e!==void 0&&y(e),k}var rE,N3=z(()=>{rE=nE}),iE,oE,mm=z(()=>{iE={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},oE=iE});function F3(e){var n=Object.create(null);return function(r){return n[r]===void 0&&(n[r]=e(r)),n[r]}}var Dc,B3=z(()=>{Dc=F3}),aE,sE,Sy,Ey=z(()=>{B3(),aE=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,sE=Dc(function(e){return aE.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),Sy=sE}),lE=le(e=>{var n=typeof Symbol=="function"&&Symbol.for,r=n?Symbol.for("react.element"):60103,a=n?Symbol.for("react.portal"):60106,u=n?Symbol.for("react.fragment"):60107,c=n?Symbol.for("react.strict_mode"):60108,f=n?Symbol.for("react.profiler"):60114,p=n?Symbol.for("react.provider"):60109,v=n?Symbol.for("react.context"):60110,y=n?Symbol.for("react.async_mode"):60111,k=n?Symbol.for("react.concurrent_mode"):60111,M=n?Symbol.for("react.forward_ref"):60112,T=n?Symbol.for("react.suspense"):60113,E=n?Symbol.for("react.suspense_list"):60120,A=n?Symbol.for("react.memo"):60115,C=n?Symbol.for("react.lazy"):60116,R=n?Symbol.for("react.block"):60121,N=n?Symbol.for("react.fundamental"):60117,j=n?Symbol.for("react.responder"):60118,G=n?Symbol.for("react.scope"):60119;function J(re){if(typeof re=="object"&&re!==null){var ye=re.$$typeof;switch(ye){case r:switch(re=re.type,re){case y:case k:case u:case f:case c:case T:return re;default:switch(re=re&&re.$$typeof,re){case v:case M:case C:case A:case p:return re;default:return ye}}case a:return ye}}}function Y(re){return J(re)===k}e.AsyncMode=y,e.ConcurrentMode=k,e.ContextConsumer=v,e.ContextProvider=p,e.Element=r,e.ForwardRef=M,e.Fragment=u,e.Lazy=C,e.Memo=A,e.Portal=a,e.Profiler=f,e.StrictMode=c,e.Suspense=T,e.isAsyncMode=function(re){return Y(re)||J(re)===y},e.isConcurrentMode=Y,e.isContextConsumer=function(re){return J(re)===v},e.isContextProvider=function(re){return J(re)===p},e.isElement=function(re){return typeof re=="object"&&re!==null&&re.$$typeof===r},e.isForwardRef=function(re){return J(re)===M},e.isFragment=function(re){return J(re)===u},e.isLazy=function(re){return J(re)===C},e.isMemo=function(re){return J(re)===A},e.isPortal=function(re){return J(re)===a},e.isProfiler=function(re){return J(re)===f},e.isStrictMode=function(re){return J(re)===c},e.isSuspense=function(re){return J(re)===T},e.isValidElementType=function(re){return typeof re=="string"||typeof re=="function"||re===u||re===k||re===f||re===c||re===T||re===E||typeof re=="object"&&re!==null&&(re.$$typeof===C||re.$$typeof===A||re.$$typeof===p||re.$$typeof===v||re.$$typeof===M||re.$$typeof===N||re.$$typeof===j||re.$$typeof===G||re.$$typeof===R)},e.typeOf=J}),j3=le((e,n)=>{n.exports=lE()}),U3=le((e,n)=>{var r=j3(),a={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},u={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},c={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},p={};p[r.ForwardRef]=c,p[r.Memo]=f;function v(R){return r.isMemo(R)?f:p[R.$$typeof]||a}var y=Object.defineProperty,k=Object.getOwnPropertyNames,M=Object.getOwnPropertySymbols,T=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf,A=Object.prototype;function C(R,N,j){if(typeof N!="string"){if(A){var G=E(N);G&&G!==A&&C(R,G,j)}var J=k(N);M&&(J=J.concat(M(N)));for(var Y=v(R),re=v(N),ye=0;ye<J.length;++ye){var ke=J[ye];if(!u[ke]&&!(j&&j[ke])&&!(re&&re[ke])&&!(Y&&Y[ke])){var ce=T(N,ke);try{y(R,ke,ce)}catch{}}}}return R}n.exports=C});function zr(){return(zr=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}).apply(this,arguments)}function ra(e){return typeof e=="function"}function tl(e){return e.displayName||e.name||"Component"}function ky(e){return e&&typeof e.styledComponentId=="string"}function yo(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];throw new Error("An error occurred. See https://git.io/JUIaE#"+e+" for more information."+(r.length>0?" Args: "+r.join(", "):""))}function nl(e){var n,r="";for(n=Math.abs(e);n>52;n=n/52|0)r=Oy(n%52)+r;return(Oy(n%52)+r).replace(eo,"$1-$2")}function gm(e){for(var n=0;n<e.length;n+=1){var r=e[n];if(ra(r)&&!ky(r))return!1}return!0}function uE(e){var n,r,a,u,c=e===void 0?jo:e,f=c.options,p=f===void 0?jo:f,v=c.plugins,y=v===void 0?Rc:v,k=new rE(p),M=[],T=function(C){function R(N){if(N)try{C(N+"}")}catch{}}return function(N,j,G,J,Y,re,ye,ke,ce,Ce){switch(N){case 1:if(ce===0&&j.charCodeAt(0)===64)return C(j+";"),"";break;case 2:if(ke===0)return j+"/*|*/";break;case 3:switch(ke){case 102:case 112:return C(G[0]+j),"";default:return j+(Ce===0?"/*|*/":"")}case-2:j.split("/*|*/}").forEach(R)}}}(function(C){M.push(C)}),E=function(C,R,N){return R===0&&vE.indexOf(N[r.length])!==-1||N.match(u)?C:"."+n};function A(C,R,N,j){j===void 0&&(j="&");var G=C.replace(gE,""),J=R&&N?N+" "+R+" { "+G+" }":G;return n=j,r=R,a=new RegExp("\\"+r+"\\b","g"),u=new RegExp("(\\"+r+"\\b){2,}"),k(N||!R?"":R,J)}return k.use([].concat(y,[function(C,R,N){C===2&&N.length&&N[0].lastIndexOf(r)>0&&(N[0]=N[0].replace(a,E))},T,function(C){if(C===-2){var R=M;return M=[],R}}])),A.hash=y.length?y.reduce(function(C,R){return R.name||yo(15),ls(C,R.name)},5381).toString():"",A}function vm(){return(0,Ir.useContext)(Cf)||Ny}function cE(){return(0,Ir.useContext)(Fc)||Mm}function ym(e){var n=(0,Ir.useState)(e.stylisPlugins),r=n[0],a=n[1],u=vm(),c=(0,Ir.useMemo)(function(){var p=u;return e.sheet?p=e.sheet:e.target&&(p=p.reconstructWithOptions({target:e.target},!1)),e.disableCSSOMInjection&&(p=p.reconstructWithOptions({useCSSOMInjection:!1})),p},[e.disableCSSOMInjection,e.sheet,e.target]),f=(0,Ir.useMemo)(function(){return uE({options:{prefix:!e.disableVendorPrefixes},plugins:r})},[e.disableVendorPrefixes,r]);return(0,Ir.useEffect)(function(){(0,Py.default)(r,e.stylisPlugins)||a(e.stylisPlugins)},[e.stylisPlugins]),Ir.default.createElement(Cf.Provider,{value:c},Ir.default.createElement(Fc.Provider,{value:f},e.children))}function bm(e){return Pm.test(e)?e.replace(Fy,_E).replace(bE,"-ms-"):e}function bo(e,n,r,a){if(Array.isArray(e)){for(var u,c=[],f=0,p=e.length;f<p;f+=1)(u=bo(e[f],n,r,a))!==""&&(Array.isArray(u)?c.push.apply(c,u):c.push(u));return c}if(h(e))return"";if(ky(e))return"."+e.styledComponentId;if(ra(e)){if(typeof(y=e)!="function"||y.prototype&&y.prototype.isReactComponent||!n)return e;var v=e(n);return bo(v,n,r,a)}var y;return e instanceof yE?r?(e.inject(r,a),e.getName(a)):e:iu(e)?function k(M,T){var E,A,C=[];for(var R in M)M.hasOwnProperty(R)&&!h(M[R])&&(Array.isArray(M[R])&&M[R].isCss||ra(M[R])?C.push(bm(R)+":",M[R],";"):iu(M[R])?C.push.apply(C,k(M[R],R)):C.push(bm(R)+": "+(E=R,(A=M[R])==null||typeof A=="boolean"||A===""?"":typeof A!="number"||A===0||E in oE||E.startsWith("--")?String(A).trim():A+"px")+";"));return T?[T+" {"].concat(C,["}"]):C}(e):e.toString()}function Bi(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ra(e)||iu(e)?b(bo(kf(Rc,[e].concat(r)))):r.length===0&&e.length===1&&typeof e[0]=="string"?e:b(bo(kf(e,r)))}function Ef(e){return e.replace(H,"-").replace(ee,"")}function _m(e){return typeof e=="string"&&!0}function Ty(e,n,r){var a=e[r];Me(n)&&Me(a)?Ca(a,n):e[r]=n}function Ca(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];for(var u=0,c=r;u<c.length;u++){var f=c[u];if(Me(f))for(var p in f)Ue(p)&&Ty(e,f[p],p)}return e}function My(e,n,r){var a=ky(e),u=!_m(e),c=n.attrs,f=c===void 0?Rc:c,p=n.componentId,v=p===void 0?function(j,G){var J=typeof j!="string"?"sc":Ef(j);lt[J]=(lt[J]||0)+1;var Y=J+"-"+ue("5.3.11"+J+lt[J]);return G?G+"-"+Y:Y}(n.displayName,n.parentComponentId):p,y=n.displayName,k=y===void 0?function(j){return _m(j)?"styled."+j:"Styled("+tl(j)+")"}(e):y,M=n.displayName&&n.componentId?Ef(n.displayName)+"-"+n.componentId:n.componentId||v,T=a&&e.attrs?Array.prototype.concat(e.attrs,f).filter(Boolean):f,E=n.shouldForwardProp;a&&e.shouldForwardProp&&(E=n.shouldForwardProp?function(j,G,J){return e.shouldForwardProp(j,G,J)&&n.shouldForwardProp(j,G,J)}:e.shouldForwardProp);var A,C=new zy(r,M,a?e.componentStyle:void 0),R=C.isStatic&&f.length===0,N=function(j,G){return function(J,Y,re,ye){var ke=J.attrs,ce=J.componentStyle,Ce=J.defaultProps,Ge=J.foldedComponentIds,oe=J.shouldForwardProp,Ae=J.styledComponentId,W=J.target,Le=function(nt,Fe,Gt){nt===void 0&&(nt=jo);var ct=zr({},Fe,{theme:nt}),jt={};return Gt.forEach(function(nn){var gn,dn,ar,$=nn;for(gn in ra($)&&($=$(ct)),$)ct[gn]=jt[gn]=gn==="className"?(dn=jt[gn],ar=$[gn],dn&&ar?dn+" "+ar:dn||ar):$[gn]}),[ct,jt]}(I(Y,(0,Ir.useContext)(qe),Ce)||jo,Y,ke),kt=Le[0],Te=Le[1],Se=function(nt,Fe,Gt,ct){var jt=vm(),nn=cE(),gn=Fe?nt.generateAndInjectStyles(jo,jt,nn):nt.generateAndInjectStyles(Gt,jt,nn);return gn}(ce,ye,kt),Ne=re,pt=Te.$as||Y.$as||Te.as||Y.as||W,ae=_m(pt),de=Te!==Y?zr({},Y,{},Te):Y,Ke={};for(var Ze in de)Ze[0]!=="$"&&Ze!=="as"&&(Ze==="forwardedAs"?Ke.as=de[Ze]:(oe?oe(Ze,Sy,pt):!ae||Sy(Ze))&&(Ke[Ze]=de[Ze]));return Y.style&&Te.style!==Y.style&&(Ke.style=zr({},Y.style,{},Te.style)),Ke.className=Array.prototype.concat(Ge,Ae,Se!==Ae?Se:null,Y.className,Te.className).filter(Boolean).join(" "),Ke.ref=Ne,(0,Ir.createElement)(pt,Ke)}(A,j,G,R)};return N.displayName=k,(A=Ir.default.forwardRef(N)).attrs=T,A.componentStyle=C,A.displayName=k,A.shouldForwardProp=E,A.foldedComponentIds=a?Array.prototype.concat(e.foldedComponentIds,e.styledComponentId):Rc,A.styledComponentId=M,A.target=a?e.target:e,A.withComponent=function(j){var G=n.componentId,J=function(re,ye){if(re==null)return{};var ke,ce,Ce={},Ge=Object.keys(re);for(ce=0;ce<Ge.length;ce++)ke=Ge[ce],ye.indexOf(ke)>=0||(Ce[ke]=re[ke]);return Ce}(n,["componentId"]),Y=G&&G+"-"+(_m(j)?j:Ef(tl(j)));return My(j,zr({},J,{attrs:T,componentId:Y}),r)},Object.defineProperty(A,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(j){this._foldedDefaultProps=a?Ca({},e.defaultProps,j):j}}),Object.defineProperty(A,"toString",{value:function(){return"."+A.styledComponentId}}),u&&(0,dE.default)(A,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0,withComponent:!0}),A}function xm(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var u=Bi.apply(void 0,[e].concat(r)),c="sc-global-"+ue(JSON.stringify(u)),f=new At(u,c);function p(y){var k=vm(),M=cE(),T=(0,Ir.useContext)(qe),E=(0,Ir.useRef)(k.allocateGSInstance(c)).current;return k.server&&v(E,y,k,T,M),(0,Ir.useLayoutEffect)(function(){if(!k.server)return v(E,y,k,T,M),function(){return f.removeStyles(E,k)}},[E,y,k,T,M]),null}function v(y,k,M,T,E){if(f.isStatic)f.renderStyles(y,Sm,M,E);else{var A=zr({},k,{theme:I(k,T,p.defaultProps)});f.renderStyles(y,A,M,E)}}return Ir.default.memo(p)}var Oc,Ir,Py,dE,kf,iu,Rc,jo,ia,Tf,wm,Sm,Em,Mf,Lc,ou,ss,km,fE,hE,Cy,Ay,Iy,xi,Dy,Tm,pE,mE,zc,Pf,Nc,eo,Oy,ls,Ry,Ly,zy,gE,vE,Cf,Fc,Ny,Mm,yE,Pm,Fy,bE,_E,h,b,I,H,ee,ue,Me,Ue,qe,lt,Pt,At,se,We=z(()=>{Oc=te(z3()),Ir=te(Ie()),Py=te(Ic()),N3(),mm(),Ey(),dE=te(U3()),kf=function(e,n){for(var r=[e[0]],a=0,u=n.length;a<u;a+=1)r.push(n[a],e[a+1]);return r},iu=function(e){return e!==null&&typeof e=="object"&&(e.toString?e.toString():Object.prototype.toString.call(e))==="[object Object]"&&!(0,Oc.typeOf)(e)},Rc=Object.freeze([]),jo=Object.freeze({}),ia=typeof process!="undefined"&&process.env!==void 0&&({}.REACT_APP_SC_ATTR||{}.SC_ATTR)||"data-styled",Tf=typeof window!="undefined"&&"HTMLElement"in window,wm=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process!="undefined"&&process.env!==void 0&&({}.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&{}.REACT_APP_SC_DISABLE_SPEEDY!==""?{}.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&{}.REACT_APP_SC_DISABLE_SPEEDY:{}.SC_DISABLE_SPEEDY!==void 0&&{}.SC_DISABLE_SPEEDY!==""&&{}.SC_DISABLE_SPEEDY!=="false"&&{}.SC_DISABLE_SPEEDY)),Sm={},Em=function(){function e(r){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=r}var n=e.prototype;return n.indexOfGroup=function(r){for(var a=0,u=0;u<r;u++)a+=this.groupSizes[u];return a},n.insertRules=function(r,a){if(r>=this.groupSizes.length){for(var u=this.groupSizes,c=u.length,f=c;r>=f;)(f<<=1)<0&&yo(16,""+r);this.groupSizes=new Uint32Array(f),this.groupSizes.set(u),this.length=f;for(var p=c;p<f;p++)this.groupSizes[p]=0}for(var v=this.indexOfGroup(r+1),y=0,k=a.length;y<k;y++)this.tag.insertRule(v,a[y])&&(this.groupSizes[r]++,v++)},n.clearGroup=function(r){if(r<this.length){var a=this.groupSizes[r],u=this.indexOfGroup(r),c=u+a;this.groupSizes[r]=0;for(var f=u;f<c;f++)this.tag.deleteRule(u)}},n.getGroup=function(r){var a="";if(r>=this.length||this.groupSizes[r]===0)return a;for(var u=this.groupSizes[r],c=this.indexOfGroup(r),f=c+u,p=c;p<f;p++)a+=this.tag.getRule(p)+`/*!sc*/
`;return a},e}(),Mf=new Map,Lc=new Map,ou=1,ss=function(e){if(Mf.has(e))return Mf.get(e);for(;Lc.has(ou);)ou++;var n=ou++;return Mf.set(e,n),Lc.set(n,e),n},km=function(e){return Lc.get(e)},fE=function(e,n){n>=ou&&(ou=n+1),Mf.set(e,n),Lc.set(n,e)},hE="style["+ia+'][data-styled-version="5.3.11"]',Cy=new RegExp("^"+ia+'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)'),Ay=function(e,n,r){for(var a,u=r.split(","),c=0,f=u.length;c<f;c++)(a=u[c])&&e.registerName(n,a)},Iy=function(e,n){for(var r=(n.textContent||"").split(`/*!sc*/
`),a=[],u=0,c=r.length;u<c;u++){var f=r[u].trim();if(f){var p=f.match(Cy);if(p){var v=0|parseInt(p[1],10),y=p[2];v!==0&&(fE(y,v),Ay(e,y,p[3]),e.getTag().insertRules(v,a)),a.length=0}else a.push(f)}}},xi=function(){return typeof __webpack_nonce__!="undefined"?__webpack_nonce__:null},Dy=function(e){var n=document.head,r=e||n,a=document.createElement("style"),u=function(p){for(var v=p.childNodes,y=v.length;y>=0;y--){var k=v[y];if(k&&k.nodeType===1&&k.hasAttribute(ia))return k}}(r),c=u!==void 0?u.nextSibling:null;a.setAttribute(ia,"active"),a.setAttribute("data-styled-version","5.3.11");var f=xi();return f&&a.setAttribute("nonce",f),r.insertBefore(a,c),a},Tm=function(){function e(r){var a=this.element=Dy(r);a.appendChild(document.createTextNode("")),this.sheet=function(u){if(u.sheet)return u.sheet;for(var c=document.styleSheets,f=0,p=c.length;f<p;f++){var v=c[f];if(v.ownerNode===u)return v}yo(17)}(a),this.length=0}var n=e.prototype;return n.insertRule=function(r,a){try{return this.sheet.insertRule(a,r),this.length++,!0}catch{return!1}},n.deleteRule=function(r){this.sheet.deleteRule(r),this.length--},n.getRule=function(r){var a=this.sheet.cssRules[r];return a!==void 0&&typeof a.cssText=="string"?a.cssText:""},e}(),pE=function(){function e(r){var a=this.element=Dy(r);this.nodes=a.childNodes,this.length=0}var n=e.prototype;return n.insertRule=function(r,a){if(r<=this.length&&r>=0){var u=document.createTextNode(a),c=this.nodes[r];return this.element.insertBefore(u,c||null),this.length++,!0}return!1},n.deleteRule=function(r){this.element.removeChild(this.nodes[r]),this.length--},n.getRule=function(r){return r<this.length?this.nodes[r].textContent:""},e}(),mE=function(){function e(r){this.rules=[],this.length=0}var n=e.prototype;return n.insertRule=function(r,a){return r<=this.length&&(this.rules.splice(r,0,a),this.length++,!0)},n.deleteRule=function(r){this.rules.splice(r,1),this.length--},n.getRule=function(r){return r<this.length?this.rules[r]:""},e}(),zc=Tf,Pf={isServer:!Tf,useCSSOMInjection:!wm},Nc=function(){function e(r,a,u){r===void 0&&(r=jo),a===void 0&&(a={}),this.options=zr({},Pf,{},r),this.gs=a,this.names=new Map(u),this.server=!!r.isServer,!this.server&&Tf&&zc&&(zc=!1,function(c){for(var f=document.querySelectorAll(hE),p=0,v=f.length;p<v;p++){var y=f[p];y&&y.getAttribute(ia)!=="active"&&(Iy(c,y),y.parentNode&&y.parentNode.removeChild(y))}}(this))}e.registerId=function(r){return ss(r)};var n=e.prototype;return n.reconstructWithOptions=function(r,a){return a===void 0&&(a=!0),new e(zr({},this.options,{},r),this.gs,a&&this.names||void 0)},n.allocateGSInstance=function(r){return this.gs[r]=(this.gs[r]||0)+1},n.getTag=function(){return this.tag||(this.tag=(u=(a=this.options).isServer,c=a.useCSSOMInjection,f=a.target,r=u?new mE(f):c?new Tm(f):new pE(f),new Em(r)));var r,a,u,c,f},n.hasNameForId=function(r,a){return this.names.has(r)&&this.names.get(r).has(a)},n.registerName=function(r,a){if(ss(r),this.names.has(r))this.names.get(r).add(a);else{var u=new Set;u.add(a),this.names.set(r,u)}},n.insertRules=function(r,a,u){this.registerName(r,a),this.getTag().insertRules(ss(r),u)},n.clearNames=function(r){this.names.has(r)&&this.names.get(r).clear()},n.clearRules=function(r){this.getTag().clearGroup(ss(r)),this.clearNames(r)},n.clearTag=function(){this.tag=void 0},n.toString=function(){return function(r){for(var a=r.getTag(),u=a.length,c="",f=0;f<u;f++){var p=km(f);if(p!==void 0){var v=r.names.get(p),y=a.getGroup(f);if(v&&y&&v.size){var k=ia+".g"+f+'[id="'+p+'"]',M="";v!==void 0&&v.forEach(function(T){T.length>0&&(M+=T+",")}),c+=""+y+k+'{content:"'+M+`"}/*!sc*/
`}}}return c}(this)},e}(),eo=/(a)(d)/gi,Oy=function(e){return String.fromCharCode(e+(e>25?39:97))},ls=function(e,n){for(var r=n.length;r;)e=33*e^n.charCodeAt(--r);return e},Ry=function(e){return ls(5381,e)},Ly=Ry("5.3.11"),zy=function(){function e(n,r,a){this.rules=n,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&gm(n),this.componentId=r,this.baseHash=ls(Ly,r),this.baseStyle=a,Nc.registerId(r)}return e.prototype.generateAndInjectStyles=function(n,r,a){var u=this.componentId,c=[];if(this.baseStyle&&c.push(this.baseStyle.generateAndInjectStyles(n,r,a)),this.isStatic&&!a.hash)if(this.staticRulesId&&r.hasNameForId(u,this.staticRulesId))c.push(this.staticRulesId);else{var f=bo(this.rules,n,r,a).join(""),p=nl(ls(this.baseHash,f)>>>0);if(!r.hasNameForId(u,p)){var v=a(f,"."+p,void 0,u);r.insertRules(u,p,v)}c.push(p),this.staticRulesId=p}else{for(var y=this.rules.length,k=ls(this.baseHash,a.hash),M="",T=0;T<y;T++){var E=this.rules[T];if(typeof E=="string")M+=E;else if(E){var A=bo(E,n,r,a),C=Array.isArray(A)?A.join(""):A;k=ls(k,C+T),M+=C}}if(M){var R=nl(k>>>0);if(!r.hasNameForId(u,R)){var N=a(M,"."+R,void 0,u);r.insertRules(u,R,N)}c.push(R)}}return c.join(" ")},e}(),gE=/^\s*\/\/.*$/gm,vE=[":","[",".","#"],Cf=Ir.default.createContext(),Cf.Consumer,Fc=Ir.default.createContext(),Ny=(Fc.Consumer,new Nc),Mm=uE(),yE=function(){function e(n,r){var a=this;this.inject=function(u,c){c===void 0&&(c=Mm);var f=a.name+c.hash;u.hasNameForId(a.id,f)||u.insertRules(a.id,f,c(a.rules,f,"@keyframes"))},this.toString=function(){return yo(12,String(a.name))},this.name=n,this.id="sc-keyframes-"+n,this.rules=r}return e.prototype.getName=function(n){return n===void 0&&(n=Mm),this.name+n.hash},e}(),Pm=/([A-Z])/,Fy=/([A-Z])/g,bE=/^ms-/,_E=function(e){return"-"+e.toLowerCase()},h=function(e){return e==null||e===!1||e===""},b=function(e){return Array.isArray(e)&&(e.isCss=!0),e},I=function(e,n,r){return r===void 0&&(r=jo),e.theme!==r.theme&&e.theme||n||r.theme},H=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,ee=/(^-|-$)/g,ue=function(e){return nl(Ry(e)>>>0)},Me=function(e){return typeof e=="function"||typeof e=="object"&&e!==null&&!Array.isArray(e)},Ue=function(e){return e!=="__proto__"&&e!=="constructor"&&e!=="prototype"},qe=Ir.default.createContext(),qe.Consumer,lt={},Pt=function(e){return function n(r,a,u){if(u===void 0&&(u=jo),!(0,Oc.isValidElementType)(a))return yo(1,String(a));var c=function(){return r(a,u,Bi.apply(void 0,arguments))};return c.withConfig=function(f){return n(r,a,zr({},u,{},f))},c.attrs=function(f){return n(r,a,zr({},u,{attrs:Array.prototype.concat(u.attrs,f).filter(Boolean)}))},c}(My,e)},["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","textPath","tspan"].forEach(function(e){Pt[e]=Pt(e)}),At=function(){function e(r,a){this.rules=r,this.componentId=a,this.isStatic=gm(r),Nc.registerId(this.componentId+1)}var n=e.prototype;return n.createStyles=function(r,a,u,c){var f=c(bo(this.rules,a,u,c).join(""),""),p=this.componentId+r;u.insertRules(p,p,f)},n.removeStyles=function(r,a){a.clearRules(this.componentId+r)},n.renderStyles=function(r,a,u,c){r>2&&Nc.registerId(this.componentId+r),this.removeStyles(r,u),this.createStyles(r,a,u,c)},e}(),function(){function e(){var r=this;this._emitSheetCSS=function(){var a=r.instance.toString();if(!a)return"";var u=xi();return"<style "+[u&&'nonce="'+u+'"',ia+'="true"','data-styled-version="5.3.11"'].filter(Boolean).join(" ")+">"+a+"</style>"},this.getStyleTags=function(){return r.sealed?yo(2):r._emitSheetCSS()},this.getStyleElement=function(){var a;if(r.sealed)return yo(2);var u=((a={})[ia]="",a["data-styled-version"]="5.3.11",a.dangerouslySetInnerHTML={__html:r.instance.toString()},a),c=xi();return c&&(u.nonce=c),[Ir.default.createElement("style",zr({},u,{key:"sc-0-0"}))]},this.seal=function(){r.sealed=!0},this.instance=new Nc({isServer:!0}),this.sealed=!1}var n=e.prototype;return n.collectStyles=function(r){return this.sealed?yo(2):Ir.default.createElement(ym,{sheet:this.instance},r)},n.interleaveWithNodeStream=function(r){return yo(3)},e}(),se=Pt});function Xt(){return Xt=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},Xt.apply(this,arguments)}var Ln=z(()=>{});function jn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var In=z(()=>{});function Gn(e,n){return Gn=Object.setPrototypeOf||function(r,a){return r.__proto__=a,r},Gn(e,n)}var ci=z(()=>{});function to(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Gn(e,n)}var Ci=z(()=>{ci()});function ur(e){return ur=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ur(e)}var Ai=z(()=>{});function _o(e){return Function.toString.call(e).indexOf("[native code]")!==-1}var Aa=z(()=>{});function au(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}var su=z(()=>{});function Ia(e,n,r){return au()?Ia=Reflect.construct:Ia=function(a,u,c){var f=[null];f.push.apply(f,u);var p=Function.bind.apply(a,f),v=new p;return c&&Gn(v,c.prototype),v},Ia.apply(null,arguments)}var lu=z(()=>{ci(),su()});function us(e){var n=typeof Map=="function"?new Map:void 0;return us=function(r){if(r===null||!_o(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n!="undefined"){if(n.has(r))return n.get(r);n.set(r,a)}function a(){return Ia(r,arguments,ur(this).constructor)}return a.prototype=Object.create(r.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Gn(a,r)},us(e)}var $r=z(()=>{Ai(),ci(),Aa(),lu()}),xo=z(()=>{});function _r(e){return e.charAt(0).toUpperCase()+e.slice(1)}function cs(e,n){if(!e)return n.toLowerCase();var r=e.split("-");if(r.length>1)return r.splice(1,0,n),r.reduce(function(u,c){return""+u+_r(c)});var a=e.replace(/([a-z])([A-Z])/g,"$1"+n+"$2");return e===a?""+e+n:a}function ds(e,n){for(var r={},a=0;a<n.length;a+=1)(n[a]||n[a]===0)&&(r[cs(e,VL[a])]=n[a]);return r}function BL(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];var u=r[0],c=r[1],f=c===void 0?u:c,p=r[2],v=p===void 0?u:p,y=r[3],k=y===void 0?f:y,M=[u,f,v,k];return ds(e,M)}function V3(e){return Math.round(e*255)}function Sre(e,n,r){return V3(e)+","+V3(n)+","+V3(r)}function By(e,n,r,a){if(a===void 0&&(a=Sre),n===0)return a(r,r,r);var u=(e%360+360)%360/60,c=(1-Math.abs(2*r-1))*n,f=c*(1-Math.abs(u%2-1)),p=0,v=0,y=0;u>=0&&u<1?(p=c,v=f):u>=1&&u<2?(p=f,v=c):u>=2&&u<3?(v=c,y=f):u>=3&&u<4?(v=f,y=c):u>=4&&u<5?(p=f,y=c):u>=5&&u<6&&(p=c,y=f);var k=r-c/2,M=p+k,T=v+k,E=y+k;return a(M,T,E)}function Ere(e){if(typeof e!="string")return e;var n=e.toLowerCase();return $3[n]?"#"+$3[n]:e}function H3(e){if(typeof e!="string")throw new fs(3);var n=Ere(e);if(n.match(HL))return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16)};if(n.match(GL)){var r=parseFloat((parseInt(""+n[7]+n[8],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[2],16),green:parseInt(""+n[3]+n[4],16),blue:parseInt(""+n[5]+n[6],16),alpha:r}}if(n.match(WL))return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16)};if(n.match(qL)){var a=parseFloat((parseInt(""+n[4]+n[4],16)/255).toFixed(2));return{red:parseInt(""+n[1]+n[1],16),green:parseInt(""+n[2]+n[2],16),blue:parseInt(""+n[3]+n[3],16),alpha:a}}var u=EE.exec(n);if(u)return{red:parseInt(""+u[1],10),green:parseInt(""+u[2],10),blue:parseInt(""+u[3],10)};var c=KL.exec(n.substring(0,50));if(c)return{red:parseInt(""+c[1],10),green:parseInt(""+c[2],10),blue:parseInt(""+c[3],10),alpha:parseFloat(""+c[4])};var f=XL.exec(n);if(f){var p=parseInt(""+f[1],10),v=parseInt(""+f[2],10)/100,y=parseInt(""+f[3],10)/100,k="rgb("+By(p,v,y)+")",M=EE.exec(k);if(!M)throw new fs(4,n,k);return{red:parseInt(""+M[1],10),green:parseInt(""+M[2],10),blue:parseInt(""+M[3],10)}}var T=$L.exec(n.substring(0,50));if(T){var E=parseInt(""+T[1],10),A=parseInt(""+T[2],10)/100,C=parseInt(""+T[3],10)/100,R="rgb("+By(E,A,C)+")",N=EE.exec(R);if(!N)throw new fs(4,n,R);return{red:parseInt(""+N[1],10),green:parseInt(""+N[2],10),blue:parseInt(""+N[3],10),alpha:parseFloat(""+T[4])}}throw new fs(5)}function kre(e){var n=e.red/255,r=e.green/255,a=e.blue/255,u=Math.max(n,r,a),c=Math.min(n,r,a),f=(u+c)/2;if(u===c)return e.alpha!==void 0?{hue:0,saturation:0,lightness:f,alpha:e.alpha}:{hue:0,saturation:0,lightness:f};var p,v=u-c,y=f>.5?v/(2-u-c):v/(u+c);switch(u){case n:p=(r-a)/v+(r<a?6:0);break;case r:p=(a-n)/v+2;break;default:p=(n-r)/v+4;break}return p*=60,e.alpha!==void 0?{hue:p,saturation:y,lightness:f,alpha:e.alpha}:{hue:p,saturation:y,lightness:f}}function G3(e){return kre(H3(e))}function Af(e){var n=e.toString(16);return n.length===1?"0"+n:n}function W3(e){return Af(Math.round(e*255))}function Tre(e,n,r){return kE("#"+W3(e)+W3(n)+W3(r))}function xE(e,n,r){return By(e,n,r,Tre)}function Mre(e,n,r){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number")return xE(e,n,r);if(typeof e=="object"&&n===void 0&&r===void 0)return xE(e.hue,e.saturation,e.lightness);throw new fs(1)}function Pre(e,n,r,a){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof a=="number")return a>=1?xE(e,n,r):"rgba("+By(e,n,r)+","+a+")";if(typeof e=="object"&&n===void 0&&r===void 0&&a===void 0)return e.alpha>=1?xE(e.hue,e.saturation,e.lightness):"rgba("+By(e.hue,e.saturation,e.lightness)+","+e.alpha+")";throw new fs(2)}function q3(e,n,r){if(typeof e=="number"&&typeof n=="number"&&typeof r=="number")return kE("#"+Af(e)+Af(n)+Af(r));if(typeof e=="object"&&n===void 0&&r===void 0)return kE("#"+Af(e.red)+Af(e.green)+Af(e.blue));throw new fs(6)}function jL(e,n,r,a){if(typeof e=="string"&&typeof n=="number"){var u=H3(e);return"rgba("+u.red+","+u.green+","+u.blue+","+n+")"}else{if(typeof e=="number"&&typeof n=="number"&&typeof r=="number"&&typeof a=="number")return a>=1?q3(e,n,r):"rgba("+e+","+n+","+r+","+a+")";if(typeof e=="object"&&n===void 0&&r===void 0&&a===void 0)return e.alpha>=1?q3(e.red,e.green,e.blue):"rgba("+e.red+","+e.green+","+e.blue+","+e.alpha+")"}throw new fs(7)}function K3(e){if(typeof e!="object")throw new fs(8);if(YL(e))return jL(e);if(ZL(e))return q3(e);if(QL(e))return Pre(e);if(JL(e))return Mre(e);throw new fs(8)}function UL(e,n,r){return function(){var a=r.concat(Array.prototype.slice.call(arguments));return a.length>=n?e.apply(this,a):UL(e,n,a)}}function wE(e){return UL(e,e.length,[])}function SE(e,n,r){return Math.max(e,Math.min(n,r))}function Cre(e,n){if(n==="transparent")return n;var r=G3(n);return K3(Xt({},r,{lightness:SE(0,1,r.lightness-parseFloat(e))}))}function Are(e,n){if(n==="transparent")return n;var r=G3(n);return K3(Xt({},r,{lightness:SE(0,1,r.lightness+parseFloat(e))}))}function Ire(e,n){if(n==="transparent")return n;var r=G3(n);return K3(Xt({},r,{saturation:SE(0,1,r.saturation+parseFloat(e))}))}function Dre(e,n){if(n==="transparent")return n;var r=H3(n),a=typeof r.alpha=="number"?r.alpha:1,u=Xt({},r,{alpha:SE(0,1,+(a*100-parseFloat(e)*100).toFixed(2)/100)});return jL(u)}function X3(e){for(var n=arguments.length,r=new Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return ez.indexOf(e)>=0&&e?Xt({},BL.apply(void 0,[""].concat(r)),{position:e}):BL.apply(void 0,["",e].concat(r))}var fs,VL,$3,HL,GL,WL,qL,EE,KL,XL,$L,kE,ZL,YL,JL,QL,jy,Cm,TE,hs,ez,oa=z(()=>{Ln(),In(),Ci(),$r(),xo(),fs=function(e){to(n,e);function n(r){var a;return a=e.call(this,"An error occurred. See https://github.com/styled-components/polished/blob/main/src/internalHelpers/errors.md#"+r+" for more information.")||this,jn(a)}return n}(us(Error)),VL=["Top","Right","Bottom","Left"],$3={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"639",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},HL=/^#[a-fA-F0-9]{6}$/,GL=/^#[a-fA-F0-9]{8}$/,WL=/^#[a-fA-F0-9]{3}$/,qL=/^#[a-fA-F0-9]{4}$/,EE=/^rgb\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*\)$/i,KL=/^rgba\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,XL=/^hsl\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*\)$/i,$L=/^hsla\(\s*(\d{0,3}[.]?[0-9]+)\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*(\d{1,3}[.]?[0-9]?)%\s*,\s*([-+]?[0-9]*[.]?[0-9]+)\s*\)$/i,kE=function(e){return e.length===7&&e[1]===e[2]&&e[3]===e[4]&&e[5]===e[6]?"#"+e[1]+e[3]+e[5]:e},ZL=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&(typeof e.alpha!="number"||typeof e.alpha=="undefined")},YL=function(e){return typeof e.red=="number"&&typeof e.green=="number"&&typeof e.blue=="number"&&typeof e.alpha=="number"},JL=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&(typeof e.alpha!="number"||typeof e.alpha=="undefined")},QL=function(e){return typeof e.hue=="number"&&typeof e.saturation=="number"&&typeof e.lightness=="number"&&typeof e.alpha=="number"},jy=wE(Cre),Cm=wE(Are),TE=wE(Ire),hs=wE(Dre),ez=["absolute","fixed","relative","static","sticky"]});function Ore(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function tz(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,a)}return r}function If(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?tz(Object(r),!0).forEach(function(a){Ore(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tz(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Am(e,n){if(e==null)return{};var r={},a=Object.keys(e),u,c;for(c=0;c<a.length;c++)u=a[c],!(n.indexOf(u)>=0)&&(r[u]=e[u]);return r}var Uy=z(()=>{}),nz,Z3,rz=z(()=>{nz=te(Ie()),Z3=(0,nz.createContext)({})});function Rre(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function iz(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,a)}return r}function Im(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?iz(Object(r),!0).forEach(function(a){Rre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iz(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Y3(e,n){if(e==null)return{};var r={},a=Object.keys(e),u,c;for(c=0;c<a.length;c++)u=a[c],!(n.indexOf(u)>=0)&&(r[u]=e[u]);return r}function Lre(e,n){if(e){if(typeof e=="string")return oz(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oz(e,n)}}function oz(e,n){(n==null||n>e.length)&&(n=e.length);for(var r=0,a=new Array(n);r<n;r++)a[r]=e[r];return a}function az(e,n){var r;if(typeof Symbol=="undefined"||e[Symbol.iterator]==null){if(Array.isArray(e)||(r=Lre(e))||n&&e&&typeof e.length=="number"){r&&(e=r);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}return r=e[Symbol.iterator](),r.next.bind(r)}var ME=z(()=>{});function zre(e){return typeof e=="function"}var J3,sz,Nre=z(()=>{J3=te(Ie()),rz(),ME(),sz=function(e,n,r){r===void 0&&(r=n.children);var a=(0,J3.useContext)(Z3);if(a.useCreateElement)return a.useCreateElement(e,n,r);if(typeof e=="string"&&zre(r)){n.children;var u=Y3(n,["children"]);return r(u)}return(0,J3.createElement)(e,n,r)}});function Fre(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function lz(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter(function(u){return Object.getOwnPropertyDescriptor(e,u).enumerable})),r.push.apply(r,a)}return r}function Dm(e){for(var n=1;n<arguments.length;n++){var r=arguments[n]!=null?arguments[n]:{};n%2?lz(Object(r),!0).forEach(function(a){Fre(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lz(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Bre(e,n){if(e==null)return{};var r={},a=Object.keys(e),u,c;for(c=0;c<a.length;c++)u=a[c],!(n.indexOf(u)>=0)&&(r[u]=e[u]);return r}var uz=z(()=>{});function jre(e){return typeof e=="object"&&e!=null}var Ure=z(()=>{});function Q3(e){var n;if(!jre(e))return!1;var r=Object.getPrototypeOf(e);return r==null?!0:((n=r.constructor)===null||n===void 0?void 0:n.toString())===Object.toString()}var cz=z(()=>{Ure()});function dz(e,n){for(var r=Object.keys(e),a={},u={},c=0,f=r;c<f.length;c++){var p=f[c];n.indexOf(p)>=0?a[p]=e[p]:u[p]=e[p]}return[a,u]}function fz(e,n){if(n===void 0&&(n=[]),!Q3(e.state))return dz(e,n);var r=dz(e,[].concat(n,["state"])),a=r[0],u=r[1],c=a.state,f=Bre(a,["state"]);return[Dm(Dm({},c),f),u]}var Vre=z(()=>{uz(),cz()});function PE(e,n){if(e===n)return!0;if(!e||!n||typeof e!="object"||typeof n!="object")return!1;var r=Object.keys(e),a=Object.keys(n),u=r.length;if(a.length!==u)return!1;for(var c=0,f=r;c<f.length;c++){var p=f[c];if(e[p]!==n[p])return!1}return!0}var eA=z(()=>{});function hz(e){return e.name==="normalizePropsAreEqualInner"?e:function(n,r){return!Q3(n.state)||!Q3(r.state)?e(n,r):e(Dm(Dm({},n.state),n),Dm(Dm({},r.state),r))}}var Hre=z(()=>{uz(),cz()});function Gre(e){return(0,tA.forwardRef)(e)}function Wre(e,n){return(0,tA.memo)(e,n)}function Vy(e){var n=e.as,r=e.useHook,a=e.memo,u=e.propsAreEqual,c=u===void 0?r==null?void 0:r.unstable_propsAreEqual:u,f=e.keys,p=f===void 0?(r==null?void 0:r.__keys)||[]:f,v=e.useCreateElement,y=v===void 0?sz:v,k=function(M,T){var E=M.as,A=E===void 0?n:E,C=Y3(M,["as"]);if(r){var R,N=fz(C,p),j=N[0],G=N[1],J=r(j,Im({ref:T},G)),Y=J.wrapElement,re=Y3(J,["wrapElement"]),ye=((R=A.render)===null||R===void 0?void 0:R.__keys)||A.__keys,ke=ye&&fz(C,ye)[0],ce=ke?Im(Im({},re),ke):re,Ce=y(A,ce);return Y?Y(Ce):Ce}return y(A,Im({ref:T},C))};return k=Gre(k),a&&(k=Wre(k,c&&hz(c))),k.__keys=p,k.unstable_propsAreEqual=hz(c||PE),k}var tA,Hy=z(()=>{tA=te(Ie()),ME(),Nre(),Vre(),eA(),Hre()});function pz(e,n){(0,nA.useDebugValue)(e);var r=(0,nA.useContext)(Z3);return r[e]!=null?r[e]:n}var nA,mz=z(()=>{nA=te(Ie()),rz()});function qre(e,n,r){n===void 0&&(n={}),r===void 0&&(r={});var a="use"+e+"Props";(0,gz.useDebugValue)(a);var u=pz(a);return u?u(n,r):r}var gz,Kre=z(()=>{gz=te(Ie()),mz()});function Xre(e,n,r){n===void 0&&(n={}),r===void 0&&(r={});var a="use"+e+"Options";(0,vz.useDebugValue)(a);var u=pz(a);return u?Im(Im({},n),u(n,r)):n}var vz,$re=z(()=>{vz=te(Ie()),mz(),ME()});function Zre(e){return Array.isArray(e)?e:typeof e!="undefined"?[e]:[]}var Yre=z(()=>{});function Gy(e){var n,r,a=Zre(e.compose),u=function(p,v){if(e.useOptions&&(p=e.useOptions(p,v)),e.name&&(p=Xre(e.name,p,v)),e.compose)for(var y=az(a),k;!(k=y()).done;){var M=k.value;p=M.__useOptions(p,v)}return p},c=function(p,v,y){if(p===void 0&&(p={}),v===void 0&&(v={}),y===void 0&&(y=!1),y||(p=u(p,v)),e.useProps&&(v=e.useProps(p,v)),e.name&&(v=qre(e.name,p,v)),e.compose)if(e.useComposeOptions&&(p=e.useComposeOptions(p,v)),e.useComposeProps)v=e.useComposeProps(p,v);else for(var k=az(a),M;!(M=k()).done;){var T=M.value;v=T(p,v,!0)}var E={},A=v||{};for(var C in A)A[C]!==void 0&&(E[C]=A[C]);return E};c.__useOptions=u;var f=a.reduce(function(p,v){return p.push.apply(p,v.__keys||[]),p},[]);return c.__keys=[].concat(f,((n=e.useState)===null||n===void 0?void 0:n.__keys)||[],e.keys||[]),c.unstable_propsAreEqual=e.propsAreEqual||((r=a[0])===null||r===void 0?void 0:r.unstable_propsAreEqual)||PE,c}var Wy=z(()=>{te(Ie()),Kre(),ME(),$re(),eA(),Yre()});function yz(e,n){n===void 0&&(n=null),e&&(typeof e=="function"?e(n):e.current=n)}function bz(e,n){return(0,_z.useMemo)(function(){return e==null&&n==null?null:function(r){yz(e,r),yz(n,r)}},[e,n])}var _z,xz=z(()=>{_z=te(Ie())});function rA(e){if(e.tagName==="BUTTON")return!0;if(e.tagName==="INPUT"){var n=e;return wz.indexOf(n.type)!==-1}return!1}var wz,iA=z(()=>{wz=["button","color","file","image","reset","submit"]}),oA=z(()=>{}),Jre=z(()=>{oA(),te(Ie())}),CE=z(()=>{oA(),te(Ie()),Jre()});function Sz(e){return e?e.ownerDocument||e:document}var Ez=z(()=>{});function Qre(e){return e&&Sz(e).defaultView||kz}var kz,eie=z(()=>{Ez();try{kz=window}catch{}});function tie(){var e=Qre();return!!(typeof e!="undefined"&&e.document&&e.document.createElement)}var AE,aA=z(()=>{eie(),AE=tie()}),sA,lA,uA=z(()=>{sA=te(Ie()),aA(),lA=AE?sA.useLayoutEffect:sA.useEffect});function Om(e){var n=(0,Tz.useRef)(e);return lA(function(){n.current=e}),n}var Tz,Mz=z(()=>{Tz=te(Ie()),uA()});function nie(e){return e.target===e.currentTarget}var rie=z(()=>{});function iie(e){var n=Sz(e),r=n.activeElement;return r!=null&&r.nodeName?r:null}var oie=z(()=>{Ez()});function Pz(e,n){return e===n||e.contains(n)}var Cz=z(()=>{});function aie(e){var n=iie(e);if(!n)return!1;if(Pz(e,n))return!0;var r=n.getAttribute("aria-activedescendant");return r?r===e.id?!0:!!e.querySelector("#"+r):!1}var sie=z(()=>{oie(),Cz()});function lie(e){return!Pz(e.currentTarget,e.target)}var uie=z(()=>{Cz()});function IE(e){return AE?window.navigator.userAgent.indexOf(e)!==-1:!1}var cie=z(()=>{aA()});function die(e,n){return"matches"in e?e.matches(n):"msMatchesSelector"in e?e.msMatchesSelector(n):e.webkitMatchesSelector(n)}var fie=z(()=>{});function hie(e){var n=e;return n.offsetWidth>0||n.offsetHeight>0||e.getClientRects().length>0}function pie(e){return die(e,Az)&&hie(e)}var Az,mie=z(()=>{fie(),Az="input:not([type='hidden']):not([disabled]), select:not([disabled]), textarea:not([disabled]), a[href], button:not([disabled]), [tabindex], iframe, object, embed, area[href], audio[controls], video[controls], [contenteditable]:not([contenteditable='false'])"}),Iz,DE,Dz=z(()=>{Uy(),Hy(),Wy(),eA(),Iz=["unstable_system"],DE=Gy({name:"Role",keys:Iz,propsAreEqual:function(e,n){var r=e.unstable_system,a=Am(e,["unstable_system"]),u=n.unstable_system,c=Am(n,["unstable_system"]);return r!==u&&!PE(r,u)?!1:PE(a,c)}}),Vy({as:"div",useHook:DE})});function Oz(e){!aie(e)&&pie(e)&&e.focus()}function gie(e){return e.tagName==="BUTTON"||e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"||e.tagName==="A"}function vie(e){return e.tagName==="BUTTON"||e.tagName==="INPUT"||e.tagName==="SELECT"||e.tagName==="TEXTAREA"}function yie(e,n,r,a){return e?n&&!r?-1:void 0:n?a:a||0}function cA(e,n){return(0,Rm.useCallback)(function(r){var a;(a=e.current)===null||a===void 0||a.call(e,r),!r.defaultPrevented&&n&&(r.stopPropagation(),r.preventDefault())},[e,n])}var Rm,Rz,Lz,dA,bie=z(()=>{Uy(),Hy(),Wy(),Rm=te(Ie()),xz(),iA(),CE(),Mz(),uA(),sie(),uie(),cie(),mie(),Dz(),Rz=["disabled","focusable"],Lz=IE("Mac")&&!IE("Chrome")&&(IE("Safari")||IE("Firefox")),dA=Gy({name:"Tabbable",compose:DE,keys:Rz,useOptions:function(e,n){var r=n.disabled;return If({disabled:r},e)},useProps:function(e,n){var r=n.ref,a=n.tabIndex,u=n.onClickCapture,c=n.onMouseDownCapture,f=n.onMouseDown,p=n.onKeyPressCapture,v=n.style,y=Am(n,["ref","tabIndex","onClickCapture","onMouseDownCapture","onMouseDown","onKeyPressCapture","style"]),k=(0,Rm.useRef)(null),M=Om(u),T=Om(c),E=Om(f),A=Om(p),C=!!e.disabled&&!e.focusable,R=(0,Rm.useState)(!0),N=R[0],j=R[1],G=(0,Rm.useState)(!0),J=G[0],Y=G[1],re=e.disabled?If({pointerEvents:"none"},v):v;lA(function(){var Ge=k.current;Ge&&(gie(Ge)||j(!1),vie(Ge)||Y(!1))},[]);var ye=cA(M,e.disabled),ke=cA(T,e.disabled),ce=cA(A,e.disabled),Ce=(0,Rm.useCallback)(function(Ge){var oe;(oe=E.current)===null||oe===void 0||oe.call(E,Ge);var Ae=Ge.currentTarget;if(!Ge.defaultPrevented&&Lz&&!lie(Ge)&&rA(Ae)){var W=requestAnimationFrame(function(){Ae.removeEventListener("mouseup",Le,!0),Oz(Ae)}),Le=function(){cancelAnimationFrame(W),Oz(Ae)};Ae.addEventListener("mouseup",Le,{once:!0,capture:!0})}},[]);return If({ref:bz(k,r),style:re,tabIndex:yie(C,N,J,a),disabled:C&&J?!0:void 0,"aria-disabled":e.disabled?!0:void 0,onClickCapture:ye,onMouseDownCapture:ke,onMouseDown:Ce,onKeyPressCapture:ce},y)}}),Vy({as:"div",useHook:dA})});function _ie(e){var n=e.currentTarget;return e.isTrusted?rA(n)||n.tagName==="INPUT"||n.tagName==="TEXTAREA"||n.tagName==="A"||n.tagName==="SELECT":!1}var OE,zz,fA,xie=z(()=>{Uy(),Hy(),Wy(),OE=te(Ie()),iA(),CE(),Mz(),rie(),bie(),zz=["unstable_clickOnEnter","unstable_clickOnSpace"],fA=Gy({name:"Clickable",compose:dA,keys:zz,useOptions:function(e){var n=e.unstable_clickOnEnter,r=n===void 0?!0:n,a=e.unstable_clickOnSpace,u=a===void 0?!0:a,c=Am(e,["unstable_clickOnEnter","unstable_clickOnSpace"]);return If({unstable_clickOnEnter:r,unstable_clickOnSpace:u},c)},useProps:function(e,n){var r=n.onKeyDown,a=n.onKeyUp,u=Am(n,["onKeyDown","onKeyUp"]),c=(0,OE.useState)(!1),f=c[0],p=c[1],v=Om(r),y=Om(a),k=(0,OE.useCallback)(function(T){var E;if((E=v.current)===null||E===void 0||E.call(v,T),!T.defaultPrevented&&!e.disabled&&!T.metaKey&&nie(T)){var A=e.unstable_clickOnEnter&&T.key==="Enter",C=e.unstable_clickOnSpace&&T.key===" ";if(A||C){if(_ie(T))return;T.preventDefault(),A?T.currentTarget.click():C&&p(!0)}}},[e.disabled,e.unstable_clickOnEnter,e.unstable_clickOnSpace]),M=(0,OE.useCallback)(function(T){var E;if((E=y.current)===null||E===void 0||E.call(y,T),!T.defaultPrevented&&!e.disabled&&!T.metaKey){var A=e.unstable_clickOnSpace&&T.key===" ";f&&A&&(p(!1),T.currentTarget.click())}},[e.disabled,e.unstable_clickOnSpace,f]);return If({"data-active":f||void 0,onKeyDown:k,onKeyUp:M},u)}}),Vy({as:"button",memo:!0,useHook:fA})}),qy,Nz,Fz,Bz,wie=z(()=>{Uy(),Hy(),Wy(),qy=te(Ie()),xz(),iA(),CE(),xie(),Nz=[],Fz=Gy({name:"Button",compose:fA,keys:Nz,useProps:function(e,n){var r=n.ref,a=Am(n,["ref"]),u=(0,qy.useRef)(null),c=(0,qy.useState)(void 0),f=c[0],p=c[1],v=(0,qy.useState)("button"),y=v[0],k=v[1];return(0,qy.useEffect)(function(){var M=u.current;M&&(rA(M)||(M.tagName!=="A"&&p("button"),k(void 0)))},[]),If({ref:bz(u,r),role:f,type:y},a)}}),Bz=Vy({as:"button",memo:!0,useHook:Fz})}),jz,Uz,Vz,Sie=z(()=>{Uy(),Hy(),Wy(),Dz(),jz=[],Uz=Gy({name:"Group",compose:DE,keys:jz,useProps:function(e,n){return If({role:"group"},n)}}),Vz=Vy({as:"div",useHook:Uz})});function Eie(){return AE?document.body:null}var Hz,Lm,kie=z(()=>{Hz=te(Ie()),uA(),aA(),te(Ma()),Lm=(0,Hz.createContext)(Eie())}),hA,Tie=z(()=>{typeof window!="undefined"&&(hA={get passive(){}},window.addEventListener("testPassive",null,hA),window.removeEventListener("testPassive",null,hA)),typeof window!="undefined"&&window.navigator&&window.navigator.platform&&(/iP(ad|hone|od)/.test(window.navigator.platform)||window.navigator.platform==="MacIntel"&&window.navigator.maxTouchPoints>1)}),Df=z(()=>{te(Ie()),CE(),wie(),Sie(),te(Ma()),kie(),Tie(),oA()});function Xn(e){let n=(0,pA.useMemo)(()=>{let u=e;return{get current(){return u},set current(c){u=c,a(c)}}},[]),[r,a]=(0,pA.useState)(()=>e);return[n,r]}var pA,tr=z(()=>{pA=te(Ie())});function Mie(e){return n=>no.default.createElement($z,null,no.default.createElement(e,O({},n)))}var no,Gz,Wz,Qn,zm,qz,Kz,Xz,mA,gA,$z,nr=z(()=>{oa(),We(),We(),no=te(Ie()),Gz=te(Ma()),Df(),tr(),Qn=Bi(Wz||(Wz=Q([`
  #pointer-root & {
    pointer-events: none;
  }
  #pointer-root.normal & {
    pointer-events: auto;
  }
`]))),zm={panel:{bg:"#282b2f",head:{title:{color:"#bbb"},punctuation:{color:"#808080"}},body:{compoudThing:{label:{get color(){return Cm(.6,zm.panel.bg)}}}}}},Kz=typeof window!="undefined"?xm(qz||(qz=Q([`
  :host {
    all: initial;
    color: white;
    font: 11px -apple-system, BlinkMacSystemFont, Segoe WPC, Segoe Editor,
      HelveticaNeue-Light, Ubuntu, Droid Sans, sans-serif;
  }

  * {
    padding: 0;
    margin: 0;
    font-size: 100%;
    font: inherit;
    vertical-align: baseline;
    list-style: none;
  }
`]))):{},mA=se.div(Xz||(Xz=Q([`
  z-index: 51;
  position: fixed;
  top: 0px;
  right: 0px;
  bottom: 0px;
  left: 0px;
  pointer-events: none;
`]))),gA=e=>no.default.createElement(ym,{disableVendorPrefixes:!0,target:e.target},no.default.createElement(no.default.Fragment,null,no.default.createElement(Kz,null),e.children)),$z=e=>{let[n,r]=(0,no.useState)(null),[a,u]=(0,no.useState)(null);(0,no.useLayoutEffect)(()=>{if(!n)return;let{parentNode:p}=n;if(!p)return;let v=p.shadowRoot?parent.shadowRoot:p.attachShadow({mode:"open"});u(v)},[n]);let[c,f]=Xn(void 0);return a?Gz.default.createPortal(no.default.createElement(gA,{target:a},no.default.createElement(no.default.Fragment,null,no.default.createElement(mA,{ref:c}),no.default.createElement(Lm.Provider,{value:f},e.children))),a):no.default.createElement("template",{ref:r,"shadow-root":"open"},e.children)}}),Nm,Zz,Yz,Bc,Jz,Ky,Qz,eN,RE,tN,vA,rl,uu=z(()=>{nr(),We(),Nm={get outlinePanel(){return 1},get propsPanel(){return Nm.outlinePanel},get sequenceEditorPanel(){return this.outlinePanel-1},get toolbar(){return this.outlinePanel+1},get pluginPanes(){return this.sequenceEditorPanel-1}},Zz=zm.panel.bg,Bc=se.span(Yz||(Yz=Q([`
  white-space: nowrap;
`]))),Ky=se.span(Jz||(Jz=Q([`
  white-space: nowrap;
  color: `,`;
`])),zm.panel.head.punctuation.color),eN=se.div(Qz||(Qz=Q([`
  background: `,`;
  flex-grow: 1;
  overflow-y: scroll;
  padding: 0;
`])),Zz),RE=18,vA=se.div(tN||(tN=Q([`
  height: `,`px;
  box-sizing: border-box;
  display: flex;
  align-items: center;
  padding: 0 10px;
  position: relative;
  color: #adadadb3;
  border-bottom: 1px solid rgb(0 0 0 / 13%);
  background-color: #25272b;
  font-size: 10px;
  font-weight: 500;
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
`])),RE),rl=100}),nN,ps,Fm=z(()=>{nN=()=>{},ps=nN});function Pie(e){return yA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),yA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M1.775 2.781a.5.5 0 01.5.5v1.7H4.67c.108-.957.92-1.7 1.905-1.7h6.608a1.917 1.917 0 110 3.834H6.574c-.78 0-1.452-.466-1.751-1.135H2.275v5.03h2.39a2.032 2.032 0 012.023-1.854h6.38a2.031 2.031 0 110 4.063h-6.38c-.83 0-1.543-.497-1.858-1.21H1.775a.5.5 0 01-.5-.5V3.281a.5.5 0 01.5-.5zm4.799 1.5h6.608a.917.917 0 110 1.834H6.574a.917.917 0 110-1.834zm.114 5.875h6.38a1.031 1.031 0 110 2.063h-6.38a1.032 1.032 0 110-2.063z",fill:"currentColor"}))}var yA,bA,Cie=z(()=>{yA=te(Ie()),bA=Pie});function Aie(e){return _A.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),_A.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8 10.5L4 6.654 5.2 5.5 8 8.385 10.8 5.5 12 6.654 8 10.5z",fill:"currentColor"}))}var _A,rN,Iie=z(()=>{_A=te(Ie()),rN=Aie});function Die(e){return xA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),xA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.5 3c-1.072 0-1.969.904-1.969 1.969 0 1 .929 1.968 1.969 1.968h9A1.969 1.969 0 1012.5 3h-9zm9 1H5.531v1.938H12.5A.969.969 0 0012.5 4zM3.5 9.14a1.969 1.969 0 000 3.938h9a1.969 1.969 0 100-3.937h-9zm9 1H8.406v1.938H12.5a.969.969 0 100-1.937z",fill:"currentColor"}))}var xA,iN,Oie=z(()=>{xA=te(Ie()),iN=Die});function Rie(e){return wA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),wA.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M.166 7.994a2.26 2.26 0 114.518 0 2.26 2.26 0 01-4.518 0zM2.425 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM5.74 7.994a2.26 2.26 0 114.519 0 2.26 2.26 0 01-4.519 0zM8 6.91a1.085 1.085 0 100 2.17 1.085 1.085 0 000-2.17zM13.575 5.735a2.26 2.26 0 100 4.519 2.26 2.26 0 000-4.52zm-1.086 2.26a1.085 1.085 0 112.171 0 1.085 1.085 0 01-2.17 0z",fill:"currentColor"}))}var wA,oN,Lie=z(()=>{wA=te(Ie()),oN=Rie});function zie(e){return SA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),SA.createElement("path",{d:"M8.339 4.5l-2.055.644 4.451 1.393v2.748l-2.966.928-2.504-.783V6.738l2.42.758 2.055-.644-4.458-1.395L4 5.858v4.463L7.768 11.5 12 10.175V5.646L8.339 4.5z",fill:"currentColor"}))}var SA,EA,Nie=z(()=>{SA=te(Ie()),EA=zie});function Fie(e){return kA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),kA.createElement("path",{d:"M8 1.57c-.416 0-.752.36-.752.804v.482c-1.715.372-3.006 1.994-3.006 3.938v.473c0 1.18-.407 2.32-1.14 3.205l-.173.208a.85.85 0 00-.125.864.75.75 0 00.686.475h9.019a.752.752 0 00.686-.475.845.845 0 00-.125-.864l-.174-.208a5.026 5.026 0 01-1.139-3.205v-.473c0-1.944-1.291-3.566-3.006-3.938v-.482c0-.445-.336-.804-.752-.804zm1.063 12.39c.282-.301.44-.71.44-1.138H6.496c0 .428.158.837.44 1.138.281.302.664.47 1.063.47.4 0 .783-.168 1.064-.47z",fill:"currentColor"}))}var kA,LE,Bie=z(()=>{kA=te(Ie()),LE=Fie});function jie(e){return TA.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),TA.createElement("path",{d:"M6.8 11.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6zm6-7.2h-2.4v-.6A1.8 1.8 0 008.6 2H7.4a1.8 1.8 0 00-1.8 1.8v.6H3.2a.6.6 0 100 1.2h.6v6.6A1.8 1.8 0 005.6 14h4.8a1.8 1.8 0 001.8-1.8V5.6h.6a.6.6 0 100-1.2zm-6-.6a.6.6 0 01.6-.6h1.2a.6.6 0 01.6.6v.6H6.8v-.6zm4.2 8.4a.6.6 0 01-.6.6H5.6a.6.6 0 01-.6-.6V5.6h6v6.6zm-1.8-.6a.6.6 0 00.6-.6V7.4a.6.6 0 00-1.2 0V11a.6.6 0 00.6.6z",fill:"currentColor"}))}var TA,MA,Uie=z(()=>{TA=te(Ie()),MA=jie}),Xy=z(()=>{Cie(),Iie(),Oie(),Lie(),Nie(),Bie(),Uie()}),il,aN,zE,sN,lN,uN,cN,dN,fN,hN,pN,mN,gN,vN,yN,bN,_N,xN,$y,NE=z(()=>{il=te(Ie()),We(),Fm(),nr(),Xy(),zE=se.li(aN||(aN=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
  display: flex;
  justify-content: flex-start;
  flex-direction: column;
  align-items: flex-start;
`]))),lN=se.div(sN||(sN=Q([""]))),cN=se(lN)(uN||(uN=Q([`
  position: relative;
  margin-top: 2px;
  margin-bottom: 2px;
  margin-left: calc(4px + var(--depth) * 16px);
  padding-left: 4px;
  padding-right: 8px;
  gap: 4px;
  height: 21px;
  line-height: 0;
  box-sizing: border-box;
  display: flex;
  flex-wrap: nowrap;
  align-items: center;
  pointer-events: none;
  white-space: nowrap;

  border-radius: 2px;
  box-shadow: 0 3px 4px -1px rgba(0, 0, 0, 0.48);

  color: rgba(255, 255, 255, 0.9);
  background: rgba(40, 43, 47, 0.65);
  backdrop-filter: blur(14px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);

  &.descendant-is-selected {
    background: rgba(29, 53, 59, 0.7);
  }

  `,`;
  &:not(.not-selectable):not(.selected):hover {
    background: rgba(59, 63, 69, 0.9);

    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &:not(.not-selectable):not(.selected):active {
    background: rgba(82, 88, 96, 0.9);
    border-bottom: 1px solid rgba(255, 255, 255, 0.24);
  }

  &.selected {
    background: rgba(30, 88, 102, 0.7);
    border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Qn),fN=Bi(dN||(dN=Q([`
  font-weight: 500;
  font-size: 11px;
  & {
  }
`]))),pN=se.span(hN||(hN=Q([`
  `,`;

  `,`;
  position: relative;
  // Compensate for border bottom
  top: 0.5px;
  display: flex;
  height: 20px;
  align-items: center;
  box-sizing: border-box;
`])),fN,Qn),gN=se.div(mN||(mN=Q([`
  font-weight: 500;
  display: flex;
  justify-content: center;
  align-items: center;
  position: relative;
  opacity: 0.99;
`]))),yN=se.span(vN||(vN=Q([`
  font-size: 9px;
  position: relative;
  display: block;
  transition: transform 0.1s ease-out;

  &:hover {
    transform: rotate(-20deg);
  }

  `,`.collapsed & {
    transform: rotate(-90deg);

    &:hover {
      transform: rotate(-70deg);
    }
  }
`])),zE),_N=se.ul(bN||(bN=Q([`
  margin: 0;
  padding: 0;
  list-style: none;

  `,`.collapsed & {
    display: none;
  }
`])),zE),xN=({label:e,children:n,depth:r,select:a,selectionStatus:u,labelDecoration:c,collapsed:f=!1,setIsCollapsed:p})=>{let v=n!==void 0;return il.default.createElement(zE,{style:{"--depth":r},className:f?"collapsed":""},il.default.createElement(cN,{className:u,onClick:a!=null?a:ps,"data-header":!0},il.default.createElement(gN,null,v?il.default.createElement(yN,{onClick:y=>{y.stopPropagation(),y.preventDefault(),p==null||p(!f)}},il.default.createElement(rN,null)):il.default.createElement(EA,null)),il.default.createElement(pN,null,il.default.createElement("span",null,e)),c),v&&il.default.createElement(_N,null,n))},$y=xN});function Vie(e){return Object.keys(e)}function Hie(e){return Object.keys((0,ol.val)(e.sheetTemplatesP))}function Gie(){let e=vo(jc().filter(n=>Yt(n)||mt(n)).map(n=>mt(n)?n.sheet:n))[0];if(e)return e.getSequence()}var ol,jc,wN,Uc=z(()=>{ol=St,On(),Xr(),He(),jc=()=>{var e;let n=(0,ol.val)(be().projectsP),r=((e=(0,ol.val)(be().atomP.historic.panels.outlinePanel.selection))!=null?e:[]).map(a=>{let u=n[a.projectId];if(!u)return;if(a.type==="Project")return u;if(!(0,ol.val)(u.sheetTemplatesP[a.sheetId]))return;let c=wN(u,a.sheetId);if(!c)return;if(a.type==="Sheet")return c;let f=(0,ol.val)(c.objectsP[a.objectKey]);if(f)return f});return vo(r.filter(a=>typeof a!="undefined"))},wN=(e,n)=>{let r=be().atomP.historic.projects.stateByProjectId[e.address.projectId],a=(0,ol.val)(r.stateBySheetId[n].selectedInstanceId),u=(0,ol.val)(e.sheetTemplatesP[n]);if(u){if(a)return(0,ol.val)(u.instancesP[a]);{let c=(0,ol.val)(u.instancesP);return c[Vie(c)[0]]}}}}),SN,EN,Wie=z(()=>{He(),SN=te(Ie()),NE(),on(),Uc(),EN=({sheetObject:e,depth:n,overrideLabel:r})=>{let a=()=>{be().transaction(({stateEditors:c})=>{c.studio.historic.panels.outline.selection.set([e])})},u=Tn(()=>jc(),[]);return SN.default.createElement($y,{select:a,label:r!=null?r:e.address.objectKey,depth:n,selectionStatus:u.includes(e)?"selected":"not-selected"})}});function PA(e){var n;let r=e.type==="namespace"?"namespace:".concat(e.sheet.address.sheetId,":").concat(e.path.join("/")):e.type==="Theatre_Project"?"project":e.type==="Theatre_Sheet"?"sheetInstance:".concat(e.address.sheetId,":").concat(e.address.sheetInstanceId):"unknown",a=e.type==="namespace"?e.sheet.address.projectId:e.address.projectId,u=(n=Cn(be().atomP.ahistoric.projects.stateByProjectId[a].collapsedItemsInOutline[r]))!=null?n:!1,c=(0,kN.useCallback)(f=>{be().transaction(({stateEditors:p})=>{p.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline.set({projectId:a,isCollapsed:f,itemKey:r})})},[r]);return{collapsed:u,setCollapsed:c}}var kN,CA=z(()=>{kN=te(Ie()),He(),on()});function TN(e){return al.default.createElement(al.default.Fragment,null,[...e.namespace.entries()].map(([n,{object:r,nested:a}])=>al.default.createElement(qie,{key:n,label:n,object:r,nested:a,visualIndentation:e.visualIndentation,path:e.path,sheet:e.sheet})))}function qie(e){let{nested:n,label:r,object:a,sheet:u}=e,{collapsed:c,setCollapsed:f}=PA({type:"namespace",sheet:u,path:[...e.path,r]}),p=n&&al.default.createElement(TN,{namespace:n,path:[...e.path,r],key:"namespaceTree("+r+")",visualIndentation:e.visualIndentation+1,sheet:u}),v=a&&al.default.createElement(EN,{depth:e.visualIndentation,key:"objectPath("+a.address.objectKey+")",sheetObject:a,overrideLabel:r});return al.default.createElement(al.default.Fragment,{key:"".concat(r," - ").concat(e.visualIndentation)},v,p&&al.default.createElement($y,{selectionStatus:"not-selectable",label:r,key:"baseItem(".concat(r,")"),depth:e.visualIndentation,children:p,collapsed:c,setIsCollapsed:f}))}function MN(e,n,r=Kie(n)){let[a,...u]=r,c=e.get(a);c||(c={nested:void 0,object:void 0,path:[...r]},e.set(a,c)),u.length===0?(console.assert(!c.object,"expect not to have existing object with same name",{existing:c,object:n}),c.object=n):(c.nested||(c.nested=new Map),MN(c.nested,n,u))}function Kie(e){let n=AA.get(e);return n||(n=e.address.objectKey.split(DN),console.assert(n.length>0,"expected not empty"),AA.set(e,n)),n}var PN,al,CN,AN,IN,DN,AA,Xie=z(()=>{on(),PN=St,al=te(Ie()),We(),Wie(),NE(),CA(),se.li(CN||(CN=Q([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),AN=({sheet:e,depth:n})=>Tn(()=>{let r=(0,PN.val)(e.objectsP),a=Object.values(r).filter(c=>c!=null),u=new Map;return a.forEach(c=>{MN(u,c)}),al.default.createElement(TN,{namespace:u,visualIndentation:n,path:[],sheet:e})},[e,n]),IN=AN,DN=/\s*\/\s*/g,AA=new WeakMap}),Bm,ON,RN,LN,zN,NN,FN,$ie=z(()=>{He(),Uc(),on(),Bm=te(Ie()),We(),Xie(),NE(),CA(),RN=se.div(ON||(ON=Q([`
  display: flex;
`]))),se.li(LN||(LN=Q([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),NN=se.div(zN||(zN=Q([""]))),FN=({sheet:e,depth:n})=>{let{collapsed:r,setCollapsed:a}=PA(e),u=(0,Bm.useCallback)(()=>{be().transaction(({stateEditors:c})=>{c.studio.historic.panels.outline.selection.set([e])})},[e]);return Tn(()=>{let c=jc();return Bm.default.createElement($y,{depth:n,select:u,setIsCollapsed:a,collapsed:r,selectionStatus:c.some(f=>f===e)?"selected":c.some(f=>f.type==="Theatre_SheetObject"&&f.sheet===e)?"descendant-is-selected":"not-selected",label:Bm.default.createElement(RN,null,e.address.sheetId,": ",e.address.sheetInstanceId)},Bm.default.createElement(NN,null,Bm.default.createElement(IN,{depth:n+1,sheet:e,key:"objectList"+e.address.sheetInstanceId})))},[n,r])}}),IA,jm,BN,jN,UN,VN,Zie=z(()=>{on(),IA=St,jm=te(Ie()),We(),$ie(),se.div(BN||(BN=Q([`
  display: flex;
`]))),se.li(jN||(jN=Q([`
  color: `,`;
`])),e=>e.isSelected?"white":"hsl(1, 1%, 80%)"),se.div(UN||(UN=Q([""]))),VN=({sheetId:e,depth:n,project:r})=>Tn(()=>{let a=(0,IA.val)(r.sheetTemplatesP[e]);if(!a)return jm.default.createElement(jm.default.Fragment,null);let u=(0,IA.val)(a.instancesP);return jm.default.createElement(jm.default.Fragment,null,Object.entries(u).map(([c,f])=>jm.default.createElement(FN,{key:f.address.sheetInstanceId,sheet:f,depth:n})))},[n,e,r])}),FE,HN,GN,Yie=z(()=>{Uc(),on(),FE=te(Ie()),Zie(),HN=({project:e,depth:n})=>Tn(()=>{if(!e)return null;let r=Hie(e);return FE.default.createElement(FE.default.Fragment,null,r.map(a=>FE.default.createElement(VN,{depth:n,sheetId:a,key:"sheet-".concat(a),project:e})))},[e,n]),GN=HN}),Zy,WN,qN,KN,XN,$N,Jie=z(()=>{Zy=te(Ie()),NE(),Yie(),He(),on(),Uc(),WN=St,We(),CA(),KN=se.div(qN||(qN=Q([`
  color: #ff6363;
  margin-left: 11px;
  background: #4c282d;
  padding: 2px 8px;
  border-radius: 2px;
  font-size: 10px;
  box-shadow: 0 2px 8px -4px black;
`]))),XN=({depth:e,project:n})=>{let r=Tn(()=>jc(),[]),a=Tn(()=>{let p=n.address.projectId,v=(0,WN.val)(be().atomP.ephemeral.coreByProject[p].loadingState);return(v==null?void 0:v.type)==="browserStateIsNotBasedOnDiskState"},[n]),u=(0,Zy.useCallback)(()=>{be().transaction(({stateEditors:p})=>{p.studio.historic.panels.outline.selection.set([n])})},[n]),{collapsed:c,setCollapsed:f}=PA(n);return Zy.default.createElement($y,{depth:e,label:n.address.projectId,setIsCollapsed:f,collapsed:c,labelDecoration:a?Zy.default.createElement(KN,null,"Has Conflicts"):null,children:Zy.default.createElement(GN,{project:n,depth:e+1}),selectionStatus:r.includes(n)?"selected":r.some(p=>p.address.projectId===n.address.projectId)?"descendant-is-selected":"not-selected",select:u})},$N=XN}),ZN,DA,YN,JN,QN,eF,Qie=z(()=>{ZN=St,on(),He(),DA=te(Ie()),We(),Jie(),JN=se.ul(YN||(YN=Q([`
  list-style: none;
  margin: 0;
  padding: 0;
  padding-right: 4px;
`]))),QN=e=>Tn(()=>{let n=(0,ZN.val)(be().projectsP);return DA.default.createElement(JN,null,Object.keys(n).map(r=>{let a=n[r];return DA.default.createElement($N,{depth:0,project:a,key:"projectListItem-".concat(r)})}))},[]),eF=QN});function tF(e){let[n,r]=(0,OA.useState)(!1);return(0,OA.useEffect)(()=>{let a=c=>{let f=n?200:50,p=56,v=e==="left"?c.x<f:c.x>window.innerWidth-f;v&&(v=c.y>p),r(!!v)};document.addEventListener("mousemove",a);let u=()=>{r(!1)};return document.addEventListener("mouseleave",u),()=>{document.removeEventListener("mousemove",a),document.removeEventListener("mouseleave",u)}},[n]),n}var OA,nF=z(()=>{OA=te(Ie())}),Yy,Um,RA,rF,iF,oF,aF,BE,Jy,sF,eoe=z(()=>{Yy=te(Ie()),We(),uu(),Qie(),on(),He(),nF(),Um=St,nr(),RA="44px",iF=se.div(rF||(rF=Q([`
  `,`;
  background-color: transparent;
  position: absolute;
  left: 8px;
  z-index: `,`;

  top: calc(`,` + 8px);
  height: fit-content;
  max-height: calc(100% - `,`);
  overflow-y: scroll;
  overflow-x: hidden;
  padding: 0;
  user-select: none;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;

  display: `,`;

  &:hover {
    display: block;
  }

  // Create a small buffer on the bottom to aid selecting the bottom item in a long, scrolling list
  &::after {
    content: '';
    display: block;
    height: 20px;
  }
`])),Qn,Nm.outlinePanel,RA,RA,({pin:e})=>e?"block":"none"),oF=()=>{var e;let n=(e=Cn(be().atomP.ahistoric.pinOutline))!=null?e:!0,r=Cn(sF),a=tF("left");return(0,Yy.useLayoutEffect)(()=>{BE.set(a)},[a]),(0,Yy.useEffect)(()=>()=>{Jy.set(!1),BE.set(!1)},[]),Yy.default.createElement(iF,{pin:n||r,onMouseEnter:()=>{Jy.set(!0)},onMouseLeave:()=>{Jy.set(!1)}},Yy.default.createElement(eF,null))},aF=oF,BE=new Um.Atom(!1),Jy=new Um.Atom(!1),sF=(0,Um.prism)(()=>{let e=(0,Um.val)(Jy.prism),n=(0,Um.val)(BE.prism);return e||n})}),lF,uF,cF,toe=z(()=>{We(),uF=se.input.attrs({type:"checkbox"})(lF||(lF=Q([`
  outline: none;
`]))),cF=uF});function noe({propConfig:e,editingTools:n,value:r,autoFocus:a}){let u=(0,LA.useCallback)(c=>{n.permanentlySetValue(!!c.target.checked)},[e,n]);return LA.default.createElement(fF,{checked:r,onChange:u,autoFocus:a})}var LA,dF,fF,hF,roe=z(()=>{LA=te(Ie()),We(),toe(),fF=se(cF)(dF||(dF=Q([`
  margin-left: 6px;

  :focus {
    outline: 1px solid #555;
  }
`]))),hF=noe});function jE(e){return n=>{e.forEach(r=>{typeof r=="function"?r(n):r!=null&&(r.current=n)})}}var UE=z(()=>{});function zA(e,n,r){(0,pF.useEffect)(()=>{if(!e||r===!1)return;let a=Array.isArray(e)?e.filter(c=>c):[e],u=c=>{a.every(f=>!c.composedPath().includes(f))&&n(c)};return window.addEventListener("mousedown",u,{capture:!0,passive:!1}),()=>{window.removeEventListener("mousedown",u,{capture:!0,passive:!1})}},[e,r])}var pF,NA=z(()=>{pF=te(Ie())}),cu,mF,du,gF,vF,yF,bF,FA,_F,Da,xF,aa=z(()=>{cu=te(Ie()),We(),mF="pointer-root",du="--lockedCursor",vF=se.div(gF||(gF=Q([`
  pointer-events: auto;
  &.normal {
    pointer-events: none;
  }
`]))),bF=se.div(yF||(yF=Q([`
  position: absolute;
  inset: 0;
  pointer-events: none;

  #pointer-root:not(.normal) > & {
    pointer-events: auto;
  }
`]))),FA=(0,cu.createContext)({}),_F=e=>{var n,r,a,u;let[c,f]=(0,cu.useState)([]),p=(0,cu.useMemo)(()=>({getLock:(y,k)=>{let M={className:y,cursor:k};return f(T=>[...T,M]),()=>{f(T=>T.filter(E=>E!==M))}}}),[]),v=(r=(n=c[0])==null?void 0:n.cursor)!=null?r:"";return cu.default.createElement(FA.Provider,{value:p},cu.default.createElement(vF,{id:mF,className:((u=(a=c[0])==null?void 0:a.className)!=null?u:"normal")+" "+e.className},cu.default.createElement(bF,{style:{cursor:v,[du]:v}},e.children)))},Da=(e,n,r)=>{let a=(0,cu.useContext)(FA);(0,cu.useLayoutEffect)(()=>{if(e)return a.getLock(n,r)},[e,n,r])},xF=_F});function wF(e){return Qy.default.createElement(BA.Provider,{value:e.logger},e.children)}function Vc(e,n){let r=(0,Qy.useContext)(BA);return(0,Qy.useMemo)(()=>e?r.named(e,n):r,[r,e,n])}var Qy,BA,Hc=z(()=>{Qy=te(Ie()),BA=Qy.default.createContext(null)});function ioe(){let e=Vc("PointerCapturing"),n=ms.default.useRef(null),r=()=>n.current!=null;return a=>{let u,c=f=>(u=f,n.current=f,f);return{capturing:{capturePointer(f){if(e._debug("Capturing pointer",{forDebugName:a,reason:f}),n.current!=null)throw new Error('"'.concat(a,'" attempted capturing pointer for "').concat(f,'" while already captured by "').concat(n.current.debugOwnerName,'" for "').concat(n.current.debugReason,'"'));let p=c({debugOwnerName:a,debugReason:f});return{isCapturing(){return p===n.current},release(){return p===n.current?(e._debug("Releasing pointer",{forDebugName:a,reason:f}),c(null),!0):!1}}},isPointerBeingCaptured:r},forceRelease(){u&&n.current===u&&(e._debug("Force releasing pointer",{localCapture:u}),c(null))}}}}function ooe(e){let n=ioe();return ms.default.createElement(jA.Provider,{value:n},ms.default.createElement(EF,{children:e.children}))}function SF(e){let n=(0,ms.useContext)(jA),r=(0,ms.useMemo)(()=>n(e),[e,n]);return(0,ms.useEffect)(()=>()=>{r.forceRelease()},[r]),r.capturing}var ms,jA,EF,UA=z(()=>{ms=te(Ie()),Hc(),jA=ms.default.createContext(null),EF=ms.default.memo(({children:e})=>ms.default.createElement(ms.default.Fragment,null,e))}),VA,aoe=z(()=>{VA=typeof window!="undefined"&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)});function Ur(e,n){let r=(0,Vm.useRef)(n);r.current=n;let a=n.shouldPointerLock&&!VA,u=(0,Vm.useRef)({domDragStarted:!1}),{capturePointer:c}=SF("useDrag for ".concat(n.debugName)),f=(0,Vm.useRef)({onDrag:ps,onDragEnd:ps,onClick:ps}),p=(0,Vm.useRef)(),[v,y]=Xn(!1);return(0,Vm.useLayoutEffect)(()=>{if(!e)return;let k=()=>{let j=u.current.domDragStarted&&u.current.detection.detected;v.current!==j&&(v.current=j)},M=j=>{if(!u.current.domDragStarted)return;let G=u.current;if(!soe(j,G)&&(G.detection.detected||(G.detection.totalDistanceMoved+=Math.abs(j.movementY)+Math.abs(j.movementX),G.detection.totalDistanceMoved>kF&&(a&&e.requestPointerLock(),G.detection={detected:!0,dragMovement:{x:0,y:0},dragEventCount:0},k())),G.detection.detected)){G.detection.dragEventCount+=1;let{dragMovement:J}=G.detection;if(a)J.x+=j.movementX,J.y+=j.movementY;else{let{startPos:Y}=G;J.x=j.screenX-Y.x,J.y=j.screenY-Y.y}f.current.onDrag(J.x,J.y,j,j.movementX,j.movementY)}},T=j=>{if(A(),!u.current.domDragStarted)return;let G=u.current.detection.detected;u.current={domDragStarted:!1},n.shouldPointerLock&&!VA&&document.exitPointerLock(),f.current.onDragEnd(G),window.focus(),G||f.current.onClick(j),k()},E=()=>{document.addEventListener("mousemove",M),document.addEventListener("mouseup",T)},A=()=>{var j;(j=p.current)==null||j.release(),document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",T)},C=j=>{r.current.disabled||u.current.domDragStarted&&u.current.detection.detected&&(r.current.dontBlockMouseDown||(j.stopPropagation(),j.preventDefault()),u.current.detection={detected:!1,totalDistanceMoved:0},k())},R=j=>{var G,J,Y,re;(G=p.current)==null||G.release();let ye=r.current;if(ye.disabled===!0||!((J=ye.buttons)!=null?J:[0]).includes(j.button))return;let ke=ye.onDragStart(j);ke!==!1&&(f.current.onDrag=ke.onDrag,f.current.onDragEnd=(Y=ke.onDragEnd)!=null?Y:ps,f.current.onClick=(re=ke.onClick)!=null?re:ps,p.current=c("Drag start"),ye.dontBlockMouseDown||(j.stopPropagation(),j.preventDefault()),u.current={domDragStarted:!0,startPos:{x:j.screenX,y:j.screenY},detection:{detected:!1,totalDistanceMoved:0}},k(),E())},N=j=>{R(j)};return e.addEventListener("mousedown",N),e.addEventListener("click",C),()=>{var j,G;A(),e.removeEventListener("mousedown",N),e.removeEventListener("click",C),u.current.domDragStarted&&((G=(j=f.current).onDragEnd)==null||G.call(j,u.current.detection.detected)),u.current={domDragStarted:!1},k()}},[e]),Da(y&&!!n.lockCSSCursorTo,"dragging",n.lockCSSCursorTo),[y]}function soe(e,n){return(!n.detection.detected||n.detection.detected&&n.detection.dragEventCount<3)&&(Math.abs(e.movementX)>HA||Math.abs(e.movementY)>HA)}var Vm,kF,HA,di=z(()=>{Vm=te(Ie()),aa(),UA(),Fm(),aoe(),tr(),kF=3,HA=100});function loe(e){return isNaN(e)?"NaN":is(e)?e.toFixed(0):US(e,3).toString()}var TF,MF,fu,PF,VE,CF,AF,IF,DF,OF,RF,LF,zF,HE,GA=z(()=>{Xr(),TF=te(Ie()),MF=te(Ie()),fu=te(Ie()),We(),UE(),tr(),NA(),di(),VE=se.div(PF||(PF=Q([`
  height: 100%;
  width: 100%;
  position: relative;
  z-index: 0;
  box-sizing: border-box;
  display: flex;
  align-items: center;

  &:after {
    position: absolute;
    inset: 1px 0 2px;
    display: block;
    content: ' ';
    background-color: transparent;
    border: 1px solid transparent;
    z-index: -2;
    box-sizing: border-box;
    border-radius: 1px;
  }

  &:hover,
  &.dragging,
  &.editingViaKeyboard {
    &:after {
      background-color: #10101042;
      border-color: #00000059;
    }
  }
`]))),AF=se.input(CF||(CF=Q([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: ew-resize;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;

  &:focus {
    cursor: text;
  }
`]))),DF=se.div(IF||(IF=Q([`
  position: absolute;
  inset: 3px 2px 4px;
  transform: scale(var(--percentage), 1);
  transform-origin: top left;
  background-color: #2d5561;
  z-index: -1;
  border-radius: 2px;
  pointer-events: none;

  `,".dragging &, ",`.noFocus:hover & {
    background-color: #338198;
  }
`])),VE,VE),RF=se.div(OF||(OF=Q([`
  display: contents;
`]))),LF=e=>!0,zF=e=>{var n;let[r]=Xn({mode:"noFocus"}),a=(n=e.isValid)!=null?n:LF,u=(0,fu.useRef)(e);u.current=e;let c=(0,fu.useRef)(null);zA(c.current,()=>{c.current.blur()},r.current.mode==="editingViaKeyboard");let f=(0,fu.useRef)(null),p=(0,fu.useMemo)(()=>{let R=ke=>{let ce=ke.target,{value:Ce}=ce,Ge=r.current;r.current=q(O({},Ge),{currentEditedValueInString:Ce});let oe=parseFloat(Ce);!isFinite(oe)||!a(oe)||u.current.temporarilySetValue(oe)},N=()=>{r.current.mode==="editingViaKeyboard"&&(j(),r.current={mode:"noFocus"}),e.onBlur&&e.onBlur()},j=()=>{let ke=r.current,ce=parseFloat(ke.currentEditedValueInString);!isFinite(ce)||!a(ce)||ke.valueBeforeEditing===ce?u.current.discardTemporaryValue():u.current.permanentlySetValue(ce)},G=ke=>{ke.key==="Escape"?(u.current.discardTemporaryValue(),r.current={mode:"noFocus"},c.current.blur()):(ke.key==="Enter"||ke.key==="Tab")&&(j(),c.current.blur())},J=ke=>{r.current.mode==="noFocus"&&(c.current.focus(),ke.preventDefault()),ke.stopPropagation()},Y=()=>{r.current.mode==="noFocus"?re():r.current.mode},re=()=>{let ke=u.current.value;r.current={mode:"editingViaKeyboard",currentEditedValueInString:String(ke),valueBeforeEditing:ke},setTimeout(()=>{c.current.focus(),c.current.setSelectionRange(0,100)})},ye;return{inputChange:R,onBlur:N,transitionToDraggingMode:()=>{var ke;let ce=u.current.value;ye=(ke=c.current)==null?void 0:ke.getBoundingClientRect().width,r.current={mode:"dragging"};let Ce=ce,Ge=ce;return f.current=document.body.style.cursor,{onDrag(oe,Ae,W,Le){let kt=W.altKey?Le/10:Le,Te=Ge+e.nudge({deltaX:kt,deltaFraction:kt/ye,magnitude:1});Ge=e.range?Tr(Te,e.range[0],e.range[1]):Te,u.current.temporarilySetValue(Ge)},onDragEnd(oe){oe?(Ce===Ge?u.current.discardTemporaryValue():u.current.permanentlySetValue(Ge),r.current={mode:"noFocus"}):(u.current.discardTemporaryValue(),r.current={mode:"noFocus"})},onClick(){c.current.focus(),c.current.setSelectionRange(0,100)}}},onInputKeyDown:G,onClick:J,onFocus:Y}},[]);(0,TF.useEffect)(()=>()=>{p.onBlur()},[]);let v=r.current.mode!=="editingViaKeyboard"?loe(e.value):r.current.currentEditedValueInString;typeof v=="number"&&isNaN(v)&&(v="NaN");let y=[c];e.inputRef&&y.push(e.inputRef);let k=fu.default.createElement(AF,{key:"input",type:"text",onChange:p.inputChange,value:v,onBlur:p.onBlur,onKeyDown:p.onInputKeyDown,onClick:p.onClick,onFocus:p.onFocus,ref:jE(y),onMouseDown:R=>{R.stopPropagation()},onDoubleClick:R=>{R.preventDefault(),R.stopPropagation()},autoFocus:e.autoFocus}),{range:M}=e,T=parseFloat(v),E=M?fu.default.createElement(DF,{style:{"--percentage":Tr((T-M[0])/(M[1]-M[0]),0,1)}}):null,[A,C]=(0,MF.useState)(null);return Ur(A,{debugName:"form/BasicNumberInput",onDragStart:p.transitionToDraggingMode,lockCSSCursorTo:"ew-resize",shouldPointerLock:!0,disabled:r.current.mode==="editingViaKeyboard"}),fu.default.createElement(VE,{className:e.className+" "+r.current.mode},fu.default.createElement(RF,{ref:C},k),E)},HE=zF});function uoe({propConfig:e,editingTools:n,value:r,autoFocus:a}){let u=(0,WA.useCallback)(c=>e.nudgeFn(q(O({},c),{config:e})),[e]);return WA.default.createElement(HE,{value:r,temporarilySetValue:n.temporarilySetValue,discardTemporaryValue:n.discardTemporaryValue,permanentlySetValue:n.permanentlySetValue,range:e.range,nudge:u,autoFocus:a})}var WA,qA,NF=z(()=>{GA(),WA=te(Ie()),qA=uoe});function coe({value:e,onChange:n,options:r,autoFocus:a}){let u=(0,eb.useCallback)(c=>{n(String(c.target.value))},[n]);return eb.default.createElement(KA,{role:"radiogroup"},Object.keys(r).map((c,f)=>eb.default.createElement(jF,{key:"label-"+f,"data-checked":e===c},r[c],eb.default.createElement(VF,{type:"radio",checked:e===c,value:c,onChange:u,name:"switchbox",autoFocus:a}))))}var eb,FF,KA,BF,jF,UF,VF,HF,doe=z(()=>{oa(),eb=te(Ie()),We(),KA=se.form(FF||(FF=Q([`
  display: flex;
  flex-direction: row;
  align-items: stretch;
  vertical-align: middle;
  justify-content: stretch;
  height: 24px;
  width: 100%;
`]))),jF=se.label(BF||(BF=Q([`
  padding: 0 0.5em;
  background: transparent;
  /* background: #373748; */
  display: flex;
  align-items: center;
  justify-content: center;
  flex-grow: 1;
  color: #a7a7a7;
  border: 1px solid transparent;
  box-sizing: border-box;
  border-right-width: 0px;

  & + &:last-child {
    border-right-width: 1px;
  }

  `,`:hover > & {
    border-color: #1c2123;
    /* background-color: #373748; */
    /* color: `,`; */
  }

  &&:hover {
    background-color: #464654;
  }

  &&[data-checked='true'] {
    color: white;
    background: #3f3f4c;
  }
`])),KA,jy(.1,"white")),VF=se.input(UF||(UF=Q([`
  position: absolute;
  opacity: 0;
  pointer-events: none;
  width: 0;
  height: 0;
`]))),HF=coe}),foe=z(()=>{}),XA,$A,ZA,GF=z(()=>{XA=te(Ie()),$A={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},ZA=XA.default.createContext&&XA.default.createContext($A)});function WF(e){return e&&e.map(function(n,r){return Gm.default.createElement(n.tag,hu({key:r},n.attr),WF(n.child))})}function Hm(e){return function(n){return Gm.default.createElement(hoe,hu({attr:hu({},e.attr)},n),WF(e.child))}}function hoe(e){var n=function(r){var a=e.attr,u=e.size,c=e.title,f=qF(e,["attr","size","title"]),p=u||r.size||"1em",v;return r.className&&(v=r.className),e.className&&(v=(v?v+" ":"")+e.className),Gm.default.createElement("svg",hu({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,f,{className:v,style:hu(hu({color:e.color||r.color},r.style),e.style),height:p,width:p,xmlns:"http://www.w3.org/2000/svg"}),c&&Gm.default.createElement("title",null,c),e.children)};return ZA!==void 0?Gm.default.createElement(ZA.Consumer,null,function(r){return n(r)}):n($A)}var Gm,hu,qF,poe=z(()=>{Gm=te(Ie()),GF(),hu=function(){return hu=Object.assign||function(e){for(var n,r=1,a=arguments.length;r<a;r++){n=arguments[r];for(var u in n)Object.prototype.hasOwnProperty.call(n,u)&&(e[u]=n[u])}return e},hu.apply(this,arguments)},qF=function(e,n){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&n.indexOf(a)<0&&(r[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var u=0,a=Object.getOwnPropertySymbols(e);u<a.length;u++)n.indexOf(a[u])<0&&Object.prototype.propertyIsEnumerable.call(e,a[u])&&(r[a[u]]=e[a[u]]);return r}}),ni=z(()=>{foe(),poe(),GF()}),moe=z(()=>{ni()}),goe=z(()=>{ni()});function voe(e){return Hm({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M289.94 256l95-95A24 24 0 00351 127l-95 95-95-95a24 24 0 00-34 34l95 95-95 95a24 24 0 1034 34l95-95 95 95a24 24 0 0034-34z"}}]})(e)}var yoe=z(()=>{ni()}),boe=z(()=>{ni()}),_oe=z(()=>{ni()});function xoe(e){return Hm({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M5.5 3L7 4.5 3.25 8 7 11.5 5.5 13l-5-5 5-5z"}}]})(e)}function woe(e){return Hm({tag:"svg",attr:{viewBox:"0 0 8 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M7.5 8l-5 5L1 11.5 4.75 8 1 4.5 2.5 3l5 5z"}}]})(e)}var Soe=z(()=>{ni()}),Eoe=z(()=>{ni()}),koe=z(()=>{ni()}),Toe=z(()=>{ni()}),Moe=z(()=>{ni()}),Poe=z(()=>{ni()}),Coe=z(()=>{ni()}),Aoe=z(()=>{ni()}),Ioe=z(()=>{ni()}),Doe=z(()=>{ni()});function KF(e){return Hm({tag:"svg",attr:{fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},child:[{tag:"path",attr:{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"}}]})(e)}var Ooe=z(()=>{ni()}),Roe=z(()=>{ni()}),Loe=z(()=>{ni()}),zoe=z(()=>{ni()});function Noe(e){return Hm({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none"},child:[{tag:"path",attr:{d:"M6 9.65685L7.41421 11.0711L11.6569 6.82843L15.8995 11.0711L17.3137 9.65685L11.6569 4L6 9.65685Z",fill:"currentColor"}},{tag:"path",attr:{d:"M6 14.4433L7.41421 13.0291L11.6569 17.2717L15.8995 13.0291L17.3137 14.4433L11.6569 20.1001L6 14.4433Z",fill:"currentColor"}}]})(e)}var Foe=z(()=>{ni()});function Boe(e){return Hm({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M14 10.44l-.413.56H2.393L2 10.46 7.627 5h.827L14 10.44z"}}]})(e)}var joe=z(()=>{ni()}),Wm=z(()=>{moe(),goe(),yoe(),boe(),_oe(),Soe(),Eoe(),koe(),Toe(),Moe(),Poe(),Coe(),Aoe(),Ioe(),Doe(),Ooe(),Roe(),Loe(),zoe(),Foe(),joe()});function Uoe({value:e,onChange:n,options:r,className:a,autoFocus:u}){let c=(0,Of.useCallback)(f=>{n(String(f.target.value))},[n]);return Of.default.createElement($F,null,Of.default.createElement(QF,{className:a,value:e,onChange:c,autoFocus:u},Object.keys(r).map((f,p)=>Of.default.createElement("option",{key:"option-"+p,value:f},r[f]))),Of.default.createElement(YF,null,Of.default.createElement(Noe,null)))}var Of,XF,$F,ZF,YF,JF,QF,e6,Voe=z(()=>{Of=te(Ie()),We(),Wm(),$F=se.div(XF||(XF=Q([`
  width: 100%;
  position: relative;
`]))),YF=se.div(ZF||(ZF=Q([`
  position: absolute;
  right: 0px;
  top: 0;
  bottom: 0;
  width: 1.5em;
  font-size: 14px;
  display: flex;
  align-items: center;
  color: #6b7280;
  pointer-events: none;
`]))),QF=se.select(JF||(JF=Q([`
  appearance: none;
  background-color: transparent;
  box-sizing: border-box;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.85);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  text-align: left;
  width: 100%;
  border-radius: 2px;
  /*
  looks like putting percentages in the height of a select box doesn't work in Firefox. Not sure why.
  So we're hard-coding the height to 26px, unlike all other inputs that use a relative height.
  */
  height: 26px /* calc(100% - 4px); */;

  @supports (-moz-appearance: none) {
    /* Ugly hack to remove the extra left padding that shows up only in Firefox */
    text-indent: -2px;
  }

  &:hover,
  &:focus {
    background-color: #10101042;
    border-color: #00000059;
  }
`]))),e6=Uoe});function Hoe({propConfig:e,editingTools:n,value:r,autoFocus:a}){let u=(0,GE.useCallback)(c=>{n.permanentlySetValue(c)},[e,n]);return e.as==="menu"?GE.default.createElement(e6,{value:r,onChange:u,options:e.valuesAndLabels,autoFocus:a}):GE.default.createElement(HF,{value:r,onChange:u,options:e.valuesAndLabels,autoFocus:a})}var GE,t6,Goe=z(()=>{GE=te(Ie()),doe(),Voe(),t6=Hoe}),n6,tb,r6,i6,o6,a6,WE,YA=z(()=>{We(),n6=te(Ie()),tb=te(Ie()),UE(),tr(),NA(),i6=se.input.attrs({type:"text"})(r6||(r6=Q([`
  background: transparent;
  border: 1px solid transparent;
  color: rgba(255, 255, 255, 0.9);
  padding: 1px 6px;
  font: inherit;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: calc(100% - 4px);
  border-radius: 2px;
  border: 1px solid transparent;
  box-sizing: border-box;

  &:hover {
    background-color: #10101042;
    border-color: #00000059;
  }

  &:hover,
  &:focus {
    cursor: text;
    background-color: #10101042;
    border-color: #00000059;
  }

  &.invalid {
    border-color: red;
  }
`]))),o6=e=>!0,a6=e=>{var n,r;let[a]=Xn({mode:"noFocus"}),u=(n=e.isValid)!=null?n:o6,c=(0,tb.useRef)(e);c.current=e;let f=(0,tb.useRef)(null);zA(f.current,()=>{f.current.blur()},a.current.mode==="editingViaKeyboard");let p=(0,tb.useMemo)(()=>{let k=N=>{let j=N.target,{value:G}=j,J=a.current;a.current=q(O({},J),{currentEditedValueInString:G}),u(G)&&c.current.temporarilySetValue(G)},M=()=>{var N,j;a.current.mode==="editingViaKeyboard"&&(T(),a.current={mode:"noFocus"}),(j=(N=c.current).onBlur)==null||j.call(N)},T=()=>{let N=a.current,j=N.currentEditedValueInString;u(j)?N.valueBeforeEditing===j?c.current.discardTemporaryValue():c.current.permanentlySetValue(j):c.current.discardTemporaryValue()},E=N=>{N.key==="Escape"?(c.current.discardTemporaryValue(),a.current={mode:"noFocus"},f.current.blur()):(N.key==="Enter"||N.key==="Tab")&&(T(),f.current.blur())},A=N=>{a.current.mode==="noFocus"&&(f.current.focus(),N.preventDefault()),N.stopPropagation()},C=()=>{a.current.mode==="noFocus"?R():a.current.mode},R=()=>{let N=c.current.value;a.current={mode:"editingViaKeyboard",currentEditedValueInString:String(N),valueBeforeEditing:N},setTimeout(()=>{f.current.focus()})};return{inputChange:k,onBlur:M,onInputKeyDown:E,onClick:A,onFocus:C}},[]);(0,n6.useEffect)(()=>()=>{p.onBlur()},[]);let v=a.current.mode!=="editingViaKeyboard"?e.value:a.current.currentEditedValueInString,y=[f];return e.inputRef&&y.push(e.inputRef),tb.default.createElement(i6,{key:"input",type:"text",className:"".concat((r=e.className)!=null?r:""," ").concat(u(v)?"":"invalid"),onChange:p.inputChange,value:v,onBlur:p.onBlur,onKeyDown:p.onInputKeyDown,onClick:p.onClick,onFocus:p.onFocus,ref:jE(y),onMouseDown:k=>{k.stopPropagation()},onDoubleClick:k=>{k.preventDefault(),k.stopPropagation()},autoFocus:e.autoFocus})},WE=a6});function Woe({editingTools:e,value:n,autoFocus:r}){return s6.default.createElement(WE,{value:n,temporarilySetValue:e.temporarilySetValue,discardTemporaryValue:e.discardTemporaryValue,permanentlySetValue:e.permanentlySetValue,autoFocus:r})}var s6,l6,qoe=z(()=>{s6=te(Ie()),YA(),l6=Woe});function Koe(e){e=e.trim().toLowerCase();let n=e.match(eI);if(!n)return{r:0,g:0,b:0,a:1};let r=Xoe(n[1]);return{r:parseInt(r.substr(0,2),16)/255,g:parseInt(r.substr(2,2),16)/255,b:parseInt(r.substr(4,2),16)/255,a:parseInt(r.substr(6,2),16)/255}}function JA(e,{removeAlphaIfOpaque:n=!1}={}){let r=(e.a*255|256).toString(16).slice(1),a=(e.r*255|256).toString(16).slice(1)+(e.g*255|256).toString(16).slice(1)+(e.b*255|256).toString(16).slice(1)+(n&&r==="ff"?"":r);return"#".concat(a)}function QA(e){return q(O({},e),{toString(){return JA(this,{removeAlphaIfOpaque:!0})}})}function Xoe(e){switch(e.length){case 3:return"".concat(e.repeat(2),"ff");case 4:let n=e.substr(0,3),r=e[3];return"".concat(n.repeat(2)).concat(r.repeat(2));case 6:return"".concat(e,"ff")}return e}var eI,u6=z(()=>{eI=/^#*([0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/i});function qE(e){let n=(0,tI.useRef)(e),r=(0,tI.useRef)(a=>{n.current&&n.current(a)});return n.current=e,r.current}var tI,c6=z(()=>{tI=te(Ie())}),Rf,KE=z(()=>{Rf=(e,n=0,r=1)=>e>r?r:e<n?n:e}),nb,nI,d6,rI,iI=z(()=>{nb=te(Ie()),nI=(0,nb.createContext)(void 0),d6=({children:e})=>{let[n,r]=(0,nb.useState)(!1);return nb.default.createElement(nI.Provider,{value:{editing:n,setEditing:r}},e)},rI=()=>(0,nb.useContext)(nI)}),Gc,qm,f6,XE,oI,aI,h6,p6,m6,g6,rb,$E=z(()=>{Gc=te(Ie()),c6(),KE(),We(),iI(),qm=e=>"touches"in e,f6=(e,n)=>{for(let r=0;r<e.length;r++)if(e[r].identifier===n)return e[r];return e[0]},XE=e=>e&&e.ownerDocument.defaultView||self,oI=(e,n,r)=>{let a=e.getBoundingClientRect(),u=qm(n)?f6(n.touches,r):n;return{left:Rf((u.pageX-(a.left+XE(e).pageXOffset))/a.width),top:Rf((u.pageY-(a.top+XE(e).pageYOffset))/a.height)}},aI=e=>{!qm(e)&&e.preventDefault()},h6=(e,n)=>n&&!qm(e),m6=se.div(p6||(p6=Q([`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  border-radius: inherit;
  outline: none;
  /* Don't trigger the default scrolling behavior when the event is originating from this element */
  touch-action: none;
`]))),g6=e=>{var n=e,{onMove:r,onKey:a}=n,u=_e(n,["onMove","onKey"]);let c=(0,Gc.useRef)(null),f=qE(r),p=qE(a),v=(0,Gc.useRef)(null),y=(0,Gc.useRef)(!1),{setEditing:k}=rI(),[M,T,E]=(0,Gc.useMemo)(()=>{let A=({nativeEvent:G})=>{let J=c.current;if(J&&(aI(G),!(h6(G,y.current)||!J))){if(qm(G)){y.current=!0;let Y=G.changedTouches||[];Y.length&&(v.current=Y[0].identifier)}J.focus(),k(!0),f(oI(J,G,v.current)),j(!0)}},C=G=>{aI(G),(qm(G)?G.touches.length>0:G.buttons>0)&&c.current?f(oI(c.current,G,v.current)):(k(!1),j(!1))},R=G=>{k(!1),j(!1)},N=G=>{let J=G.which||G.keyCode;J<37||J>40||(G.preventDefault(),p({left:J===39?.05:J===37?-.05:0,top:J===40?.05:J===38?-.05:0}))};function j(G){let J=y.current,Y=c.current,re=XE(Y),ye=G?re.addEventListener:re.removeEventListener;ye(J?"touchmove":"mousemove",C),ye(J?"touchend":"mouseup",R)}return[A,N,j]},[p,f]);return(0,Gc.useEffect)(()=>E,[E]),Gc.default.createElement(m6,q(O({},u),{onTouchStart:M,onMouseDown:M,ref:c,onKeyDown:T,tabIndex:0,role:"slider"}))},rb=Gc.default.memo(g6)}),sI,v6,y6,b6,_6,x6,w6,ZE,lI=z(()=>{sI=te(Ie()),We(),$E(),y6=se(rb)(v6||(v6=Q([""]))),_6=se.div(b6||(b6=Q([`
  position: absolute;
  z-index: 1;
  box-sizing: border-box;
  width: 16px;
  height: 16px;
  transform: translate(-50%, -50%);
  background-color: #fff;
  border: 1px solid #ffffff00;
  border-radius: 2px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);

  `,`:focus & {
    transform: translate(-50%, -50%) scale(1.1);
  }
`])),y6),w6=se.div(x6||(x6=Q([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;
`]))),ZE=({className:e,color:n,left:r,top:a=.5})=>{let u={top:"".concat(a*100,"%"),left:"".concat(r*100,"%")};return sI.default.createElement(_6,{style:u,className:e},sI.default.createElement(w6,{style:{backgroundColor:n}}))}}),ro,YE=z(()=>{ro=(e,n=0,r=Math.pow(10,n))=>Math.round(r*e)/r}),uI,JE,QE,S6,E6,ek=z(()=>{YE(),uI=({h:e,s:n,v:r,a})=>{let u=(200-n)*r/100;return{h:ro(e),s:ro(u>0&&u<200?n*r/100/(u<=100?u:200-u)*100:0),l:ro(u/2),a:ro(a,2)}},JE=e=>{let{h:n,s:r,l:a}=uI(e);return"hsl(".concat(n,", ").concat(r,"%, ").concat(a,"%)")},QE=e=>{let{h:n,s:r,l:a,a:u}=uI(e);return"hsla(".concat(n,", ").concat(r,"%, ").concat(a,"%, ").concat(u,")")},S6=({h:e,s:n,v:r,a})=>{e=e/360*6,n=n/100,r=r/100;let u=Math.floor(e),c=r*(1-n),f=r*(1-(e-u)*n),p=r*(1-(1-e+u)*n),v=u%6;return{r:ro([r,f,c,c,p,r][v]*255),g:ro([p,r,r,f,c,c][v]*255),b:ro([c,c,p,r,r,f][v]*255),a:ro(a,2)}},E6=({r:e,g:n,b:r,a})=>{let u=Math.max(e,n,r),c=u-Math.min(e,n,r),f=c?u===e?(n-r)/c:u===n?2+(r-e)/c:4+(e-n)/c:0;return{h:ro(60*(f<0?f+6:f)),s:ro(u?c/u*100:0),v:ro(u/255*100),a}}}),ib,k6,T6,M6,P6,C6,A6,$oe=z(()=>{ib=te(Ie()),$E(),lI(),ek(),KE(),YE(),We(),T6=se.div(k6||(k6=Q([`
  position: relative;
  height: 16px;
  border-radius: 2px;

  background: linear-gradient(
    to right,
    #f00 0%,
    #ff0 17%,
    #0f0 33%,
    #0ff 50%,
    #00f 67%,
    #f0f 83%,
    #f00 100%
  );
`]))),P6=se(ZE)(M6||(M6=Q([`
  z-index: 2;
`]))),C6=({className:e,hue:n,onChange:r})=>ib.default.createElement(T6,{className:e},ib.default.createElement(rb,{onMove:a=>{r({h:360*a.left})},onKey:a=>{r({h:Rf(n+a.left*360,0,360)})},"aria-label":"Hue","aria-valuetext":ro(n)},ib.default.createElement(P6,{left:n/360,color:JE({h:n,s:100,v:100,a:1})}))),A6=ib.default.memo(C6)}),ob,I6,D6,O6,R6,L6,z6,Zoe=z(()=>{ob=te(Ie()),$E(),lI(),ek(),KE(),YE(),We(),D6=se.div(I6||(I6=Q([`
  position: relative;
  flex-grow: 1;
  border-color: transparent; /* Fixes https://github.com/omgovich/react-colorful/issues/139 */
  border-bottom: 12px solid #000;
  border-radius: 2px;
  background-image: linear-gradient(to top, #000, rgba(0, 0, 0, 0)),
    linear-gradient(to right, #fff, rgba(255, 255, 255, 0));

  // Improve elements rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),R6=se(ZE)(O6||(O6=Q([`
  z-index: 3;
`]))),L6=({hsva:e,onChange:n})=>{let r=c=>{n({s:c.left*100,v:100-c.top*100})},a=c=>{n({s:Rf(e.s+c.left*100,0,100),v:Rf(e.v-c.top*100,0,100)})},u={backgroundColor:JE({h:e.h,s:100,v:100,a:1})};return ob.default.createElement(D6,{style:u},ob.default.createElement(rb,{onMove:r,onKey:a,"aria-label":"Color","aria-valuetext":"Saturation ".concat(ro(e.s),"%, Brightness ").concat(ro(e.v),"%")},ob.default.createElement(R6,{top:1-e.v/100,left:e.s/100,color:JE(e)})))},z6=ob.default.memo(L6)}),ab,N6,F6,B6,j6,U6,V6,H6,Yoe=z(()=>{ab=te(Ie()),$E(),lI(),ek(),KE(),YE(),We(),F6=se.div(N6||(N6=Q([`
  position: relative;
  height: 16px;
  border-radius: 2px;
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),j6=se.div.attrs(({colorFrom:e,colorTo:n})=>({style:{backgroundImage:"linear-gradient(90deg, ".concat(e,", ").concat(n,")")}}))(B6||(B6=Q([`
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  border-radius: inherit;

  // Improve rendering on light backgrounds
  box-shadow: inset 0 0 0 1px rgba(0, 0, 0, 0.05);
`]))),V6=se(ZE)(U6||(U6=Q([`
  // Checkerboard
  background-color: #fff;
  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><rect x="8" width="8" height="8"/><rect y="8" width="8" height="8"/></svg>');
`]))),H6=({className:e,hsva:n,onChange:r})=>{let a=p=>{r({a:p.left})},u=p=>{r({a:Rf(n.a+p.left)})},c=QE(Object.assign({},n,{a:0})),f=QE(Object.assign({},n,{a:1}));return ab.default.createElement(F6,{className:e},ab.default.createElement(j6,{colorFrom:c,colorTo:f}),ab.default.createElement(rb,{onMove:a,onKey:u,"aria-label":"Alpha","aria-valuetext":"".concat(ro(n.a*100),"%")},ab.default.createElement(V6,{left:n.a,color:QE(n)})))}}),tk,G6=z(()=>{tk=(e,n)=>{if(e===n)return!0;for(let r in e)if(e[r]!==n[r])return!1;return!0}});function Joe(e,n,r,a){let{editing:u}=rI(),[c,f]=(0,pu.useState)(n),p=qE(r),v=qE(a),y=u?c:n,[k,M]=(0,pu.useState)(()=>e.toHsva(y)),T=(0,pu.useRef)({color:y,hsva:k}),E=(0,pu.useRef)({color:y,hsva:k});(0,pu.useEffect)(()=>{u&&f(T.current.color)},[u]),(0,pu.useEffect)(()=>{let C=e.fromHsva(k);u?!tk(k,T.current.hsva)&&!e.equal(C,T.current.color)&&(T.current={hsva:k,color:C},f(C),p(C)):!tk(k,E.current.hsva)&&!e.equal(C,E.current.color)&&(E.current={hsva:k,color:C},T.current={hsva:k,color:C},v(C))},[u,k,e,p,v]),(0,pu.useEffect)(()=>{if(!u&&!e.equal(y,E.current.color)){let C=e.toHsva(y);E.current={hsva:C,color:y},M(C)}},[u,y,e]);let A=(0,pu.useCallback)(C=>{M(R=>Object.assign({},R,C))},[]);return[k,A]}var pu,Qoe=z(()=>{pu=te(Ie()),G6(),c6(),iI()}),Km,W6,q6,K6,eae=z(()=>{Km=te(Ie()),$oe(),Zoe(),Yoe(),Qoe(),We(),q6=se.div(W6||(W6=Q([`
  position: relative;
  display: flex;
  gap: 4px;
  flex-direction: column;
  width: 200px;
  height: 200px;
  user-select: none;
  cursor: default;
`]))),K6=e=>{var n=e,{className:r,colorModel:a,color:u=a.defaultColor,temporarilySetValue:c,permanentlySetValue:f,discardTemporaryValue:p}=n,v=_e(n,["className","colorModel","color","temporarilySetValue","permanentlySetValue","discardTemporaryValue"]);let[y,k]=Joe(a,u,c,f);return(0,Km.useEffect)(()=>()=>{p()},[]),Km.default.createElement(q6,O({},v),Km.default.createElement(z6,{hsva:y,onChange:k}),Km.default.createElement(A6,{hue:y.h,onChange:k}),Km.default.createElement(H6,{hsva:y,onChange:k}))}}),cI,X6,$6,Z6,Y6,tae=z(()=>{cI=te(Ie()),eae(),G6(),ek(),iI(),X6=e=>({r:e.r/255,g:e.g/255,b:e.b/255,a:e.a}),$6=e=>({r:e.r*255,g:e.g*255,b:e.b*255,a:e.a}),Z6={defaultColor:{r:0,g:0,b:0,a:1},toHsva:e=>E6($6(e)),fromHsva:e=>X6(S6(e)),equal:tk},Y6=e=>cI.default.createElement(d6,null,cI.default.createElement(K6,q(O({},e),{permanentlySetValue:n=>{e.permanentlySetValue(n)},colorModel:Z6})))}),nae=z(()=>{tae()}),J6,Q6,eB,rae=z(()=>{J6=te(Ie()),Q6=function(e){(0,J6.useEffect)(e,[])},eB=Q6}),tB,nB,rB,iae=z(()=>{tB=te(Ie()),rae(),nB=function(e){var n=(0,tB.useRef)(e);n.current=e,eB(function(){return function(){return n.current()}})},rB=nB}),nk,iB,oB,oae=z(()=>{nk=te(Ie()),iae(),iB=function(e){var n=(0,nk.useRef)(0),r=(0,nk.useState)(e),a=r[0],u=r[1],c=(0,nk.useCallback)(function(f){cancelAnimationFrame(n.current),n.current=requestAnimationFrame(function(){u(f)})},[]);return rB(function(){cancelAnimationFrame(n.current)}),[a,c]},oB=iB});function aae(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e&&e.addEventListener&&e.addEventListener.apply(e,n)}function sae(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e&&e.removeEventListener&&e.removeEventListener.apply(e,n)}var rk,lae=z(()=>{rk=typeof window!="undefined"}),aB,sB,ik,dI=z(()=>{aB=te(Ie()),oae(),lae(),sB=function(e,n){e===void 0&&(e=1/0),n===void 0&&(n=1/0);var r=oB({width:rk?window.innerWidth:e,height:rk?window.innerHeight:n}),a=r[0],u=r[1];return(0,aB.useEffect)(function(){if(rk){var c=function(){u({width:window.innerWidth,height:window.innerHeight})};return aae(window,"resize",c),function(){sae(window,"resize",c)}}},[]),a},ik=sB});function fI(e){let[n,r]=(0,hI.useState)(null);return(0,hI.useLayoutEffect)(()=>(e&&r(e.getBoundingClientRect()),()=>{r(null)}),[e]),n}var hI,lB=z(()=>{hI=te(Ie())}),uB,cB,pI,dB=z(()=>{uB=te(Ie()),cB=(0,uB.createContext)({}),pI=cB});function uae(e,n,r){let a=e.getBoundingClientRect(),u=c=>{(c.clientX<a.left-n||c.clientX>a.left+a.width+n||c.clientY<a.top-n||c.clientY>a.top+a.height+n)&&r(c)};return window.addEventListener("mousemove",u),()=>{window.removeEventListener("mousemove",u)}}var cae=z(()=>{}),fB,ok,mI,hB,gI,pB=z(()=>{fB=te(Ie()),ok=te(Ie()),dI(),lB(),dB(),tr(),NA(),cae(),Fm(),Xr(),mI=8,hB=e=>{var n,r;let a=e.children(),[u,c]=Xn(null),f=a.props.style?O({},a.props.style):{};f.position="absolute";let p=fI(c),v=fI(e.target),y=ik(),[k,M]=(0,ok.useState)({});return(0,ok.useLayoutEffect)(()=>{var T,E,A;if(!p||!c||!v)return;let C=(T=e.verticalGap)!=null?T:8,R={},N=(E=e.verticalPlacement)!=null?E:"bottom",j=0,G=0;N==="bottom"?v.bottom+p.height+C<y.height?(N="bottom",j=v.bottom+C,R.top="0px"):v.top>p.height+C?(N="top",j=v.top-(p.height+C),R.bottom="0px",R.transform="rotateZ(180deg)"):N="overlay":N==="top"&&(v.top>p.height+C?(N="top",j=v.top-(p.height+C),R.bottom="0px",R.transform="rotateZ(180deg)"):v.bottom+p.height+C<y.height?(N="bottom",j=v.bottom+C,R.top="0px"):N="overlay");let J=0;if(N!=="overlay"){let Ce=v.left+v.width/2;Ce<p.width/2?(G=C,J=Math.max(Ce-C,mI)):Ce+p.width/2>y.width?(G=y.width-(C+p.width),J=Math.min(Ce-G,p.width-mI)):(G=Ce-p.width/2,J=p.width/2),R.left=J+"px"}let{minX:Y=-1/0,maxX:re=1/0,minY:ye=-1/0,maxY:ke=1/0}=(A=e.constraints)!=null?A:{},ce={left:Tr(G,Y,re-p.width),top:Tr(j,ye,ke+p.height)};if(c.style.left=ce.left+"px",c.style.top=ce.top+"px",M(R),e.onPointerOutside)return uae(c,e.onPointerOutside.threshold,e.onPointerOutside.callback)},[p,c,e.target,v,y,e.onPointerOutside]),zA([c,(n=e.target)!=null?n:null],(r=e.onClickOutside)!=null?r:ps),fB.default.createElement(pI.Provider,{value:k},(0,ok.cloneElement)(a,{ref:u,style:f}))},gI=hB});function sl(e,n){let r=(...E)=>{},{isPointerBeingCaptured:a}=SF("usePopover"),[u,c]=Xn({isOpen:!1}),f=(0,io.useRef)(e),p=(0,io.useCallback)(E=>{u.current={isOpen:!1}},[]),v=(0,io.useCallback)((E,A)=>{var C;let R=typeof f.current=="function"?f.current():f.current;function N(){k.childHasFocusRef.current||R.closeOnClickOutside!==!1&&p("clicked outside popover")}u.current={isOpen:!0,clickPoint:{clientX:E.clientX,clientY:E.clientY},target:A,opts:R,onClickOutside:N,onPointerOutside:R.closeWhenPointerIsDistant===!1?void 0:{threshold:(C=R.pointerDistanceThreshold)!=null?C:100,callback:()=>{k.childHasFocusRef.current||a()||p("pointer outside")}}}},[]),y=(0,io.useCallback)((...E)=>{u.current.isOpen?p("toggled"):v(...E)},[]),k=dae({_debug:r,state:c}),[,M]=(0,io.useContext)(Rb);(0,io.useEffect)(()=>{let E;return c.isOpen&&(E=M()),()=>E==null?void 0:E()},[c.isOpen]);let T=(0,io.useContext)(Lm);return{node:c.isOpen?(0,mB.createPortal)(io.default.createElement(vI.Provider,{value:k.childPopoverLock},io.default.createElement(gI,{children:n,target:c.target,onClickOutside:c.onClickOutside,onPointerOutside:c.onPointerOutside,constraints:c.opts.constraints,verticalGap:c.opts.verticalGap})),T):io.default.createElement(io.default.Fragment,null),open:v,close:p,toggle:y,isOpen:c.isOpen}}function dae(e){let n=(0,io.useContext)(vI);(0,io.useEffect)(()=>{if(e.state.isOpen){let a=n.takeFocus();return e._debug("take focus"),()=>{e._debug("release focus"),a.releaseFocus()}}},[e.state.isOpen]);let r=(0,io.useRef)(!1);return{childHasFocusRef:r,childPopoverLock:{takeFocus(){return r.current=!0,{releaseFocus(){r.current=!1}}}}}}var io,mB,vI,ll=z(()=>{UA(),tr(),io=te(Ie()),mB=te(Ma()),Df(),pB(),aD(),vI=io.default.createContext({takeFocus(){return{releaseFocus(){}}}})}),mu,gB,vB,yB,bB,_B,xB,wB,SB,EB,kB,TB,MB,fae=z(()=>{mu=te(Ie()),We(),dB(),vB=se.div(gB||(gB=Q([`
  position: absolute;
  width: 0;
  height: 0;
  color: var(--popover-arrow-color);
  pointer-events: none;
`]))),bB=se.div(yB||(yB=Q([`
  width: 12px;
  height: 8px;
  position: absolute;
  left: -7px;
  top: -8px;
  text-align: center;
  line-height: 0;
`]))),xB=se.path(_B||(_B=Q([`
  fill: var(--popover-bg);
`]))),SB=se.path(wB||(wB=Q([`
  fill: var(--popover-inner-stroke);
`]))),kB=se.path(EB||(EB=Q([`
  fill: var(--popover-outer-stroke);
`]))),TB=(0,mu.forwardRef)(({className:e},n)=>{let r=(0,mu.useContext)(pI);return mu.default.createElement(vB,{className:e,ref:n,style:O({},r)},mu.default.createElement(bB,null,mu.default.createElement("svg",{width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",xmlns:"http://www.w3.org/2000/svg"},mu.default.createElement(kB,{d:"M6 0L0 6H12L6 0Z"}),mu.default.createElement(SB,{d:"M6 1.5L0 7.5H12L6 1.5Z"}),mu.default.createElement(xB,{d:"M6 3L0 9H12L6 3Z"}))))}),MB=TB}),ak,yI,PB,CB,AB,ul,cl=z(()=>{nr(),oa(),ak=te(Ie()),We(),fae(),yI=hs(.05,"#2a2a31"),CB=se.div(PB||(PB=Q([`
  position: absolute;
  --popover-bg: `,`;
  --popover-inner-stroke: #505159;
  --popover-outer-stroke: #111;

  background: var(--popover-bg);

  color: white;
  padding: 0;
  margin: 0;
  cursor: default;
  `,`;
  border-radius: 3px;
  z-index: 10000;
  border: 1px solid var(--popover-inner-stroke);
  box-shadow: 0 0 0 1px var(--popover-outer-stroke), 0 6px 8px -4px black;
  backdrop-filter: blur(8px);

  & a {
    color: inherit;
  }
`])),yI,Qn),AB=ak.default.forwardRef(({children:e,className:n,showPopoverEdgeTriangle:r=!0},a)=>ak.default.createElement(CB,{className:n,ref:a},r?ak.default.createElement(MB,null):void 0,e)),ul=AB});function hae({editingTools:e,value:n,autoFocus:r}){let a=(0,dl.useRef)(null),u=(0,dl.useCallback)(f=>{let p=QA(Koe(f));e.permanentlySetValue(p)},[e]),c=sl({debugName:"RgbaPropEditor"},()=>dl.default.createElement(FB,null,dl.default.createElement(Y6,{color:{r:n.r,g:n.g,b:n.b,a:n.a},temporarilySetValue:f=>{let p=QA(f);e.temporarilySetValue(p)},permanentlySetValue:f=>{let p=QA(f);e.permanentlySetValue(p)},discardTemporaryValue:e.discardTemporaryValue})));return dl.default.createElement(dl.default.Fragment,null,dl.default.createElement(DB,null,dl.default.createElement(RB,{rgbaColor:n,ref:a,onClick:f=>{c.toggle(f,a.current)}}),dl.default.createElement(zB,{value:JA(n,{removeAlphaIfOpaque:!0}),temporarilySetValue:bI,discardTemporaryValue:bI,permanentlySetValue:u,isValid:f=>!!f.match(eI),autoFocus:r})),c.node)}var dl,IB,DB,OB,RB,LB,zB,bI,NB,FB,BB,pae=z(()=>{u6(),u6(),dl=te(Ie()),nae(),We(),ll(),YA(),cl(),DB=se.div(IB||(IB=Q([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),RB=se.div.attrs(e=>({style:{background:JA(e.rgbaColor)}}))(OB||(OB=Q([`
  height: 18px;
  aspect-ratio: 1;
  border-radius: 99999px;
`]))),zB=se(WE)(LB||(LB=Q([`
  flex: 1;
`]))),bI=()=>{},FB=se.div(NB||(NB=Q([`
  position: absolute;
  background-color: `,`;
  color: white;
  margin: 0;
  cursor: default;
  border-radius: 3px;
  z-index: 10000;
  backdrop-filter: blur(8px);

  padding: 4px;
  pointer-events: all;

  border: none;
  box-shadow: none;
`])),yI),BB=hae});function mae({propConfig:e,editingTools:n,value:r,autoFocus:a}){let[u,c]=gs.default.useState();(0,gs.useEffect)(()=>{c(r?n.getAssetUrl(r):void 0)},[r]);let f=(0,gs.useCallback)(v=>Je(this,null,function*(){let y=v.target.files[0];n.permanentlySetValue({type:"image",id:void 0});let k=yield n.createAsset(y);k?n.permanentlySetValue({type:"image",id:k}):n.permanentlySetValue(r),v.target.value=null}),[n,r]),p=!(r!=null&&r.id);return gs.default.createElement(_I,{empty:p},gs.default.createElement(qB,{empty:p,title:p?"Upload image":'"'.concat(r.id,'" (Click to upload new image)')},gs.default.createElement(XB,{type:"file",onChange:f,accept:"image/*,.hdr",autoFocus:a}),u?gs.default.createElement(ZB,{src:u}):gs.default.createElement(VB,null)),!p&&gs.default.createElement(JB,{title:"Delete image",onClick:()=>{n.permanentlySetValue({type:"image",id:void 0})}},gs.default.createElement(MA,null)))}var gs,jB,_I,UB,VB,HB,GB,WB,qB,KB,XB,$B,ZB,YB,JB,QB,gae=z(()=>{Xy(),gs=te(Ie()),We(),_I=se.div(jB||(jB=Q([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),VB=se.div(UB||(UB=Q([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),qB=se.label(WB||(WB=Q([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),e=>e.empty?Bi(HB||(HB=Q([""]))):Bi(GB||(GB=Q([""])))),XB=se.input.attrs({type:"file"})(KB||(KB=Q([`
  display: none;
`]))),ZB=se.img($B||($B=Q([`
  position: absolute;
  inset: 0;
  height: 100%;
  aspect-ratio: 1;

  object-fit: cover;
`]))),JB=se.button(YB||(YB=Q([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),_I),QB=mae});function vae({propConfig:e,editingTools:n,value:r,autoFocus:a}){let[u,c]=vs.default.useState();(0,vs.useEffect)(()=>{c(r?n.getAssetUrl(r):void 0)},[r]);let f=(0,vs.useCallback)(v=>Je(this,null,function*(){let y=v.target.files[0];n.permanentlySetValue({type:"file",id:void 0});let k=yield n.createAsset(y);k?n.permanentlySetValue({type:"file",id:k}):n.permanentlySetValue(r),v.target.value=null}),[n,r]),p=!(r!=null&&r.id);return vs.default.createElement(xI,{empty:p},vs.default.createElement(aj,{empty:p,title:p?"Upload file":'"'.concat(r.id,'" (Click to upload new file)')},vs.default.createElement(lj,{type:"file",onChange:f,autoFocus:a}),u?vs.default.createElement(EA,null):vs.default.createElement(nj,null)),!p&&vs.default.createElement(cj,{title:"Delete file",onClick:()=>{n.permanentlySetValue({type:"file",id:void 0})}},vs.default.createElement(MA,null)))}var vs,ej,xI,tj,nj,rj,ij,oj,aj,sj,lj,uj,cj,dj,yae=z(()=>{Xy(),vs=te(Ie()),We(),xI=se.div(ej||(ej=Q([`
  display: flex;
  align-items: center;
  height: 100%;
  gap: 4px;
`]))),nj=se.div(tj||(tj=Q([`
  position: absolute;
  inset: -5px;
  // rotate 45deg
  transform: rotate(45deg);
  --checker-color: #ededed36;
  &:hover {
    --checker-color: #ededed77;
  }
  // checkerboard background with 4px squares
  background-image: linear-gradient(
      45deg,
      var(--checker-color) 25%,
      transparent 25%
    ),
    linear-gradient(-45deg, var(--checker-color) 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, var(--checker-color) 75%),
    linear-gradient(-45deg, transparent 75%, var(--checker-color) 75%);
  background-size: 5px 5px;
`]))),aj=se.label(oj||(oj=Q([`
  position: relative;
  cursor: default;
  box-sizing: border-box;

  height: 18px;
  aspect-ratio: 1;
  display: flex;
  justify-content: center;
  align-items: center;
  font-size: 16px;

  overflow: hidden;
  color: #ccc;
  &:hover {
    color: white;
  }

  border-radius: 99999px;
  border: 1px solid hwb(220deg 40% 52%);
  &:hover {
    border-color: hwb(220deg 45% 52%);
  }

  `,`
`])),e=>e.empty?Bi(rj||(rj=Q([""]))):Bi(ij||(ij=Q([""])))),lj=se.input.attrs({type:"file"})(sj||(sj=Q([`
  display: none;
`]))),cj=se.button(uj||(uj=Q([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  background: transparent;
  color: #a8a8a9;

  border: none;
  height: 100%;
  aspect-ratio: 1/1;

  opacity: 0;

  `,`:hover & {
    opacity: 0.8;
  }

  &:hover {
    opacity: 1;
    color: white;
  }
`])),xI),dj=vae}),wI,fj=z(()=>{roe(),NF(),Goe(),qoe(),pae(),gae(),yae(),wI={number:qA,string:l6,boolean:hF,stringLiteral:t6,rgba:BB,image:QB,file:dj}});function sb(e){let n=new WeakMap;return r=>(n.has(r)||n.set(r,e(r)),n.get(r))}var sk=z(()=>{});function fl(e){return e.type==="compound"||e.type==="enum"}function lk(e,n){if(!e)return;let[r,...a]=n;if(r===void 0)return e;if(!fl(e))return;let u=e.type==="enum"?e.cases[r]:e.props[r];return lk(u,a)}function uk(e,n){let r=n.deserializeAndSanitize(e);return r===void 0?n.default:r}function bae(e){return!fl(e)}function*lb(e,n){if(e.type==="compound")for(let r in e.props)yield*Dt(lb(e.props[r],[...n,r]));else{if(e.type==="enum")throw new Error("Not implemented yet");return yield{path:n,conf:e}}}var SI,Wc=z(()=>{sk(),SI=sb(e=>{if(e.type==="enum")throw new Error("Not implemented yet for enums");for(let n in e.props){let r=e.props[n];if(fl(r)){if(SI(r))return!0}else return!0}return!1})}),EI,hj=z(()=>{EI="calc(var(--left-pad) + var(--depth) * var(--step))"}),pj,qc,Lf=z(()=>{We(),qc=Bi(pj||(pj=Q([`
  font-weight: 300;
  font-size: 11px;
  color: `,`;
  text-shadow: 0.5px 0.5px 2px rgba(0, 0, 0, 0.3);
`])),e=>e.isHighlighted==="self"?"#CCC":"#919191")}),ub,ck,mj,gj,vj,yj,bj,_j,xj=z(()=>{Fm(),ub=te(Ie()),We(),ck=26,gj=se.li(mj||(mj=Q([`
  height: `,`px;
  padding: 0 12px;
  margin: 0;
  display: flex;
  align-items: center;
  font-size: 11px;
  font-weight: 400;
  position: relative;
  color: `,`;
  cursor: `,`;

  &:after {
    position: absolute;
    inset: 2px 1px;
    display: block;
    content: ' ';
    pointer-events: none;
    z-index: -1;
    border-radius: 3px;
  }

  &:hover:after {
    background-color: `,`;
  }
`])),ck,e=>e.enabled?"white":"#8f8f8f",e=>e.enabled?"normal":"not-allowed",e=>e.enabled?"rgba(63, 174, 191, 0.75)":"initial"),yj=se.span(vj||(vj=Q([""]))),bj=e=>ub.default.createElement(gj,{onClick:e.enabled?e.onClick:ps,enabled:e.enabled,title:e.enabled?void 0:"Disabled"},ub.default.createElement(yj,null,ub.default.createElement(ub.default.Fragment,null,e.label))),_j=bj});function _ae(e){let n=(0,kI.useRef)(e);n.current=e,(0,kI.useEffect)(()=>{let r=a=>n.current(a);return window.addEventListener("keydown",r),()=>{window.removeEventListener("keydown",r)}},[])}var kI,xae=z(()=>{kI=te(Ie())}),cb,wj,Sj,Ej,kj,Tj,Mj,Pj,TI,Cj=z(()=>{cb=te(Ie()),xj(),We(),oa(),nr(),wj=190,Sj=!0,kj=se.ul(Ej||(Ej=Q([`
  position: absolute;
  min-width: `,`px;
  z-index: 10000;
  background: `,`;
  backdrop-filter: blur(2px);
  color: white;
  list-style-type: none;
  padding: 2px 0;
  margin: 0;
  border-radius: 1px;
  cursor: default;
  `,`;
  border-radius: 3px;
`])),wj,hs(.2,"#111"),Qn),Mj=se.div(Tj||(Tj=Q([`
  padding: 4px 10px;
  border-bottom: 1px solid #6262626d;
  color: #adadadb3;
  font-size: 11px;
  font-weight: 500;
`]))),Pj=cb.default.forwardRef((e,n)=>cb.default.createElement(kj,{ref:n},Sj&&e.displayName?cb.default.createElement(Mj,null,e.displayName):null,e.items.map((r,a)=>cb.default.createElement(_j,{key:"item-".concat(a),label:r.label,enabled:r.enabled!==!1,onClick:u=>{r.callback&&r.callback(u),e.onRequestClose()}})))),TI=Pj}),Aj,Ij,dk,Dj,db,Oj,Rj,wae=z(()=>{lB(),Aj=te(Ie()),Ij=te(Ie()),dk=te(Ie()),Dj=te(Ma()),dI(),xj(),Df(),xae(),Cj(),db=20,Oj=e=>{let[n,r]=(0,dk.useState)(null),a=fI(n),u=ik();(0,dk.useLayoutEffect)(()=>{if(!a||!n)return;let p={left:a.width/2,top:ck/2+(e.displayName?ck:0)},v={left:e.clickPoint.clientX-p.left,top:e.clickPoint.clientY-p.top};v.left<0?v.left=0:v.left+a.width>u.width&&(v.left=u.width-a.width),v.top<0?v.top=0:v.top+a.height>u.height&&(v.top=u.height-a.height),n.style.left=v.left+"px",n.style.top=v.top+"px";let y=k=>{(k.clientX<v.left-db||k.clientX>v.left+a.width+db||k.clientY<v.top-db||k.clientY>v.top+a.height+db)&&e.onRequestClose()};return window.addEventListener("mousemove",y),()=>{window.removeEventListener("mousemove",y)}},[a,n,e.clickPoint,u,e.onRequestClose]);let c=(0,Ij.useContext)(Lm);_ae(p=>{p.key==="Escape"&&e.onRequestClose()});let f=(0,Aj.useMemo)(()=>{let p=Array.isArray(e.items)?e.items:e.items();return p.length>0?p:[{label:e.displayName?"No actions for ".concat(e.displayName):"No actions found",enabled:!1}]},[e.items]);return(0,Dj.createPortal)(dk.default.createElement(TI,{items:f,onRequestClose:e.onRequestClose,displayName:e.displayName,ref:r}),c)},Rj=Oj}),fk,Lj,zj,Sae=z(()=>{fk=te(Ie()),Lj=(e,n)=>{let[r,a]=(0,fk.useState)({isOpen:!1}),u=(0,fk.useCallback)(()=>a({isOpen:!1}),[]);return(0,fk.useEffect)(()=>{if(!e||n.disabled===!0){a({isOpen:!1});return}let c=f=>{a({isOpen:!0,event:f}),f.preventDefault(),f.stopPropagation()};return e.addEventListener("contextmenu",c),()=>{e.removeEventListener("contextmenu",c)}},[e,n.disabled]),[r,u]},zj=Lj});function wo(e,n){let[r,a]=zj(e,n),[,u]=(0,Xm.useContext)(Rb);return(0,Xm.useEffect)(()=>{var c;let f;return r.isOpen&&((c=n.onOpen)==null||c.call(n),f=u()),()=>f==null?void 0:f()},[r.isOpen,n.onOpen]),[r.isOpen?Xm.default.createElement(Rj,{items:n.menuItems,displayName:n.displayName,clickPoint:r.event,onRequestClose:a}):Nj,a,r.isOpen]}var Xm,Nj,So=z(()=>{Xm=te(Ie()),wae(),Sae(),aD(),Nj=Xm.default.createElement(Xm.default.Fragment,null)});function Kc(e,n){return n.length===0?e:$l(e,n)}var hk=z(()=>{Zl()});function Fj(e,n){return e==null?null:e instanceof Element&&e.matches(n)?e:Fj(e.parentElement,n)}var Eae=z(()=>{});function fb(e,n){let r=e;for(let a of n)r=r[a];return r}var pk=z(()=>{});function kae(e){let n=new mk.Atom(void 0),r=new mk.Atom({}),a=new mk.Atom({}),u=0;return{addRelatedFlags(c,f){let p=String(++u),v=f.map(y=>{let k={flag:y.flag},M=[y.affects,c,p];return a.setByPointer(T=>fb(T,M),k),M});return()=>{for(let y of v)a.setByPointer(k=>fb(k,y),void 0)}},usePresenceFlag(c){if(!e.enabled)return;let f=(0,hb.useMemo)(()=>{if(!c)return PI;let p=n.prism,v=(0,pb.pointerToPrism)(r.pointer[c]),y=(0,pb.pointerToPrism)(a.pointer[c]);return(0,pb.prism)(()=>{if(v.getValue())return 2;{let k=y.getValue(),M=p.getValue(),T=k&&M&&k[M];if(T){let E;for(let A of Object.values(T))A&&(E&&E>=A.flag||(E=A.flag));return E}return}})},[c]);return Sf(f)},setUserHover(c){let f=n.get();f!==c&&(f&&r.setByPointer(p=>p[f],!1),n.set(c),c&&r.setByPointer(p=>p[c],!0))}}}function zf(e){let n=hb.default.useContext(CI),r=n.usePresenceFlag(e);return{attrs:{[gk]:e},flag:r,useRelations(a,u){(0,MI.useEffect)(()=>e&&n.addRelatedFlags(e,a()),[e,...u])}}}function Bj(e){let n=hb.default.useContext(CI),r=Vc("PresenceListeners");(0,MI.useEffect)(()=>{let a;if(!e)return;let u=c=>{if(c.target instanceof Node){let f=Fj(c.target,"[".concat(gk,"]"));if(f){let p=f.getAttribute(gk);a!==p&&(a=p,n.setUserHover(p||void 0),r._debug("Updated current hover",{itemKey:p}));return}a!=null&&(a=null,n.setUserHover(void 0),r._debug("Cleared current hover"))}};return e.addEventListener("mouseover",u),()=>{e.removeEventListener("mouseover",u),a!=null&&(a=null,r._debug("Cleared current hover as part of cleanup"))}},[e,n])}var hb,MI,pb,mk,PI,CI,gk,Nf=z(()=>{hb=te(Ie()),MI=te(Ie()),Hc(),pb=St,mk=St,on(),Eae(),pk(),PI=(0,pb.prism)(()=>{}),PI.keepHot(),CI=hb.default.createContext(kae({enabled:!1})),gk="data-pi-key"}),ji,jj,mb,Uj,AI,Xc,Vj,II,Hj,Gj,Wj,vk,qj,Kj,Xj,$j,Zj,Yj,gb,Jj,DI,yk=z(()=>{nr(),oa(),ji=te(Ie()),We(),Nf(),mb=se.div(jj||(jj=Q([`
  display: flex;
  justify-content: center;
  align-items: center;
  width: 16px;
  margin: 0 0px 0 2px;
  position: relative;
  z-index: 0;
  opacity: 0.7;

  &:after {
    position: absolute;
    left: -14px;
    right: -14px;
    top: -2px;
    bottom: -2px;
    content: ' ';
    display: none;
    z-index: -1;
    background: `,`;
  }

  &:hover {
    opacity: 1;
    &:after {
      display: block;
    }
  }
`])),hs(.2,"black")),AI=se.div(Uj||(Uj=Q([`
  background: none;
  position: relative;
  border: 0;
  transition: transform 0.1s ease-out;
  z-index: 0;
  outline: none;
  cursor: pointer;

  &:after {
    display: none;
    `,`:hover & {
      display: block;
    }
    position: absolute;
    left: -4px;
    right: -4px;
    top: -4px;
    bottom: -4px;
    content: ' ';
    z-index: -1;
  }
`])),mb),Xc={offColor:"#555",onColor:"#e0c917"},II=se(AI)(Vj||(Vj=Q([`
  &:hover {
    color: #e0c917;
  }

  color: `,`;
`])),e=>e.presence===2?"white":e.isOn?Xc.onColor:Xc.offColor),Gj=Bi(Hj||(Hj=Q([`
  pointer-events: none !important;
`]))),vk=se(AI)(Wj||(Wj=Q([`
  color: `,`;

  `,`;
`])),e=>e.flag===2?"white":e.available?Xc.onColor:Xc.offColor,e=>e.available?Qn:Gj),Kj=se(vk)(qj||(qj=Q([`
  transform: translateX(2px);
  `,`:hover & {
    transform: translateX(-7px);
  }
`])),mb),$j=se(vk)(Xj||(Xj=Q([`
  transform: translateX(-2px);
  `,`:hover & {
    transform: translateX(7px);
  }
`])),mb),(e=>{let n=se.g(Zj||(Zj=Q([`
    stroke-width: 1;
    `,`:hover & path {
      stroke-width: 3;
    }
  `])),vk);e.Prev=()=>ji.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ji.default.createElement(n,{transform:"translate(6 3)"},ji.default.createElement("path",{d:"M4 1L1 4L4 7",stroke:"currentColor"}))),e.Next=()=>ji.default.createElement("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ji.default.createElement(n,{transform:"translate(1 3)"},ji.default.createElement("path",{d:"M1 1L4 4L1 7",stroke:"currentColor"})));let r=se.g(Yj||(Yj=Q([`
    stroke-width: 0;
    `,`:hover & path {
      stroke: currentColor;
      stroke-width: 2;
    }
  `])),II);e.Cur=()=>ji.default.createElement("svg",{width:"8",height:"12",viewBox:"0 0 8 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ji.default.createElement(r,{transform:"translate(1 4)"},ji.default.createElement("path",{d:"M3 0L6 3L3 6L0 3L3 0Z",fill:"currentColor"})))})(gb||(gb={})),Jj=e=>{var n,r,a,u,c;let f=zf((n=e.prev)==null?void 0:n.itemKey),p=zf(((r=e.cur)==null?void 0:r.type)==="on"?e.cur.itemKey:void 0),v=zf((a=e.next)==null?void 0:a.itemKey);return ji.default.createElement(mb,null,ji.default.createElement(Kj,O({available:!!e.prev,onClick:(u=e.prev)==null?void 0:u.jump,flag:f.flag},f.attrs),ji.default.createElement(gb.Prev,null)),ji.default.createElement(II,O({isOn:e.cur.type==="on",onClick:e.cur.toggle,presence:p.flag},p.attrs),ji.default.createElement(gb.Cur,null)),ji.default.createElement($j,O({available:!!e.next,onClick:(c=e.next)==null?void 0:c.jump,flag:v.flag},v.attrs),ji.default.createElement(gb.Next,null)))},DI=Jj}),bk,vb,Qj,e8,t8,n8,r8,i8,o8,yb,a8=z(()=>{oa(),bk=te(Ie()),We(),He(),yk(),Wc(),vb={defaultState:{color:hs(.95,"#C4C4C4"),hoverColor:hs(.15,Xc.onColor)},withStaticOverride:{color:hs(.85,"#C4C4C4"),hoverColor:hs(.15,Xc.onColor)}},e8=se.div(Qj||(Qj=Q([`
  width: 16px;
  margin: 0 0px 0 2px;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;

  color: `,`;

  &:hover {
    color: `,`;
  }
`])),e=>e.hasStaticOverride?vb.withStaticOverride.color:vb.defaultState.color,e=>e.hasStaticOverride?vb.withStaticOverride.hoverColor:vb.defaultState.hoverColor),n8=se.div(t8||(t8=Q([`
  width: 5px;
  height: 5px;
  border-radius: 1px;
  transform: rotate(45deg);
  /* border: 1px solid currentColor; */
  background-color: currentColor;
`]))),i8=se.div(r8||(r8=Q([`
  width: 5px;
  height: 5px;
  background-color: currentColor;
  border-radius: 1px;
  transform: rotate(45deg);
`]))),o8=e=>{let{hasStaticOverride:n,obj:r,propConfig:a,pathToProp:u}=e;return bk.default.createElement(e8,{hasStaticOverride:n,onClick:()=>{be().transaction(({stateEditors:c})=>{for(let{path:f,conf:p}of lb(a,u)){if(fl(p))continue;let v=q(O({},r.address),{pathToProp:f});c.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(v,a)}})},title:"Sequence this prop"},n?bk.default.createElement(i8,{title:"The default value is overridden"}):bk.default.createElement(n8,{title:"This is the default value for this prop"}))},yb=o8});function bb(e){return JSON.stringify(OI(e))}function OI(e){return Js(e)?Object.keys(e).sort().reduce((n,r)=>(n[r]=OI(e[r]),n),{}):Array.isArray(e)?e.map(OI):e}var Tae=z(()=>{Xr()}),s8,_b,l8=z(()=>{s8="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",_b=(e=21)=>{let n="",r=e;for(;r--;)n+=s8[Math.random()*64|0];return n}});function u8(){return _b(10)}function Mae(){return _b(10)}function Pae(){return _b(10)}var wi,gu=z(()=>{Tae(),l8(),wi={forSheet(){return"sheet"},forSheetObject(e){return bb({o:e.address.objectKey})},forSheetObjectProp(e,n){return bb({o:e.address.objectKey,p:n})},forTrackKeyframe(e,n,r){return bb({o:e.address.objectKey,t:n,k:r})},forSheetObjectAggregateKeyframe(e,n){return wi.forCompoundPropAggregateKeyframe(e,[],n)},forSheetAggregateKeyframe(e,n){return bb({o:e.address.sheetId,pos:n})},forCompoundPropAggregateKeyframe(e,n,r){return bb({o:e.address.objectKey,p:n,pos:r})}}});function c8(e,n,r){if(!n||n.data.keyframes.length===0)return d8;let a=RI.get(n.data);if(a&&a[0]===r)return a[1];function u(f){if(!n)return;let p=n.data.keyframes[f];return p&&{kf:p,track:n,itemKey:wi.forTrackKeyframe(e,n.id,p.id)}}let c=(()=>{let f=n.data.keyframes.findIndex(v=>v.position>=r);if(f===-1)return{prev:u(n.data.keyframes.length-1)};let p=u(f);return p.kf.position===r?{prev:u(f-1),cur:p,next:u(f+1)}:{next:p,prev:u(f-1)}})();return RI.set(n.data,[r,c]),c}var RI,d8,f8=z(()=>{gu(),RI=new WeakMap,d8={}}),LI,h8=z(()=>{LI={}});function Cae(e,n,r){let a=(0,Oa.getPointerParts)(e).path;return Tn(()=>{if(!SI(r))return{type:"AllStatic",beingScrubbed:!1,contextMenuItems:[],controlIndicators:Ff.default.createElement(yb,{hasStaticOverride:!1,obj:n,pathToProp:a,propConfig:r})};let u=!!(0,Oa.val)($l(be().atomP.ephemeral.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].stateByObjectKey[n.address.objectKey].valuesBeingScrubbed,(0,Oa.getPointerParts)(e).path)),c=[],f={beingScrubbed:u,contextMenuItems:c,controlIndicators:Ff.default.createElement(Ff.default.Fragment,null)},p=(0,Oa.val)(n.template.getMapOfValidSequenceTracks_forStudio()),v=Kc(p,a),y=v!==void 0&&Object.keys(v).length!==0,k=[],M=(0,Oa.val)(n.template.getStaticButNotSequencedOverrides()),T=Kc(M!=null?M:LI,a)!==void 0;if(y)for(let E of lb(r,[])){if(fl(E.conf))continue;let A=Kc(v,E.path);typeof A!="string"?T=!0:k.push(A)}if((T||y)&&c.push({label:"Reset all to default",callback:()=>{be().transaction(({unset:E})=>{E(e)})}}),y&&c.push({label:"Make all static",callback:()=>{be().transaction(({stateEditors:E})=>{for(let{path:A,conf:C}of lb(r,[])){if(fl(C))continue;let R=q(O({},n.address),{pathToProp:[...a,...A]}),N=fb(e,A);E.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(q(O({},R),{value:n.getValueByPointer(N)}))}})}}),(!y||y&&T)&&c.push({label:"Sequence all",callback:()=>{be().transaction(({stateEditors:E})=>{for(let{path:A,conf:C}of lb(r,a)){if(fl(C))continue;let R=q(O({},n.address),{pathToProp:A});E.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(R,r)}})}}),y){let E=Oa.prism.memo("controlIndicators",()=>Ff.default.createElement(Aae,{pointerToProp:e,obj:n,possibleSequenceTrackIds:v,listOfDescendantTrackIds:k}),[v,k]);return q(O({},f),{type:"HasSequences",controlIndicators:E})}else return q(O({},f),{type:"AllStatic",controlIndicators:Ff.default.createElement(yb,{hasStaticOverride:T,obj:n,pathToProp:a,propConfig:r})})},[])}function Aae({pointerToProp:e,obj:n,possibleSequenceTrackIds:r,listOfDescendantTrackIds:a}){return Tn(()=>{let u=(0,Oa.getPointerParts)(e).path,c=(0,Oa.val)(n.sheet.getSequence().positionPrism),f=a.map(E=>({trackId:E,track:(0,Oa.val)(n.template.project.pointers.historic.sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[E])})).filter(({track:E})=>!!E).map(E=>q(O({},E),{nearbies:c8(n,{id:E.trackId,data:E.track,sheetObject:n},c)})),p=f.find(({nearbies:E})=>!!E.cur),v=f.every(({nearbies:E})=>!!E.cur),y=f.reduce((E,A)=>A.nearbies.prev&&(E===void 0||A.nearbies.prev.kf.position>E.kf.position)?A.nearbies.prev:E,void 0),k=f.reduce((E,A)=>A.nearbies.next&&(E===void 0||A.nearbies.next.kf.position<E.kf.position)?A.nearbies.next:E,void 0),M=()=>{v?be().transaction(E=>{E.unset(e)}):p?be().transaction(E=>{E.set(e,(0,Oa.val)(e))}):be().transaction(E=>{E.set(e,(0,Oa.val)(e))})},T={cur:p?{type:"on",itemKey:wi.forCompoundPropAggregateKeyframe(n,u,c),toggle:M}:{toggle:M,type:"off"},prev:y!==void 0?{position:y.kf.position,itemKey:wi.forCompoundPropAggregateKeyframe(n,u,y.kf.position),jump:()=>{n.sheet.getSequence().position=y.kf.position}}:void 0,next:k!==void 0?{position:k.kf.position,itemKey:wi.forCompoundPropAggregateKeyframe(n,u,k.kf.position),jump:()=>{n.sheet.getSequence().position=k.kf.position}}:void 0};return Ff.default.createElement(DI,O({},T))},[e,n,r,a])}var Oa,Ff,Iae=z(()=>{He(),hk(),on(),Oa=St,Zl(),Ff=te(Ie()),a8(),Wc(),gu(),pk(),yk(),f8(),h8()});function Dae(){let e=0,n=new g8.Atom({hasLock:!1});return{replaceLock(r,a){let u=e++,c=n.get();return c.hasLock&&c.cleanup(),n.set({hasLock:!0,lockId:u,cleanup:a,deepPath:Oae(p8(r))}),function(){let f=n.get();f.hasLock&&f.lockId===u&&(f.cleanup(),n.set({hasLock:!1}))}},getIsPropHighlightedD(r){let a=fb(n.pointer.deepPath,p8(r));return(0,v8.prism)(()=>{let u=(0,m8.val)(a);return u===!0?"self":u?"descendent":null})}}}function p8(e){return[e.projectId,e.sheetId,e.objectKey,...e.pathToProp]}function Oae(e){let n={};return el(n,e,!0),n}var m8,g8,v8,_k,zI=z(()=>{m8=St,g8=St,v8=St,pk(),vy(),_k=Dae()});function Rae(e,n){return JSON.stringify(e,n,2).replace(/^([\{\[])\n (\s+)/,"$1$2").replace(/(\n[ ]+[\{\[])\n\s+/g,"$1 ").replace(/\n\s*([\]\}])/g," $1")}var Lae=z(()=>{});function y8(e,n=!0){try{return typeof e=="string"?e:typeof e=="function"||e instanceof Error?e.toString():n?Rae(e):JSON.stringify(e)}catch{return(e==null?void 0:e.name)||String(e)}}var zae=z(()=>{Lae()});function Nae(e,n,r){e||(arguments.length>2?b8(n,r):b8(n))}function b8(e,n){let r=arguments.length>1,a=y8(typeof e=="function"?e():e),u=r?`
Instead found: `.concat(y8(n)):"";throw new E8("Invariant: ".concat(a).concat(u),n)}var _8,x8,w8,S8,E8,Fae=z(()=>{zae(),_8=/^\s*at.+node:internal.+/gm,x8=/^\s*(at|[^@]+@) (?:Object\.)?invariant.+/gm,w8=/^\s*(at|[^@]+@).+test\-helpers.+/gm,S8=/^\s*(at|[^@]+@).+(debounce|invariant|iif)\.[tj]s.*/gm,E8=class extends Error{constructor(e,n){var r;super(e),Pe(this,"found"),n!==void 0&&(this.found=n),this.stack=(r=this.stack)==null?void 0:r.replace(x8,"").replace(S8,"").replace(w8,"").replace(_8,"")}}});function Bae(e){return(0,xk.prism)(()=>{if(Array.isArray(e)){let n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r].getValue();return n}else{let n={};for(let r in e)n[r]=(0,xk.val)(e[r]);return n}})}function NI(e){let n=$m.default.memo($m.default.forwardRef(function(r,a){let u=[],c={},f={ref:a};for(let k in r){let M=r[k];(0,xk.isPrism)(M)?(u.push(M),c[k]=M):f[k]=M}let p=(0,$m.useRef)(u.length);Nae(p.current===u.length,"expect same number of observable props on every invocation of deriver wrapped component.",{initial:p.current,count:u.length});let v=(0,$m.useMemo)(()=>Bae(c),u),y=Sf(v);return y&&$m.default.createElement(e,O(O({},f),y))}));return n.displayName="deriver(".concat(e.displayName,")"),n}var xk,$m,k8=z(()=>{xk=St,on(),$m=te(Ie()),Fae()});function jae(e,n,r){return(0,ys.prism)(()=>{var a;let u=(0,ys.getPointerParts)(e).path,c=n.getValueByPointer(e),f=ys.prism.memo("editPropValue",()=>{let A=null;return{temporarilySetValue(C){A||(A=be().scrub()),A.capture(R=>{R.set(e,C)})},discardTemporaryValue(){A&&(A.discard(),A=null)},permanentlySetValue(C){A?(A.capture(R=>{R.set(e,C)}),A.commit(),A=null):be().transaction(R=>{R.set(e,C)})}}},[]),p={createAsset:A=>n.sheet.project.assetStorage.createAsset(A),getAssetUrl:A=>A.id?n.sheet.project.assetStorage.getAssetUrl(A.id):void 0},v=(0,ys.val)($l(be().atomP.ephemeral.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].stateByObjectKey[n.address.objectKey].valuesBeingScrubbed,(0,ys.getPointerParts)(e).path))===!0,y=[],k=q(O(O({},f),p),{value:c,beingScrubbed:v,contextMenuItems:y,controlIndicators:Zm.default.createElement(Zm.default.Fragment,null)}),M=bae(r);if(M){let A=(0,ys.val)(n.template.getMapOfValidSequenceTracks_forStudio()),C=Kc(A,u);if(typeof C=="string"){y.push({label:"Make static",callback:()=>{be().transaction(({stateEditors:re})=>{let ye=q(O({},n.address),{pathToProp:u});re.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsStatic(q(O({},ye),{value:n.getValueByPointer(e)}))})}});let R=C,N=ys.prism.sub("lcr",()=>{let re=(0,ys.val)(n.template.project.pointers.historic.sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[R]),ye=(0,ys.val)(n.sheet.getSequence().positionPrism);return c8(n,re&&{data:re,id:R,sheetObject:n},ye)},[R]),j;k.beingScrubbed?j="Sequenced_OnKeyframe_BeingScrubbed":N.cur?j="Sequenced_OnKeyframe":((a=N.prev)==null?void 0:a.kf.connectedRight)===!0?j="Sequenced_BeingInterpolated":j="Sequened_NotBeingInterpolated";let G=()=>{N.cur?be().transaction(re=>{re.unset(e)}):be().transaction(re=>{re.set(e,k.value)})},J={cur:N.cur?{type:"on",itemKey:N.cur.itemKey,toggle:G}:{type:"off",toggle:G},prev:N.prev!==void 0?{itemKey:N.prev.itemKey,position:N.prev.kf.position,jump:()=>{n.sheet.getSequence().position=N.prev.kf.position}}:void 0,next:N.next!==void 0?{itemKey:N.next.itemKey,position:N.next.kf.position,jump:()=>{n.sheet.getSequence().position=N.next.kf.position}}:void 0},Y=Zm.default.createElement(DI,O({},J));return q(O({},k),{type:"Sequenced",shade:j,nearbyKeyframes:N,controlIndicators:Y})}}let T=(0,ys.val)(n.template.getStaticValues()),E=Kc(T,u);return typeof E!="undefined"&&y.push({label:"Reset to default",callback:()=>{be().transaction(({unset:A})=>{A(e)})}}),M&&y.push({label:"Sequence",callback:()=>{be().transaction(({stateEditors:A})=>{let C=q(O({},n.address),{pathToProp:u});A.coreByProject.historic.sheetsById.sequence.setPrimitivePropAsSequenced(C,r)})}}),typeof E!="undefined"?q(O({},k),{type:"Static",shade:k.beingScrubbed?"Static_BeingScrubbed":"Static",controlIndicators:Zm.default.createElement(yb,{hasStaticOverride:!0,obj:n,pathToProp:u,propConfig:r})}):q(O({},k),{type:"Default",shade:"Default",controlIndicators:Zm.default.createElement(yb,{hasStaticOverride:!0,obj:n,pathToProp:u,propConfig:r})})})}function Uae(e,n,r){if(wk.has(e))return wk.get(e);{let a=jae(e,n,r);return wk.set(e,a),a}}function FI(e,n,r){let a=Uae(e,n,r);return Sf(a)}var Zm,ys,wk,BI=z(()=>{Zl(),Zm=te(Ie()),ys=St,He(),hk(),on(),Wc(),a8(),f8(),yk(),wk=new WeakMap});function Vae({propConfig:e,pointerToProp:n,obj:r,SimpleEditorComponent:a}){let u=FI(n,r,e);return Ui.default.createElement(qA,{editingTools:u,propConfig:e,value:u.value})}function Hae({pointerToProp:e,obj:n,propConfig:r,visualIndentation:a}){var u;let c=(u=r.label)!=null?u:Jl((0,xb.getPointerParts)(e).path),f=Object.entries(r.props),p=f.filter(([G,J])=>fl(J)),v=f.filter(([G,J])=>!fl(J)),[y,k]=Xn(null),M=Cae(e,n,r),[T]=wo(k,{menuItems:M.contextMenuItems}),E=p.length>0,A=(0,Ui.useMemo)(()=>_k.getIsPropHighlightedD(q(O({},n.address),{pathToProp:(0,xb.getPointerParts)(e).path})),[e]),C="".concat(n.address.projectId,",").concat(n.address.sheetId,",").concat(n.address.sheetInstanceId,",").concat(n.address.objectKey,",").concat((0,xb.getPointerParts)(e).path.join()),R=U8(r);(0,Ui.useLayoutEffect)(()=>{Sk.has(C)||Sk.set(C,new xb.Atom(R))},[C,r]);let N=Sk.get(C),j=Tn(()=>N?(0,T8.val)(N.pointer):R,[N]);return Ui.default.createElement(P8,null,T,Ui.default.createElement(jI,{style:{"--depth":a-1}},Ui.default.createElement(I8,{isVectorProp:R},Ui.default.createElement(O8,null,M.controlIndicators),Ui.default.createElement(L8,{isHighlighted:A,ref:y},Ui.default.createElement("span",null,c||"Props")),Ui.default.createElement(N8,{isCollapsed:j,isVector:R,onClick:()=>{N==null||N.set(!N.get())}},Ui.default.createElement(KF,null))),R&&j&&Ui.default.createElement(H8,null,[...f].map(([G,J])=>Ui.default.createElement(Vae,{key:"prop-"+G,propConfig:J,pointerToProp:e[G],obj:n})))),!j&&Ui.default.createElement(j8,{style:{"--depth":a},depth:a,lastSubIsComposite:E},[...v,...p].map(([G,J])=>Ui.default.createElement(VI,{key:"prop-"+G,propConfig:J,pointerToProp:e[G],obj:n,visualIndentation:a+1}))))}var xb,Ui,T8,M8,P8,C8,jI,A8,I8,D8,O8,R8,L8,z8,N8,F8,B8,j8,U8,V8,H8,G8,Sk,Gae=z(()=>{Wc(),xb=St,vf(),oa(),Ui=te(Ie()),We(),hj(),Lf(),nr(),tr(),iU(),So(),Iae(),zI(),k8(),NF(),BI(),on(),T8=St,Wm(),sk(),P8=se.div(M8||(M8=Q([`
  --step: 15px;
  --left-pad: 15px;
  `,`;
  --right-width: 60%;
`])),Qn),jI=se.div(C8||(C8=Q([`
  height: 30px;
  display: flex;
  align-items: stretch;
  position: relative;
`]))),I8=se.div(A8||(A8=Q([`
  padding-left: `,`;
  display: flex;
  align-items: center;
  overflow: hidden;
  `,`;
`])),EI,({isVectorProp:e})=>e?"width: calc(100% - var(--right-width))":""),O8=se.div(D8||(D8=Q([`
  flexshrink: 0;
`]))),L8=NI(se.div(R8||(R8=Q([`
  margin-left: 4px;
  cursor: default;
  height: 100%;
  display: flex;
  align-items: center;
  gap: 4px;
  user-select: none;
  &:hover {
    color: white;
  }
  overflow: hidden;

  `,`;
`])),()=>qc)),N8=se.span(z8||(z8=Q([`
  width: 28px;
  height: 28px;
  font-size: 9px;
  display: flex;
  align-items: center;
  justify-content: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  visibility: `,`;

  `,`:hover & {
    visibility: visible;
  }

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),e=>e.isCollapsed?0:90,e=>!e.isVector&&e.isCollapsed||e.isVector&&!e.isCollapsed?"visible":"hidden",jI,e=>e.isCollapsed?15:75),F8=hs(.05,"#282b2f"),j8=se.div(B8||(B8=Q([`
  /* background: `,`; */
  /* padding: `,` 0; */
`])),({depth:e})=>jy(e*.03,F8),e=>e.lastSubIsComposite?0:"4px"),U8=sb(e=>{let n=Object.entries(e.props);return n.length<=3&&n.every(([r,a])=>a.type==="number"&&["x","y","z"].includes(r))}),H8=se.div(V8||(V8=Q([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`]))),G8=Ui.default.memo(Hae),Sk=new Map});function Wae({isHighlighted:e}){return e==="self"?"#1857a4":e==="descendent"?"#0a2f5c":"initial"}var qae=z(()=>{});function Kae({propConfig:e,pointerToProp:n,editingTools:r,children:a,isPropHighlightedD:u}){var c;let f=(c=e.label)!=null?c:Jl((0,UI.getPointerParts)(n).path),[p,v]=Xn(null),[y]=wo(v,{menuItems:r.contextMenuItems});return Ym.default.createElement(q8,{isHighlighted:u},y,Ym.default.createElement(X8,null,Ym.default.createElement(J8,null,r.controlIndicators),Ym.default.createElement(Z8,{isHighlighted:u,ref:p,title:["obj","props",...(0,UI.getPointerParts)(n).path].join(".")},f)),Ym.default.createElement(eU,null,a))}var UI,Ym,W8,q8,K8,X8,$8,Z8,Y8,J8,Q8,eU,Xae=z(()=>{UI=St,So(),tr(),Xr(),Ym=te(Ie()),We(),nr(),Lf(),k8(),hj(),qae(),q8=NI(se.div(W8||(W8=Q([`
  display: flex;
  height: 30px;
  justify-content: flex-start;
  align-items: stretch;
  // We cannot calculate both the container (details panel) width and the descendant
  // (this) width dynamically. This leads to the container width being calculated
  // without this percentage being taken into consideration leads to horizontal
  // clipping/scrolling--the same way as if we explicitly fixed either the container
  // width, or the descendant width.
  // The correct solution for tabulated UIs with dynamic container widths is to use
  // CSS grid. For now I fixed this issue by just giving a great enough width
  // to the details panel so most things don't break.
  --right-width: 60%;
  position: relative;
  `,`;

  /* background-color: `,`; */
`])),Qn,Wae)),X8=se.div(K8||(K8=Q([`
  box-sizing: border-box;
  padding-left: `,`;
  padding-right: 4px;
  display: flex;
  flex-direction: row;
  justify-content: flex-start;
  align-items: stretch;
  gap: 4px;
  flex-grow: 0;
  flex-shrink: 0;
  width: calc(100% - var(--right-width));
`])),EI),Z8=NI(se.div($8||($8=Q([`
  text-align: left;
  flex: 1 0;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  display: flex;
  align-items: center;
  user-select: none;
  cursor: default;

  `,`;
  &:hover {
    color: white;
  }
`])),qc)),J8=se.div(Y8||(Y8=Q([`
  flex-basis: 8px;
  flex: 0 0;
  display: flex;
  align-items: center;
`]))),eU=se.div(Q8||(Q8=Q([`
  display: flex;
  align-items: center;
  justify-content: stretch;
  padding: 0 8px 0 2px;
  box-sizing: border-box;
  height: 100%;
  width: var(--right-width);
  flex-shrink: 0;
  flex-grow: 0;
`])))});function $ae({propConfig:e,pointerToProp:n,obj:r,SimpleEditorComponent:a}){let u=FI(n,r,e),c=(0,wb.useMemo)(()=>_k.getIsPropHighlightedD(q(O({},r.address),{pathToProp:(0,tU.getPointerParts)(n).path})),[n]);return wb.default.createElement(Kae,{editingTools:u,propConfig:e,pointerToProp:n,isPropHighlightedD:c},wb.default.createElement(a,{editingTools:u,propConfig:e,value:u.value}))}var wb,tU,nU,Zae=z(()=>{wb=te(Ie()),BI(),Xae(),tU=St,zI(),nU=wb.default.memo($ae)}),Sb,rU,VI,iU=z(()=>{Sb=te(Ie()),fj(),Gae(),Zae(),rU=({propConfig:e,visualIndentation:n,pointerToProp:r,obj:a})=>{if(e.type==="compound")return Sb.default.createElement(G8,{obj:a,visualIndentation:n,pointerToProp:r,propConfig:e});if(e.type==="enum")return Sb.default.createElement(Sb.default.Fragment,null);{let u=wI[e.type];return Sb.default.createElement(nU,{SimpleEditorComponent:u,obj:a,visualIndentation:n,pointerToProp:r,propConfig:e})}},VI=rU});function oU(e){return Ek.has(e)||Ek.set(e,(aU++).toString()),Ek.get(e)}var Ek,aU,sU=z(()=>{Ek=new WeakMap,aU=0}),Jm,lU,uU,cU,dU,fU,hU,Yae=z(()=>{Jm=te(Ie()),iU(),on(),sU(),We(),uU=se.div(lU||(lU=Q([`
  display: flex;
  flex-direction: column;
  gap: 4px;
  padding: 8px;
`]))),dU=se.button(cU||(cU=Q([`
  display: flex;
  align-items: center;
  justify-content: center;
  outline: none;
  border-radius: 2px;

  color: #a8a8a9;
  background: rgba(255, 255, 255, 0.1);

  border: none;
  height: 28px;

  &:hover {
    background: rgba(255, 255, 255, 0.15);
  }

  &:active {
    background: rgba(255, 255, 255, 0.2);
  }
`]))),fU=({objects:e})=>{let n=e[0],r=Cn(n.template.configPointer),a=Cn(n.template._temp_actionsPointer);return Jm.default.createElement(Jm.default.Fragment,null,Jm.default.createElement(VI,{key:oU(n),obj:n,pointerToProp:n.propsP,propConfig:r,visualIndentation:1}),Jm.default.createElement(uU,null,a&&Object.entries(a).map(([u,c])=>Jm.default.createElement(dU,{key:u,onClick:()=>{c(n.publicApi)}},u))))},hU=fU}),pU,mU,kk,gU=z(()=>{We(),mU=se.button(pU||(pU=Q([`
  text-align: center;
  padding: 8px;
  border-radius: 2px;
  border: 1px solid #627b7b87;
  background-color: #4b787d3d;
  color: #eaeaea;
  font-weight: 400;
  display: block;
  appearance: none;
  flex-grow: 1;
  cursor: `,`;
  opacity: `,`;

  &:hover {
    background-color: #7dc1c878;
    border-color: #9ebcbf;
  }
`])),e=>e.disabled?"none":"pointer",e=>e.disabled?.4:1),kk=mU}),Jae=z(()=>{}),vU,Qae=z(()=>{Jae(),vU=(e=21)=>{let n="",r=crypto.getRandomValues(new Uint8Array(e));for(;e--;){let a=r[e]&63;a<36?n+=a.toString(36):a<62?n+=(a-26).toString(36).toUpperCase():a<63?n+="_":n+="-"}return n}});function yU(){return vU(16)}var bU=z(()=>{Qae()}),_U,vu,HI,xU,wU,SU,EU,kU=z(()=>{_U=St,tr(),vu=te(Ie()),HI=(0,vu.createContext)(null),xU=0,wU=()=>{let e=(0,vu.useMemo)(()=>xU++,[]),{cur:n,set:r}=(0,vu.useContext)(HI),[a,u]=Xn(!1),c=(0,vu.useCallback)((f,p)=>{r(f?e:-1,p)},[]);return(0,vu.useEffect)(()=>n.onStale(()=>{let f=n.getValue()===e;a.current!==f&&(a.current=f)}),[n,e]),[u,c]},SU=({children:e})=>{let n=(0,vu.useMemo)(()=>new _U.Atom(-1),[]),r=n.prism,a=(0,vu.useMemo)(()=>{let u;return(c,f)=>{let p=u!==void 0;u!==void 0&&(clearTimeout(u),u=void 0),f===0||p?n.set(c):u=setTimeout(()=>{n.set(c),u=void 0},f)}},[]);return vu.default.createElement(HI.Provider,{value:{cur:r,set:a}},e)},EU=SU});function Qm(e,n){let r=e.enabled!==!1,[a,u]=wU(),[c,f]=Xn(null);(0,MU.useEffect)(()=>{if(!r)return;let v=c.current;if(!v)return;let y=()=>{var M;return u(!0,(M=e.enterDelay)!=null?M:400)},k=()=>{var M;return u(!1,(M=e.exitDelay)!=null?M:200)};return v.addEventListener("mouseenter",y),v.addEventListener("mouseleave",k),()=>{v.removeEventListener("mouseenter",y),v.removeEventListener("mouseleave",k)}},[c,r,e.enterDelay,e.exitDelay]);let p=(0,TU.useContext)(Lm);return[r&&a&&f?(0,PU.createPortal)(Tk.default.createElement(gI,{children:n,target:f,onClickOutside:ps,verticalPlacement:e.verticalPlacement,verticalGap:e.verticalGap}),p):Tk.default.createElement(Tk.default.Fragment,null),c,a]}var TU,MU,Tk,PU,Eb=z(()=>{tr(),TU=te(Ie()),MU=te(Ie()),Tk=te(Ie()),pB(),PU=te(Ma()),kU(),Df(),Fm()}),CU,AU,eg,Mk=z(()=>{We(),cl(),AU=se(ul)(CU||(CU=Q([`
  padding: 1em;
  max-width: 240px;
  pointer-events: none !important;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: #45464d;
`]))),eg=AU}),hl,IU,DU,OU,RU,LU,zU,NU,FU,BU,ese=z(()=>{on(),He(),hl=te(Ie()),We(),bU(),Eb(),Mk(),gU(),DU=se.div(IU||(IU=Q([`
  padding: 8px 10px;
  position: relative;
  background-color: #6d232352;
  &:before {
    position: absolute;
    content: ' ';
    display: block;
    left: 0;
    top: 0;
    bottom: 0;
    width: 2px;
    background-color: #ff000070;
  }
`]))),RU=se.div(OU||(OU=Q([`
  margin-bottom: 1em;
  & a {
    color: inherit;
  }
`]))),zU=se.div(LU||(LU=Q([`
  display: flex;
  gap: 8px;
`]))),NU=({projectId:e})=>{let n=Cn(be().atomP.ephemeral.coreByProject[e].loadingState);return n&&n.type==="browserStateIsNotBasedOnDiskState"?hl.default.createElement(FU,{loadingState:n,projectId:e}):null},FU=({projectId:e,loadingState:n})=>{let r=()=>{be().transaction(({drafts:v,stateEditors:y})=>{y.coreByProject.historic.revisionHistory.add({projectId:e,revision:n.onDiskState.revisionHistory[0]}),y.coreByProject.historic.revisionHistory.add({projectId:e,revision:yU()}),v.ephemeral.coreByProject[e].loadingState={type:"loaded"}})},a=()=>{be().transaction(({drafts:v})=>{v.historic.coreByProject[e]=n.onDiskState,v.ephemeral.coreByProject[e].loadingState={type:"loaded"}})},[u,c]=Qm({},()=>hl.default.createElement(eg,null,"The browser's state will override the disk state.")),[f,p]=Qm({},()=>hl.default.createElement(eg,null,"The disk's state will override the browser's state."));return hl.default.createElement(DU,null,hl.default.createElement(RU,null,"Browser state is not based on disk state."," ",hl.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Learn more.")),hl.default.createElement(zU,null,u,hl.default.createElement(kk,{onClick:r,ref:c},"Use browser's state"),f,hl.default.createElement(kk,{onClick:a,ref:p},"Use disk state")))},BU=NU}),tse=le((e,n)=>{(function(r){typeof e=="object"&&typeof n!="undefined"?n.exports=r():(typeof window!="undefined"?window:typeof qr!="undefined"?qr:typeof self!="undefined"?self:this).JSZip=r()})(function(){return function r(a,u,c){function f(y,k){if(!u[y]){if(!a[y]){var M=typeof HM=="function"&&HM;if(!k&&M)return M(y,!0);if(p)return p(y,!0);var T=new Error("Cannot find module '"+y+"'");throw T.code="MODULE_NOT_FOUND",T}var E=u[y]={exports:{}};a[y][0].call(E.exports,function(A){var C=a[y][1][A];return f(C||A)},E,E.exports,r,a,u,c)}return u[y].exports}for(var p=typeof HM=="function"&&HM,v=0;v<c.length;v++)f(c[v]);return f}({1:[function(r,a,u){var c=r("./utils"),f=r("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";u.encode=function(v){for(var y,k,M,T,E,A,C,R=[],N=0,j=v.length,G=j,J=c.getTypeOf(v)!=="string";N<v.length;)G=j-N,M=J?(y=v[N++],k=N<j?v[N++]:0,N<j?v[N++]:0):(y=v.charCodeAt(N++),k=N<j?v.charCodeAt(N++):0,N<j?v.charCodeAt(N++):0),T=y>>2,E=(3&y)<<4|k>>4,A=1<G?(15&k)<<2|M>>6:64,C=2<G?63&M:64,R.push(p.charAt(T)+p.charAt(E)+p.charAt(A)+p.charAt(C));return R.join("")},u.decode=function(v){var y,k,M,T,E,A,C=0,R=0,N="data:";if(v.substr(0,N.length)===N)throw new Error("Invalid base64 input, it looks like a data url.");var j,G=3*(v=v.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(v.charAt(v.length-1)===p.charAt(64)&&G--,v.charAt(v.length-2)===p.charAt(64)&&G--,G%1!=0)throw new Error("Invalid base64 input, bad content length.");for(j=f.uint8array?new Uint8Array(0|G):new Array(0|G);C<v.length;)y=p.indexOf(v.charAt(C++))<<2|(T=p.indexOf(v.charAt(C++)))>>4,k=(15&T)<<4|(E=p.indexOf(v.charAt(C++)))>>2,M=(3&E)<<6|(A=p.indexOf(v.charAt(C++))),j[R++]=y,E!==64&&(j[R++]=k),A!==64&&(j[R++]=M);return j}},{"./support":30,"./utils":32}],2:[function(r,a,u){var c=r("./external"),f=r("./stream/DataWorker"),p=r("./stream/Crc32Probe"),v=r("./stream/DataLengthProbe");function y(k,M,T,E,A){this.compressedSize=k,this.uncompressedSize=M,this.crc32=T,this.compression=E,this.compressedContent=A}y.prototype={getContentWorker:function(){var k=new f(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new v("data_length")),M=this;return k.on("end",function(){if(this.streamInfo.data_length!==M.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),k},getCompressedWorker:function(){return new f(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},y.createWorkerFrom=function(k,M,T){return k.pipe(new p).pipe(new v("uncompressedSize")).pipe(M.compressWorker(T)).pipe(new v("compressedSize")).withStreamInfo("compression",M)},a.exports=y},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(r,a,u){var c=r("./stream/GenericWorker");u.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},u.DEFLATE=r("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(r,a,u){var c=r("./utils"),f=function(){for(var p,v=[],y=0;y<256;y++){p=y;for(var k=0;k<8;k++)p=1&p?3988292384^p>>>1:p>>>1;v[y]=p}return v}();a.exports=function(p,v){return p!==void 0&&p.length?c.getTypeOf(p)!=="string"?function(y,k,M,T){var E=f,A=T+M;y^=-1;for(var C=T;C<A;C++)y=y>>>8^E[255&(y^k[C])];return-1^y}(0|v,p,p.length,0):function(y,k,M,T){var E=f,A=T+M;y^=-1;for(var C=T;C<A;C++)y=y>>>8^E[255&(y^k.charCodeAt(C))];return-1^y}(0|v,p,p.length,0):0}},{"./utils":32}],5:[function(r,a,u){u.base64=!1,u.binary=!1,u.dir=!1,u.createFolders=!0,u.date=null,u.compression=null,u.compressionOptions=null,u.comment=null,u.unixPermissions=null,u.dosPermissions=null},{}],6:[function(r,a,u){var c=null;c=typeof Promise!="undefined"?Promise:r("lie"),a.exports={Promise:c}},{lie:37}],7:[function(r,a,u){var c=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Uint32Array!="undefined",f=r("pako"),p=r("./utils"),v=r("./stream/GenericWorker"),y=c?"uint8array":"array";function k(M,T){v.call(this,"FlateWorker/"+M),this._pako=null,this._pakoAction=M,this._pakoOptions=T,this.meta={}}u.magic="\b\0",p.inherits(k,v),k.prototype.processChunk=function(M){this.meta=M.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(y,M.data),!1)},k.prototype.flush=function(){v.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},k.prototype.cleanUp=function(){v.prototype.cleanUp.call(this),this._pako=null},k.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var M=this;this._pako.onData=function(T){M.push({data:T,meta:M.meta})}},u.compressWorker=function(M){return new k("Deflate",M)},u.uncompressWorker=function(){return new k("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(r,a,u){function c(E,A){var C,R="";for(C=0;C<A;C++)R+=String.fromCharCode(255&E),E>>>=8;return R}function f(E,A,C,R,N,j){var G,J,Y=E.file,re=E.compression,ye=j!==y.utf8encode,ke=p.transformTo("string",j(Y.name)),ce=p.transformTo("string",y.utf8encode(Y.name)),Ce=Y.comment,Ge=p.transformTo("string",j(Ce)),oe=p.transformTo("string",y.utf8encode(Ce)),Ae=ce.length!==Y.name.length,W=oe.length!==Ce.length,Le="",kt="",Te="",Se=Y.dir,Ne=Y.date,pt={crc32:0,compressedSize:0,uncompressedSize:0};A&&!C||(pt.crc32=E.crc32,pt.compressedSize=E.compressedSize,pt.uncompressedSize=E.uncompressedSize);var ae=0;A&&(ae|=8),ye||!Ae&&!W||(ae|=2048);var de=0,Ke=0;Se&&(de|=16),N==="UNIX"?(Ke=798,de|=function(nt,Fe){var Gt=nt;return nt||(Gt=Fe?16893:33204),(65535&Gt)<<16}(Y.unixPermissions,Se)):(Ke=20,de|=function(nt){return 63&(nt||0)}(Y.dosPermissions)),G=Ne.getUTCHours(),G<<=6,G|=Ne.getUTCMinutes(),G<<=5,G|=Ne.getUTCSeconds()/2,J=Ne.getUTCFullYear()-1980,J<<=4,J|=Ne.getUTCMonth()+1,J<<=5,J|=Ne.getUTCDate(),Ae&&(kt=c(1,1)+c(k(ke),4)+ce,Le+="up"+c(kt.length,2)+kt),W&&(Te=c(1,1)+c(k(Ge),4)+oe,Le+="uc"+c(Te.length,2)+Te);var Ze="";return Ze+=`
\0`,Ze+=c(ae,2),Ze+=re.magic,Ze+=c(G,2),Ze+=c(J,2),Ze+=c(pt.crc32,4),Ze+=c(pt.compressedSize,4),Ze+=c(pt.uncompressedSize,4),Ze+=c(ke.length,2),Ze+=c(Le.length,2),{fileRecord:M.LOCAL_FILE_HEADER+Ze+ke+Le,dirRecord:M.CENTRAL_FILE_HEADER+c(Ke,2)+Ze+c(Ge.length,2)+"\0\0\0\0"+c(de,4)+c(R,4)+ke+Le+Ge}}var p=r("../utils"),v=r("../stream/GenericWorker"),y=r("../utf8"),k=r("../crc32"),M=r("../signature");function T(E,A,C,R){v.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=A,this.zipPlatform=C,this.encodeFileName=R,this.streamFiles=E,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(T,v),T.prototype.push=function(E){var A=E.meta.percent||0,C=this.entriesCount,R=this._sources.length;this.accumulate?this.contentBuffer.push(E):(this.bytesWritten+=E.data.length,v.prototype.push.call(this,{data:E.data,meta:{currentFile:this.currentFile,percent:C?(A+100*(C-R-1))/C:100}}))},T.prototype.openedSource=function(E){this.currentSourceOffset=this.bytesWritten,this.currentFile=E.file.name;var A=this.streamFiles&&!E.file.dir;if(A){var C=f(E,A,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:C.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(E){this.accumulate=!1;var A=this.streamFiles&&!E.file.dir,C=f(E,A,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(C.dirRecord),A)this.push({data:function(R){return M.DATA_DESCRIPTOR+c(R.crc32,4)+c(R.compressedSize,4)+c(R.uncompressedSize,4)}(E),meta:{percent:100}});else for(this.push({data:C.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var E=this.bytesWritten,A=0;A<this.dirRecords.length;A++)this.push({data:this.dirRecords[A],meta:{percent:100}});var C=this.bytesWritten-E,R=function(N,j,G,J,Y){var re=p.transformTo("string",Y(J));return M.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(N,2)+c(N,2)+c(j,4)+c(G,4)+c(re.length,2)+re}(this.dirRecords.length,C,E,this.zipComment,this.encodeFileName);this.push({data:R,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(E){this._sources.push(E);var A=this;return E.on("data",function(C){A.processChunk(C)}),E.on("end",function(){A.closedSource(A.previous.streamInfo),A._sources.length?A.prepareNextSource():A.end()}),E.on("error",function(C){A.error(C)}),this},T.prototype.resume=function(){return!!v.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(E){var A=this._sources;if(!v.prototype.error.call(this,E))return!1;for(var C=0;C<A.length;C++)try{A[C].error(E)}catch{}return!0},T.prototype.lock=function(){v.prototype.lock.call(this);for(var E=this._sources,A=0;A<E.length;A++)E[A].lock()},a.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(r,a,u){var c=r("../compressions"),f=r("./ZipFileWorker");u.generateWorker=function(p,v,y){var k=new f(v.streamFiles,y,v.platform,v.encodeFileName),M=0;try{p.forEach(function(T,E){M++;var A=function(j,G){var J=j||G,Y=c[J];if(!Y)throw new Error(J+" is not a valid compression method !");return Y}(E.options.compression,v.compression),C=E.options.compressionOptions||v.compressionOptions||{},R=E.dir,N=E.date;E._compressWorker(A,C).withStreamInfo("file",{name:T,dir:R,date:N,comment:E.comment||"",unixPermissions:E.unixPermissions,dosPermissions:E.dosPermissions}).pipe(k)}),k.entriesCount=M}catch(T){k.error(T)}return k}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(r,a,u){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new c;for(var p in this)typeof this[p]!="function"&&(f[p]=this[p]);return f}}(c.prototype=r("./object")).loadAsync=r("./load"),c.support=r("./support"),c.defaults=r("./defaults"),c.version="3.10.1",c.loadAsync=function(f,p){return new c().loadAsync(f,p)},c.external=r("./external"),a.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(r,a,u){var c=r("./utils"),f=r("./external"),p=r("./utf8"),v=r("./zipEntries"),y=r("./stream/Crc32Probe"),k=r("./nodejsUtils");function M(T){return new f.Promise(function(E,A){var C=T.decompressed.getContentWorker().pipe(new y);C.on("error",function(R){A(R)}).on("end",function(){C.streamInfo.crc32!==T.decompressed.crc32?A(new Error("Corrupted zip : CRC32 mismatch")):E()}).resume()})}a.exports=function(T,E){var A=this;return E=c.extend(E||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),k.isNode&&k.isStream(T)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",T,!0,E.optimizedBinaryString,E.base64).then(function(C){var R=new v(E);return R.load(C),R}).then(function(C){var R=[f.Promise.resolve(C)],N=C.files;if(E.checkCRC32)for(var j=0;j<N.length;j++)R.push(M(N[j]));return f.Promise.all(R)}).then(function(C){for(var R=C.shift(),N=R.files,j=0;j<N.length;j++){var G=N[j],J=G.fileNameStr,Y=c.resolve(G.fileNameStr);A.file(Y,G.decompressed,{binary:!0,optimizedBinaryString:!0,date:G.date,dir:G.dir,comment:G.fileCommentStr.length?G.fileCommentStr:null,unixPermissions:G.unixPermissions,dosPermissions:G.dosPermissions,createFolders:E.createFolders}),G.dir||(A.file(Y).unsafeOriginalName=J)}return R.zipComment.length&&(A.comment=R.zipComment),A})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(r,a,u){var c=r("../utils"),f=r("../stream/GenericWorker");function p(v,y){f.call(this,"Nodejs stream input adapter for "+v),this._upstreamEnded=!1,this._bindStream(y)}c.inherits(p,f),p.prototype._bindStream=function(v){var y=this;(this._stream=v).pause(),v.on("data",function(k){y.push({data:k,meta:{percent:0}})}).on("error",function(k){y.isPaused?this.generatedError=k:y.error(k)}).on("end",function(){y.isPaused?y._upstreamEnded=!0:y.end()})},p.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},a.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(r,a,u){var c=r("readable-stream").Readable;function f(p,v,y){c.call(this,v),this._helper=p;var k=this;p.on("data",function(M,T){k.push(M)||k._helper.pause(),y&&y(T)}).on("error",function(M){k.emit("error",M)}).on("end",function(){k.push(null)})}r("../utils").inherits(f,c),f.prototype._read=function(){this._helper.resume()},a.exports=f},{"../utils":32,"readable-stream":16}],14:[function(r,a,u){a.exports={isNode:typeof Buffer!="undefined",newBufferFrom:function(c,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,f);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,f)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var f=new Buffer(c);return f.fill(0),f},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(r,a,u){function c(Y,re,ye){var ke,ce=p.getTypeOf(re),Ce=p.extend(ye||{},k);Ce.date=Ce.date||new Date,Ce.compression!==null&&(Ce.compression=Ce.compression.toUpperCase()),typeof Ce.unixPermissions=="string"&&(Ce.unixPermissions=parseInt(Ce.unixPermissions,8)),Ce.unixPermissions&&16384&Ce.unixPermissions&&(Ce.dir=!0),Ce.dosPermissions&&16&Ce.dosPermissions&&(Ce.dir=!0),Ce.dir&&(Y=N(Y)),Ce.createFolders&&(ke=R(Y))&&j.call(this,ke,!0);var Ge=ce==="string"&&Ce.binary===!1&&Ce.base64===!1;ye&&ye.binary!==void 0||(Ce.binary=!Ge),(re instanceof M&&re.uncompressedSize===0||Ce.dir||!re||re.length===0)&&(Ce.base64=!1,Ce.binary=!0,re="",Ce.compression="STORE",ce="string");var oe=null;oe=re instanceof M||re instanceof v?re:A.isNode&&A.isStream(re)?new C(Y,re):p.prepareContent(Y,re,Ce.binary,Ce.optimizedBinaryString,Ce.base64);var Ae=new T(Y,oe,Ce);this.files[Y]=Ae}var f=r("./utf8"),p=r("./utils"),v=r("./stream/GenericWorker"),y=r("./stream/StreamHelper"),k=r("./defaults"),M=r("./compressedObject"),T=r("./zipObject"),E=r("./generate"),A=r("./nodejsUtils"),C=r("./nodejs/NodejsStreamInputAdapter"),R=function(Y){Y.slice(-1)==="/"&&(Y=Y.substring(0,Y.length-1));var re=Y.lastIndexOf("/");return 0<re?Y.substring(0,re):""},N=function(Y){return Y.slice(-1)!=="/"&&(Y+="/"),Y},j=function(Y,re){return re=re!==void 0?re:k.createFolders,Y=N(Y),this.files[Y]||c.call(this,Y,null,{dir:!0,createFolders:re}),this.files[Y]};function G(Y){return Object.prototype.toString.call(Y)==="[object RegExp]"}var J={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(Y){var re,ye,ke;for(re in this.files)ke=this.files[re],(ye=re.slice(this.root.length,re.length))&&re.slice(0,this.root.length)===this.root&&Y(ye,ke)},filter:function(Y){var re=[];return this.forEach(function(ye,ke){Y(ye,ke)&&re.push(ke)}),re},file:function(Y,re,ye){if(arguments.length!==1)return Y=this.root+Y,c.call(this,Y,re,ye),this;if(G(Y)){var ke=Y;return this.filter(function(Ce,Ge){return!Ge.dir&&ke.test(Ce)})}var ce=this.files[this.root+Y];return ce&&!ce.dir?ce:null},folder:function(Y){if(!Y)return this;if(G(Y))return this.filter(function(ce,Ce){return Ce.dir&&Y.test(ce)});var re=this.root+Y,ye=j.call(this,re),ke=this.clone();return ke.root=ye.name,ke},remove:function(Y){Y=this.root+Y;var re=this.files[Y];if(re||(Y.slice(-1)!=="/"&&(Y+="/"),re=this.files[Y]),re&&!re.dir)delete this.files[Y];else for(var ye=this.filter(function(ce,Ce){return Ce.name.slice(0,Y.length)===Y}),ke=0;ke<ye.length;ke++)delete this.files[ye[ke].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(Y){var re,ye={};try{if((ye=p.extend(Y||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=ye.type.toLowerCase(),ye.compression=ye.compression.toUpperCase(),ye.type==="binarystring"&&(ye.type="string"),!ye.type)throw new Error("No output type specified.");p.checkSupport(ye.type),ye.platform!=="darwin"&&ye.platform!=="freebsd"&&ye.platform!=="linux"&&ye.platform!=="sunos"||(ye.platform="UNIX"),ye.platform==="win32"&&(ye.platform="DOS");var ke=ye.comment||this.comment||"";re=E.generateWorker(this,ye,ke)}catch(ce){(re=new v("error")).error(ce)}return new y(re,ye.type||"string",ye.mimeType)},generateAsync:function(Y,re){return this.generateInternalStream(Y).accumulate(re)},generateNodeStream:function(Y,re){return(Y=Y||{}).type||(Y.type="nodebuffer"),this.generateInternalStream(Y).toNodejsStream(re)}};a.exports=J},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(r,a,u){a.exports=r("stream")},{stream:void 0}],17:[function(r,a,u){var c=r("./DataReader");function f(p){c.call(this,p);for(var v=0;v<this.data.length;v++)p[v]=255&p[v]}r("../utils").inherits(f,c),f.prototype.byteAt=function(p){return this.data[this.zero+p]},f.prototype.lastIndexOfSignature=function(p){for(var v=p.charCodeAt(0),y=p.charCodeAt(1),k=p.charCodeAt(2),M=p.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===v&&this.data[T+1]===y&&this.data[T+2]===k&&this.data[T+3]===M)return T-this.zero;return-1},f.prototype.readAndCheckSignature=function(p){var v=p.charCodeAt(0),y=p.charCodeAt(1),k=p.charCodeAt(2),M=p.charCodeAt(3),T=this.readData(4);return v===T[0]&&y===T[1]&&k===T[2]&&M===T[3]},f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./DataReader":18}],18:[function(r,a,u){var c=r("../utils");function f(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var v,y=0;for(this.checkOffset(p),v=this.index+p-1;v>=this.index;v--)y=(y<<8)+this.byteAt(v);return this.index+=p,y},readString:function(p){return c.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},a.exports=f},{"../utils":32}],19:[function(r,a,u){var c=r("./Uint8ArrayReader");function f(p){c.call(this,p)}r("../utils").inherits(f,c),f.prototype.readData=function(p){this.checkOffset(p);var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(r,a,u){var c=r("./DataReader");function f(p){c.call(this,p)}r("../utils").inherits(f,c),f.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},f.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},f.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},f.prototype.readData=function(p){this.checkOffset(p);var v=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./DataReader":18}],21:[function(r,a,u){var c=r("./ArrayReader");function f(p){c.call(this,p)}r("../utils").inherits(f,c),f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var v=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,v},a.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(r,a,u){var c=r("../utils"),f=r("../support"),p=r("./ArrayReader"),v=r("./StringReader"),y=r("./NodeBufferReader"),k=r("./Uint8ArrayReader");a.exports=function(M){var T=c.getTypeOf(M);return c.checkSupport(T),T!=="string"||f.uint8array?T==="nodebuffer"?new y(M):f.uint8array?new k(c.transformTo("uint8array",M)):new p(c.transformTo("array",M)):new v(M)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(r,a,u){u.LOCAL_FILE_HEADER="PK",u.CENTRAL_FILE_HEADER="PK",u.CENTRAL_DIRECTORY_END="PK",u.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",u.ZIP64_CENTRAL_DIRECTORY_END="PK",u.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(r,a,u){var c=r("./GenericWorker"),f=r("../utils");function p(v){c.call(this,"ConvertWorker to "+v),this.destType=v}f.inherits(p,c),p.prototype.processChunk=function(v){this.push({data:f.transformTo(this.destType,v.data),meta:v.meta})},a.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(r,a,u){var c=r("./GenericWorker"),f=r("../crc32");function p(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}r("../utils").inherits(p,c),p.prototype.processChunk=function(v){this.streamInfo.crc32=f(v.data,this.streamInfo.crc32||0),this.push(v)},a.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(r,a,u){var c=r("../utils"),f=r("./GenericWorker");function p(v){f.call(this,"DataLengthProbe for "+v),this.propName=v,this.withStreamInfo(v,0)}c.inherits(p,f),p.prototype.processChunk=function(v){if(v){var y=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=y+v.data.length}f.prototype.processChunk.call(this,v)},a.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(r,a,u){var c=r("../utils"),f=r("./GenericWorker");function p(v){f.call(this,"DataWorker");var y=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,v.then(function(k){y.dataIsReady=!0,y.data=k,y.max=k&&k.length||0,y.type=c.getTypeOf(k),y.isPaused||y._tickAndRepeat()},function(k){y.error(k)})}c.inherits(p,f),p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var v=null,y=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":v=this.data.substring(this.index,y);break;case"uint8array":v=this.data.subarray(this.index,y);break;case"array":case"nodebuffer":v=this.data.slice(this.index,y)}return this.index=y,this.push({data:v,meta:{percent:this.max?this.index/this.max*100:0}})},a.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(r,a,u){function c(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,p){return this._listeners[f].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,p){if(this._listeners[f])for(var v=0;v<this._listeners[f].length;v++)this._listeners[f][v].call(this,p)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var p=this;return f.on("data",function(v){p.processChunk(v)}),f.on("end",function(){p.end()}),f.on("error",function(v){p.error(v)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,p){return this.extraStreamInfo[f]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},a.exports=c},{}],29:[function(r,a,u){var c=r("../utils"),f=r("./ConvertWorker"),p=r("./GenericWorker"),v=r("../base64"),y=r("../support"),k=r("../external"),M=null;if(y.nodestream)try{M=r("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(A,C){return new k.Promise(function(R,N){var j=[],G=A._internalType,J=A._outputType,Y=A._mimeType;A.on("data",function(re,ye){j.push(re),C&&C(ye)}).on("error",function(re){j=[],N(re)}).on("end",function(){try{var re=function(ye,ke,ce){switch(ye){case"blob":return c.newBlob(c.transformTo("arraybuffer",ke),ce);case"base64":return v.encode(ke);default:return c.transformTo(ye,ke)}}(J,function(ye,ke){var ce,Ce=0,Ge=null,oe=0;for(ce=0;ce<ke.length;ce++)oe+=ke[ce].length;switch(ye){case"string":return ke.join("");case"array":return Array.prototype.concat.apply([],ke);case"uint8array":for(Ge=new Uint8Array(oe),ce=0;ce<ke.length;ce++)Ge.set(ke[ce],Ce),Ce+=ke[ce].length;return Ge;case"nodebuffer":return Buffer.concat(ke);default:throw new Error("concat : unsupported type '"+ye+"'")}}(G,j),Y);R(re)}catch(ye){N(ye)}j=[]}).resume()})}function E(A,C,R){var N=C;switch(C){case"blob":case"arraybuffer":N="uint8array";break;case"base64":N="string"}try{this._internalType=N,this._outputType=C,this._mimeType=R,c.checkSupport(N),this._worker=A.pipe(new f(N)),A.lock()}catch(j){this._worker=new p("error"),this._worker.error(j)}}E.prototype={accumulate:function(A){return T(this,A)},on:function(A,C){var R=this;return A==="data"?this._worker.on(A,function(N){C.call(R,N.data,N.meta)}):this._worker.on(A,function(){c.delay(C,arguments,R)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(A){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new M(this,{objectMode:this._outputType!=="nodebuffer"},A)}},a.exports=E},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(r,a,u){if(u.base64=!0,u.array=!0,u.string=!0,u.arraybuffer=typeof ArrayBuffer!="undefined"&&typeof Uint8Array!="undefined",u.nodebuffer=typeof Buffer!="undefined",u.uint8array=typeof Uint8Array!="undefined",typeof ArrayBuffer=="undefined")u.blob=!1;else{var c=new ArrayBuffer(0);try{u.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(c),u.blob=f.getBlob("application/zip").size===0}catch{u.blob=!1}}}try{u.nodestream=!!r("readable-stream").Readable}catch{u.nodestream=!1}},{"readable-stream":16}],31:[function(r,a,u){for(var c=r("./utils"),f=r("./support"),p=r("./nodejsUtils"),v=r("./stream/GenericWorker"),y=new Array(256),k=0;k<256;k++)y[k]=252<=k?6:248<=k?5:240<=k?4:224<=k?3:192<=k?2:1;y[254]=y[254]=1;function M(){v.call(this,"utf-8 decode"),this.leftOver=null}function T(){v.call(this,"utf-8 encode")}u.utf8encode=function(E){return f.nodebuffer?p.newBufferFrom(E,"utf-8"):function(A){var C,R,N,j,G,J=A.length,Y=0;for(j=0;j<J;j++)(64512&(R=A.charCodeAt(j)))==55296&&j+1<J&&(64512&(N=A.charCodeAt(j+1)))==56320&&(R=65536+(R-55296<<10)+(N-56320),j++),Y+=R<128?1:R<2048?2:R<65536?3:4;for(C=f.uint8array?new Uint8Array(Y):new Array(Y),j=G=0;G<Y;j++)(64512&(R=A.charCodeAt(j)))==55296&&j+1<J&&(64512&(N=A.charCodeAt(j+1)))==56320&&(R=65536+(R-55296<<10)+(N-56320),j++),R<128?C[G++]=R:(R<2048?C[G++]=192|R>>>6:(R<65536?C[G++]=224|R>>>12:(C[G++]=240|R>>>18,C[G++]=128|R>>>12&63),C[G++]=128|R>>>6&63),C[G++]=128|63&R);return C}(E)},u.utf8decode=function(E){return f.nodebuffer?c.transformTo("nodebuffer",E).toString("utf-8"):function(A){var C,R,N,j,G=A.length,J=new Array(2*G);for(C=R=0;C<G;)if((N=A[C++])<128)J[R++]=N;else if(4<(j=y[N]))J[R++]=65533,C+=j-1;else{for(N&=j===2?31:j===3?15:7;1<j&&C<G;)N=N<<6|63&A[C++],j--;1<j?J[R++]=65533:N<65536?J[R++]=N:(N-=65536,J[R++]=55296|N>>10&1023,J[R++]=56320|1023&N)}return J.length!==R&&(J.subarray?J=J.subarray(0,R):J.length=R),c.applyFromCharCode(J)}(E=c.transformTo(f.uint8array?"uint8array":"array",E))},c.inherits(M,v),M.prototype.processChunk=function(E){var A=c.transformTo(f.uint8array?"uint8array":"array",E.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var C=A;(A=new Uint8Array(C.length+this.leftOver.length)).set(this.leftOver,0),A.set(C,this.leftOver.length)}else A=this.leftOver.concat(A);this.leftOver=null}var R=function(j,G){var J;for((G=G||j.length)>j.length&&(G=j.length),J=G-1;0<=J&&(192&j[J])==128;)J--;return J<0||J===0?G:J+y[j[J]]>G?J:G}(A),N=A;R!==A.length&&(f.uint8array?(N=A.subarray(0,R),this.leftOver=A.subarray(R,A.length)):(N=A.slice(0,R),this.leftOver=A.slice(R,A.length))),this.push({data:u.utf8decode(N),meta:E.meta})},M.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:u.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},u.Utf8DecodeWorker=M,c.inherits(T,v),T.prototype.processChunk=function(E){this.push({data:u.utf8encode(E.data),meta:E.meta})},u.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(r,a,u){var c=r("./support"),f=r("./base64"),p=r("./nodejsUtils"),v=r("./external");function y(C){return C}function k(C,R){for(var N=0;N<C.length;++N)R[N]=255&C.charCodeAt(N);return R}r("setimmediate"),u.newBlob=function(C,R){u.checkSupport("blob");try{return new Blob([C],{type:R})}catch{try{var N=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return N.append(C),N.getBlob(R)}catch{throw new Error("Bug : can't construct the Blob.")}}};var M={stringifyByChunk:function(C,R,N){var j=[],G=0,J=C.length;if(J<=N)return String.fromCharCode.apply(null,C);for(;G<J;)R==="array"||R==="nodebuffer"?j.push(String.fromCharCode.apply(null,C.slice(G,Math.min(G+N,J)))):j.push(String.fromCharCode.apply(null,C.subarray(G,Math.min(G+N,J)))),G+=N;return j.join("")},stringifyByChar:function(C){for(var R="",N=0;N<C.length;N++)R+=String.fromCharCode(C[N]);return R},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}}()}};function T(C){var R=65536,N=u.getTypeOf(C),j=!0;if(N==="uint8array"?j=M.applyCanBeUsed.uint8array:N==="nodebuffer"&&(j=M.applyCanBeUsed.nodebuffer),j)for(;1<R;)try{return M.stringifyByChunk(C,N,R)}catch{R=Math.floor(R/2)}return M.stringifyByChar(C)}function E(C,R){for(var N=0;N<C.length;N++)R[N]=C[N];return R}u.applyFromCharCode=T;var A={};A.string={string:y,array:function(C){return k(C,new Array(C.length))},arraybuffer:function(C){return A.string.uint8array(C).buffer},uint8array:function(C){return k(C,new Uint8Array(C.length))},nodebuffer:function(C){return k(C,p.allocBuffer(C.length))}},A.array={string:T,array:y,arraybuffer:function(C){return new Uint8Array(C).buffer},uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return p.newBufferFrom(C)}},A.arraybuffer={string:function(C){return T(new Uint8Array(C))},array:function(C){return E(new Uint8Array(C),new Array(C.byteLength))},arraybuffer:y,uint8array:function(C){return new Uint8Array(C)},nodebuffer:function(C){return p.newBufferFrom(new Uint8Array(C))}},A.uint8array={string:T,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return C.buffer},uint8array:y,nodebuffer:function(C){return p.newBufferFrom(C)}},A.nodebuffer={string:T,array:function(C){return E(C,new Array(C.length))},arraybuffer:function(C){return A.nodebuffer.uint8array(C).buffer},uint8array:function(C){return E(C,new Uint8Array(C.length))},nodebuffer:y},u.transformTo=function(C,R){if(R=R||"",!C)return R;u.checkSupport(C);var N=u.getTypeOf(R);return A[N][C](R)},u.resolve=function(C){for(var R=C.split("/"),N=[],j=0;j<R.length;j++){var G=R[j];G==="."||G===""&&j!==0&&j!==R.length-1||(G===".."?N.pop():N.push(G))}return N.join("/")},u.getTypeOf=function(C){return typeof C=="string"?"string":Object.prototype.toString.call(C)==="[object Array]"?"array":c.nodebuffer&&p.isBuffer(C)?"nodebuffer":c.uint8array&&C instanceof Uint8Array?"uint8array":c.arraybuffer&&C instanceof ArrayBuffer?"arraybuffer":void 0},u.checkSupport=function(C){if(!c[C.toLowerCase()])throw new Error(C+" is not supported by this platform")},u.MAX_VALUE_16BITS=65535,u.MAX_VALUE_32BITS=-1,u.pretty=function(C){var R,N,j="";for(N=0;N<(C||"").length;N++)j+="\\x"+((R=C.charCodeAt(N))<16?"0":"")+R.toString(16).toUpperCase();return j},u.delay=function(C,R,N){setImmediate(function(){C.apply(N||null,R||[])})},u.inherits=function(C,R){function N(){}N.prototype=R.prototype,C.prototype=new N},u.extend=function(){var C,R,N={};for(C=0;C<arguments.length;C++)for(R in arguments[C])Object.prototype.hasOwnProperty.call(arguments[C],R)&&N[R]===void 0&&(N[R]=arguments[C][R]);return N},u.prepareContent=function(C,R,N,j,G){return v.Promise.resolve(R).then(function(J){return c.blob&&(J instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(J))!==-1)&&typeof FileReader!="undefined"?new v.Promise(function(Y,re){var ye=new FileReader;ye.onload=function(ke){Y(ke.target.result)},ye.onerror=function(ke){re(ke.target.error)},ye.readAsArrayBuffer(J)}):J}).then(function(J){var Y=u.getTypeOf(J);return Y?(Y==="arraybuffer"?J=u.transformTo("uint8array",J):Y==="string"&&(G?J=f.decode(J):N&&j!==!0&&(J=function(re){return k(re,c.uint8array?new Uint8Array(re.length):new Array(re.length))}(J))),J):v.Promise.reject(new Error("Can't read the data of '"+C+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(r,a,u){var c=r("./reader/readerFor"),f=r("./utils"),p=r("./signature"),v=r("./zipEntry"),y=r("./support");function k(M){this.files=[],this.loadOptions=M}k.prototype={checkSignature:function(M){if(!this.reader.readAndCheckSignature(M)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(T)+", expected "+f.pretty(M)+")")}},isSignature:function(M,T){var E=this.reader.index;this.reader.setIndex(M);var A=this.reader.readString(4)===T;return this.reader.setIndex(E),A},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var M=this.reader.readData(this.zipCommentLength),T=y.uint8array?"uint8array":"array",E=f.transformTo(T,M);this.zipComment=this.loadOptions.decodeFileName(E)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var M,T,E,A=this.zip64EndOfCentralSize-44;0<A;)M=this.reader.readInt(2),T=this.reader.readInt(4),E=this.reader.readData(T),this.zip64ExtensibleData[M]={id:M,length:T,value:E}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var M,T;for(M=0;M<this.files.length;M++)T=this.files[M],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var M;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(M=new v({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(M);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var M=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(M<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(M);var T=M;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(M=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(M),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var E=this.centralDirOffset+this.centralDirSize;this.zip64&&(E+=20,E+=12+this.zip64EndOfCentralSize);var A=T-E;if(0<A)this.isSignature(T,p.CENTRAL_FILE_HEADER)||(this.reader.zero=A);else if(A<0)throw new Error("Corrupted zip: missing "+Math.abs(A)+" bytes.")},prepareReader:function(M){this.reader=c(M)},load:function(M){this.prepareReader(M),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},a.exports=k},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(r,a,u){var c=r("./reader/readerFor"),f=r("./utils"),p=r("./compressedObject"),v=r("./crc32"),y=r("./utf8"),k=r("./compressions"),M=r("./support");function T(E,A){this.options=E,this.loadOptions=A}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(E){var A,C;if(E.skip(22),this.fileNameLength=E.readInt(2),C=E.readInt(2),this.fileName=E.readData(this.fileNameLength),E.skip(C),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((A=function(R){for(var N in k)if(Object.prototype.hasOwnProperty.call(k,N)&&k[N].magic===R)return k[N];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,A,E.readData(this.compressedSize))},readCentralPart:function(E){this.versionMadeBy=E.readInt(2),E.skip(2),this.bitFlag=E.readInt(2),this.compressionMethod=E.readString(2),this.date=E.readDate(),this.crc32=E.readInt(4),this.compressedSize=E.readInt(4),this.uncompressedSize=E.readInt(4);var A=E.readInt(2);if(this.extraFieldsLength=E.readInt(2),this.fileCommentLength=E.readInt(2),this.diskNumberStart=E.readInt(2),this.internalFileAttributes=E.readInt(2),this.externalFileAttributes=E.readInt(4),this.localHeaderOffset=E.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");E.skip(A),this.readExtraFields(E),this.parseZIP64ExtraField(E),this.fileComment=E.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var E=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),E==0&&(this.dosPermissions=63&this.externalFileAttributes),E==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var E=c(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=E.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=E.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=E.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=E.readInt(4))}},readExtraFields:function(E){var A,C,R,N=E.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});E.index+4<N;)A=E.readInt(2),C=E.readInt(2),R=E.readData(C),this.extraFields[A]={id:A,length:C,value:R};E.setIndex(N)},handleUTF8:function(){var E=M.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=y.utf8decode(this.fileName),this.fileCommentStr=y.utf8decode(this.fileComment);else{var A=this.findExtraFieldUnicodePath();if(A!==null)this.fileNameStr=A;else{var C=f.transformTo(E,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(C)}var R=this.findExtraFieldUnicodeComment();if(R!==null)this.fileCommentStr=R;else{var N=f.transformTo(E,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(N)}}},findExtraFieldUnicodePath:function(){var E=this.extraFields[28789];if(E){var A=c(E.value);return A.readInt(1)!==1||v(this.fileName)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null},findExtraFieldUnicodeComment:function(){var E=this.extraFields[25461];if(E){var A=c(E.value);return A.readInt(1)!==1||v(this.fileComment)!==A.readInt(4)?null:y.utf8decode(A.readData(E.length-5))}return null}},a.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(r,a,u){function c(A,C,R){this.name=A,this.dir=R.dir,this.date=R.date,this.comment=R.comment,this.unixPermissions=R.unixPermissions,this.dosPermissions=R.dosPermissions,this._data=C,this._dataBinary=R.binary,this.options={compression:R.compression,compressionOptions:R.compressionOptions}}var f=r("./stream/StreamHelper"),p=r("./stream/DataWorker"),v=r("./utf8"),y=r("./compressedObject"),k=r("./stream/GenericWorker");c.prototype={internalStream:function(A){var C=null,R="string";try{if(!A)throw new Error("No output type specified.");var N=(R=A.toLowerCase())==="string"||R==="text";R!=="binarystring"&&R!=="text"||(R="string"),C=this._decompressWorker();var j=!this._dataBinary;j&&!N&&(C=C.pipe(new v.Utf8EncodeWorker)),!j&&N&&(C=C.pipe(new v.Utf8DecodeWorker))}catch(G){(C=new k("error")).error(G)}return new f(C,R,"")},async:function(A,C){return this.internalStream(A).accumulate(C)},nodeStream:function(A,C){return this.internalStream(A||"nodebuffer").toNodejsStream(C)},_compressWorker:function(A,C){if(this._data instanceof y&&this._data.compression.magic===A.magic)return this._data.getCompressedWorker();var R=this._decompressWorker();return this._dataBinary||(R=R.pipe(new v.Utf8EncodeWorker)),y.createWorkerFrom(R,A,C)},_decompressWorker:function(){return this._data instanceof y?this._data.getContentWorker():this._data instanceof k?this._data:new p(this._data)}};for(var M=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},E=0;E<M.length;E++)c.prototype[M[E]]=T;a.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(r,a,u){(function(c){var f,p,v=c.MutationObserver||c.WebKitMutationObserver;if(v){var y=0,k=new v(A),M=c.document.createTextNode("");k.observe(M,{characterData:!0}),f=function(){M.data=y=++y%2}}else if(c.setImmediate||c.MessageChannel===void 0)f="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var C=c.document.createElement("script");C.onreadystatechange=function(){A(),C.onreadystatechange=null,C.parentNode.removeChild(C),C=null},c.document.documentElement.appendChild(C)}:function(){setTimeout(A,0)};else{var T=new c.MessageChannel;T.port1.onmessage=A,f=function(){T.port2.postMessage(0)}}var E=[];function A(){var C,R;p=!0;for(var N=E.length;N;){for(R=E,E=[],C=-1;++C<N;)R[C]();N=E.length}p=!1}a.exports=function(C){E.push(C)!==1||p||f()}}).call(this,typeof qr!="undefined"?qr:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}],37:[function(r,a,u){var c=r("immediate");function f(){}var p={},v=["REJECTED"],y=["FULFILLED"],k=["PENDING"];function M(N){if(typeof N!="function")throw new TypeError("resolver must be a function");this.state=k,this.queue=[],this.outcome=void 0,N!==f&&C(this,N)}function T(N,j,G){this.promise=N,typeof j=="function"&&(this.onFulfilled=j,this.callFulfilled=this.otherCallFulfilled),typeof G=="function"&&(this.onRejected=G,this.callRejected=this.otherCallRejected)}function E(N,j,G){c(function(){var J;try{J=j(G)}catch(Y){return p.reject(N,Y)}J===N?p.reject(N,new TypeError("Cannot resolve promise with itself")):p.resolve(N,J)})}function A(N){var j=N&&N.then;if(N&&(typeof N=="object"||typeof N=="function")&&typeof j=="function")return function(){j.apply(N,arguments)}}function C(N,j){var G=!1;function J(ye){G||(G=!0,p.reject(N,ye))}function Y(ye){G||(G=!0,p.resolve(N,ye))}var re=R(function(){j(Y,J)});re.status==="error"&&J(re.value)}function R(N,j){var G={};try{G.value=N(j),G.status="success"}catch(J){G.status="error",G.value=J}return G}(a.exports=M).prototype.finally=function(N){if(typeof N!="function")return this;var j=this.constructor;return this.then(function(G){return j.resolve(N()).then(function(){return G})},function(G){return j.resolve(N()).then(function(){throw G})})},M.prototype.catch=function(N){return this.then(null,N)},M.prototype.then=function(N,j){if(typeof N!="function"&&this.state===y||typeof j!="function"&&this.state===v)return this;var G=new this.constructor(f);return this.state!==k?E(G,this.state===y?N:j,this.outcome):this.queue.push(new T(G,N,j)),G},T.prototype.callFulfilled=function(N){p.resolve(this.promise,N)},T.prototype.otherCallFulfilled=function(N){E(this.promise,this.onFulfilled,N)},T.prototype.callRejected=function(N){p.reject(this.promise,N)},T.prototype.otherCallRejected=function(N){E(this.promise,this.onRejected,N)},p.resolve=function(N,j){var G=R(A,j);if(G.status==="error")return p.reject(N,G.value);var J=G.value;if(J)C(N,J);else{N.state=y,N.outcome=j;for(var Y=-1,re=N.queue.length;++Y<re;)N.queue[Y].callFulfilled(j)}return N},p.reject=function(N,j){N.state=v,N.outcome=j;for(var G=-1,J=N.queue.length;++G<J;)N.queue[G].callRejected(j);return N},M.resolve=function(N){return N instanceof this?N:p.resolve(new this(f),N)},M.reject=function(N){var j=new this(f);return p.reject(j,N)},M.all=function(N){var j=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=N.length,J=!1;if(!G)return this.resolve([]);for(var Y=new Array(G),re=0,ye=-1,ke=new this(f);++ye<G;)ce(N[ye],ye);return ke;function ce(Ce,Ge){j.resolve(Ce).then(function(oe){Y[Ge]=oe,++re!==G||J||(J=!0,p.resolve(ke,Y))},function(oe){J||(J=!0,p.reject(ke,oe))})}},M.race=function(N){var j=this;if(Object.prototype.toString.call(N)!=="[object Array]")return this.reject(new TypeError("must be an array"));var G=N.length,J=!1;if(!G)return this.resolve([]);for(var Y=-1,re=new this(f);++Y<G;)ye=N[Y],j.resolve(ye).then(function(ke){J||(J=!0,p.resolve(re,ke))},function(ke){J||(J=!0,p.reject(re,ke))});var ye;return re}},{immediate:36}],38:[function(r,a,u){var c={};(0,r("./lib/utils/common").assign)(c,r("./lib/deflate"),r("./lib/inflate"),r("./lib/zlib/constants")),a.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(r,a,u){var c=r("./zlib/deflate"),f=r("./utils/common"),p=r("./utils/strings"),v=r("./zlib/messages"),y=r("./zlib/zstream"),k=Object.prototype.toString,M=0,T=-1,E=0,A=8;function C(N){if(!(this instanceof C))return new C(N);this.options=f.assign({level:T,method:A,chunkSize:16384,windowBits:15,memLevel:8,strategy:E,to:""},N||{});var j=this.options;j.raw&&0<j.windowBits?j.windowBits=-j.windowBits:j.gzip&&0<j.windowBits&&j.windowBits<16&&(j.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new y,this.strm.avail_out=0;var G=c.deflateInit2(this.strm,j.level,j.method,j.windowBits,j.memLevel,j.strategy);if(G!==M)throw new Error(v[G]);if(j.header&&c.deflateSetHeader(this.strm,j.header),j.dictionary){var J;if(J=typeof j.dictionary=="string"?p.string2buf(j.dictionary):k.call(j.dictionary)==="[object ArrayBuffer]"?new Uint8Array(j.dictionary):j.dictionary,(G=c.deflateSetDictionary(this.strm,J))!==M)throw new Error(v[G]);this._dict_set=!0}}function R(N,j){var G=new C(j);if(G.push(N,!0),G.err)throw G.msg||v[G.err];return G.result}C.prototype.push=function(N,j){var G,J,Y=this.strm,re=this.options.chunkSize;if(this.ended)return!1;J=j===~~j?j:j===!0?4:0,typeof N=="string"?Y.input=p.string2buf(N):k.call(N)==="[object ArrayBuffer]"?Y.input=new Uint8Array(N):Y.input=N,Y.next_in=0,Y.avail_in=Y.input.length;do{if(Y.avail_out===0&&(Y.output=new f.Buf8(re),Y.next_out=0,Y.avail_out=re),(G=c.deflate(Y,J))!==1&&G!==M)return this.onEnd(G),!(this.ended=!0);Y.avail_out!==0&&(Y.avail_in!==0||J!==4&&J!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(f.shrinkBuf(Y.output,Y.next_out))):this.onData(f.shrinkBuf(Y.output,Y.next_out)))}while((0<Y.avail_in||Y.avail_out===0)&&G!==1);return J===4?(G=c.deflateEnd(this.strm),this.onEnd(G),this.ended=!0,G===M):J!==2||(this.onEnd(M),!(Y.avail_out=0))},C.prototype.onData=function(N){this.chunks.push(N)},C.prototype.onEnd=function(N){N===M&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=N,this.msg=this.strm.msg},u.Deflate=C,u.deflate=R,u.deflateRaw=function(N,j){return(j=j||{}).raw=!0,R(N,j)},u.gzip=function(N,j){return(j=j||{}).gzip=!0,R(N,j)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(r,a,u){var c=r("./zlib/inflate"),f=r("./utils/common"),p=r("./utils/strings"),v=r("./zlib/constants"),y=r("./zlib/messages"),k=r("./zlib/zstream"),M=r("./zlib/gzheader"),T=Object.prototype.toString;function E(C){if(!(this instanceof E))return new E(C);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},C||{});var R=this.options;R.raw&&0<=R.windowBits&&R.windowBits<16&&(R.windowBits=-R.windowBits,R.windowBits===0&&(R.windowBits=-15)),!(0<=R.windowBits&&R.windowBits<16)||C&&C.windowBits||(R.windowBits+=32),15<R.windowBits&&R.windowBits<48&&!(15&R.windowBits)&&(R.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new k,this.strm.avail_out=0;var N=c.inflateInit2(this.strm,R.windowBits);if(N!==v.Z_OK)throw new Error(y[N]);this.header=new M,c.inflateGetHeader(this.strm,this.header)}function A(C,R){var N=new E(R);if(N.push(C,!0),N.err)throw N.msg||y[N.err];return N.result}E.prototype.push=function(C,R){var N,j,G,J,Y,re,ye=this.strm,ke=this.options.chunkSize,ce=this.options.dictionary,Ce=!1;if(this.ended)return!1;j=R===~~R?R:R===!0?v.Z_FINISH:v.Z_NO_FLUSH,typeof C=="string"?ye.input=p.binstring2buf(C):T.call(C)==="[object ArrayBuffer]"?ye.input=new Uint8Array(C):ye.input=C,ye.next_in=0,ye.avail_in=ye.input.length;do{if(ye.avail_out===0&&(ye.output=new f.Buf8(ke),ye.next_out=0,ye.avail_out=ke),(N=c.inflate(ye,v.Z_NO_FLUSH))===v.Z_NEED_DICT&&ce&&(re=typeof ce=="string"?p.string2buf(ce):T.call(ce)==="[object ArrayBuffer]"?new Uint8Array(ce):ce,N=c.inflateSetDictionary(this.strm,re)),N===v.Z_BUF_ERROR&&Ce===!0&&(N=v.Z_OK,Ce=!1),N!==v.Z_STREAM_END&&N!==v.Z_OK)return this.onEnd(N),!(this.ended=!0);ye.next_out&&(ye.avail_out!==0&&N!==v.Z_STREAM_END&&(ye.avail_in!==0||j!==v.Z_FINISH&&j!==v.Z_SYNC_FLUSH)||(this.options.to==="string"?(G=p.utf8border(ye.output,ye.next_out),J=ye.next_out-G,Y=p.buf2string(ye.output,G),ye.next_out=J,ye.avail_out=ke-J,J&&f.arraySet(ye.output,ye.output,G,J,0),this.onData(Y)):this.onData(f.shrinkBuf(ye.output,ye.next_out)))),ye.avail_in===0&&ye.avail_out===0&&(Ce=!0)}while((0<ye.avail_in||ye.avail_out===0)&&N!==v.Z_STREAM_END);return N===v.Z_STREAM_END&&(j=v.Z_FINISH),j===v.Z_FINISH?(N=c.inflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===v.Z_OK):j!==v.Z_SYNC_FLUSH||(this.onEnd(v.Z_OK),!(ye.avail_out=0))},E.prototype.onData=function(C){this.chunks.push(C)},E.prototype.onEnd=function(C){C===v.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},u.Inflate=E,u.inflate=A,u.inflateRaw=function(C,R){return(R=R||{}).raw=!0,A(C,R)},u.ungzip=A},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(r,a,u){var c=typeof Uint8Array!="undefined"&&typeof Uint16Array!="undefined"&&typeof Int32Array!="undefined";u.assign=function(v){for(var y=Array.prototype.slice.call(arguments,1);y.length;){var k=y.shift();if(k){if(typeof k!="object")throw new TypeError(k+"must be non-object");for(var M in k)k.hasOwnProperty(M)&&(v[M]=k[M])}}return v},u.shrinkBuf=function(v,y){return v.length===y?v:v.subarray?v.subarray(0,y):(v.length=y,v)};var f={arraySet:function(v,y,k,M,T){if(y.subarray&&v.subarray)v.set(y.subarray(k,k+M),T);else for(var E=0;E<M;E++)v[T+E]=y[k+E]},flattenChunks:function(v){var y,k,M,T,E,A;for(y=M=0,k=v.length;y<k;y++)M+=v[y].length;for(A=new Uint8Array(M),y=T=0,k=v.length;y<k;y++)E=v[y],A.set(E,T),T+=E.length;return A}},p={arraySet:function(v,y,k,M,T){for(var E=0;E<M;E++)v[T+E]=y[k+E]},flattenChunks:function(v){return[].concat.apply([],v)}};u.setTyped=function(v){v?(u.Buf8=Uint8Array,u.Buf16=Uint16Array,u.Buf32=Int32Array,u.assign(u,f)):(u.Buf8=Array,u.Buf16=Array,u.Buf32=Array,u.assign(u,p))},u.setTyped(c)},{}],42:[function(r,a,u){var c=r("./common"),f=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var v=new c.Buf8(256),y=0;y<256;y++)v[y]=252<=y?6:248<=y?5:240<=y?4:224<=y?3:192<=y?2:1;function k(M,T){if(T<65537&&(M.subarray&&p||!M.subarray&&f))return String.fromCharCode.apply(null,c.shrinkBuf(M,T));for(var E="",A=0;A<T;A++)E+=String.fromCharCode(M[A]);return E}v[254]=v[254]=1,u.string2buf=function(M){var T,E,A,C,R,N=M.length,j=0;for(C=0;C<N;C++)(64512&(E=M.charCodeAt(C)))==55296&&C+1<N&&(64512&(A=M.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),j+=E<128?1:E<2048?2:E<65536?3:4;for(T=new c.Buf8(j),C=R=0;R<j;C++)(64512&(E=M.charCodeAt(C)))==55296&&C+1<N&&(64512&(A=M.charCodeAt(C+1)))==56320&&(E=65536+(E-55296<<10)+(A-56320),C++),E<128?T[R++]=E:(E<2048?T[R++]=192|E>>>6:(E<65536?T[R++]=224|E>>>12:(T[R++]=240|E>>>18,T[R++]=128|E>>>12&63),T[R++]=128|E>>>6&63),T[R++]=128|63&E);return T},u.buf2binstring=function(M){return k(M,M.length)},u.binstring2buf=function(M){for(var T=new c.Buf8(M.length),E=0,A=T.length;E<A;E++)T[E]=M.charCodeAt(E);return T},u.buf2string=function(M,T){var E,A,C,R,N=T||M.length,j=new Array(2*N);for(E=A=0;E<N;)if((C=M[E++])<128)j[A++]=C;else if(4<(R=v[C]))j[A++]=65533,E+=R-1;else{for(C&=R===2?31:R===3?15:7;1<R&&E<N;)C=C<<6|63&M[E++],R--;1<R?j[A++]=65533:C<65536?j[A++]=C:(C-=65536,j[A++]=55296|C>>10&1023,j[A++]=56320|1023&C)}return k(j,A)},u.utf8border=function(M,T){var E;for((T=T||M.length)>M.length&&(T=M.length),E=T-1;0<=E&&(192&M[E])==128;)E--;return E<0||E===0?T:E+v[M[E]]>T?E:T}},{"./common":41}],43:[function(r,a,u){a.exports=function(c,f,p,v){for(var y=65535&c|0,k=c>>>16&65535|0,M=0;p!==0;){for(p-=M=2e3<p?2e3:p;k=k+(y=y+f[v++]|0)|0,--M;);y%=65521,k%=65521}return y|k<<16|0}},{}],44:[function(r,a,u){a.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(r,a,u){var c=function(){for(var f,p=[],v=0;v<256;v++){f=v;for(var y=0;y<8;y++)f=1&f?3988292384^f>>>1:f>>>1;p[v]=f}return p}();a.exports=function(f,p,v,y){var k=c,M=y+v;f^=-1;for(var T=y;T<M;T++)f=f>>>8^k[255&(f^p[T])];return-1^f}},{}],46:[function(r,a,u){var c,f=r("../utils/common"),p=r("./trees"),v=r("./adler32"),y=r("./crc32"),k=r("./messages"),M=0,T=4,E=0,A=-2,C=-1,R=4,N=2,j=8,G=9,J=286,Y=30,re=19,ye=2*J+1,ke=15,ce=3,Ce=258,Ge=Ce+ce+1,oe=42,Ae=113,W=1,Le=2,kt=3,Te=4;function Se($,it){return $.msg=k[it],it}function Ne($){return($<<1)-(4<$?9:0)}function pt($){for(var it=$.length;0<=--it;)$[it]=0}function ae($){var it=$.state,rt=it.pending;rt>$.avail_out&&(rt=$.avail_out),rt!==0&&(f.arraySet($.output,it.pending_buf,it.pending_out,rt,$.next_out),$.next_out+=rt,it.pending_out+=rt,$.total_out+=rt,$.avail_out-=rt,it.pending-=rt,it.pending===0&&(it.pending_out=0))}function de($,it){p._tr_flush_block($,0<=$.block_start?$.block_start:-1,$.strstart-$.block_start,it),$.block_start=$.strstart,ae($.strm)}function Ke($,it){$.pending_buf[$.pending++]=it}function Ze($,it){$.pending_buf[$.pending++]=it>>>8&255,$.pending_buf[$.pending++]=255&it}function nt($,it){var rt,ve,pe=$.max_chain_length,Be=$.strstart,gt=$.prev_length,xt=$.nice_match,Xe=$.strstart>$.w_size-Ge?$.strstart-($.w_size-Ge):0,Tt=$.window,_t=$.w_mask,wt=$.prev,un=$.strstart+Ce,rr=Tt[Be+gt-1],Mn=Tt[Be+gt];$.prev_length>=$.good_match&&(pe>>=2),xt>$.lookahead&&(xt=$.lookahead);do if(Tt[(rt=it)+gt]===Mn&&Tt[rt+gt-1]===rr&&Tt[rt]===Tt[Be]&&Tt[++rt]===Tt[Be+1]){Be+=2,rt++;do;while(Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Tt[++Be]===Tt[++rt]&&Be<un);if(ve=Ce-(un-Be),Be=un-Ce,gt<ve){if($.match_start=it,xt<=(gt=ve))break;rr=Tt[Be+gt-1],Mn=Tt[Be+gt]}}while((it=wt[it&_t])>Xe&&--pe!=0);return gt<=$.lookahead?gt:$.lookahead}function Fe($){var it,rt,ve,pe,Be,gt,xt,Xe,Tt,_t,wt=$.w_size;do{if(pe=$.window_size-$.lookahead-$.strstart,$.strstart>=wt+(wt-Ge)){for(f.arraySet($.window,$.window,wt,wt,0),$.match_start-=wt,$.strstart-=wt,$.block_start-=wt,it=rt=$.hash_size;ve=$.head[--it],$.head[it]=wt<=ve?ve-wt:0,--rt;);for(it=rt=wt;ve=$.prev[--it],$.prev[it]=wt<=ve?ve-wt:0,--rt;);pe+=wt}if($.strm.avail_in===0)break;if(gt=$.strm,xt=$.window,Xe=$.strstart+$.lookahead,Tt=pe,_t=void 0,_t=gt.avail_in,Tt<_t&&(_t=Tt),rt=_t===0?0:(gt.avail_in-=_t,f.arraySet(xt,gt.input,gt.next_in,_t,Xe),gt.state.wrap===1?gt.adler=v(gt.adler,xt,_t,Xe):gt.state.wrap===2&&(gt.adler=y(gt.adler,xt,_t,Xe)),gt.next_in+=_t,gt.total_in+=_t,_t),$.lookahead+=rt,$.lookahead+$.insert>=ce)for(Be=$.strstart-$.insert,$.ins_h=$.window[Be],$.ins_h=($.ins_h<<$.hash_shift^$.window[Be+1])&$.hash_mask;$.insert&&($.ins_h=($.ins_h<<$.hash_shift^$.window[Be+ce-1])&$.hash_mask,$.prev[Be&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=Be,Be++,$.insert--,!($.lookahead+$.insert<ce)););}while($.lookahead<Ge&&$.strm.avail_in!==0)}function Gt($,it){for(var rt,ve;;){if($.lookahead<Ge){if(Fe($),$.lookahead<Ge&&it===M)return W;if($.lookahead===0)break}if(rt=0,$.lookahead>=ce&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ce-1])&$.hash_mask,rt=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),rt!==0&&$.strstart-rt<=$.w_size-Ge&&($.match_length=nt($,rt)),$.match_length>=ce)if(ve=p._tr_tally($,$.strstart-$.match_start,$.match_length-ce),$.lookahead-=$.match_length,$.match_length<=$.max_lazy_match&&$.lookahead>=ce){for($.match_length--;$.strstart++,$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ce-1])&$.hash_mask,rt=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart,--$.match_length!=0;);$.strstart++}else $.strstart+=$.match_length,$.match_length=0,$.ins_h=$.window[$.strstart],$.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+1])&$.hash_mask;else ve=p._tr_tally($,0,$.window[$.strstart]),$.lookahead--,$.strstart++;if(ve&&(de($,!1),$.strm.avail_out===0))return W}return $.insert=$.strstart<ce-1?$.strstart:ce-1,it===T?(de($,!0),$.strm.avail_out===0?kt:Te):$.last_lit&&(de($,!1),$.strm.avail_out===0)?W:Le}function ct($,it){for(var rt,ve,pe;;){if($.lookahead<Ge){if(Fe($),$.lookahead<Ge&&it===M)return W;if($.lookahead===0)break}if(rt=0,$.lookahead>=ce&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ce-1])&$.hash_mask,rt=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),$.prev_length=$.match_length,$.prev_match=$.match_start,$.match_length=ce-1,rt!==0&&$.prev_length<$.max_lazy_match&&$.strstart-rt<=$.w_size-Ge&&($.match_length=nt($,rt),$.match_length<=5&&($.strategy===1||$.match_length===ce&&4096<$.strstart-$.match_start)&&($.match_length=ce-1)),$.prev_length>=ce&&$.match_length<=$.prev_length){for(pe=$.strstart+$.lookahead-ce,ve=p._tr_tally($,$.strstart-1-$.prev_match,$.prev_length-ce),$.lookahead-=$.prev_length-1,$.prev_length-=2;++$.strstart<=pe&&($.ins_h=($.ins_h<<$.hash_shift^$.window[$.strstart+ce-1])&$.hash_mask,rt=$.prev[$.strstart&$.w_mask]=$.head[$.ins_h],$.head[$.ins_h]=$.strstart),--$.prev_length!=0;);if($.match_available=0,$.match_length=ce-1,$.strstart++,ve&&(de($,!1),$.strm.avail_out===0))return W}else if($.match_available){if((ve=p._tr_tally($,0,$.window[$.strstart-1]))&&de($,!1),$.strstart++,$.lookahead--,$.strm.avail_out===0)return W}else $.match_available=1,$.strstart++,$.lookahead--}return $.match_available&&(ve=p._tr_tally($,0,$.window[$.strstart-1]),$.match_available=0),$.insert=$.strstart<ce-1?$.strstart:ce-1,it===T?(de($,!0),$.strm.avail_out===0?kt:Te):$.last_lit&&(de($,!1),$.strm.avail_out===0)?W:Le}function jt($,it,rt,ve,pe){this.good_length=$,this.max_lazy=it,this.nice_length=rt,this.max_chain=ve,this.func=pe}function nn(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=j,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*ye),this.dyn_dtree=new f.Buf16(2*(2*Y+1)),this.bl_tree=new f.Buf16(2*(2*re+1)),pt(this.dyn_ltree),pt(this.dyn_dtree),pt(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(ke+1),this.heap=new f.Buf16(2*J+1),pt(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*J+1),pt(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function gn($){var it;return $&&$.state?($.total_in=$.total_out=0,$.data_type=N,(it=$.state).pending=0,it.pending_out=0,it.wrap<0&&(it.wrap=-it.wrap),it.status=it.wrap?oe:Ae,$.adler=it.wrap===2?0:1,it.last_flush=M,p._tr_init(it),E):Se($,A)}function dn($){var it=gn($);return it===E&&function(rt){rt.window_size=2*rt.w_size,pt(rt.head),rt.max_lazy_match=c[rt.level].max_lazy,rt.good_match=c[rt.level].good_length,rt.nice_match=c[rt.level].nice_length,rt.max_chain_length=c[rt.level].max_chain,rt.strstart=0,rt.block_start=0,rt.lookahead=0,rt.insert=0,rt.match_length=rt.prev_length=ce-1,rt.match_available=0,rt.ins_h=0}($.state),it}function ar($,it,rt,ve,pe,Be){if(!$)return A;var gt=1;if(it===C&&(it=6),ve<0?(gt=0,ve=-ve):15<ve&&(gt=2,ve-=16),pe<1||G<pe||rt!==j||ve<8||15<ve||it<0||9<it||Be<0||R<Be)return Se($,A);ve===8&&(ve=9);var xt=new nn;return($.state=xt).strm=$,xt.wrap=gt,xt.gzhead=null,xt.w_bits=ve,xt.w_size=1<<xt.w_bits,xt.w_mask=xt.w_size-1,xt.hash_bits=pe+7,xt.hash_size=1<<xt.hash_bits,xt.hash_mask=xt.hash_size-1,xt.hash_shift=~~((xt.hash_bits+ce-1)/ce),xt.window=new f.Buf8(2*xt.w_size),xt.head=new f.Buf16(xt.hash_size),xt.prev=new f.Buf16(xt.w_size),xt.lit_bufsize=1<<pe+6,xt.pending_buf_size=4*xt.lit_bufsize,xt.pending_buf=new f.Buf8(xt.pending_buf_size),xt.d_buf=1*xt.lit_bufsize,xt.l_buf=3*xt.lit_bufsize,xt.level=it,xt.strategy=Be,xt.method=rt,dn($)}c=[new jt(0,0,0,0,function($,it){var rt=65535;for(rt>$.pending_buf_size-5&&(rt=$.pending_buf_size-5);;){if($.lookahead<=1){if(Fe($),$.lookahead===0&&it===M)return W;if($.lookahead===0)break}$.strstart+=$.lookahead,$.lookahead=0;var ve=$.block_start+rt;if(($.strstart===0||$.strstart>=ve)&&($.lookahead=$.strstart-ve,$.strstart=ve,de($,!1),$.strm.avail_out===0)||$.strstart-$.block_start>=$.w_size-Ge&&(de($,!1),$.strm.avail_out===0))return W}return $.insert=0,it===T?(de($,!0),$.strm.avail_out===0?kt:Te):($.strstart>$.block_start&&(de($,!1),$.strm.avail_out),W)}),new jt(4,4,8,4,Gt),new jt(4,5,16,8,Gt),new jt(4,6,32,32,Gt),new jt(4,4,16,16,ct),new jt(8,16,32,32,ct),new jt(8,16,128,128,ct),new jt(8,32,128,256,ct),new jt(32,128,258,1024,ct),new jt(32,258,258,4096,ct)],u.deflateInit=function($,it){return ar($,it,j,15,8,0)},u.deflateInit2=ar,u.deflateReset=dn,u.deflateResetKeep=gn,u.deflateSetHeader=function($,it){return $&&$.state?$.state.wrap!==2?A:($.state.gzhead=it,E):A},u.deflate=function($,it){var rt,ve,pe,Be;if(!$||!$.state||5<it||it<0)return $?Se($,A):A;if(ve=$.state,!$.output||!$.input&&$.avail_in!==0||ve.status===666&&it!==T)return Se($,$.avail_out===0?-5:A);if(ve.strm=$,rt=ve.last_flush,ve.last_flush=it,ve.status===oe)if(ve.wrap===2)$.adler=0,Ke(ve,31),Ke(ve,139),Ke(ve,8),ve.gzhead?(Ke(ve,(ve.gzhead.text?1:0)+(ve.gzhead.hcrc?2:0)+(ve.gzhead.extra?4:0)+(ve.gzhead.name?8:0)+(ve.gzhead.comment?16:0)),Ke(ve,255&ve.gzhead.time),Ke(ve,ve.gzhead.time>>8&255),Ke(ve,ve.gzhead.time>>16&255),Ke(ve,ve.gzhead.time>>24&255),Ke(ve,ve.level===9?2:2<=ve.strategy||ve.level<2?4:0),Ke(ve,255&ve.gzhead.os),ve.gzhead.extra&&ve.gzhead.extra.length&&(Ke(ve,255&ve.gzhead.extra.length),Ke(ve,ve.gzhead.extra.length>>8&255)),ve.gzhead.hcrc&&($.adler=y($.adler,ve.pending_buf,ve.pending,0)),ve.gzindex=0,ve.status=69):(Ke(ve,0),Ke(ve,0),Ke(ve,0),Ke(ve,0),Ke(ve,0),Ke(ve,ve.level===9?2:2<=ve.strategy||ve.level<2?4:0),Ke(ve,3),ve.status=Ae);else{var gt=j+(ve.w_bits-8<<4)<<8;gt|=(2<=ve.strategy||ve.level<2?0:ve.level<6?1:ve.level===6?2:3)<<6,ve.strstart!==0&&(gt|=32),gt+=31-gt%31,ve.status=Ae,Ze(ve,gt),ve.strstart!==0&&(Ze(ve,$.adler>>>16),Ze(ve,65535&$.adler)),$.adler=1}if(ve.status===69)if(ve.gzhead.extra){for(pe=ve.pending;ve.gzindex<(65535&ve.gzhead.extra.length)&&(ve.pending!==ve.pending_buf_size||(ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),ae($),pe=ve.pending,ve.pending!==ve.pending_buf_size));)Ke(ve,255&ve.gzhead.extra[ve.gzindex]),ve.gzindex++;ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),ve.gzindex===ve.gzhead.extra.length&&(ve.gzindex=0,ve.status=73)}else ve.status=73;if(ve.status===73)if(ve.gzhead.name){pe=ve.pending;do{if(ve.pending===ve.pending_buf_size&&(ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),ae($),pe=ve.pending,ve.pending===ve.pending_buf_size)){Be=1;break}Be=ve.gzindex<ve.gzhead.name.length?255&ve.gzhead.name.charCodeAt(ve.gzindex++):0,Ke(ve,Be)}while(Be!==0);ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),Be===0&&(ve.gzindex=0,ve.status=91)}else ve.status=91;if(ve.status===91)if(ve.gzhead.comment){pe=ve.pending;do{if(ve.pending===ve.pending_buf_size&&(ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),ae($),pe=ve.pending,ve.pending===ve.pending_buf_size)){Be=1;break}Be=ve.gzindex<ve.gzhead.comment.length?255&ve.gzhead.comment.charCodeAt(ve.gzindex++):0,Ke(ve,Be)}while(Be!==0);ve.gzhead.hcrc&&ve.pending>pe&&($.adler=y($.adler,ve.pending_buf,ve.pending-pe,pe)),Be===0&&(ve.status=103)}else ve.status=103;if(ve.status===103&&(ve.gzhead.hcrc?(ve.pending+2>ve.pending_buf_size&&ae($),ve.pending+2<=ve.pending_buf_size&&(Ke(ve,255&$.adler),Ke(ve,$.adler>>8&255),$.adler=0,ve.status=Ae)):ve.status=Ae),ve.pending!==0){if(ae($),$.avail_out===0)return ve.last_flush=-1,E}else if($.avail_in===0&&Ne(it)<=Ne(rt)&&it!==T)return Se($,-5);if(ve.status===666&&$.avail_in!==0)return Se($,-5);if($.avail_in!==0||ve.lookahead!==0||it!==M&&ve.status!==666){var xt=ve.strategy===2?function(Xe,Tt){for(var _t;;){if(Xe.lookahead===0&&(Fe(Xe),Xe.lookahead===0)){if(Tt===M)return W;break}if(Xe.match_length=0,_t=p._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++,_t&&(de(Xe,!1),Xe.strm.avail_out===0))return W}return Xe.insert=0,Tt===T?(de(Xe,!0),Xe.strm.avail_out===0?kt:Te):Xe.last_lit&&(de(Xe,!1),Xe.strm.avail_out===0)?W:Le}(ve,it):ve.strategy===3?function(Xe,Tt){for(var _t,wt,un,rr,Mn=Xe.window;;){if(Xe.lookahead<=Ce){if(Fe(Xe),Xe.lookahead<=Ce&&Tt===M)return W;if(Xe.lookahead===0)break}if(Xe.match_length=0,Xe.lookahead>=ce&&0<Xe.strstart&&(wt=Mn[un=Xe.strstart-1])===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]){rr=Xe.strstart+Ce;do;while(wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&wt===Mn[++un]&&un<rr);Xe.match_length=Ce-(rr-un),Xe.match_length>Xe.lookahead&&(Xe.match_length=Xe.lookahead)}if(Xe.match_length>=ce?(_t=p._tr_tally(Xe,1,Xe.match_length-ce),Xe.lookahead-=Xe.match_length,Xe.strstart+=Xe.match_length,Xe.match_length=0):(_t=p._tr_tally(Xe,0,Xe.window[Xe.strstart]),Xe.lookahead--,Xe.strstart++),_t&&(de(Xe,!1),Xe.strm.avail_out===0))return W}return Xe.insert=0,Tt===T?(de(Xe,!0),Xe.strm.avail_out===0?kt:Te):Xe.last_lit&&(de(Xe,!1),Xe.strm.avail_out===0)?W:Le}(ve,it):c[ve.level].func(ve,it);if(xt!==kt&&xt!==Te||(ve.status=666),xt===W||xt===kt)return $.avail_out===0&&(ve.last_flush=-1),E;if(xt===Le&&(it===1?p._tr_align(ve):it!==5&&(p._tr_stored_block(ve,0,0,!1),it===3&&(pt(ve.head),ve.lookahead===0&&(ve.strstart=0,ve.block_start=0,ve.insert=0))),ae($),$.avail_out===0))return ve.last_flush=-1,E}return it!==T?E:ve.wrap<=0?1:(ve.wrap===2?(Ke(ve,255&$.adler),Ke(ve,$.adler>>8&255),Ke(ve,$.adler>>16&255),Ke(ve,$.adler>>24&255),Ke(ve,255&$.total_in),Ke(ve,$.total_in>>8&255),Ke(ve,$.total_in>>16&255),Ke(ve,$.total_in>>24&255)):(Ze(ve,$.adler>>>16),Ze(ve,65535&$.adler)),ae($),0<ve.wrap&&(ve.wrap=-ve.wrap),ve.pending!==0?E:1)},u.deflateEnd=function($){var it;return $&&$.state?(it=$.state.status)!==oe&&it!==69&&it!==73&&it!==91&&it!==103&&it!==Ae&&it!==666?Se($,A):($.state=null,it===Ae?Se($,-3):E):A},u.deflateSetDictionary=function($,it){var rt,ve,pe,Be,gt,xt,Xe,Tt,_t=it.length;if(!$||!$.state||(Be=(rt=$.state).wrap)===2||Be===1&&rt.status!==oe||rt.lookahead)return A;for(Be===1&&($.adler=v($.adler,it,_t,0)),rt.wrap=0,_t>=rt.w_size&&(Be===0&&(pt(rt.head),rt.strstart=0,rt.block_start=0,rt.insert=0),Tt=new f.Buf8(rt.w_size),f.arraySet(Tt,it,_t-rt.w_size,rt.w_size,0),it=Tt,_t=rt.w_size),gt=$.avail_in,xt=$.next_in,Xe=$.input,$.avail_in=_t,$.next_in=0,$.input=it,Fe(rt);rt.lookahead>=ce;){for(ve=rt.strstart,pe=rt.lookahead-(ce-1);rt.ins_h=(rt.ins_h<<rt.hash_shift^rt.window[ve+ce-1])&rt.hash_mask,rt.prev[ve&rt.w_mask]=rt.head[rt.ins_h],rt.head[rt.ins_h]=ve,ve++,--pe;);rt.strstart=ve,rt.lookahead=ce-1,Fe(rt)}return rt.strstart+=rt.lookahead,rt.block_start=rt.strstart,rt.insert=rt.lookahead,rt.lookahead=0,rt.match_length=rt.prev_length=ce-1,rt.match_available=0,$.next_in=xt,$.input=Xe,$.avail_in=gt,rt.wrap=Be,E},u.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(r,a,u){a.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(r,a,u){a.exports=function(c,f){var p,v,y,k,M,T,E,A,C,R,N,j,G,J,Y,re,ye,ke,ce,Ce,Ge,oe,Ae,W,Le;p=c.state,v=c.next_in,W=c.input,y=v+(c.avail_in-5),k=c.next_out,Le=c.output,M=k-(f-c.avail_out),T=k+(c.avail_out-257),E=p.dmax,A=p.wsize,C=p.whave,R=p.wnext,N=p.window,j=p.hold,G=p.bits,J=p.lencode,Y=p.distcode,re=(1<<p.lenbits)-1,ye=(1<<p.distbits)-1;e:do{G<15&&(j+=W[v++]<<G,G+=8,j+=W[v++]<<G,G+=8),ke=J[j&re];t:for(;;){if(j>>>=ce=ke>>>24,G-=ce,(ce=ke>>>16&255)===0)Le[k++]=65535&ke;else{if(!(16&ce)){if(!(64&ce)){ke=J[(65535&ke)+(j&(1<<ce)-1)];continue t}if(32&ce){p.mode=12;break e}c.msg="invalid literal/length code",p.mode=30;break e}Ce=65535&ke,(ce&=15)&&(G<ce&&(j+=W[v++]<<G,G+=8),Ce+=j&(1<<ce)-1,j>>>=ce,G-=ce),G<15&&(j+=W[v++]<<G,G+=8,j+=W[v++]<<G,G+=8),ke=Y[j&ye];n:for(;;){if(j>>>=ce=ke>>>24,G-=ce,!(16&(ce=ke>>>16&255))){if(!(64&ce)){ke=Y[(65535&ke)+(j&(1<<ce)-1)];continue n}c.msg="invalid distance code",p.mode=30;break e}if(Ge=65535&ke,G<(ce&=15)&&(j+=W[v++]<<G,(G+=8)<ce&&(j+=W[v++]<<G,G+=8)),E<(Ge+=j&(1<<ce)-1)){c.msg="invalid distance too far back",p.mode=30;break e}if(j>>>=ce,G-=ce,(ce=k-M)<Ge){if(C<(ce=Ge-ce)&&p.sane){c.msg="invalid distance too far back",p.mode=30;break e}if(Ae=N,(oe=0)===R){if(oe+=A-ce,ce<Ce){for(Ce-=ce;Le[k++]=N[oe++],--ce;);oe=k-Ge,Ae=Le}}else if(R<ce){if(oe+=A+R-ce,(ce-=R)<Ce){for(Ce-=ce;Le[k++]=N[oe++],--ce;);if(oe=0,R<Ce){for(Ce-=ce=R;Le[k++]=N[oe++],--ce;);oe=k-Ge,Ae=Le}}}else if(oe+=R-ce,ce<Ce){for(Ce-=ce;Le[k++]=N[oe++],--ce;);oe=k-Ge,Ae=Le}for(;2<Ce;)Le[k++]=Ae[oe++],Le[k++]=Ae[oe++],Le[k++]=Ae[oe++],Ce-=3;Ce&&(Le[k++]=Ae[oe++],1<Ce&&(Le[k++]=Ae[oe++]))}else{for(oe=k-Ge;Le[k++]=Le[oe++],Le[k++]=Le[oe++],Le[k++]=Le[oe++],2<(Ce-=3););Ce&&(Le[k++]=Le[oe++],1<Ce&&(Le[k++]=Le[oe++]))}break}}break}}while(v<y&&k<T);v-=Ce=G>>3,j&=(1<<(G-=Ce<<3))-1,c.next_in=v,c.next_out=k,c.avail_in=v<y?y-v+5:5-(v-y),c.avail_out=k<T?T-k+257:257-(k-T),p.hold=j,p.bits=G}},{}],49:[function(r,a,u){var c=r("../utils/common"),f=r("./adler32"),p=r("./crc32"),v=r("./inffast"),y=r("./inftrees"),k=1,M=2,T=0,E=-2,A=1,C=852,R=592;function N(oe){return(oe>>>24&255)+(oe>>>8&65280)+((65280&oe)<<8)+((255&oe)<<24)}function j(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function G(oe){var Ae;return oe&&oe.state?(Ae=oe.state,oe.total_in=oe.total_out=Ae.total=0,oe.msg="",Ae.wrap&&(oe.adler=1&Ae.wrap),Ae.mode=A,Ae.last=0,Ae.havedict=0,Ae.dmax=32768,Ae.head=null,Ae.hold=0,Ae.bits=0,Ae.lencode=Ae.lendyn=new c.Buf32(C),Ae.distcode=Ae.distdyn=new c.Buf32(R),Ae.sane=1,Ae.back=-1,T):E}function J(oe){var Ae;return oe&&oe.state?((Ae=oe.state).wsize=0,Ae.whave=0,Ae.wnext=0,G(oe)):E}function Y(oe,Ae){var W,Le;return oe&&oe.state?(Le=oe.state,Ae<0?(W=0,Ae=-Ae):(W=1+(Ae>>4),Ae<48&&(Ae&=15)),Ae&&(Ae<8||15<Ae)?E:(Le.window!==null&&Le.wbits!==Ae&&(Le.window=null),Le.wrap=W,Le.wbits=Ae,J(oe))):E}function re(oe,Ae){var W,Le;return oe?(Le=new j,(oe.state=Le).window=null,(W=Y(oe,Ae))!==T&&(oe.state=null),W):E}var ye,ke,ce=!0;function Ce(oe){if(ce){var Ae;for(ye=new c.Buf32(512),ke=new c.Buf32(32),Ae=0;Ae<144;)oe.lens[Ae++]=8;for(;Ae<256;)oe.lens[Ae++]=9;for(;Ae<280;)oe.lens[Ae++]=7;for(;Ae<288;)oe.lens[Ae++]=8;for(y(k,oe.lens,0,288,ye,0,oe.work,{bits:9}),Ae=0;Ae<32;)oe.lens[Ae++]=5;y(M,oe.lens,0,32,ke,0,oe.work,{bits:5}),ce=!1}oe.lencode=ye,oe.lenbits=9,oe.distcode=ke,oe.distbits=5}function Ge(oe,Ae,W,Le){var kt,Te=oe.state;return Te.window===null&&(Te.wsize=1<<Te.wbits,Te.wnext=0,Te.whave=0,Te.window=new c.Buf8(Te.wsize)),Le>=Te.wsize?(c.arraySet(Te.window,Ae,W-Te.wsize,Te.wsize,0),Te.wnext=0,Te.whave=Te.wsize):(Le<(kt=Te.wsize-Te.wnext)&&(kt=Le),c.arraySet(Te.window,Ae,W-Le,kt,Te.wnext),(Le-=kt)?(c.arraySet(Te.window,Ae,W-Le,Le,0),Te.wnext=Le,Te.whave=Te.wsize):(Te.wnext+=kt,Te.wnext===Te.wsize&&(Te.wnext=0),Te.whave<Te.wsize&&(Te.whave+=kt))),0}u.inflateReset=J,u.inflateReset2=Y,u.inflateResetKeep=G,u.inflateInit=function(oe){return re(oe,15)},u.inflateInit2=re,u.inflate=function(oe,Ae){var W,Le,kt,Te,Se,Ne,pt,ae,de,Ke,Ze,nt,Fe,Gt,ct,jt,nn,gn,dn,ar,$,it,rt,ve,pe=0,Be=new c.Buf8(4),gt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!oe||!oe.state||!oe.output||!oe.input&&oe.avail_in!==0)return E;(W=oe.state).mode===12&&(W.mode=13),Se=oe.next_out,kt=oe.output,pt=oe.avail_out,Te=oe.next_in,Le=oe.input,Ne=oe.avail_in,ae=W.hold,de=W.bits,Ke=Ne,Ze=pt,it=T;e:for(;;)switch(W.mode){case A:if(W.wrap===0){W.mode=13;break}for(;de<16;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(2&W.wrap&&ae===35615){Be[W.check=0]=255&ae,Be[1]=ae>>>8&255,W.check=p(W.check,Be,2,0),de=ae=0,W.mode=2;break}if(W.flags=0,W.head&&(W.head.done=!1),!(1&W.wrap)||(((255&ae)<<8)+(ae>>8))%31){oe.msg="incorrect header check",W.mode=30;break}if((15&ae)!=8){oe.msg="unknown compression method",W.mode=30;break}if(de-=4,$=8+(15&(ae>>>=4)),W.wbits===0)W.wbits=$;else if($>W.wbits){oe.msg="invalid window size",W.mode=30;break}W.dmax=1<<$,oe.adler=W.check=1,W.mode=512&ae?10:12,de=ae=0;break;case 2:for(;de<16;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(W.flags=ae,(255&W.flags)!=8){oe.msg="unknown compression method",W.mode=30;break}if(57344&W.flags){oe.msg="unknown header flags set",W.mode=30;break}W.head&&(W.head.text=ae>>8&1),512&W.flags&&(Be[0]=255&ae,Be[1]=ae>>>8&255,W.check=p(W.check,Be,2,0)),de=ae=0,W.mode=3;case 3:for(;de<32;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.head&&(W.head.time=ae),512&W.flags&&(Be[0]=255&ae,Be[1]=ae>>>8&255,Be[2]=ae>>>16&255,Be[3]=ae>>>24&255,W.check=p(W.check,Be,4,0)),de=ae=0,W.mode=4;case 4:for(;de<16;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.head&&(W.head.xflags=255&ae,W.head.os=ae>>8),512&W.flags&&(Be[0]=255&ae,Be[1]=ae>>>8&255,W.check=p(W.check,Be,2,0)),de=ae=0,W.mode=5;case 5:if(1024&W.flags){for(;de<16;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.length=ae,W.head&&(W.head.extra_len=ae),512&W.flags&&(Be[0]=255&ae,Be[1]=ae>>>8&255,W.check=p(W.check,Be,2,0)),de=ae=0}else W.head&&(W.head.extra=null);W.mode=6;case 6:if(1024&W.flags&&(Ne<(nt=W.length)&&(nt=Ne),nt&&(W.head&&($=W.head.extra_len-W.length,W.head.extra||(W.head.extra=new Array(W.head.extra_len)),c.arraySet(W.head.extra,Le,Te,nt,$)),512&W.flags&&(W.check=p(W.check,Le,nt,Te)),Ne-=nt,Te+=nt,W.length-=nt),W.length))break e;W.length=0,W.mode=7;case 7:if(2048&W.flags){if(Ne===0)break e;for(nt=0;$=Le[Te+nt++],W.head&&$&&W.length<65536&&(W.head.name+=String.fromCharCode($)),$&&nt<Ne;);if(512&W.flags&&(W.check=p(W.check,Le,nt,Te)),Ne-=nt,Te+=nt,$)break e}else W.head&&(W.head.name=null);W.length=0,W.mode=8;case 8:if(4096&W.flags){if(Ne===0)break e;for(nt=0;$=Le[Te+nt++],W.head&&$&&W.length<65536&&(W.head.comment+=String.fromCharCode($)),$&&nt<Ne;);if(512&W.flags&&(W.check=p(W.check,Le,nt,Te)),Ne-=nt,Te+=nt,$)break e}else W.head&&(W.head.comment=null);W.mode=9;case 9:if(512&W.flags){for(;de<16;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(ae!==(65535&W.check)){oe.msg="header crc mismatch",W.mode=30;break}de=ae=0}W.head&&(W.head.hcrc=W.flags>>9&1,W.head.done=!0),oe.adler=W.check=0,W.mode=12;break;case 10:for(;de<32;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}oe.adler=W.check=N(ae),de=ae=0,W.mode=11;case 11:if(W.havedict===0)return oe.next_out=Se,oe.avail_out=pt,oe.next_in=Te,oe.avail_in=Ne,W.hold=ae,W.bits=de,2;oe.adler=W.check=1,W.mode=12;case 12:if(Ae===5||Ae===6)break e;case 13:if(W.last){ae>>>=7&de,de-=7&de,W.mode=27;break}for(;de<3;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}switch(W.last=1&ae,de-=1,3&(ae>>>=1)){case 0:W.mode=14;break;case 1:if(Ce(W),W.mode=20,Ae!==6)break;ae>>>=2,de-=2;break e;case 2:W.mode=17;break;case 3:oe.msg="invalid block type",W.mode=30}ae>>>=2,de-=2;break;case 14:for(ae>>>=7&de,de-=7&de;de<32;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if((65535&ae)!=(ae>>>16^65535)){oe.msg="invalid stored block lengths",W.mode=30;break}if(W.length=65535&ae,de=ae=0,W.mode=15,Ae===6)break e;case 15:W.mode=16;case 16:if(nt=W.length){if(Ne<nt&&(nt=Ne),pt<nt&&(nt=pt),nt===0)break e;c.arraySet(kt,Le,Te,nt,Se),Ne-=nt,Te+=nt,pt-=nt,Se+=nt,W.length-=nt;break}W.mode=12;break;case 17:for(;de<14;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(W.nlen=257+(31&ae),ae>>>=5,de-=5,W.ndist=1+(31&ae),ae>>>=5,de-=5,W.ncode=4+(15&ae),ae>>>=4,de-=4,286<W.nlen||30<W.ndist){oe.msg="too many length or distance symbols",W.mode=30;break}W.have=0,W.mode=18;case 18:for(;W.have<W.ncode;){for(;de<3;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.lens[gt[W.have++]]=7&ae,ae>>>=3,de-=3}for(;W.have<19;)W.lens[gt[W.have++]]=0;if(W.lencode=W.lendyn,W.lenbits=7,rt={bits:W.lenbits},it=y(0,W.lens,0,19,W.lencode,0,W.work,rt),W.lenbits=rt.bits,it){oe.msg="invalid code lengths set",W.mode=30;break}W.have=0,W.mode=19;case 19:for(;W.have<W.nlen+W.ndist;){for(;jt=(pe=W.lencode[ae&(1<<W.lenbits)-1])>>>16&255,nn=65535&pe,!((ct=pe>>>24)<=de);){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(nn<16)ae>>>=ct,de-=ct,W.lens[W.have++]=nn;else{if(nn===16){for(ve=ct+2;de<ve;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(ae>>>=ct,de-=ct,W.have===0){oe.msg="invalid bit length repeat",W.mode=30;break}$=W.lens[W.have-1],nt=3+(3&ae),ae>>>=2,de-=2}else if(nn===17){for(ve=ct+3;de<ve;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}de-=ct,$=0,nt=3+(7&(ae>>>=ct)),ae>>>=3,de-=3}else{for(ve=ct+7;de<ve;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}de-=ct,$=0,nt=11+(127&(ae>>>=ct)),ae>>>=7,de-=7}if(W.have+nt>W.nlen+W.ndist){oe.msg="invalid bit length repeat",W.mode=30;break}for(;nt--;)W.lens[W.have++]=$}}if(W.mode===30)break;if(W.lens[256]===0){oe.msg="invalid code -- missing end-of-block",W.mode=30;break}if(W.lenbits=9,rt={bits:W.lenbits},it=y(k,W.lens,0,W.nlen,W.lencode,0,W.work,rt),W.lenbits=rt.bits,it){oe.msg="invalid literal/lengths set",W.mode=30;break}if(W.distbits=6,W.distcode=W.distdyn,rt={bits:W.distbits},it=y(M,W.lens,W.nlen,W.ndist,W.distcode,0,W.work,rt),W.distbits=rt.bits,it){oe.msg="invalid distances set",W.mode=30;break}if(W.mode=20,Ae===6)break e;case 20:W.mode=21;case 21:if(6<=Ne&&258<=pt){oe.next_out=Se,oe.avail_out=pt,oe.next_in=Te,oe.avail_in=Ne,W.hold=ae,W.bits=de,v(oe,Ze),Se=oe.next_out,kt=oe.output,pt=oe.avail_out,Te=oe.next_in,Le=oe.input,Ne=oe.avail_in,ae=W.hold,de=W.bits,W.mode===12&&(W.back=-1);break}for(W.back=0;jt=(pe=W.lencode[ae&(1<<W.lenbits)-1])>>>16&255,nn=65535&pe,!((ct=pe>>>24)<=de);){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(jt&&!(240&jt)){for(gn=ct,dn=jt,ar=nn;jt=(pe=W.lencode[ar+((ae&(1<<gn+dn)-1)>>gn)])>>>16&255,nn=65535&pe,!(gn+(ct=pe>>>24)<=de);){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}ae>>>=gn,de-=gn,W.back+=gn}if(ae>>>=ct,de-=ct,W.back+=ct,W.length=nn,jt===0){W.mode=26;break}if(32&jt){W.back=-1,W.mode=12;break}if(64&jt){oe.msg="invalid literal/length code",W.mode=30;break}W.extra=15&jt,W.mode=22;case 22:if(W.extra){for(ve=W.extra;de<ve;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.length+=ae&(1<<W.extra)-1,ae>>>=W.extra,de-=W.extra,W.back+=W.extra}W.was=W.length,W.mode=23;case 23:for(;jt=(pe=W.distcode[ae&(1<<W.distbits)-1])>>>16&255,nn=65535&pe,!((ct=pe>>>24)<=de);){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(!(240&jt)){for(gn=ct,dn=jt,ar=nn;jt=(pe=W.distcode[ar+((ae&(1<<gn+dn)-1)>>gn)])>>>16&255,nn=65535&pe,!(gn+(ct=pe>>>24)<=de);){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}ae>>>=gn,de-=gn,W.back+=gn}if(ae>>>=ct,de-=ct,W.back+=ct,64&jt){oe.msg="invalid distance code",W.mode=30;break}W.offset=nn,W.extra=15&jt,W.mode=24;case 24:if(W.extra){for(ve=W.extra;de<ve;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}W.offset+=ae&(1<<W.extra)-1,ae>>>=W.extra,de-=W.extra,W.back+=W.extra}if(W.offset>W.dmax){oe.msg="invalid distance too far back",W.mode=30;break}W.mode=25;case 25:if(pt===0)break e;if(nt=Ze-pt,W.offset>nt){if((nt=W.offset-nt)>W.whave&&W.sane){oe.msg="invalid distance too far back",W.mode=30;break}Fe=nt>W.wnext?(nt-=W.wnext,W.wsize-nt):W.wnext-nt,nt>W.length&&(nt=W.length),Gt=W.window}else Gt=kt,Fe=Se-W.offset,nt=W.length;for(pt<nt&&(nt=pt),pt-=nt,W.length-=nt;kt[Se++]=Gt[Fe++],--nt;);W.length===0&&(W.mode=21);break;case 26:if(pt===0)break e;kt[Se++]=W.length,pt--,W.mode=21;break;case 27:if(W.wrap){for(;de<32;){if(Ne===0)break e;Ne--,ae|=Le[Te++]<<de,de+=8}if(Ze-=pt,oe.total_out+=Ze,W.total+=Ze,Ze&&(oe.adler=W.check=W.flags?p(W.check,kt,Ze,Se-Ze):f(W.check,kt,Ze,Se-Ze)),Ze=pt,(W.flags?ae:N(ae))!==W.check){oe.msg="incorrect data check",W.mode=30;break}de=ae=0}W.mode=28;case 28:if(W.wrap&&W.flags){for(;de<32;){if(Ne===0)break e;Ne--,ae+=Le[Te++]<<de,de+=8}if(ae!==(4294967295&W.total)){oe.msg="incorrect length check",W.mode=30;break}de=ae=0}W.mode=29;case 29:it=1;break e;case 30:it=-3;break e;case 31:return-4;case 32:default:return E}return oe.next_out=Se,oe.avail_out=pt,oe.next_in=Te,oe.avail_in=Ne,W.hold=ae,W.bits=de,(W.wsize||Ze!==oe.avail_out&&W.mode<30&&(W.mode<27||Ae!==4))&&Ge(oe,oe.output,oe.next_out,Ze-oe.avail_out)?(W.mode=31,-4):(Ke-=oe.avail_in,Ze-=oe.avail_out,oe.total_in+=Ke,oe.total_out+=Ze,W.total+=Ze,W.wrap&&Ze&&(oe.adler=W.check=W.flags?p(W.check,kt,Ze,oe.next_out-Ze):f(W.check,kt,Ze,oe.next_out-Ze)),oe.data_type=W.bits+(W.last?64:0)+(W.mode===12?128:0)+(W.mode===20||W.mode===15?256:0),(Ke==0&&Ze===0||Ae===4)&&it===T&&(it=-5),it)},u.inflateEnd=function(oe){if(!oe||!oe.state)return E;var Ae=oe.state;return Ae.window&&(Ae.window=null),oe.state=null,T},u.inflateGetHeader=function(oe,Ae){var W;return oe&&oe.state&&2&(W=oe.state).wrap?((W.head=Ae).done=!1,T):E},u.inflateSetDictionary=function(oe,Ae){var W,Le=Ae.length;return oe&&oe.state?(W=oe.state).wrap!==0&&W.mode!==11?E:W.mode===11&&f(1,Ae,Le,0)!==W.check?-3:Ge(oe,Ae,Le,Le)?(W.mode=31,-4):(W.havedict=1,T):E},u.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(r,a,u){var c=r("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],v=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],y=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];a.exports=function(k,M,T,E,A,C,R,N){var j,G,J,Y,re,ye,ke,ce,Ce,Ge=N.bits,oe=0,Ae=0,W=0,Le=0,kt=0,Te=0,Se=0,Ne=0,pt=0,ae=0,de=null,Ke=0,Ze=new c.Buf16(16),nt=new c.Buf16(16),Fe=null,Gt=0;for(oe=0;oe<=15;oe++)Ze[oe]=0;for(Ae=0;Ae<E;Ae++)Ze[M[T+Ae]]++;for(kt=Ge,Le=15;1<=Le&&Ze[Le]===0;Le--);if(Le<kt&&(kt=Le),Le===0)return A[C++]=20971520,A[C++]=20971520,N.bits=1,0;for(W=1;W<Le&&Ze[W]===0;W++);for(kt<W&&(kt=W),oe=Ne=1;oe<=15;oe++)if(Ne<<=1,(Ne-=Ze[oe])<0)return-1;if(0<Ne&&(k===0||Le!==1))return-1;for(nt[1]=0,oe=1;oe<15;oe++)nt[oe+1]=nt[oe]+Ze[oe];for(Ae=0;Ae<E;Ae++)M[T+Ae]!==0&&(R[nt[M[T+Ae]]++]=Ae);if(ye=k===0?(de=Fe=R,19):k===1?(de=f,Ke-=257,Fe=p,Gt-=257,256):(de=v,Fe=y,-1),oe=W,re=C,Se=Ae=ae=0,J=-1,Y=(pt=1<<(Te=kt))-1,k===1&&852<pt||k===2&&592<pt)return 1;for(;;){for(ke=oe-Se,Ce=R[Ae]<ye?(ce=0,R[Ae]):R[Ae]>ye?(ce=Fe[Gt+R[Ae]],de[Ke+R[Ae]]):(ce=96,0),j=1<<oe-Se,W=G=1<<Te;A[re+(ae>>Se)+(G-=j)]=ke<<24|ce<<16|Ce|0,G!==0;);for(j=1<<oe-1;ae&j;)j>>=1;if(j!==0?(ae&=j-1,ae+=j):ae=0,Ae++,--Ze[oe]==0){if(oe===Le)break;oe=M[T+R[Ae]]}if(kt<oe&&(ae&Y)!==J){for(Se===0&&(Se=kt),re+=W,Ne=1<<(Te=oe-Se);Te+Se<Le&&!((Ne-=Ze[Te+Se])<=0);)Te++,Ne<<=1;if(pt+=1<<Te,k===1&&852<pt||k===2&&592<pt)return 1;A[J=ae&Y]=kt<<24|Te<<16|re-C|0}}return ae!==0&&(A[re+ae]=oe-Se<<24|64<<16|0),N.bits=kt,0}},{"../utils/common":41}],51:[function(r,a,u){a.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(r,a,u){var c=r("../utils/common"),f=0,p=1;function v(pe){for(var Be=pe.length;0<=--Be;)pe[Be]=0}var y=0,k=29,M=256,T=M+1+k,E=30,A=19,C=2*T+1,R=15,N=16,j=7,G=256,J=16,Y=17,re=18,ye=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ke=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],ce=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Ge=new Array(2*(T+2));v(Ge);var oe=new Array(2*E);v(oe);var Ae=new Array(512);v(Ae);var W=new Array(256);v(W);var Le=new Array(k);v(Le);var kt,Te,Se,Ne=new Array(E);function pt(pe,Be,gt,xt,Xe){this.static_tree=pe,this.extra_bits=Be,this.extra_base=gt,this.elems=xt,this.max_length=Xe,this.has_stree=pe&&pe.length}function ae(pe,Be){this.dyn_tree=pe,this.max_code=0,this.stat_desc=Be}function de(pe){return pe<256?Ae[pe]:Ae[256+(pe>>>7)]}function Ke(pe,Be){pe.pending_buf[pe.pending++]=255&Be,pe.pending_buf[pe.pending++]=Be>>>8&255}function Ze(pe,Be,gt){pe.bi_valid>N-gt?(pe.bi_buf|=Be<<pe.bi_valid&65535,Ke(pe,pe.bi_buf),pe.bi_buf=Be>>N-pe.bi_valid,pe.bi_valid+=gt-N):(pe.bi_buf|=Be<<pe.bi_valid&65535,pe.bi_valid+=gt)}function nt(pe,Be,gt){Ze(pe,gt[2*Be],gt[2*Be+1])}function Fe(pe,Be){for(var gt=0;gt|=1&pe,pe>>>=1,gt<<=1,0<--Be;);return gt>>>1}function Gt(pe,Be,gt){var xt,Xe,Tt=new Array(R+1),_t=0;for(xt=1;xt<=R;xt++)Tt[xt]=_t=_t+gt[xt-1]<<1;for(Xe=0;Xe<=Be;Xe++){var wt=pe[2*Xe+1];wt!==0&&(pe[2*Xe]=Fe(Tt[wt]++,wt))}}function ct(pe){var Be;for(Be=0;Be<T;Be++)pe.dyn_ltree[2*Be]=0;for(Be=0;Be<E;Be++)pe.dyn_dtree[2*Be]=0;for(Be=0;Be<A;Be++)pe.bl_tree[2*Be]=0;pe.dyn_ltree[2*G]=1,pe.opt_len=pe.static_len=0,pe.last_lit=pe.matches=0}function jt(pe){8<pe.bi_valid?Ke(pe,pe.bi_buf):0<pe.bi_valid&&(pe.pending_buf[pe.pending++]=pe.bi_buf),pe.bi_buf=0,pe.bi_valid=0}function nn(pe,Be,gt,xt){var Xe=2*Be,Tt=2*gt;return pe[Xe]<pe[Tt]||pe[Xe]===pe[Tt]&&xt[Be]<=xt[gt]}function gn(pe,Be,gt){for(var xt=pe.heap[gt],Xe=gt<<1;Xe<=pe.heap_len&&(Xe<pe.heap_len&&nn(Be,pe.heap[Xe+1],pe.heap[Xe],pe.depth)&&Xe++,!nn(Be,xt,pe.heap[Xe],pe.depth));)pe.heap[gt]=pe.heap[Xe],gt=Xe,Xe<<=1;pe.heap[gt]=xt}function dn(pe,Be,gt){var xt,Xe,Tt,_t,wt=0;if(pe.last_lit!==0)for(;xt=pe.pending_buf[pe.d_buf+2*wt]<<8|pe.pending_buf[pe.d_buf+2*wt+1],Xe=pe.pending_buf[pe.l_buf+wt],wt++,xt===0?nt(pe,Xe,Be):(nt(pe,(Tt=W[Xe])+M+1,Be),(_t=ye[Tt])!==0&&Ze(pe,Xe-=Le[Tt],_t),nt(pe,Tt=de(--xt),gt),(_t=ke[Tt])!==0&&Ze(pe,xt-=Ne[Tt],_t)),wt<pe.last_lit;);nt(pe,G,Be)}function ar(pe,Be){var gt,xt,Xe,Tt=Be.dyn_tree,_t=Be.stat_desc.static_tree,wt=Be.stat_desc.has_stree,un=Be.stat_desc.elems,rr=-1;for(pe.heap_len=0,pe.heap_max=C,gt=0;gt<un;gt++)Tt[2*gt]!==0?(pe.heap[++pe.heap_len]=rr=gt,pe.depth[gt]=0):Tt[2*gt+1]=0;for(;pe.heap_len<2;)Tt[2*(Xe=pe.heap[++pe.heap_len]=rr<2?++rr:0)]=1,pe.depth[Xe]=0,pe.opt_len--,wt&&(pe.static_len-=_t[2*Xe+1]);for(Be.max_code=rr,gt=pe.heap_len>>1;1<=gt;gt--)gn(pe,Tt,gt);for(Xe=un;gt=pe.heap[1],pe.heap[1]=pe.heap[pe.heap_len--],gn(pe,Tt,1),xt=pe.heap[1],pe.heap[--pe.heap_max]=gt,pe.heap[--pe.heap_max]=xt,Tt[2*Xe]=Tt[2*gt]+Tt[2*xt],pe.depth[Xe]=(pe.depth[gt]>=pe.depth[xt]?pe.depth[gt]:pe.depth[xt])+1,Tt[2*gt+1]=Tt[2*xt+1]=Xe,pe.heap[1]=Xe++,gn(pe,Tt,1),2<=pe.heap_len;);pe.heap[--pe.heap_max]=pe.heap[1],function(Mn,$i){var fd,ao,Ms,Hr,gh,Eg,Ps=$i.dyn_tree,kg=$i.max_code,f_=$i.stat_desc.static_tree,h_=$i.stat_desc.has_stree,p_=$i.stat_desc.extra_bits,Tg=$i.stat_desc.extra_base,ja=$i.stat_desc.max_length,Cs=0;for(Hr=0;Hr<=R;Hr++)Mn.bl_count[Hr]=0;for(Ps[2*Mn.heap[Mn.heap_max]+1]=0,fd=Mn.heap_max+1;fd<C;fd++)ja<(Hr=Ps[2*Ps[2*(ao=Mn.heap[fd])+1]+1]+1)&&(Hr=ja,Cs++),Ps[2*ao+1]=Hr,kg<ao||(Mn.bl_count[Hr]++,gh=0,Tg<=ao&&(gh=p_[ao-Tg]),Eg=Ps[2*ao],Mn.opt_len+=Eg*(Hr+gh),h_&&(Mn.static_len+=Eg*(f_[2*ao+1]+gh)));if(Cs!==0){do{for(Hr=ja-1;Mn.bl_count[Hr]===0;)Hr--;Mn.bl_count[Hr]--,Mn.bl_count[Hr+1]+=2,Mn.bl_count[ja]--,Cs-=2}while(0<Cs);for(Hr=ja;Hr!==0;Hr--)for(ao=Mn.bl_count[Hr];ao!==0;)kg<(Ms=Mn.heap[--fd])||(Ps[2*Ms+1]!==Hr&&(Mn.opt_len+=(Hr-Ps[2*Ms+1])*Ps[2*Ms],Ps[2*Ms+1]=Hr),ao--)}}(pe,Be),Gt(Tt,rr,pe.bl_count)}function $(pe,Be,gt){var xt,Xe,Tt=-1,_t=Be[1],wt=0,un=7,rr=4;for(_t===0&&(un=138,rr=3),Be[2*(gt+1)+1]=65535,xt=0;xt<=gt;xt++)Xe=_t,_t=Be[2*(xt+1)+1],++wt<un&&Xe===_t||(wt<rr?pe.bl_tree[2*Xe]+=wt:Xe!==0?(Xe!==Tt&&pe.bl_tree[2*Xe]++,pe.bl_tree[2*J]++):wt<=10?pe.bl_tree[2*Y]++:pe.bl_tree[2*re]++,Tt=Xe,rr=(wt=0)===_t?(un=138,3):Xe===_t?(un=6,3):(un=7,4))}function it(pe,Be,gt){var xt,Xe,Tt=-1,_t=Be[1],wt=0,un=7,rr=4;for(_t===0&&(un=138,rr=3),xt=0;xt<=gt;xt++)if(Xe=_t,_t=Be[2*(xt+1)+1],!(++wt<un&&Xe===_t)){if(wt<rr)for(;nt(pe,Xe,pe.bl_tree),--wt!=0;);else Xe!==0?(Xe!==Tt&&(nt(pe,Xe,pe.bl_tree),wt--),nt(pe,J,pe.bl_tree),Ze(pe,wt-3,2)):wt<=10?(nt(pe,Y,pe.bl_tree),Ze(pe,wt-3,3)):(nt(pe,re,pe.bl_tree),Ze(pe,wt-11,7));Tt=Xe,rr=(wt=0)===_t?(un=138,3):Xe===_t?(un=6,3):(un=7,4)}}v(Ne);var rt=!1;function ve(pe,Be,gt,xt){Ze(pe,(y<<1)+(xt?1:0),3),function(Xe,Tt,_t,wt){jt(Xe),wt&&(Ke(Xe,_t),Ke(Xe,~_t)),c.arraySet(Xe.pending_buf,Xe.window,Tt,_t,Xe.pending),Xe.pending+=_t}(pe,Be,gt,!0)}u._tr_init=function(pe){rt||(function(){var Be,gt,xt,Xe,Tt,_t=new Array(R+1);for(Xe=xt=0;Xe<k-1;Xe++)for(Le[Xe]=xt,Be=0;Be<1<<ye[Xe];Be++)W[xt++]=Xe;for(W[xt-1]=Xe,Xe=Tt=0;Xe<16;Xe++)for(Ne[Xe]=Tt,Be=0;Be<1<<ke[Xe];Be++)Ae[Tt++]=Xe;for(Tt>>=7;Xe<E;Xe++)for(Ne[Xe]=Tt<<7,Be=0;Be<1<<ke[Xe]-7;Be++)Ae[256+Tt++]=Xe;for(gt=0;gt<=R;gt++)_t[gt]=0;for(Be=0;Be<=143;)Ge[2*Be+1]=8,Be++,_t[8]++;for(;Be<=255;)Ge[2*Be+1]=9,Be++,_t[9]++;for(;Be<=279;)Ge[2*Be+1]=7,Be++,_t[7]++;for(;Be<=287;)Ge[2*Be+1]=8,Be++,_t[8]++;for(Gt(Ge,T+1,_t),Be=0;Be<E;Be++)oe[2*Be+1]=5,oe[2*Be]=Fe(Be,5);kt=new pt(Ge,ye,M+1,T,R),Te=new pt(oe,ke,0,E,R),Se=new pt(new Array(0),ce,0,A,j)}(),rt=!0),pe.l_desc=new ae(pe.dyn_ltree,kt),pe.d_desc=new ae(pe.dyn_dtree,Te),pe.bl_desc=new ae(pe.bl_tree,Se),pe.bi_buf=0,pe.bi_valid=0,ct(pe)},u._tr_stored_block=ve,u._tr_flush_block=function(pe,Be,gt,xt){var Xe,Tt,_t=0;0<pe.level?(pe.strm.data_type===2&&(pe.strm.data_type=function(wt){var un,rr=4093624447;for(un=0;un<=31;un++,rr>>>=1)if(1&rr&&wt.dyn_ltree[2*un]!==0)return f;if(wt.dyn_ltree[18]!==0||wt.dyn_ltree[20]!==0||wt.dyn_ltree[26]!==0)return p;for(un=32;un<M;un++)if(wt.dyn_ltree[2*un]!==0)return p;return f}(pe)),ar(pe,pe.l_desc),ar(pe,pe.d_desc),_t=function(wt){var un;for($(wt,wt.dyn_ltree,wt.l_desc.max_code),$(wt,wt.dyn_dtree,wt.d_desc.max_code),ar(wt,wt.bl_desc),un=A-1;3<=un&&wt.bl_tree[2*Ce[un]+1]===0;un--);return wt.opt_len+=3*(un+1)+5+5+4,un}(pe),Xe=pe.opt_len+3+7>>>3,(Tt=pe.static_len+3+7>>>3)<=Xe&&(Xe=Tt)):Xe=Tt=gt+5,gt+4<=Xe&&Be!==-1?ve(pe,Be,gt,xt):pe.strategy===4||Tt===Xe?(Ze(pe,2+(xt?1:0),3),dn(pe,Ge,oe)):(Ze(pe,4+(xt?1:0),3),function(wt,un,rr,Mn){var $i;for(Ze(wt,un-257,5),Ze(wt,rr-1,5),Ze(wt,Mn-4,4),$i=0;$i<Mn;$i++)Ze(wt,wt.bl_tree[2*Ce[$i]+1],3);it(wt,wt.dyn_ltree,un-1),it(wt,wt.dyn_dtree,rr-1)}(pe,pe.l_desc.max_code+1,pe.d_desc.max_code+1,_t+1),dn(pe,pe.dyn_ltree,pe.dyn_dtree)),ct(pe),xt&&jt(pe)},u._tr_tally=function(pe,Be,gt){return pe.pending_buf[pe.d_buf+2*pe.last_lit]=Be>>>8&255,pe.pending_buf[pe.d_buf+2*pe.last_lit+1]=255&Be,pe.pending_buf[pe.l_buf+pe.last_lit]=255&gt,pe.last_lit++,Be===0?pe.dyn_ltree[2*gt]++:(pe.matches++,Be--,pe.dyn_ltree[2*(W[gt]+M+1)]++,pe.dyn_dtree[2*de(Be)]++),pe.last_lit===pe.lit_bufsize-1},u._tr_align=function(pe){Ze(pe,2,3),nt(pe,G,Ge),function(Be){Be.bi_valid===16?(Ke(Be,Be.bi_buf),Be.bi_buf=0,Be.bi_valid=0):8<=Be.bi_valid&&(Be.pending_buf[Be.pending++]=255&Be.bi_buf,Be.bi_buf>>=8,Be.bi_valid-=8)}(pe)}},{"../utils/common":41}],53:[function(r,a,u){a.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(r,a,u){(function(c){(function(f,p){if(!f.setImmediate){var v,y,k,M,T=1,E={},A=!1,C=f.document,R=Object.getPrototypeOf&&Object.getPrototypeOf(f);R=R&&R.setTimeout?R:f,v={}.toString.call(f.process)==="[object process]"?function(J){process.nextTick(function(){j(J)})}:function(){if(f.postMessage&&!f.importScripts){var J=!0,Y=f.onmessage;return f.onmessage=function(){J=!1},f.postMessage("","*"),f.onmessage=Y,J}}()?(M="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",G,!1):f.attachEvent("onmessage",G),function(J){f.postMessage(M+J,"*")}):f.MessageChannel?((k=new MessageChannel).port1.onmessage=function(J){j(J.data)},function(J){k.port2.postMessage(J)}):C&&"onreadystatechange"in C.createElement("script")?(y=C.documentElement,function(J){var Y=C.createElement("script");Y.onreadystatechange=function(){j(J),Y.onreadystatechange=null,y.removeChild(Y),Y=null},y.appendChild(Y)}):function(J){setTimeout(j,0,J)},R.setImmediate=function(J){typeof J!="function"&&(J=new Function(""+J));for(var Y=new Array(arguments.length-1),re=0;re<Y.length;re++)Y[re]=arguments[re+1];var ye={callback:J,args:Y};return E[T]=ye,v(T),T++},R.clearImmediate=N}function N(J){delete E[J]}function j(J){if(A)setTimeout(j,0,J);else{var Y=E[J];if(Y){A=!0;try{(function(re){var ye=re.callback,ke=re.args;switch(ke.length){case 0:ye();break;case 1:ye(ke[0]);break;case 2:ye(ke[0],ke[1]);break;case 3:ye(ke[0],ke[1],ke[2]);break;default:ye.apply(p,ke)}})(Y)}finally{N(J),A=!1}}}}function G(J){J.source===f&&typeof J.data=="string"&&J.data.indexOf(M)===0&&j(+J.data.slice(M.length))}})(typeof self=="undefined"?c===void 0?this:c:self)}).call(this,typeof qr!="undefined"?qr:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{}]},{},[10])(10)})}),GI,Pk,jU,WI,UU,VU,kb,HU,qI,GU,Ck,Tb,Mb,$c,WU,qU,KU,tg,Uo,XU,$U,KI,Ak,nse=z(()=>{GI=te(Ie(),1),Pk=te(Ie(),1),jU=e=>typeof e=="function",WI=(e,n)=>jU(e)?e(n):e,UU=(()=>{let e=0;return()=>(++e).toString()})(),VU=20,kb=new Map,HU=1e3,qI=e=>{if(kb.has(e))return;let n=setTimeout(()=>{kb.delete(e),$c({type:4,toastId:e})},HU);kb.set(e,n)},GU=e=>{let n=kb.get(e);n&&clearTimeout(n)},Ck=(e,n)=>{switch(n.type){case 0:return q(O({},e),{toasts:[n.toast,...e.toasts].slice(0,VU)});case 1:return n.toast.id&&GU(n.toast.id),q(O({},e),{toasts:e.toasts.map(c=>c.id===n.toast.id?O(O({},c),n.toast):c)});case 2:let{toast:r}=n;return e.toasts.find(c=>c.id===r.id)?Ck(e,{type:1,toast:r}):Ck(e,{type:0,toast:r});case 3:let{toastId:a}=n;return a?qI(a):e.toasts.forEach(c=>{qI(c.id)}),q(O({},e),{toasts:e.toasts.map(c=>c.id===a||a===void 0?q(O({},c),{visible:!1}):c)});case 4:return n.toastId===void 0?q(O({},e),{toasts:[]}):q(O({},e),{toasts:e.toasts.filter(c=>c.id!==n.toastId)});case 5:return q(O({},e),{pausedAt:n.time});case 6:let u=n.time-(e.pausedAt||0);return q(O({},e),{pausedAt:void 0,toasts:e.toasts.map(c=>q(O({},c),{pauseDuration:c.pauseDuration+u}))})}},Tb=[],Mb={toasts:[],pausedAt:void 0},$c=e=>{Mb=Ck(Mb,e),Tb.forEach(n=>{n(Mb)})},WU={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},qU=(e={})=>{let[n,r]=(0,GI.useState)(Mb);(0,GI.useEffect)(()=>(Tb.push(r),()=>{let u=Tb.indexOf(r);u>-1&&Tb.splice(u,1)}),[n]);let a=n.toasts.map(u=>{var c,f;return q(O(O(O({},e),e[u.type]),u),{duration:u.duration||((c=e[u.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||WU[u.type],style:O(O(O({},e.style),(f=e[u.type])==null?void 0:f.style),u.style)})});return q(O({},n),{toasts:a})},KU=(e,n="blank",r)=>q(O({createdAt:Date.now(),visible:!0,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},r),{id:(r==null?void 0:r.id)||UU()}),tg=e=>(n,r)=>{let a=KU(n,e,r);return $c({type:2,toast:a}),a.id},Uo=(e,n)=>tg("blank")(e,n),Uo.error=tg("error"),Uo.success=tg("success"),Uo.loading=tg("loading"),Uo.custom=tg("custom"),Uo.dismiss=e=>{$c({type:3,toastId:e})},Uo.remove=e=>$c({type:4,toastId:e}),Uo.promise=(e,n,r)=>{let a=Uo.loading(n.loading,O(O({},r),r==null?void 0:r.loading));return e.then(u=>(Uo.success(WI(n.success,u),O(O({id:a},r),r==null?void 0:r.success)),u)).catch(u=>{Uo.error(WI(n.error,u),O(O({id:a},r),r==null?void 0:r.error))}),e},XU=(e,n)=>{$c({type:1,toast:{id:e,height:n}})},$U=()=>{$c({type:5,time:Date.now()})},KI=e=>{let{toasts:n,pausedAt:r}=qU(e);(0,Pk.useEffect)(()=>{if(r)return;let c=Date.now(),f=n.map(p=>{if(p.duration===1/0)return;let v=(p.duration||0)+p.pauseDuration-(c-p.createdAt);if(v<0){p.visible&&Uo.dismiss(p.id);return}return setTimeout(()=>Uo.dismiss(p.id),v)});return()=>{f.forEach(p=>p&&clearTimeout(p))}},[n,r]);let a=(0,Pk.useCallback)(()=>{r&&$c({type:6,time:Date.now()})},[r]),u=(0,Pk.useCallback)((c,f)=>{let{reverseOrder:p=!1,gutter:v=8,defaultPosition:y}=f||{},k=n.filter(E=>(E.position||y)===(c.position||y)&&E.height),M=k.findIndex(E=>E.id===c.id),T=k.filter((E,A)=>A<M&&E.visible).length;return k.filter(E=>E.visible).slice(...p?[T+1]:[0,T]).reduce((E,A)=>E+(A.height||0)+v,0)},[n]);return{toasts:n,handlers:{updateHeight:XU,startPause:$U,endPause:a,calculateOffset:u}}},Ak=Uo});function ZU(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function rse(e){Bf=e}function Ii(e,n){if(n){if(iV.test(e))return e.replace(oV,XI)}else if(aV.test(e))return e.replace(sV,XI);return e}function YU(e){return e.replace(uV,(n,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}function Er(e,n){e=typeof e=="string"?e:e.source,n=n||"";let r={replace:(a,u)=>(u=u.source||u,u=u.replace(cV,"$1"),e=e.replace(a,u),r),getRegex:()=>new RegExp(e,n)};return r}function JU(e,n,r){if(e){let a;try{a=decodeURIComponent(YU(r)).replace(dV,"").toLowerCase()}catch{return null}if(a.indexOf("javascript:")===0||a.indexOf("vbscript:")===0||a.indexOf("data:")===0)return null}n&&!fV.test(r)&&(r=ise(n,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}function ise(e,n){Pb[" "+e]||(hV.test(e)?Pb[" "+e]=e+"/":Pb[" "+e]=Ik(e,"/",!0)),e=Pb[" "+e];let r=e.indexOf(":")===-1;return n.substring(0,2)==="//"?r?n:e.replace(pV,"$1")+n:n.charAt(0)==="/"?r?n:e.replace(mV,"$1")+n:e+n}function bs(e){let n=1,r,a;for(;n<arguments.length;n++){r=arguments[n];for(a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e}function QU(e,n){let r=e.replace(/\|/g,(c,f,p)=>{let v=!1,y=f;for(;--y>=0&&p[y]==="\\";)v=!v;return v?"|":" |"}),a=r.split(/ \|/),u=0;if(a[0].trim()||a.shift(),a.length>0&&!a[a.length-1].trim()&&a.pop(),a.length>n)a.splice(n);else for(;a.length<n;)a.push("");for(;u<a.length;u++)a[u]=a[u].trim().replace(/\\\|/g,"|");return a}function Ik(e,n,r){let a=e.length;if(a===0)return"";let u=0;for(;u<a;){let c=e.charAt(a-u-1);if(c===n&&!r)u++;else if(c!==n&&r)u++;else break}return e.slice(0,a-u)}function ose(e,n){if(e.indexOf(n[1])===-1)return-1;let r=e.length,a=0,u=0;for(;u<r;u++)if(e[u]==="\\")u++;else if(e[u]===n[0])a++;else if(e[u]===n[1]&&(a--,a<0))return u;return-1}function eV(e){e&&e.sanitize&&!e.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function tV(e,n){if(n<1)return"";let r="";for(;n>1;)n&1&&(r+=e),n>>=1,e+=e;return r+e}function nV(e,n,r,a){let u=n.href,c=n.title?Ii(n.title):null,f=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){a.state.inLink=!0;let p={type:"link",raw:r,href:u,title:c,text:f,tokens:a.inlineTokens(f)};return a.state.inLink=!1,p}return{type:"image",raw:r,href:u,title:c,text:Ii(f)}}function ase(e,n){let r=e.match(/^(\s+)(?:```)/);if(r===null)return n;let a=r[1];return n.split(`
`).map(u=>{let c=u.match(/^\s+/);if(c===null)return u;let[f]=c;return f.length>=a.length?u.slice(a.length):u}).join(`
`)}function sse(e){return e.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function rV(e){let n="",r,a,u=e.length;for(r=0;r<u;r++)a=e.charCodeAt(r),Math.random()>.5&&(a="x"+a.toString(16)),n+="&#"+a+";";return n}function kn(e,n,r){if(typeof e=="undefined"||e===null)throw new Error("marked(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");if(typeof n=="function"&&(r=n,n=null),n=bs({},kn.defaults,n||{}),eV(n),r){let u=n.highlight,c;try{c=jf.lex(e,n)}catch(v){return r(v)}let f=function(v){let y;if(!v)try{n.walkTokens&&kn.walkTokens(c,n.walkTokens),y=Zc.parse(c,n)}catch(k){v=k}return n.highlight=u,v?r(v):r(null,y)};if(!u||u.length<3||(delete n.highlight,!c.length))return f();let p=0;kn.walkTokens(c,function(v){v.type==="code"&&(p++,setTimeout(()=>{u(v.text,v.lang,function(y,k){if(y)return f(y);k!=null&&k!==v.text&&(v.text=k,v.escaped=!0),p--,p===0&&f()})},0))}),p===0&&f();return}function a(u){if(u.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Ii(u.message+"",!0)+"</pre>";throw u}try{let u=jf.lex(e,n);if(n.walkTokens){if(n.async)return Promise.all(kn.walkTokens(u,n.walkTokens)).then(()=>Zc.parse(u,n)).catch(a);kn.walkTokens(u,n.walkTokens)}return Zc.parse(u,n)}catch(u){a(u)}}var Bf,iV,oV,aV,sV,lV,XI,uV,cV,dV,fV,Pb,hV,pV,mV,Cb,Dk,mn,en,jf,Ok,$I,ZI,Zc,lse=z(()=>{Bf=ZU(),iV=/[&<>"']/,oV=/[&<>"']/g,aV=/[<>"']|&(?!#?\w+;)/,sV=/[<>"']|&(?!#?\w+;)/g,lV={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},XI=e=>lV[e],uV=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,cV=/(^|[^\[])\^/g,dV=/[^\w:]/g,fV=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i,Pb={},hV=/^[^:]+:\/*[^/]*$/,pV=/^([^:]+:)[\s\S]*$/,mV=/^([^:]+:\/*[^/]*)[\s\S]*$/,Cb={exec:function(){}},Dk=class{constructor(e){this.options=e||Bf}space(e){let n=this.rules.block.newline.exec(e);if(n&&n[0].length>0)return{type:"space",raw:n[0]}}code(e){let n=this.rules.block.code.exec(e);if(n){let r=n[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:n[0],codeBlockStyle:"indented",text:this.options.pedantic?r:Ik(r,`
`)}}}fences(e){let n=this.rules.block.fences.exec(e);if(n){let r=n[0],a=ase(r,n[3]||"");return{type:"code",raw:r,lang:n[2]?n[2].trim():n[2],text:a}}}heading(e){let n=this.rules.block.heading.exec(e);if(n){let r=n[2].trim();if(/#$/.test(r)){let a=Ik(r,"#");(this.options.pedantic||!a||/ $/.test(a))&&(r=a.trim())}return{type:"heading",raw:n[0],depth:n[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(e){let n=this.rules.block.hr.exec(e);if(n)return{type:"hr",raw:n[0]}}blockquote(e){let n=this.rules.block.blockquote.exec(e);if(n){let r=n[0].replace(/^ *>[ \t]?/gm,"");return{type:"blockquote",raw:n[0],tokens:this.lexer.blockTokens(r,[]),text:r}}}list(e){let n=this.rules.block.list.exec(e);if(n){let r,a,u,c,f,p,v,y,k,M,T,E,A=n[1].trim(),C=A.length>1,R={type:"list",raw:"",ordered:C,start:C?+A.slice(0,-1):"",loose:!1,items:[]};A=C?"\\d{1,9}\\".concat(A.slice(-1)):"\\".concat(A),this.options.pedantic&&(A=C?A:"[*+-]");let N=new RegExp("^( {0,3}".concat(A,")((?:[	 ][^\\n]*)?(?:\\n|$))"));for(;e&&(E=!1,!(!(n=N.exec(e))||this.rules.block.hr.test(e)));){if(r=n[0],e=e.substring(r.length),y=n[2].split(`
`,1)[0],k=e.split(`
`,1)[0],this.options.pedantic?(c=2,T=y.trimLeft()):(c=n[2].search(/[^ ]/),c=c>4?1:c,T=y.slice(c),c+=n[1].length),p=!1,!y&&/^ *$/.test(k)&&(r+=k+`
`,e=e.substring(k.length+1),E=!0),!E){let G=new RegExp("^ {0,".concat(Math.min(3,c-1),"}(?:[*+-]|\\d{1,9}[.)])((?: [^\\n]*)?(?:\\n|$))")),J=new RegExp("^ {0,".concat(Math.min(3,c-1),"}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)")),Y=new RegExp("^ {0,".concat(Math.min(3,c-1),"}(?:```|~~~)")),re=new RegExp("^ {0,".concat(Math.min(3,c-1),"}#"));for(;e&&(M=e.split(`
`,1)[0],y=M,this.options.pedantic&&(y=y.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(Y.test(y)||re.test(y)||G.test(y)||J.test(e)));){if(y.search(/[^ ]/)>=c||!y.trim())T+=`
`+y.slice(c);else if(!p)T+=`
`+y;else break;!p&&!y.trim()&&(p=!0),r+=M+`
`,e=e.substring(M.length+1)}}R.loose||(v?R.loose=!0:/\n *\n *$/.test(r)&&(v=!0)),this.options.gfm&&(a=/^\[[ xX]\] /.exec(T),a&&(u=a[0]!=="[ ] ",T=T.replace(/^\[[ xX]\] +/,""))),R.items.push({type:"list_item",raw:r,task:!!a,checked:u,loose:!1,text:T}),R.raw+=r}R.items[R.items.length-1].raw=r.trimRight(),R.items[R.items.length-1].text=T.trimRight(),R.raw=R.raw.trimRight();let j=R.items.length;for(f=0;f<j;f++){this.lexer.state.top=!1,R.items[f].tokens=this.lexer.blockTokens(R.items[f].text,[]);let G=R.items[f].tokens.filter(Y=>Y.type==="space"),J=G.every(Y=>{let re=Y.raw.split(""),ye=0;for(let ke of re)if(ke===`
`&&(ye+=1),ye>1)return!0;return!1});!R.loose&&G.length&&J&&(R.loose=!0,R.items[f].loose=!0)}return R}}html(e){let n=this.rules.block.html.exec(e);if(n){let r={type:"html",raw:n[0],pre:!this.options.sanitizer&&(n[1]==="pre"||n[1]==="script"||n[1]==="style"),text:n[0]};if(this.options.sanitize){let a=this.options.sanitizer?this.options.sanitizer(n[0]):Ii(n[0]);r.type="paragraph",r.text=a,r.tokens=this.lexer.inline(a)}return r}}def(e){let n=this.rules.block.def.exec(e);if(n)return n[3]&&(n[3]=n[3].substring(1,n[3].length-1)),{type:"def",tag:n[1].toLowerCase().replace(/\s+/g," "),raw:n[0],href:n[2],title:n[3]}}table(e){let n=this.rules.block.table.exec(e);if(n){let r={type:"table",header:QU(n[1]).map(a=>({text:a})),align:n[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:n[3]&&n[3].trim()?n[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=n[0];let a=r.align.length,u,c,f,p;for(u=0;u<a;u++)/^ *-+: *$/.test(r.align[u])?r.align[u]="right":/^ *:-+: *$/.test(r.align[u])?r.align[u]="center":/^ *:-+ *$/.test(r.align[u])?r.align[u]="left":r.align[u]=null;for(a=r.rows.length,u=0;u<a;u++)r.rows[u]=QU(r.rows[u],r.header.length).map(v=>({text:v}));for(a=r.header.length,c=0;c<a;c++)r.header[c].tokens=this.lexer.inline(r.header[c].text);for(a=r.rows.length,c=0;c<a;c++)for(p=r.rows[c],f=0;f<p.length;f++)p[f].tokens=this.lexer.inline(p[f].text);return r}}}lheading(e){let n=this.rules.block.lheading.exec(e);if(n)return{type:"heading",raw:n[0],depth:n[2].charAt(0)==="="?1:2,text:n[1],tokens:this.lexer.inline(n[1])}}paragraph(e){let n=this.rules.block.paragraph.exec(e);if(n){let r=n[1].charAt(n[1].length-1)===`
`?n[1].slice(0,-1):n[1];return{type:"paragraph",raw:n[0],text:r,tokens:this.lexer.inline(r)}}}text(e){let n=this.rules.block.text.exec(e);if(n)return{type:"text",raw:n[0],text:n[0],tokens:this.lexer.inline(n[0])}}escape(e){let n=this.rules.inline.escape.exec(e);if(n)return{type:"escape",raw:n[0],text:Ii(n[1])}}tag(e){let n=this.rules.inline.tag.exec(e);if(n)return!this.lexer.state.inLink&&/^<a /i.test(n[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(n[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(n[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(n[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:n[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(n[0]):Ii(n[0]):n[0]}}link(e){let n=this.rules.inline.link.exec(e);if(n){let r=n[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let c=Ik(r.slice(0,-1),"\\");if((r.length-c.length)%2===0)return}else{let c=ose(n[2],"()");if(c>-1){let f=(n[0].indexOf("!")===0?5:4)+n[1].length+c;n[2]=n[2].substring(0,c),n[0]=n[0].substring(0,f).trim(),n[3]=""}}let a=n[2],u="";if(this.options.pedantic){let c=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(a);c&&(a=c[1],u=c[3])}else u=n[3]?n[3].slice(1,-1):"";return a=a.trim(),/^</.test(a)&&(this.options.pedantic&&!/>$/.test(r)?a=a.slice(1):a=a.slice(1,-1)),nV(n,{href:a&&a.replace(this.rules.inline._escapes,"$1"),title:u&&u.replace(this.rules.inline._escapes,"$1")},n[0],this.lexer)}}reflink(e,n){let r;if((r=this.rules.inline.reflink.exec(e))||(r=this.rules.inline.nolink.exec(e))){let a=(r[2]||r[1]).replace(/\s+/g," ");if(a=n[a.toLowerCase()],!a||!a.href){let u=r[0].charAt(0);return{type:"text",raw:u,text:u}}return nV(r,a,r[0],this.lexer)}}emStrong(e,n,r=""){let a=this.rules.inline.emStrong.lDelim.exec(e);if(!a||a[3]&&r.match(/[\p{L}\p{N}]/u))return;let u=a[1]||a[2]||"";if(!u||u&&(r===""||this.rules.inline.punctuation.exec(r))){let c=a[0].length-1,f,p,v=c,y=0,k=a[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(k.lastIndex=0,n=n.slice(-1*e.length+c);(a=k.exec(n))!=null;){if(f=a[1]||a[2]||a[3]||a[4]||a[5]||a[6],!f)continue;if(p=f.length,a[3]||a[4]){v+=p;continue}else if((a[5]||a[6])&&c%3&&!((c+p)%3)){y+=p;continue}if(v-=p,v>0)continue;if(p=Math.min(p,p+v+y),Math.min(c,p)%2){let T=e.slice(1,c+a.index+p);return{type:"em",raw:e.slice(0,c+a.index+p+1),text:T,tokens:this.lexer.inlineTokens(T)}}let M=e.slice(2,c+a.index+p-1);return{type:"strong",raw:e.slice(0,c+a.index+p+1),text:M,tokens:this.lexer.inlineTokens(M)}}}}codespan(e){let n=this.rules.inline.code.exec(e);if(n){let r=n[2].replace(/\n/g," "),a=/[^ ]/.test(r),u=/^ /.test(r)&&/ $/.test(r);return a&&u&&(r=r.substring(1,r.length-1)),r=Ii(r,!0),{type:"codespan",raw:n[0],text:r}}}br(e){let n=this.rules.inline.br.exec(e);if(n)return{type:"br",raw:n[0]}}del(e){let n=this.rules.inline.del.exec(e);if(n)return{type:"del",raw:n[0],text:n[2],tokens:this.lexer.inlineTokens(n[2])}}autolink(e,n){let r=this.rules.inline.autolink.exec(e);if(r){let a,u;return r[2]==="@"?(a=Ii(this.options.mangle?n(r[1]):r[1]),u="mailto:"+a):(a=Ii(r[1]),u=a),{type:"link",raw:r[0],text:a,href:u,tokens:[{type:"text",raw:a,text:a}]}}}url(e,n){let r;if(r=this.rules.inline.url.exec(e)){let a,u;if(r[2]==="@")a=Ii(this.options.mangle?n(r[0]):r[0]),u="mailto:"+a;else{let c;do c=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(c!==r[0]);a=Ii(r[0]),r[1]==="www."?u="http://"+a:u=a}return{type:"link",raw:r[0],text:a,href:u,tokens:[{type:"text",raw:a,text:a}]}}}inlineText(e,n){let r=this.rules.inline.text.exec(e);if(r){let a;return this.lexer.state.inRawBlock?a=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Ii(r[0]):r[0]:a=Ii(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:a}}}},mn={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?<?([^\s>]+)>?(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:Cb,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/},mn._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/,mn._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/,mn.def=Er(mn.def).replace("label",mn._label).replace("title",mn._title).getRegex(),mn.bullet=/(?:[*+-]|\d{1,9}[.)])/,mn.listItemStart=Er(/^( *)(bull) */).replace("bull",mn.bullet).getRegex(),mn.list=Er(mn.list).replace(/bull/g,mn.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+mn.def.source+")").getRegex(),mn._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",mn._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/,mn.html=Er(mn.html,"i").replace("comment",mn._comment).replace("tag",mn._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),mn.paragraph=Er(mn._paragraph).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.blockquote=Er(mn.blockquote).replace("paragraph",mn.paragraph).getRegex(),mn.normal=bs({},mn),mn.gfm=bs({},mn.normal,{table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"}),mn.gfm.table=Er(mn.gfm.table).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.gfm.paragraph=Er(mn._paragraph).replace("hr",mn.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",mn.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",mn._tag).getRegex(),mn.pedantic=bs({},mn.normal,{html:Er(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",mn._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Cb,paragraph:Er(mn.normal._paragraph).replace("hr",mn.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",mn.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()}),en={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:Cb,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/^[^_*]*?\_\_[^_*]*?\*[^_*]*?(?=\_\_)|[^*]+(?=[^*])|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?\_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:Cb,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/},en._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~",en.punctuation=Er(en.punctuation).replace(/punctuation/g,en._punctuation).getRegex(),en.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g,en.escapedEmSt=/\\\*|\\_/g,en._comment=Er(mn._comment).replace("(?:-->|$)","-->").getRegex(),en.emStrong.lDelim=Er(en.emStrong.lDelim).replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimAst=Er(en.emStrong.rDelimAst,"g").replace(/punct/g,en._punctuation).getRegex(),en.emStrong.rDelimUnd=Er(en.emStrong.rDelimUnd,"g").replace(/punct/g,en._punctuation).getRegex(),en._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g,en._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/,en._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/,en.autolink=Er(en.autolink).replace("scheme",en._scheme).replace("email",en._email).getRegex(),en._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/,en.tag=Er(en.tag).replace("comment",en._comment).replace("attribute",en._attribute).getRegex(),en._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,en._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/,en._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/,en.link=Er(en.link).replace("label",en._label).replace("href",en._href).replace("title",en._title).getRegex(),en.reflink=Er(en.reflink).replace("label",en._label).replace("ref",mn._label).getRegex(),en.nolink=Er(en.nolink).replace("ref",mn._label).getRegex(),en.reflinkSearch=Er(en.reflinkSearch,"g").replace("reflink",en.reflink).replace("nolink",en.nolink).getRegex(),en.normal=bs({},en),en.pedantic=bs({},en.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:Er(/^!?\[(label)\]\((.*?)\)/).replace("label",en._label).getRegex(),reflink:Er(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",en._label).getRegex()}),en.gfm=bs({},en.normal,{escape:Er(en.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/}),en.gfm.url=Er(en.gfm.url,"i").replace("email",en.gfm._extended_email).getRegex(),en.breaks=bs({},en.gfm,{br:Er(en.br).replace("{2,}","*").getRegex(),text:Er(en.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()}),jf=class wL{constructor(n){this.tokens=[],this.tokens.links=Object.create(null),this.options=n||Bf,this.options.tokenizer=this.options.tokenizer||new Dk,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let r={block:mn.normal,inline:en.normal};this.options.pedantic?(r.block=mn.pedantic,r.inline=en.pedantic):this.options.gfm&&(r.block=mn.gfm,this.options.breaks?r.inline=en.breaks:r.inline=en.gfm),this.tokenizer.rules=r}static get rules(){return{block:mn,inline:en}}static lex(n,r){return new wL(r).lex(n)}static lexInline(n,r){return new wL(r).inlineTokens(n)}lex(n){n=n.replace(/\r\n|\r/g,`
`),this.blockTokens(n,this.tokens);let r;for(;r=this.inlineQueue.shift();)this.inlineTokens(r.src,r.tokens);return this.tokens}blockTokens(n,r=[]){this.options.pedantic?n=n.replace(/\t/g,"    ").replace(/^ +$/gm,""):n=n.replace(/^( *)(\t+)/gm,(p,v,y)=>v+"    ".repeat(y.length));let a,u,c,f;for(;n;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(p=>(a=p.call({lexer:this},n,r))?(n=n.substring(a.raw.length),r.push(a),!0):!1))){if(a=this.tokenizer.space(n)){n=n.substring(a.raw.length),a.raw.length===1&&r.length>0?r[r.length-1].raw+=`
`:r.push(a);continue}if(a=this.tokenizer.code(n)){n=n.substring(a.raw.length),u=r[r.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(a);continue}if(a=this.tokenizer.fences(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.heading(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.hr(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.blockquote(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.list(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.html(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.def(n)){n=n.substring(a.raw.length),u=r[r.length-1],u&&(u.type==="paragraph"||u.type==="text")?(u.raw+=`
`+a.raw,u.text+=`
`+a.raw,this.inlineQueue[this.inlineQueue.length-1].src=u.text):this.tokens.links[a.tag]||(this.tokens.links[a.tag]={href:a.href,title:a.title});continue}if(a=this.tokenizer.table(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.lheading(n)){n=n.substring(a.raw.length),r.push(a);continue}if(c=n,this.options.extensions&&this.options.extensions.startBlock){let p=1/0,v=n.slice(1),y;this.options.extensions.startBlock.forEach(function(k){y=k.call({lexer:this},v),typeof y=="number"&&y>=0&&(p=Math.min(p,y))}),p<1/0&&p>=0&&(c=n.substring(0,p+1))}if(this.state.top&&(a=this.tokenizer.paragraph(c))){u=r[r.length-1],f&&u.type==="paragraph"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(a),f=c.length!==n.length,n=n.substring(a.raw.length);continue}if(a=this.tokenizer.text(n)){n=n.substring(a.raw.length),u=r[r.length-1],u&&u.type==="text"?(u.raw+=`
`+a.raw,u.text+=`
`+a.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=u.text):r.push(a);continue}if(n){let p="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return this.state.top=!0,r}inline(n,r=[]){return this.inlineQueue.push({src:n,tokens:r}),r}inlineTokens(n,r=[]){let a,u,c,f=n,p,v,y;if(this.tokens.links){let k=Object.keys(this.tokens.links);if(k.length>0)for(;(p=this.tokenizer.rules.inline.reflinkSearch.exec(f))!=null;)k.includes(p[0].slice(p[0].lastIndexOf("[")+1,-1))&&(f=f.slice(0,p.index)+"["+tV("a",p[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(p=this.tokenizer.rules.inline.blockSkip.exec(f))!=null;)f=f.slice(0,p.index)+"["+tV("a",p[0].length-2)+"]"+f.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(p=this.tokenizer.rules.inline.escapedEmSt.exec(f))!=null;)f=f.slice(0,p.index)+"++"+f.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;n;)if(v||(y=""),v=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(k=>(a=k.call({lexer:this},n,r))?(n=n.substring(a.raw.length),r.push(a),!0):!1))){if(a=this.tokenizer.escape(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.tag(n)){n=n.substring(a.raw.length),u=r[r.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):r.push(a);continue}if(a=this.tokenizer.link(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.reflink(n,this.tokens.links)){n=n.substring(a.raw.length),u=r[r.length-1],u&&a.type==="text"&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):r.push(a);continue}if(a=this.tokenizer.emStrong(n,f,y)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.codespan(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.br(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.del(n)){n=n.substring(a.raw.length),r.push(a);continue}if(a=this.tokenizer.autolink(n,rV)){n=n.substring(a.raw.length),r.push(a);continue}if(!this.state.inLink&&(a=this.tokenizer.url(n,rV))){n=n.substring(a.raw.length),r.push(a);continue}if(c=n,this.options.extensions&&this.options.extensions.startInline){let k=1/0,M=n.slice(1),T;this.options.extensions.startInline.forEach(function(E){T=E.call({lexer:this},M),typeof T=="number"&&T>=0&&(k=Math.min(k,T))}),k<1/0&&k>=0&&(c=n.substring(0,k+1))}if(a=this.tokenizer.inlineText(c,sse)){n=n.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(y=a.raw.slice(-1)),v=!0,u=r[r.length-1],u&&u.type==="text"?(u.raw+=a.raw,u.text+=a.text):r.push(a);continue}if(n){let k="Infinite loop on byte: "+n.charCodeAt(0);if(this.options.silent){console.error(k);break}else throw new Error(k)}}return r}},Ok=class{constructor(e){this.options=e||Bf}code(e,n,r){let a=(n||"").match(/\S*/)[0];if(this.options.highlight){let u=this.options.highlight(e,a);u!=null&&u!==e&&(r=!0,e=u)}return e=e.replace(/\n$/,"")+`
`,a?'<pre><code class="'+this.options.langPrefix+Ii(a,!0)+'">'+(r?e:Ii(e,!0))+`</code></pre>
`:"<pre><code>"+(r?e:Ii(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`.concat(e,`</blockquote>
`)}html(e){return e}heading(e,n,r,a){if(this.options.headerIds){let u=this.options.headerPrefix+a.slug(r);return"<h".concat(n,' id="').concat(u,'">').concat(e,"</h").concat(n,`>
`)}return"<h".concat(n,">").concat(e,"</h").concat(n,`>
`)}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,n,r){let a=n?"ol":"ul",u=n&&r!==1?' start="'+r+'"':"";return"<"+a+u+`>
`+e+"</"+a+`>
`}listitem(e){return"<li>".concat(e,`</li>
`)}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>".concat(e,`</p>
`)}table(e,n){return n&&(n="<tbody>".concat(n,"</tbody>")),`<table>
<thead>
`+e+`</thead>
`+n+`</table>
`}tablerow(e){return`<tr>
`.concat(e,`</tr>
`)}tablecell(e,n){let r=n.header?"th":"td";return(n.align?"<".concat(r,' align="').concat(n.align,'">'):"<".concat(r,">"))+e+"</".concat(r,`>
`)}strong(e){return"<strong>".concat(e,"</strong>")}em(e){return"<em>".concat(e,"</em>")}codespan(e){return"<code>".concat(e,"</code>")}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>".concat(e,"</del>")}link(e,n,r){if(e=JU(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let a='<a href="'+Ii(e)+'"';return n&&(a+=' title="'+n+'"'),a+=">"+r+"</a>",a}image(e,n,r){if(e=JU(this.options.sanitize,this.options.baseUrl,e),e===null)return r;let a='<img src="'.concat(e,'" alt="').concat(r,'"');return n&&(a+=' title="'.concat(n,'"')),a+=this.options.xhtml?"/>":">",a}text(e){return e}},$I=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,n,r){return""+r}image(e,n,r){return""+r}br(){return""}},ZI=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,n){let r=e,a=0;if(this.seen.hasOwnProperty(r)){a=this.seen[e];do a++,r=e+"-"+a;while(this.seen.hasOwnProperty(r))}return n||(this.seen[e]=a,this.seen[r]=0),r}slug(e,n={}){let r=this.serialize(e);return this.getNextSafeSlug(r,n.dryrun)}},Zc=class SL{constructor(n){this.options=n||Bf,this.options.renderer=this.options.renderer||new Ok,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new $I,this.slugger=new ZI}static parse(n,r){return new SL(r).parse(n)}static parseInline(n,r){return new SL(r).parseInline(n)}parse(n,r=!0){let a="",u,c,f,p,v,y,k,M,T,E,A,C,R,N,j,G,J,Y,re,ye=n.length;for(u=0;u<ye;u++){if(E=n[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[E.type]&&(re=this.options.extensions.renderers[E.type].call({parser:this},E),re!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(E.type))){a+=re||"";continue}switch(E.type){case"space":continue;case"hr":{a+=this.renderer.hr();continue}case"heading":{a+=this.renderer.heading(this.parseInline(E.tokens),E.depth,YU(this.parseInline(E.tokens,this.textRenderer)),this.slugger);continue}case"code":{a+=this.renderer.code(E.text,E.lang,E.escaped);continue}case"table":{for(M="",k="",p=E.header.length,c=0;c<p;c++)k+=this.renderer.tablecell(this.parseInline(E.header[c].tokens),{header:!0,align:E.align[c]});for(M+=this.renderer.tablerow(k),T="",p=E.rows.length,c=0;c<p;c++){for(y=E.rows[c],k="",v=y.length,f=0;f<v;f++)k+=this.renderer.tablecell(this.parseInline(y[f].tokens),{header:!1,align:E.align[f]});T+=this.renderer.tablerow(k)}a+=this.renderer.table(M,T);continue}case"blockquote":{T=this.parse(E.tokens),a+=this.renderer.blockquote(T);continue}case"list":{for(A=E.ordered,C=E.start,R=E.loose,p=E.items.length,T="",c=0;c<p;c++)j=E.items[c],G=j.checked,J=j.task,N="",j.task&&(Y=this.renderer.checkbox(G),R?j.tokens.length>0&&j.tokens[0].type==="paragraph"?(j.tokens[0].text=Y+" "+j.tokens[0].text,j.tokens[0].tokens&&j.tokens[0].tokens.length>0&&j.tokens[0].tokens[0].type==="text"&&(j.tokens[0].tokens[0].text=Y+" "+j.tokens[0].tokens[0].text)):j.tokens.unshift({type:"text",text:Y}):N+=Y),N+=this.parse(j.tokens,R),T+=this.renderer.listitem(N,J,G);a+=this.renderer.list(T,A,C);continue}case"html":{a+=this.renderer.html(E.text);continue}case"paragraph":{a+=this.renderer.paragraph(this.parseInline(E.tokens));continue}case"text":{for(T=E.tokens?this.parseInline(E.tokens):E.text;u+1<ye&&n[u+1].type==="text";)E=n[++u],T+=`
`+(E.tokens?this.parseInline(E.tokens):E.text);a+=r?this.renderer.paragraph(T):T;continue}default:{let ke='Token with "'+E.type+'" type was not found.';if(this.options.silent){console.error(ke);return}else throw new Error(ke)}}}return a}parseInline(n,r){r=r||this.renderer;let a="",u,c,f,p=n.length;for(u=0;u<p;u++){if(c=n[u],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[c.type]&&(f=this.options.extensions.renderers[c.type].call({parser:this},c),f!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(c.type))){a+=f||"";continue}switch(c.type){case"escape":{a+=r.text(c.text);break}case"html":{a+=r.html(c.text);break}case"link":{a+=r.link(c.href,c.title,this.parseInline(c.tokens,r));break}case"image":{a+=r.image(c.href,c.title,c.text);break}case"strong":{a+=r.strong(this.parseInline(c.tokens,r));break}case"em":{a+=r.em(this.parseInline(c.tokens,r));break}case"codespan":{a+=r.codespan(c.text);break}case"br":{a+=r.br();break}case"del":{a+=r.del(this.parseInline(c.tokens,r));break}case"text":{a+=r.text(c.text);break}default:{let v='Token with "'+c.type+'" type was not found.';if(this.options.silent){console.error(v);return}else throw new Error(v)}}}return a}},kn.options=kn.setOptions=function(e){return bs(kn.defaults,e),rse(kn.defaults),kn},kn.getDefaults=ZU,kn.defaults=Bf,kn.use=function(...e){let n=bs({},...e),r=kn.defaults.extensions||{renderers:{},childTokens:{}},a;e.forEach(u=>{if(u.extensions&&(a=!0,u.extensions.forEach(c=>{if(!c.name)throw new Error("extension name required");if(c.renderer){let f=r.renderers?r.renderers[c.name]:null;f?r.renderers[c.name]=function(...p){let v=c.renderer.apply(this,p);return v===!1&&(v=f.apply(this,p)),v}:r.renderers[c.name]=c.renderer}if(c.tokenizer){if(!c.level||c.level!=="block"&&c.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");r[c.level]?r[c.level].unshift(c.tokenizer):r[c.level]=[c.tokenizer],c.start&&(c.level==="block"?r.startBlock?r.startBlock.push(c.start):r.startBlock=[c.start]:c.level==="inline"&&(r.startInline?r.startInline.push(c.start):r.startInline=[c.start]))}c.childTokens&&(r.childTokens[c.name]=c.childTokens)})),u.renderer){let c=kn.defaults.renderer||new Ok;for(let f in u.renderer){let p=c[f];c[f]=(...v)=>{let y=u.renderer[f].apply(c,v);return y===!1&&(y=p.apply(c,v)),y}}n.renderer=c}if(u.tokenizer){let c=kn.defaults.tokenizer||new Dk;for(let f in u.tokenizer){let p=c[f];c[f]=(...v)=>{let y=u.tokenizer[f].apply(c,v);return y===!1&&(y=p.apply(c,v)),y}}n.tokenizer=c}if(u.walkTokens){let c=kn.defaults.walkTokens;n.walkTokens=function(f){let p=[];return p.push(u.walkTokens.call(this,f)),c&&(p=p.concat(c.call(this,f))),p}}a&&(n.extensions=r),kn.setOptions(n)})},kn.walkTokens=function(e,n){let r=[];for(let a of e)switch(r=r.concat(n.call(kn,a)),a.type){case"table":{for(let u of a.header)r=r.concat(kn.walkTokens(u.tokens,n));for(let u of a.rows)for(let c of u)r=r.concat(kn.walkTokens(c.tokens,n));break}case"list":{r=r.concat(kn.walkTokens(a.items,n));break}default:kn.defaults.extensions&&kn.defaults.extensions.childTokens&&kn.defaults.extensions.childTokens[a.type]?kn.defaults.extensions.childTokens[a.type].forEach(function(u){r=r.concat(kn.walkTokens(a[u],n))}):a.tokens&&(r=r.concat(kn.walkTokens(a.tokens,n)))}return r},kn.parseInline=function(e,n){if(typeof e=="undefined"||e===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof e!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected");n=bs({},kn.defaults,n||{}),eV(n);try{let r=jf.lexInline(e,n);return n.walkTokens&&kn.walkTokens(r,n.walkTokens),Zc.parseInline(r,n)}catch(r){if(r.message+=`
Please report this to https://github.com/markedjs/marked.`,n.silent)return"<p>An error occurred:</p><pre>"+Ii(r.message+"",!0)+"</pre>";throw r}},kn.Parser=Zc,kn.parser=Zc.parse,kn.Renderer=Ok,kn.TextRenderer=$I,kn.Lexer=jf,kn.lexer=jf.lex,kn.Tokenizer=Dk,kn.Slugger=ZI,kn.parse=kn,kn.options,kn.setOptions,kn.use,kn.walkTokens,kn.parseInline,Zc.parse,jf.lex}),gV,vV,YI,yV=z(()=>{We(),Mk(),vV=se(eg)(gV||(gV=Q([`
  padding: 6px;
`]))),YI=vV}),ri,Rk,Ab,Lk,bV,_V,xV,JI,wV,SV,EV,QI,kV,TV,MV,PV,CV,Ib,Db,AV,IV,DV,OV,RV,LV,zV,NV,FV,BV,jV,UV,eD,Ob=z(()=>{ri=te(Ie()),nse(),We(),nr(),on(),He(),lse(),Eb(),yV(),Rk=({title:e,message:n})=>"".concat(e," ").concat(n),Ab=(()=>{let e=new Map;return{add:n=>{let r=Rk(n);e.has(r)?e.set(r,e.get(r)+1):e.set(r,1)},delete:n=>{let r=Rk(n);e.has(r)&&e.get(r)>1?e.set(r,e.get(r)-1):e.delete(r)},clear:()=>{e.clear()},check:n=>e.has(Rk(n))}})(),Lk=(()=>{let e=new Map;return{add:n=>{e.has(n)?e.set(n,e.get(n)+1):e.set(n,1)},delete:n=>{e.has(n)&&e.get(n)>1?e.set(n,e.get(n)-1):e.delete(n)},clear:()=>{e.clear()},check:n=>e.has(n),get types(){return Array.of(...e.keys())}}})(),_V=se.div(bV||(bV=Q([`
  width: 100%;
  border-radius: 4px;
  display: flex;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Qn),JI=se.div(xV||(xV=Q([`
  font-size: 14px;
  font-weight: bold;
  color: #fff;
`]))),SV=se.div(wV||(wV=Q([`
  flex: 1;
  flex-direction: column;
  width: 0;
  display: flex;
  padding: 16px 0;
  gap: 12px;
`]))),QI=se.div(EV||(EV=Q([`
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;

  a {
    color: rgba(255, 255, 255, 0.9);
  }

  em {
    font-style: italic;
  }

  strong {
    font-weight: bold;
    color: #d5d5d5;
  }

  p {
    margin-bottom: 8px;
  }

  code {
    font-family: monospace;
    background: rgba(0, 0, 0, 0.3);
    padding: 1px 1px 2px;
    border-radius: 4px;
    border: 1px solid rgba(255, 255, 255, 0.08);
    white-space: pre-wrap;
  }

  pre > code {
    white-space: pre;
    display: block;
    overflow: auto;
    padding: 4px;
  }

  pre {
    white-space: pre-wrap;
    margin-bottom: 8px;
  }
`]))),TV=se.button(kV||(kV=Q([`
  color: rgba(255, 255, 255, 0.9);
  font-weight: 500;
  display: flex;
  align-items: center;
  justify-content: center;
  background: none;
  border: none;
  padding-left: 12px;
  padding-right: 12px;
  border-left: 1px solid rgba(255, 255, 255, 0.05);

  &:hover {
    background: rgba(255, 255, 255, 0.05);
  }
`]))),MV={info:"#3b82f6",success:"#10b981",warning:"#f59e0b",error:"#ef4444"},CV=se.div(PV||(PV=Q([`
  display: flex;
  justify-content: center;
  margin-left: 12px;
  padding-top: 21px;

  ::before {
    content: '';
    width: 8px;
    height: 8px;
    border-radius: 999999px;
    background-color: `,`;
  }
`])),({type:e})=>MV[e]),Ib=e=>(n,r,a=[],u=!1)=>{(u||!Ab.check({title:n,message:r}))&&(Ab.add({title:n,message:r}),Lk.add(e),Ak.custom(c=>ri.default.createElement(_V,null,ri.default.createElement(CV,{type:e}),ri.default.createElement(SV,null,ri.default.createElement(JI,null,n),ri.default.createElement(QI,{dangerouslySetInnerHTML:{__html:kn.parse(r)}}),a.length>0&&ri.default.createElement(QI,null,ri.default.createElement("span",null,"Docs:"," ",a.map((f,p)=>ri.default.createElement(ri.Fragment,{key:p},p>0&&", ",ri.default.createElement("a",{target:"_blank",href:f.url},f.title)))))),ri.default.createElement(TV,{onClick:()=>{Ak.remove(c.id),Ab.delete({title:n,message:r}),Lk.delete(e)}},"Close")),{duration:1/0}))},Db={warning:Ib("warning"),success:Ib("success"),info:Ib("info"),error:Ib("error")},IV=se.div(AV||(AV=Q([`
  display: flex;
  justify-content: `,`;
  gap: 12px;
`])),({align:e})=>e==="center"?"center":"flex-end"),OV=se.button(DV||(DV=Q([`
  position: relative;
  border-radius: 4px;
  display: flex;
  align-items: center;
  gap: 12px;
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border: none;
  padding: 12px;
  color: #fff;
  overflow: hidden;

  ::before {
    content: '';
    position: absolute;
    inset: 0;
  }

  :hover::before {
    background: `,`;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Qn,({danger:e})=>e?"rgba(255, 0, 0, 0.1)":"rgba(255, 255, 255, 0.1)"),LV=se.div(RV||(RV=Q([`
  z-index: 10;
  display: flex;
  flex-direction: column;
  gap: 8px;
  position: fixed;
  right: 92px;
  top: 50px;
  width: 500px;
  height: 85vh;
  min-height: 400px;
`]))),NV=se.div(zV||(zV=Q([`
  overflow: hidden;
  pointer-events: auto;
  border-radius: 4px;

  & > div {
    display: flex;
    flex-direction: column-reverse;
    gap: 8px;
    overflow: scroll;
    height: 100%;
  }
`]))),BV=se.div(FV||(FV=Q([`
  width: fit-content;
  padding: 8px;
  border-radius: 4px;
  display: flex;
  flex-direction: column;
  gap: 12px;
  color: #b4b4b4;
  font-size: 12px;
  line-height: 1.4;
`]))),jV=()=>{let{hasNotifications:e}=eD();return Qm({enabled:!e},()=>ri.default.createElement(YI,null,ri.default.createElement(BV,null,ri.default.createElement(JI,null,"No notifications"),"Notifications will appear here when you get them.")))},UV=()=>{var e;let{toasts:n,handlers:r}=KI(),{startPause:a,endPause:u}=r,c=(e=Cn(be().atomP.ahistoric.pinNotifications))!=null?e:!1;return ri.default.createElement(LV,null,c?n.length>0&&ri.default.createElement(NV,{onMouseEnter:a,onMouseLeave:u},ri.default.createElement("div",null,n.map(f=>ri.default.createElement("div",{key:f.id},f.message(f))))):null,ri.default.createElement(IV,{align:"side"},c&&n.length>0&&ri.default.createElement(OV,{onClick:()=>{Lk.clear(),Ab.clear(),Ak.remove()},danger:!0},"Clear")))},eD=()=>{let{toasts:e}=KI();return{hasNotifications:e.length>0}}});function tD(e,n){var r;let a=Object.values((r=(0,VV.val)(e.pointers.historic.sheetsById))!=null?r:{}),u=a.flatMap(f=>{var p;return Object.values((p=f==null?void 0:f.staticOverrides.byObject)!=null?p:{})}).flatMap(f=>Object.values(f!=null?f:{})),c=[...a.flatMap(f=>{var p,v;return Object.values((v=(p=f==null?void 0:f.sequence)==null?void 0:p.tracksByObject)!=null?v:{})}).flatMap(f=>{var p;return Object.values((p=f==null?void 0:f.trackData)!=null?p:{})}).flatMap(f=>f==null?void 0:f.keyframes).map(f=>f==null?void 0:f.value)];return u.forEach(f=>{yt(f,p=>{c.push(p)},[])}),c.filter(f=>(f==null?void 0:f.type)&&(n?(f==null?void 0:f.type)==n:typeof(f==null?void 0:f.type)=="string")).map(f=>f.id).filter((f,p,v)=>f!==null&&f!==""&&v.indexOf(f)===p)}var VV,HV=z(()=>{VV=St,Lt()});function GV(e,n){let r=new File([e],n),a=URL.createObjectURL(r),u=Object.assign(document.createElement("a"),{href:a,target:"_blank",rel:"noopener"});u.setAttribute("download",n),u.click(),setTimeout(()=>{URL.revokeObjectURL(a)},4e4)}var sa,WV,qV,KV,XV,$V,ZV,YV,JV,QV,use=z(()=>{He(),cl(),ll(),sa=te(Ie()),We(),gU(),ese(),WV=te(tse()),Ob(),HV(),KV=se.div(qV||(qV=Q([""]))),$V=se.div(XV||(XV=Q([`
  padding: 8px 10px;
  display: flex;
  flex-direction: column;
  align-items: stretch;
`]))),YV=se(ul)(ZV||(ZV=Q([`
  display flex;
  flex-direction: column;
  gap: 1em;
  width: 280px;
  padding: 1em;
`]))),JV=({projects:e})=>{let n=e[0],r=n.address.projectId,a=r.replace(/[^\w\d'_\-]+/g," ").trim(),u="".concat(a,".theatre-project-state.json"),[c,f]=(0,sa.useState)(!1),p=(0,sa.useCallback)(()=>Je(void 0,null,function*(){var y,k;let M=tD(n),T=new Map;try{yield Promise.all(M.map(A=>Je(void 0,null,function*(){let C=n.assetStorage.getAssetUrl(A),R=yield fetch(C);R.ok&&T.set(A,yield R.blob())})))}catch{Db.error("Failed to access assets","Export aborted. Failed to access assets at ".concat((k=(y=n.config.assets)==null?void 0:y.baseUrl)!=null?k:"/",". This is likely due to a CORS issue."));return}if(T.size>0){let A=new WV.default;for(let[R,N]of T)A.file(R,N);let C=yield A.generateAsync({type:"blob"});GV(C,"".concat(a,".assets.zip"))}let E=JSON.stringify(be().createContentOfSaveFile(n.address.projectId),null,2);GV(E,u),f(!0),setTimeout(()=>{f(!1)},2e3)}),[n,u]),v=sl({debugName:"ProjectDetails",pointerDistanceThreshold:50},()=>sa.default.createElement(YV,null,sa.default.createElement("p",null,"This will create a JSON file with the state of your project. You can commit this file to your git repo and include it in your production bundle."),sa.default.createElement("p",null,"If your project uses assets, this will also create a zip file with all the assets that you can unpack in your public folder."),sa.default.createElement("a",{href:"https://www.theatrejs.com/docs/latest/manual/projects#state",target:"_blank"},"Here is a quick guide on how to export to production.")));return sa.default.createElement(sa.default.Fragment,null,v.node,sa.default.createElement(KV,null,sa.default.createElement(BU,{projectId:r}),sa.default.createElement($V,null,sa.default.createElement(kk,{onMouseEnter:y=>v.open(y,y.target),onClick:c?void 0:p,disabled:c},c?"(Exported)":"Export ".concat(r," to JSON")))))},QV=JV}),Yc,e9,t9,n9,r9,i9,o9,a9,s9,l9,u9,cse=z(()=>{Yc=te(Ie()),We(),Xy(),t9=se.div(e9||(e9=Q([`
  padding: 16px;
  display: flex;
  flex-direction: column;
  gap: 24px;
`]))),r9=se.div(n9||(n9=Q([`
  display: flex;
  flex-direction: column;
  gap: 11px;
  color: rgba(255, 255, 255, 0.9);
`]))),o9=se.div(i9||(i9=Q([`
  color: rgba(145, 145, 145, 0.8);
`]))),s9=se.a(a9||(a9=Q([`
  color: #919191;
  font-size: 10px;
  text-decoration-color: #40434a;
  text-underline-offset: 3px;
`]))),l9=()=>Yc.default.createElement(t9,null,Yc.default.createElement(r9,null,Yc.default.createElement(o9,null,Yc.default.createElement(bA,null)),Yc.default.createElement("div",null,"Please select an object from the ",Yc.default.createElement("u",null,"Outline Menu")," to see its properties.")),Yc.default.createElement(s9,{href:"https://www.theatrejs.com/docs/latest/manual/objects",target:"_blank"},"Learn more about Objects")),u9=l9});function c9(){let[e,n]=(0,nD.useState)(!1),r=(0,nD.useMemo)(()=>{let a=new Set;return()=>{let u=()=>{a.delete(u),n(a.size>0)};return a.add(u),n(!0),u}},[]);return[e,r]}var nD,d9=z(()=>{nD=te(Ie())}),Mr,ng,f9,h9,zk,p9,rD,m9,iD,g9,oD,Rb,v9,y9,Nk,Uf,aD=z(()=>{Uc(),on(),Mr=te(Ie()),We(),On(),uu(),nr(),Yae(),use(),He(),nF(),ng=St,cse(),d9(),Nf(),f9="32px",zk=se.div(h9||(h9=Q([`
  `,`;
  background-color: rgba(40, 43, 47, 0.8);
  position: fixed;
  right: 8px;
  top: 50px;
  // Temporary, see comment about CSS grid in SingleRowPropEditor.
  width: 280px;
  height: fit-content;
  z-index: `,`;

  box-shadow: 0 1px 1px rgba(0, 0, 0, 0.25), 0 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  border-radius: 2px;

  display: `,`;

  &:hover {
    display: block;
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Qn,Nm.propsPanel,({pin:e})=>e?"block":"none"),rD=se.div(p9||(p9=Q([`
  margin: 0 10px;
  color: #919191;
  font-weight: 500;
  font-size: 10px;
  user-select: none;
  `,`;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
`])),Qn),iD=se.div(m9||(m9=Q([`
  height: `,`;
  display: flex;
  align-items: center;
`])),f9),oD=se.div(g9||(g9=Q([`
  `,`;
  max-height: calc(100vh - 100px);
  overflow-y: scroll;
  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
  padding: 0;
  user-select: none;

  /* Set the font-size for input values in the detail panel */
  font-size: 12px;
`])),Qn),Rb=(0,Mr.createContext)([!1,()=>()=>{}]),v9=e=>{let n=Cn(be().atomP.ahistoric.pinDetails)!==!1,r=tF("right");(0,Mr.useLayoutEffect)(()=>{Nk.set(r)},[r]),(0,Mr.useEffect)(()=>()=>{Uf.set(!1),Nk.set(!1)},[]);let[a]=(0,Mr.useContext)(Rb),u=n||r||a,[c,f]=(0,Mr.useState)(null);return Bj(c),Tn(()=>{let p=jc(),v=p.find(mt);if(v)return Mr.default.createElement(zk,{"data-testid":"DetailPanel-Object",pin:u,ref:f,onMouseEnter:()=>{Uf.set(!0)},onMouseLeave:()=>{Uf.set(!1)}},Mr.default.createElement(iD,null,Mr.default.createElement(rD,{title:"".concat(v.sheet.address.sheetId,": ").concat(v.sheet.address.sheetInstanceId," > ").concat(v.address.objectKey)},Mr.default.createElement(Bc,null,v.sheet.address.sheetId," "),Mr.default.createElement(Ky,null,":","\xA0"),Mr.default.createElement(Bc,null,v.sheet.address.sheetInstanceId," "),Mr.default.createElement(Ky,null,"\xA0\u2192\xA0"),Mr.default.createElement(Bc,null,v.address.objectKey))),Mr.default.createElement(oD,null,Mr.default.createElement(hU,{objects:[v]})));let y=p.find(Ot);return y?Mr.default.createElement(zk,{pin:u},Mr.default.createElement(iD,null,Mr.default.createElement(rD,{title:"".concat(y.address.projectId)},Mr.default.createElement(Bc,null,y.address.projectId," "))),Mr.default.createElement(oD,null,Mr.default.createElement(QV,{projects:[y]}))):Mr.default.createElement(zk,{pin:u,onMouseEnter:()=>{Uf.set(!0)},onMouseLeave:()=>{Uf.set(!1)}},Mr.default.createElement(u9,null))},[u])},y9=()=>{let e=c9();return Mr.default.createElement(Rb.Provider,{value:e},Mr.default.createElement(v9,null))},Nk=new ng.Atom(!1),Uf=new ng.Atom(!1),(0,ng.prism)(()=>{let e=(0,ng.val)(Uf.prism),n=(0,ng.val)(Nk.prism);return e||n})}),sD,Fk,Bk,lD,rg,b9,uD,ig=z(()=>{sD=St,on(),He(),d9(),Fk=te(Ie()),dI(),Bk=(e,n)=>{let r=e.left/n.width,a=(e.left+e.width)/n.width,u=e.top/n.height,c=(e.height+e.top)/n.height;return{edges:{left:r<=.5?{from:"screenLeft",distance:r}:{from:"screenRight",distance:1-r},right:a<=.5?{from:"screenLeft",distance:a}:{from:"screenRight",distance:1-a},top:u<=.5?{from:"screenTop",distance:u}:{from:"screenBottom",distance:1-u},bottom:c<=.5?{from:"screenTop",distance:c}:{from:"screenBottom",distance:1-c}}}},lD=Fk.default.createContext(null),rg=()=>(0,Fk.useContext)(lD),b9=({panelId:e,children:n,defaultPosition:r,minDims:a})=>{let u=ik(800,200),[c,f]=c9(),{stuff:p}=Tn(()=>{var v;let{edges:y}=(v=(0,sD.val)(be().atomP.historic.panelPositions[e]))!=null?v:r,k=Math.floor(u.width*(y.left.from==="screenLeft"?y.left.distance:1-y.left.distance)),M=Math.floor(u.width*(y.right.from==="screenLeft"?y.right.distance:1-y.right.distance)),T=Math.floor(u.height*(y.top.from==="screenTop"?y.top.distance:1-y.top.distance)),E=Math.floor(u.height*(y.bottom.from==="screenTop"?y.bottom.distance:1-y.bottom.distance)),A=Math.max(M-k,a.width),C=Math.max(E-T,a.height);return{stuff:{dims:sD.prism.memo("dims",()=>({width:A,left:k,top:T,height:C}),[A,k,T,C]),panelId:e,minDims:a,boundsHighlighted:c,addBoundsHighlightLock:f}}},[e,u,c,f]);return Fk.default.createElement(lD.Provider,{value:p},n)},uD=b9}),Lb,_9,x9,w9,cD,S9=z(()=>{tr(),He(),di(),Lb=te(Ie()),We(),ig(),aa(),Xr(),uu(),x9=se.div(_9||(_9=Q([`
  cursor: move;
`]))),w9=e=>{let n=rg(),r=(0,Lb.useRef)(n);r.current=n;let[a,u]=Xn(null),c=(0,Lb.useMemo)(()=>({debugName:"PanelDragZone",lockCursorTo:"move",onDragStart(){let y=r.current,k,M=n.addBoundsHighlightLock();return{onDrag(T,E){let A=q(O({},y.dims),{top:Tr(y.dims.top+E,0,window.innerHeight-rl),left:Tr(y.dims.left+T,-y.dims.width+rl,window.innerWidth-rl)}),C=Bk(A,{width:window.innerWidth,height:window.innerHeight});k==null||k.discard(),k=be().tempTransaction(({stateEditors:R})=>{R.studio.historic.panelPositions.setPanelPosition({position:C,panelId:y.panelId})})},onDragEnd(T){M(),T?k==null||k.commit():k==null||k.discard()}}}}),[]),[f]=Ur(u,c);Da(f,"dragging","move");let[p,v]=(0,Lb.useMemo)(()=>{let y;return[function(){if(y){let k=y;y=void 0,k()}y=n.addBoundsHighlightLock()},function(){if(y){let k=y;y=void 0,k()}}]},[]);return Lb.default.createElement(x9,q(O({},e),{ref:a,onMouseEnter:p,onMouseLeave:v}))},cD=w9}),jk,E9,dD,k9,fD,T9,hD,M9,P9,C9,A9,I9,pD,D9,O9,R9,L9,z9,zb,N9,F9,B9,j9,U9,V9,H9,G9,W9,mD,q9,yu,dse=z(()=>{tr(),He(),di(),oa(),jk=te(Ie()),We(),ig(),nr(),Xr(),uu(),dD=se.div(E9||(E9=Q([`
  position: absolute;
  `,`;
  &:after {
    position: absolute;
    inset: -5px;
    display: block;
    content: ' ';
  }

  opacity: 0;
  background-color: #478698;

  &.isHighlighted {
    opacity: 0.7;
  }

  &.isDragging {
    opacity: 1;
    /* background-color: `,`; */
  }

  &:hover {
    opacity: 1;
  }
`])),Qn,Cm(.2,"#478698")),fD=se(dD)(k9||(k9=Q([`
  /**
  The horizintal/vertical resize handles have z-index:-1 and are offset 1px outside of the panel
  to make sure they don't occlude any element that pops out of the panel (like the Playhead in SequenceEditorPanel).

  This means that panels will always need an extra 1px margin for their resize handles to be visible, but that's not a problem
  that we have to deal with right now (if it is at all a problem).
  
   */
  z-index: -1;
`]))),hD=se(fD)(T9||(T9=Q([`
  left: 0px;
  right: 0px;
  height: 1px;
`]))),P9=se(hD)(M9||(M9=Q([`
  top: -1px;
`]))),A9=se(hD)(C9||(C9=Q([`
  bottom: -1px;
`]))),pD=se(fD)(I9||(I9=Q([`
  z-index: -1;
  top: -1px;
  bottom: -1px;
  width: 1px;
`]))),O9=se(pD)(D9||(D9=Q([`
  left: -1px;
`]))),L9=se(pD)(R9||(R9=Q([`
  right: -1px;
`]))),zb=se(dD)(z9||(z9=Q([`
  // The angles have z-index: 10 to make sure they _do_ occlude other elements in the panel.
  z-index: 10;
  width: 8px;
  height: 8px;
`]))),F9=se(zb)(N9||(N9=Q([`
  top: 0;
  left: 0;
`]))),j9=se(zb)(B9||(B9=Q([`
  top: 0;
  right: 0;
`]))),V9=se(zb)(U9||(U9=Q([`
  bottom: 0;
  left: 0;
`]))),G9=se(zb)(H9||(H9=Q([`
  bottom: 0;
  right: 0;
`]))),W9={Top:P9,TopLeft:F9,TopRight:j9,Bottom:A9,BottomLeft:V9,BottomRight:G9,Left:O9,Right:L9},mD={Top:"ns-resize",Bottom:"ns-resize",Left:"ew-resize",Right:"ew-resize",TopLeft:"nw-resize",TopRight:"ne-resize",BottomLeft:"sw-resize",BottomRight:"se-resize"},q9=({which:e})=>{let n=rg(),r=(0,jk.useRef)(n);r.current=n;let[a,u]=Xn(null),c=(0,jk.useMemo)(()=>({debugName:"PanelResizeHandle",lockCursorTo:mD[e],onDragStart(){let y,k=r.current,M=n.addBoundsHighlightLock();return{onDrag(T,E){let A=O({},k.dims);if(e.startsWith("Bottom"))A.height=Math.max(A.height+E,k.minDims.height);else if(e.startsWith("Top")){let R=A.top+A.height,N=Tr(A.top+E,0,Math.min(R-k.minDims.height,window.innerHeight-rl)),j=R-N;A.height=j,A.top=N}if(e.endsWith("Left")){let R=A.left+A.width,N=Math.min(A.left+T,Math.min(R-k.minDims.width,window.innerWidth-rl)),j=R-N;A.width=j,A.left=N}else e.endsWith("Right")&&(A.width=Math.max(A.width+T,Math.max(k.minDims.width,rl-k.dims.left)));let C=Bk(A,{width:window.innerWidth,height:window.innerHeight});y==null||y.discard(),y=be().tempTransaction(({stateEditors:R})=>{R.studio.historic.panelPositions.setPanelPosition({position:C,panelId:k.panelId})})},onDragEnd(T){M(),T?y==null||y.commit():y==null||y.discard()}}}}),[e]),[f]=Ur(u,c),p=W9[e],v=e.length<=6;return jk.default.createElement(p,{ref:a,className:[f?"isDragging":"",n.boundsHighlighted&&v?"isHighlighted":""].join(" "),style:{cursor:mD[e]}})},yu=q9}),_s,K9,X9,fse=z(()=>{_s=te(Ie()),dse(),K9=e=>_s.default.createElement(_s.default.Fragment,null,_s.default.createElement(yu,{which:"Bottom"}),_s.default.createElement(yu,{which:"Top"}),_s.default.createElement(yu,{which:"Left"}),_s.default.createElement(yu,{which:"Right"}),_s.default.createElement(yu,{which:"TopLeft"}),_s.default.createElement(yu,{which:"TopRight"}),_s.default.createElement(yu,{which:"BottomLeft"}),_s.default.createElement(yu,{which:"BottomRight"})),X9=K9}),Uk,$9,Z9,Y9,gD,J9=z(()=>{nr(),Uk=te(Ie()),We(),ig(),fse(),Z9=se.div($9||($9=Q([`
  position: absolute;
  user-select: none;
  box-sizing: border-box;
  `,`;
  /* box-shadow: 1px 2px 10px -5px black; */

  z-index: 1000;
`])),Qn),Y9=Uk.default.forwardRef((e,n)=>{let r=rg(),a=e,{style:u,children:c}=a,f=_e(a,["style","children"]);return Uk.default.createElement(Z9,q(O({ref:n},f),{style:O({width:r.dims.width+"px",height:r.dims.height+"px",top:r.dims.top+"px",left:r.dims.left+"px"},u!=null?u:{})}),Uk.default.createElement(X9,null),c)}),gD=Y9}),hse=le((e,n)=>{(function(r,a){typeof e=="object"&&typeof n!="undefined"?a(e,Ie()):(r=typeof globalThis!="undefined"?globalThis:r||self,a(r.ReactErrorBoundary={},r.React))})(e,function(r,a){function u(E){if(E&&E.__esModule)return E;var A=Object.create(null);return E&&Object.keys(E).forEach(function(C){if(C!=="default"){var R=Object.getOwnPropertyDescriptor(E,C);Object.defineProperty(A,C,R.get?R:{enumerable:!0,get:function(){return E[C]}})}}),A.default=E,Object.freeze(A)}var c=u(a);function f(E,A){return f=Object.setPrototypeOf||function(C,R){return C.__proto__=R,C},f(E,A)}function p(E,A){E.prototype=Object.create(A.prototype),E.prototype.constructor=E,f(E,A)}var v=function(E,A){return E===void 0&&(E=[]),A===void 0&&(A=[]),E.length!==A.length||E.some(function(C,R){return!Object.is(C,A[R])})},y={error:null},k=function(E){p(A,E);function A(){for(var R,N=arguments.length,j=new Array(N),G=0;G<N;G++)j[G]=arguments[G];return R=E.call.apply(E,[this].concat(j))||this,R.state=y,R.updatedWithError=!1,R.resetErrorBoundary=function(){for(var J,Y=arguments.length,re=new Array(Y),ye=0;ye<Y;ye++)re[ye]=arguments[ye];R.props.onReset==null||(J=R.props).onReset.apply(J,re),R.reset()},R}A.getDerivedStateFromError=function(R){return{error:R}};var C=A.prototype;return C.reset=function(){this.updatedWithError=!1,this.setState(y)},C.componentDidCatch=function(R,N){var j,G;(j=(G=this.props).onError)==null||j.call(G,R,N)},C.componentDidMount=function(){var R=this.state.error;R!==null&&(this.updatedWithError=!0)},C.componentDidUpdate=function(R){var N=this.state.error,j=this.props.resetKeys;if(N!==null&&!this.updatedWithError){this.updatedWithError=!0;return}if(N!==null&&v(R.resetKeys,j)){var G,J;(G=(J=this.props).onResetKeysChange)==null||G.call(J,R.resetKeys,j),this.reset()}},C.render=function(){var R=this.state.error,N=this.props,j=N.fallbackRender,G=N.FallbackComponent,J=N.fallback;if(R!==null){var Y={error:R,resetErrorBoundary:this.resetErrorBoundary};if(c.isValidElement(J))return J;if(typeof j=="function")return j(Y);if(G)return c.createElement(G,Y);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},A}(c.Component);function M(E,A){var C=function(N){return c.createElement(k,A,c.createElement(E,N))},R=E.displayName||E.name||"Unknown";return C.displayName="withErrorBoundary("+R+")",C}function T(E){var A=c.useState(null),C=A[0],R=A[1];if(E!=null)throw E;if(C!=null)throw C;return R}r.ErrorBoundary=k,r.useErrorHandler=T,r.withErrorBoundary=M,Object.defineProperty(r,"__esModule",{value:!0})})}),Vi,Q9,eH,tH,nH,rH,iH,oH,aH,sH,lH,uH,cH,dH,fH,hH,pH,mH,gH,vH,pse=z(()=>{Vi=te(Ie()),We(),uu(),ig(),S9(),J9(),Q9=te(hse()),Wm(),He(),uu(),eH={edges:{left:{from:"screenLeft",distance:.3},right:{from:"screenRight",distance:.3},top:{from:"screenTop",distance:.3},bottom:{from:"screenBottom",distance:.3}}},tH={width:300,height:300},nH=({paneInstance:e})=>Vi.default.createElement(uD,{panelId:"pane-".concat(e.instanceId),defaultPosition:eH,minDims:tH},Vi.default.createElement(gH,{paneInstance:e})),iH=se(gD)(rH||(rH=Q([`
  display: flex;
  flex-direction: column;

  box-shadow: 0px 5px 12px -4px rgb(0 0 0 / 22%);
  z-index: `,`;
`])),Nm.pluginPanes),aH=se.div(oH||(oH=Q([`
  width: 100%;
`]))),lH=se.div(sH||(sH=Q([`
  display: flex;
  align-items: center;
  opacity: 1;
  position: absolute;
  right: 4px;
  top: 0;
  bottom: 0;
`]))),cH=se.button(uH||(uH=Q([`
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 2px;
  font-size: 11px;
  height: 10px;
  width: 18px;
  color: #adadadb3;
  background: transparent;
  border: none;
  cursor: pointer;
  &:hover {
    color: white;
  }
`]))),fH=se(eN)(dH||(dH=Q([`
  position: relative;
  overflow: hidden;

  &:after {
    z-index: 10;
    position: absolute;
    inset: 0;
    display: block;
    content: ' ';
    pointer-events: none;

    #pointer-root:not(.normal) & {
      pointer-events: auto;
    }
  }
`]))),pH=se.div(hH||(hH=Q([`
  padding: 12px;

  & > pre {
    border: 1px solid #ff62624f;
    background-color: rgb(255 0 0 / 5%);
    margin: 8px 0;
    padding: 8px;
    font-family: monospace;
    overflow: scroll;
    color: #ff9896;
  }
`]))),mH=e=>Vi.default.createElement(pH,null,"An Error occurred rendering this pane. Open the console for more info.",Vi.default.createElement("pre",null,JSON.stringify({message:e.error.message,stack:e.error.stack},null,2))),gH=({paneInstance:e})=>{let[n,r]=(0,Vi.useState)(null),a=e.definition.mount;(0,Vi.useLayoutEffect)(()=>{if(!n)return;let c=a({paneId:e.instanceId,node:n});if(typeof c=="function")return c},[n,a,e.instanceId]);let u=(0,Vi.useCallback)(()=>{be().paneManager.destroyPane(e.instanceId)},[e]);return Vi.default.createElement(iH,{"data-testid":"theatre-pane-wrapper-".concat(e.instanceId)},Vi.default.createElement(cD,null,Vi.default.createElement(vA,null,Vi.default.createElement(lH,null,Vi.default.createElement(cH,{onClick:u,title:"Close Pane"},Vi.default.createElement(voe,null))),Vi.default.createElement(aH,null,e.instanceId))),Vi.default.createElement(Q9.ErrorBoundary,{FallbackComponent:mH},Vi.default.createElement(fH,{"data-testid":"theatre-pane-content-".concat(e.instanceId),ref:r})))},vH=nH}),vD,yD,yH=z(()=>{vD=St,yD=(e,n)=>{let r=vD.prism.memo(e,()=>new vD.Atom(n),[]);return r.set(n),r}});function bH(e,n){(0,_H.useLayoutEffect)(()=>{if(!e||n.type!=="propWithChildren"&&n.type!=="primitiveProp"&&n.type!=="sheetObject")return;let r=null,a=q(O({},n.sheetObject.address),{pathToProp:n.type==="sheetObject"?[]:n.pathToProp});function u(){r=_k.replaceLock(a,()=>{})}function c(){r==null||r()}return e.addEventListener("mouseenter",u),e.addEventListener("mouseleave",c),()=>{r==null||r(),e.removeEventListener("mouseenter",u),e.removeEventListener("mouseleave",c)}},[e])}var _H,xH=z(()=>{_H=te(Ie()),zI()}),Jc,wH,bD,SH,_D,EH,xD,kH,TH,MH,PH,CH,AH,IH,Vk,Hk=z(()=>{nr(),Jc=te(Ie()),Wm(),We(),Lf(),xH(),bD=se.li(wH||(wH=Q([`
  --depth: `,`;
  margin: 0;
  padding: 0;
  list-style: none;
`])),e=>e.depth),_D=se.div(SH||(SH=Q([`
  border-bottom: 1px solid #7695b705;
`]))),xD=se(_D)(EH||(EH=Q([`
  padding-left: calc(8px + var(--depth) * 20px);

  display: flex;
  align-items: stretch;
  color: `,`;

  box-sizing: border-box;

  `,`;
`])),zm.panel.body.compoudThing.label.color,e=>e.isSelected&&"background: blue"),TH=se.span(kH||(kH=Q([`
  `,`;
  overflow-x: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
  padding-right: 4px;
  line-height: 26px;
  flex-wrap: nowrap;

  `,`:hover & {
    color: #ccc;
  }
`])),qc,xD),PH=se.span(MH||(MH=Q([`
  width: 12px;
  padding: 8px;
  font-size: 9px;
  display: flex;
  align-items: center;

  transition: transform 0.05s ease-out, color 0.1s ease-out;
  transform: rotateZ(`,`deg);
  color: #66686a;

  &:hover {
    transform: rotateZ(`,`deg);
    color: #c0c4c9;
  }
`])),e=>e.isCollapsed?0:90,e=>e.isCollapsed?15:75),AH=se.ul(CH||(CH=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),IH=({leaf:e,label:n,children:r,isSelectable:a,isSelected:u,toggleSelect:c,toggleCollapsed:f,isCollapsed:p})=>{let v=Array.isArray(r)&&r.length>0,y=(0,Jc.useRef)(null);return bH(y.current,e),e.shouldRender?Jc.default.createElement(bD,{depth:e.depth},Jc.default.createElement(xD,{ref:y,style:{height:e.nodeHeight+"px"},isSelectable:a===!0,isSelected:u===!0,onClick:c,isEven:e.n%2===0},Jc.default.createElement(PH,{isCollapsed:p,onClick:f},Jc.default.createElement(KF,null)),Jc.default.createElement(TH,null,n)),v&&Jc.default.createElement(AH,null,r)):null},Vk=IH});function mse(e,n){return n.every((r,a)=>r===e[a])}function gse(e,n){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}function Gk(e){var n;let r=[];for(;;){let a=r.length,u=(n=e[0])==null?void 0:n[a];if(u===void 0)return r;for(let c of e)if(u!==c[a])return r;r.push(u)}}var pl,Wk,ml=z(()=>{sk(),pl=sb(e=>JSON.stringify(e)),Wk=e=>JSON.parse(e)});function vse(e,n){let r=(0,wD.useRef)({combo:e,listener:n});r.current={combo:e,listener:n},(0,wD.useEffect)(()=>{function a(f){f.key===r.current.combo&&r.current.listener({down:!0,event:f})}function u(f){f.key===r.current.combo&&r.current.listener({down:!1,event:f})}function c(f){r.current.listener({down:!1,event:void 0})}return document.addEventListener("keydown",a),document.addEventListener("keyup",u),window.addEventListener("blur",c),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keyup",u),window.removeEventListener("blur",c)}},[])}var wD,yse=z(()=>{wD=te(Ie())});function DH(e){let[n,r]=(0,OH.useState)(!1);return vse(e,({down:a})=>{r(a)}),n}var OH,RH=z(()=>{OH=te(Ie()),yse()});function bse(e){let n=(0,SD.useMemo)(()=>new LH.Atom(e),[]);return(0,SD.useLayoutEffect)(()=>{n.set(e)},[e]),n}var LH,SD,_se=z(()=>{LH=St,SD=te(Ie())});function zH(e,n,r){let a=(0,ED.pointer)({root:{},path:[]}),u=n(a);el(e,(0,ED.getPointerParts)(u).path,r)}var ED,xse=z(()=>{ED=St,vy()}),qk,NH,Eo,xs=z(()=>{qk="data-pos",NH={checkIfMouseEventSnapToPos(e,n){let r=e.composedPath().find(a=>a instanceof Element&&a!==(n==null?void 0:n.ignore)&&a.hasAttribute(qk));if(r){let a=parseFloat(r.getAttribute(qk));if(isFinite(a))return a}return null},includePositionSnapAttrs(e){return{[qk]:e}}},Eo=NH});function Kk(e){let n=e.type==="sheet"?Sse(e):kD(e);return{byPosition:wse(n),tracks:n}}function wse(e){let n=new Map;for(let r of e)for(let a of r.data.keyframes){let u=n.get(a.position);u||(u=[],n.set(a.position,u)),u.push({kf:a,track:r,itemKey:wi.forTrackKeyframe(r.sheetObject,r.id,a.id)})}return n}function Sse(e){return e.children.flatMap(kD)}function kD(e){return e.children.flatMap(n=>n.type==="propWithChildren"?kD(n):Ese(n))}function Ese(e){let n=e.sheetObject,r=n.address.projectId,a=be().atomP.historic.coreByProject[r].sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey],u=(0,Xk.val)(a.trackIdByPropPath[pl(e.pathToProp)]);if(!u)return[];let c=(0,Xk.val)(a.trackData[u]);return c?[{id:u,data:c,sheetObject:n}]:[]}function kse(e,n){return vo(e.children.flatMap(r=>TD(r,n)))}function TD(e,n){return vo(e.children.flatMap(r=>r.type==="propWithChildren"?TD(r,n):Tse(r,n)))}function Tse(e,n){var r,a;let u=e.sheetObject,c=u.address.projectId,f=be().atomP.historic.coreByProject[c].sheetsById[u.address.sheetId].sequence.tracksByObject[u.address.objectKey],p=(0,Xk.val)(f.trackIdByPropPath[pl(e.pathToProp)]);return p?(a=(r=n[u.address.objectKey])==null?void 0:r[p])!=null?a:[]:[]}var Xk,og=z(()=>{He(),Xk=St,gu(),ml(),Xr()});function Mse(e,n){let[r,a]=Xn(null),u=Vc("useCaptureSelection");return Ur(n,(0,ag.useMemo)(()=>({debugName:"DopeSheetSelectionView/useCaptureSelection",dontBlockMouseDown:!0,lockCSSCursorTo:"cell",onDragStart(c){if(!c.shiftKey||c.target instanceof HTMLInputElement)return!1;let f=n.getBoundingClientRect(),p=c.clientX-f.left-(0,Ra.val)(e.scaledSpace.leftPadding),v=(0,Ra.val)(e.scaledSpace.toUnitSpace)(p);return r.current={h:[v,v],v:[c.clientY-f.top,c.clientY-f.top]},(0,Ra.val)(e.selectionAtom).set({current:void 0}),{onDrag(y,k,M){let T=n.getBoundingClientRect(),E=M.clientX-T.left-(0,Ra.val)(e.scaledSpace.leftPadding),A=(0,Ra.val)(e.scaledSpace.toUnitSpace)(E);r.current={h:[r.current.h[0],A],v:[r.current.v[0],M.clientY-T.top]};let C=MD.boundsToSelection(u,(0,Ra.val)(e),r.current);(0,Ra.val)(e.selectionAtom).set({current:C})},onDragEnd(y){r.current=null}}}}),[e,n,r])),a}var Ra,ag,Qc,FH,BH,jH,MD,UH,VH,PD,HH,GH,Pse=z(()=>{He(),di(),RH(),_se(),xse(),tr(),on(),Ra=St,ag=te(Ie()),We(),xs(),og(),Hc(),Qc=5,BH=se.div(FH||(FH=Q([`
  cursor: `,`;
`])),e=>e.isShiftDown?"cell":"default"),jH=({layoutP:e,children:n,height:r})=>{let[a,u]=Xn(null),c=DH("Shift"),f=Mse(e,u),p=(0,ag.useRef)(f);return p.current=f,ag.default.createElement(BH,{style:{height:r+"px"},ref:a,isShiftDown:c,className:"selectionview"},f&&ag.default.createElement(HH,{state:f,layoutP:e}),n)},(e=>{let n=(f,p,v,y,k)=>{let M=Kk(v);if(v.top+v.nodeHeight/2+Qc>y.v[0]&&v.top+v.nodeHeight/2-Qc<y.v[1])for(let[T,E]of M.byPosition){let A=p.scaledSpace.toUnitSpace(Qc);if(!(T+A<=y.h[0]||T-A>=y.h[1]))for(let C of E)zH(k,R=>R[C.track.sheetObject.address.objectKey].byTrackId[C.track.id].byKeyframeId[C.kf.id],!0)}a(f,p,v,y,k)},r={sheet(f,p,v,y,k){n(f,p,v,y,k)},propWithChildren(f,p,v,y,k){n(f,p,v,y,k)},sheetObject(f,p,v,y,k){n(f,p,v,y,k)},primitiveProp(f,p,v,y,k){let{sheetObject:M,trackId:T}=v,E=(0,Ra.val)(be().atomP.historic.coreByProject[M.address.projectId].sheetsById[M.address.sheetId].sequence.tracksByObject[M.address.objectKey].trackData[T]);if(!(y.v[0]>v.top+v.heightIncludingChildren/2+Qc||v.top+v.heightIncludingChildren/2-Qc>y.v[1])){for(let A of E.keyframes)if(!(A.position+p.scaledSpace.toUnitSpace(Qc)<=y.h[0])){if(A.position-p.scaledSpace.toUnitSpace(Qc)>=y.h[1])break;zH(k,C=>C[M.address.objectKey].byTrackId[T].byKeyframeId[A.id],!0)}}}},a=(f,p,v,y,k)=>{if("children"in v)for(let M of v.children)u(f,p,M,y,k)};function u(f,p,v,y,k){if(!v.shouldRender||y.v[0]>v.top+v.heightIncludingChildren||v.top>y.v[1])return;let M=r[v.type];M?M(f,p,v,y,k):a(f,p,v,y,k)}function c(f,p,v){let y={};v=PD(v);let k=p.tree;u(f.utilFor.internal(),p,k,v,y);let M=p.tree.sheet;return{type:"DopeSheetSelection",byObjectKey:y,getDragHandlers(T){return{debugName:"DopeSheetSelectionView/boundsToSelection",onDragStart(){let E,A=p.scaledSpace.toUnitSpace;return{onDrag(C,R,N){E&&(E.discard(),E=void 0);let j=Eo.checkIfMouseEventSnapToPos(N,{ignore:T.domNode}),G=j!=null?j-T.positionAtStartOfDrag:A(C);E=be().tempTransaction(({stateEditors:J})=>{let Y=J.coreByProject.historic.sheetsById.sequence.transformKeyframes;for(let re of Object.keys(y)){let{byTrackId:ye}=y[re];for(let ke of Object.keys(ye)){let{byKeyframeId:ce}=ye[ke];Y({trackId:ke,keyframeIds:Object.keys(ce),translate:G,scale:1,origin:0,snappingFunction:M.getSequence().closestGridPosition,objectKey:re,projectId:T.projectId,sheetId:T.sheetId})}}})},onDragEnd(C){C?E==null||E.commit():E==null||E.discard()}}}}},delete(){be().transaction(({stateEditors:T})=>{let E=T.coreByProject.historic.sheetsById.sequence.deleteKeyframes;for(let A of Object.keys(y)){let{byTrackId:C}=y[A];for(let R of Object.keys(C)){let{byKeyframeId:N}=C[R];E(q(O({},M.address),{objectKey:A,trackId:R,keyframeIds:Object.keys(N)}))}}})}}}e.boundsToSelection=c})(MD||(MD={})),VH=se.div(UH||(UH=Q([`
  position: absolute;
  background: rgba(255, 255, 255, 0.1);
  border: 1px dashed rgba(255, 255, 255, 0.4);
  box-sizing: border-box;
`]))),PD=e=>({h:[...e.h].sort((n,r)=>n-r),v:[...e.v].sort((n,r)=>n-r)}),HH=({state:e,layoutP:n})=>{let r=bse(e);return Tn(()=>{let a=(0,Ra.val)(r.pointer),u=PD(a),c=(0,Ra.val)(n.scaledSpace.fromUnitSpace),f=(0,Ra.val)(n.scaledSpace.leftPadding),p=u.h.map(c).map(T=>T+f),v=u.v[0],y=u.v[1]-u.v[0],k=p[0],M=p[1]-p[0];return ag.default.createElement(VH,{style:{top:v+"px",height:y+"px",left:k+"px",width:M+"px"}})},[n,r])},GH=jH}),Vf,WH,qH,CD,KH,XH,$H,ZH=z(()=>{Fm(),Vf=te(Ie()),We(),Tu(),qH=se.div(WH||(WH=Q([`
  position: absolute;
  top: 0;
  right: 0;
  left: 0;
  bottom: 0;
  overflow-x: hidden;
  overflow-y: scroll;
  z-index: `,`;

  &::-webkit-scrollbar {
    display: none;
  }

  scrollbar-width: none;
`])),()=>kl.scrollableArea),CD=(0,Vf.createContext)(ps),KH=()=>(0,Vf.useContext)(CD),XH=e=>{let n=(0,Vf.useRef)(null),r=(0,Vf.useCallback)(a=>{n.current.scrollBy(0,a.deltaY)},[]);return Vf.default.createElement(CD.Provider,{value:r},Vf.default.createElement(qH,{ref:n},e.children))},$H=XH}),YH,Cse=z(()=>{YH='data:image/svg+xml,<svg width="34" height="34" viewBox="0 0 34 34" fill="none" xmlns="http://www.w3.org/2000/svg">%0A  <path d="M1 7V1H7" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M7 33H1L1 27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M33 27V33H27" stroke="%2374FFDE" stroke-width="0.25" />%0A  <path d="M27 1L33 1V7" stroke="%2374FFDE" stroke-width="0.25" />%0A</svg>'}),La,$k=z(()=>{La=(e,n=e)=>`
  left: `.concat(e*-.5,`px;
  top: `).concat(n*-.5,`px;
  width: `).concat(e,`px;
  height: `).concat(n,`px;
`)}),Zk,JH,QH,Ase=z(()=>{Zk=St,JH=(0,Zk.prism)(()=>{let[e,n]=Zk.prism.state("pos",null);return Zk.prism.effect("setupListeners",()=>{let r=a=>{n(a)};return document.addEventListener("mousemove",r),()=>{document.removeEventListener("mousemove",r)}},[]),e}),QH=JH}),bu,ko,Nb,e7,t7,n7,r7,_u,gl,Yk,i7,o7,Hi=z(()=>{bu=St,Ase(),Xr(),ko=te(Ie()),Nb=(0,ko.createContext)(null),e7=0,t7=({children:e,layoutP:n})=>{let r=(0,ko.useMemo)(()=>new bu.Atom([]),[]),a=(0,ko.useMemo)(()=>(0,bu.prism)(()=>{let f=bu.prism.memo("p",()=>i7(n),[n]).getValue(),p=(0,bu.val)(r.pointer);return p.length>0?Jl(p).position:f}),[n]),u=(0,ko.useCallback)(()=>{let f=e7++;return r.reduce(p=>[...p,{id:f,position:[-1,0]}]),{set:p=>{r.reduce(v=>{let y=v.findIndex(M=>M.id===f);if(y===-1)return console.warn("Lock is already freed. This is a bug."),v;let k=[...v];return k.splice(y,1,{id:f,position:[p,p===-1?0:1]}),k})},unlock:()=>{r.reduce(p=>p.filter(v=>v.id!==f))}}},[]),c={currentD:a,getLock:u};return ko.default.createElement(Nb.Provider,{value:c},e)},n7=()=>(0,ko.useContext)(Nb).currentD,r7=()=>{let{getLock:e}=(0,ko.useContext)(Nb),n=(0,ko.useRef)();return(0,ko.useLayoutEffect)(()=>()=>{var r;(r=n.current)==null||r.unlock()},[]),(0,ko.useMemo)(()=>{let r;return(a,u)=>{var c,f;(r==null?void 0:r.shouldLock)!==a&&(a?n.current=e():(c=n.current)==null||c.unlock()),(r==null?void 0:r.pos)!==u&&a&&((f=n.current)==null||f.set(u)),r={shouldLock:a,pos:u}}},[e])},_u=(e,n)=>{let{getLock:r}=(0,ko.useContext)(Nb),a=(0,ko.useRef)();(0,ko.useLayoutEffect)(()=>{if(e)return a.current=r(),()=>{a.current.unlock()}},[e,r]),(0,ko.useLayoutEffect)(()=>{e&&a.current.set(n)},[n,e])},gl=e=>({[Yk]:e==="hide"?e:e.toFixed(3)}),Yk="data-theatre-lock-framestamp-to",i7=e=>(0,bu.prism)(()=>{let n=(0,bu.val)(e.rightDims),r=(0,bu.val)(e.clippedSpace.toUnitSpace),a=(0,bu.val)(QH);if(!a)return[-1,0];for(let k of a.composedPath()){if(!(k instanceof HTMLElement||k instanceof SVGElement))break;if(k.hasAttribute(Yk)){let M=k.getAttribute(Yk);if(typeof M!="string")continue;if(M==="hide")return[-1,0];let T=parseFloat(M);if(isFinite(T)&&T>=0)return[T,2]}}let{clientX:u,clientY:c}=a,{screenX:f,screenY:p,width:v,height:y}=n;if(dr(u,f,f+v)&&dr(c,p+16,p+y)){let k=u-f;return[r(k),3]}else return[-1,0]}),o7=t7}),a7,Fb,AD,s7,l7,vl,u7=z(()=>{nr(),aa(),We(),Cse(),$k(),xs(),Hi(),a7=12,Fb=34,AD="beingDragged",vl={BEING_DRAGGED_CLASS:AD,CSS:Bi(s7||(s7=Q([`
    position: absolute;
    `,`;
    `,`;

    &.`,` {
      pointer-events: none !important;
    }
  `])),La(a7),Qn,AD),CSS_WHEN_SOMETHING_DRAGGING:Bi(l7||(l7=Q([`
    pointer-events: auto;
    cursor: var(`,`);

    // \u2E22\u2E24\u2E23\u2E25 thing
    // This box extends the hitzone so the user does not
    // accidentally leave the hitzone
    &:hover:after {
      position: absolute;
      top: calc(50% - `,`px);
      left: calc(50% - `,`px);
      width: `,`px;
      height: `,`px;
      display: block;
      content: ' ';
      background: url(`,`) no-repeat 100% 100%;
      // This icon might also fit: GiConvergenceTarget
    }
  `])),du,Fb/2,Fb/2,Fb,Fb,YH),reactProps(e){return q(O(O({},gl(e.position)),Eo.includePositionSnapAttrs(e.position)),{className:e.isDragging?vl.BEING_DRAGGED_CLASS:""})}}});function ID(){jb.set({mode:"snapToAll"})}function Hf(){jb.set({mode:"snapToNone"})}function c7(e){jb.set({mode:"snapToSome",positions:e})}function d7(e,n){return Object.fromEntries(Object.entries(e).map(([r,a])=>[r,Object.fromEntries(Object.entries(a.trackData).map(([u,c])=>[u,c.keyframes.filter(f=>n(f,{trackId:u,trackData:c,objectKey:r})).map(f=>f.position)]))]))}var f7,h7,DD,p7,m7,g7,v7,y7,Bb,jb,OD,Gf=z(()=>{f7=St,h7=St,DD=te(Ie()),We(),u7(),m7=se.div(p7||(p7=Q([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  #pointer-root.draggingPositionInSequenceEditor & {
    `,`
  }
`])),vl.CSS,vl.CSS_WHEN_SOMETHING_DRAGGING),v7=se.div(g7||(g7=Q([`
  position: absolute;
`]))),y7=e=>DD.default.createElement(v7,{style:{top:"".concat(e.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,h7.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(e.position,"px))")}},DD.default.createElement(m7,O({},vl.reactProps({isDragging:!1,position:e.position})))),Bb=y7,jb=new f7.Atom({mode:"snapToNone"}),OD=jb.prism});function Ise(e,n){let r=(0,Wf.useMemo)(()=>({debugName:"HorizontallyScrollableArea",onDragStart(u){if(u.target instanceof HTMLInputElement||u.shiftKey||u.altKey||u.ctrlKey||u.metaKey||u.composedPath().some(M=>M instanceof HTMLElement&&M.draggable===!0))return!1;let c=u.clientX-n.getBoundingClientRect().left,f=Tr((0,Vr.val)(e.clippedSpace.toUnitSpace)(c),0,1/0),p=(0,Vr.val)(e.seeker.setIsSeeking),v=(0,Vr.val)(e.sheet).getSequence();v.position=f;let y=f,k=(0,Vr.val)(e.scaledSpace.toUnitSpace);return p(!0),ID(),{onDrag(M,T,E){let A=k(M),C=Tr(y+A,0,v.length),R=Eo.checkIfMouseEventSnapToPos(E,{});R!=null&&(C=R),v.position=C},onDragEnd(){p(!1),Hf()}}}}),[e,n]),[a]=Ur(n,r);Da(a,"draggingPositionInSequenceEditor","ew-resize")}function Dse(e,n){let r=KH();(0,Wf.useLayoutEffect)(()=>{if(!n)return;let a=c=>{if(c.ctrlKey){c.preventDefault(),c.stopPropagation();let f=c.clientX-n.getBoundingClientRect().left,p=(0,Vr.val)(e.clippedSpace.toUnitSpace)(f),v=(0,Vr.val)(e.clippedSpace.range),y=1+RD(c.deltaY,[-50,50])*.03,k=Ql(v,E=>(E-p)*y+p),M=(0,Vr.val)(e.sheet).getSequence().length,T=M+M*.25;(0,Vr.val)(e.clippedSpace.setRange)(Ose(k,[0,T]));return}else if(c.shiftKey){c.preventDefault(),c.stopPropagation();let f=(0,Vr.val)(e.sheet).getSequence().length,p=(0,Vr.val)(e.clippedSpace.range),v=(p.end-p.start)/f,y=RD(c.deltaY||c.deltaX,[-50,50])*.05*v,k=Ql(p,M=>M+y);(0,Vr.val)(e.clippedSpace.setRange)(k);return}else{r(c),c.preventDefault(),c.stopPropagation();let f=(0,Vr.val)(e.scaledSpace.toUnitSpace)(c.deltaX*1),p=(0,Vr.val)(e.clippedSpace.range),v=Ql(p,y=>y+f);(0,Vr.val)(e.clippedSpace.setRange)(v);return}},u={capture:!0,passive:!1};return n.addEventListener("wheel",a,u),()=>{n.removeEventListener("wheel",a,u)}},[n,e]),Ur(n,(0,Wf.useMemo)(()=>({onDragStart(a){let u=(0,Vr.val)(e.clippedSpace.range),c=(0,Vr.val)(e.clippedSpace.setRange),f=(0,Vr.val)(e.scaledSpace.toUnitSpace);return a.preventDefault(),a.stopPropagation(),{onDrag(p,v,y,k,M){r({deltaY:-M});let T=-f(p),E=Ql(u,A=>A+T);c(E)}}},debugName:"HorizontallyScrollableArea Middle Button Drag",buttons:[1],lockCSSCursorTo:"grabbing"}),[e]))}function RD(e,[n,r]){return Math.max(Math.min(e,r),n)}function Ose(e,n){return Ql(e,r=>RD(r,n))}function Rse(e,n){(0,Wf.useLayoutEffect)(()=>{if(!n)return;let r=(0,Vr.prism)(()=>{let f=(0,Vr.val)(e.clippedSpace.range);return(0,Vr.val)(e.scaledSpace.fromUnitSpace)(f.start)}),a=()=>{let f=r.getValue();n.scrollLeft=f},u=r.onStale(a);a();let c=setTimeout(a,100);return()=>{clearTimeout(c),u()}},[e,n])}var Vr,Wf,b7,_7,x7,LD,w7=z(()=>{di(),tr(),on(),Vr=St,Xr(),Wf=te(Ie()),We(),ZH(),nr(),aa(),xs(),Gf(),_7=se.div(b7||(b7=Q([`
  position: absolute;

  right: 0;
  overflow-x: scroll;
  overflow-y: hidden;
  `,`;

  // hide the scrollbar on Gecko
  scrollbar-width: none;

  // hide the scrollbar on Webkit/Blink
  &::-webkit-scrollbar {
    display: none;
  }
`])),Qn),x7=Wf.default.memo(({layoutP:e,children:n,height:r})=>{let{width:a,unitSpaceToScaledSpaceMultiplier:u}=Tn(()=>({width:(0,Vr.val)(e.rightDims.width),unitSpaceToScaledSpaceMultiplier:(0,Vr.val)(e.scaledSpace.fromUnitSpace)(1)}),[e]),[c,f]=Xn(null);return Dse(e,f),Ise(e,f),Rse(e,f),Wf.default.createElement(_7,{ref:c,style:{width:a+"px",height:r+"px","--unitSpaceToScaledSpaceMultiplier":u}},n)}),LD=x7}),Jk,S7,E7,k7,T7,M7,P7,C7,sg,Qk=z(()=>{Jk=te(Ie()),We(),E7=se.li(S7||(S7=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
  box-sizing: border-box;
  position: relative;
`]))),T7=se.div(k7||(k7=Q([`
  box-sizing: border-box;
  width: 100%;
  position: relative;

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -40px;
    top: 0;
    bottom: 0;
    right: 0;
    box-sizing: border-box;
    border-bottom: 1px solid #252b3869;
    background: `,`;
  }
`])),e=>e.isEven?"transparent":"#6b8fb505"),P7=se.ul(M7||(M7=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),C7=({leaf:e,children:n,node:r,isCollapsed:a})=>{let u=Array.isArray(n)&&n.length>0;return e.shouldRender?Jk.default.createElement(E7,null,Jk.default.createElement(T7,{style:{height:e.nodeHeight+"px"},isEven:e.n%2===0},r),u&&Jk.default.createElement(P7,null,n)):null},sg=C7}),Lse=le((e,n)=>{(function(){var r=this,a={};typeof e!="undefined"?n.exports=a:r.fuzzy=a,a.simpleFilter=function(u,c){return c.filter(function(f){return a.test(u,f)})},a.test=function(u,c){return a.match(u,c)!==null},a.match=function(u,c,f){f=f||{};var p=0,v=[],y=c.length,k=0,M=0,T=f.pre||"",E=f.post||"",A=f.caseSensitive&&c||c.toLowerCase(),C;u=f.caseSensitive&&u||u.toLowerCase();for(var R=0;R<y;R++)C=c[R],A[R]===u[p]?(C=T+C+E,p+=1,M+=1+M):M=0,k+=M,v[v.length]=C;return p===u.length?(k=A===u?1/0:k,{rendered:v.join(""),score:k}):null},a.filter=function(u,c,f){return!c||c.length===0?[]:typeof u!="string"?c:(f=f||{},c.reduce(function(p,v,y,k){var M=v;f.extract&&(M=f.extract(v));var T=a.match(u,M,f);return T!=null&&(p[p.length]={string:T.rendered,score:T.score,index:y,original:v}),p},[]).sort(function(p,v){var y=v.score-p.score;return y||p.index-v.index}))}})()});function zse(e,n){let[r,a]=(0,e2.useState)(!1),u=(0,e2.useRef)(n);return r||(u.current=n),(0,e2.useMemo)(()=>e(a),u.current)}var e2,Nse=z(()=>{e2=te(Ie())}),zD,ed,t2=z(()=>{zD="rgba(26, 28, 30, 0.97);",ed="#272B2F"});function A7(e,n,r,a){let u=zse(c=>({debugName:"CurveSegmentEditor/useKeyframeDrag",lockCSSCursorTo:"move",onDragStart(){return c(!0),{onDrag(f,p){e&&r.onCurveChange(a(f,p))},onDragEnd(f){c(!1),r.onCancelCurveChange()}}}}),[e,r.onCurveChange,r.onCancelCurveChange]);Ur(n,u)}var Yn,n2,Ub,lg,I7,Vb,D7,r2,O7,R7,L7,ug,z7,qf,N7,F7,ND,B7,i2,j7,FD,U7,V7,Fse=z(()=>{Yn=te(Ie()),di(),tr(),Xp(),We(),nr(),Nse(),t2(),n2=.12,Ub=1+n2*2,lg=.01,I7=8,Vb=(1-lg)/(I7-1),D7="#3EAAA4",r2="#3EAAA4",O7="#3EAAA4",R7="#3EAAA4",L7="#3EAAA4",ug="#3EAAA4",z7="#3EAAA4",qf="#B3B3B3",N7="#3eaaa4",F7="#67dfd8",ND=["goldenrod","cornflowerblue","dodgerblue","lawngreen"],i2=se.circle(B7||(B7=Q([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.04px;
  pointer-events: none;
  transition: r 0.15s;
  fill: `,`;
`])),N7),FD=se.circle(j7||(j7=Q([`
  stroke-width: 0.1px;
  vector-effect: non-scaling-stroke;
  r: 0.09px;
  cursor: move;
  `,`;
  &:hover {
    opacity: 0.4;
  }
  &:hover + `,` {
    fill: `,`;
  }
`])),Qn,i2,F7),U7=e=>{let{curveConnection:{left:n,right:r},backgroundConnections:a}=e,u=Math.min(0,1-r.handles[1],1-n.handles[3]),c=Math.max(1,1-r.handles[1],1-n.handles[3]),f=Math.max(1,c-u),p=N=>(N-u)/f,[v,y]=Xn(null),k=Ub/((y==null?void 0:y.clientWidth)||1),M=Ub/((y==null?void 0:y.clientHeight)||1),[T,E]=Xn(null);A7(y,E,e,(N,j)=>{let G=Tr(n.handles[2]+N*k,0,1),J=n.handles[3]-j*M;return[G,J,r.handles[0],r.handles[1]]});let[A,C]=Xn(null);A7(y,C,e,(N,j)=>{let G=Tr(r.handles[0]+N*k,0,1),J=r.handles[1]-j*M;return[n.handles[2],n.handles[3],G,J]});let R=N=>"M0 ".concat(p(1)," C").concat(N.left.handles[2]," ").concat(p(1-N.left.handles[3])," ").concat(N.right.handles[0]," ").concat(p(1-N.right.handles[1])," 1 ").concat(p(0));return Yn.default.createElement("svg",{height:"100%",width:"100%",ref:v,viewBox:"".concat(-n2," ").concat(-n2," ").concat(Ub," ").concat(Ub),xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",fill:"none"},Yn.default.createElement("linearGradient",{id:"myGradient",gradientTransform:"rotate(90)"},Yn.default.createElement("stop",{offset:p(-1),stopColor:z7}),Yn.default.createElement("stop",{offset:p(0),stopColor:ug}),Yn.default.createElement("stop",{offset:p(.3),stopColor:L7}),Yn.default.createElement("stop",{offset:p(.5),stopColor:R7}),Yn.default.createElement("stop",{offset:p(.7),stopColor:O7}),Yn.default.createElement("stop",{offset:p(1),stopColor:r2}),Yn.default.createElement("stop",{offset:p(2),stopColor:D7})),Yn.default.createElement("pattern",{id:"dot-background-pattern-1",width:Vb,height:Vb/f,y:-u/f},Yn.default.createElement("rect",{width:lg,height:lg,fill:qf,opacity:.3})),Yn.default.createElement("rect",{x:0,y:0,width:"1",height:1,fill:"url(#dot-background-pattern-1)"}),Yn.default.createElement("pattern",{id:"dot-background-pattern-2",width:Vb,height:Vb},Yn.default.createElement("rect",{width:lg,height:lg,fill:qf})),Yn.default.createElement("rect",{x:0,y:p(0),width:"1",height:p(1)-p(0),fill:"url(#dot-background-pattern-2)"}),!n.type||n.type==="bezier"?Yn.default.createElement(Yn.default.Fragment,null,Yn.default.createElement("line",{x1:0,y1:p(1),x2:n.handles[2],y2:p(1-n.handles[3]),stroke:qf,strokeWidth:"0.01"}),Yn.default.createElement("line",{x1:1,y1:p(0),x2:r.handles[0],y2:p(1-r.handles[1]),stroke:qf,strokeWidth:"0.01"}),Yn.default.createElement("path",{d:R(e.curveConnection),stroke:"none",fill:"url('#myGradient')",opacity:"0.1"}),a.map((N,j)=>Yn.default.createElement("path",{key:N.objectKey+"/"+N.left.id,d:R(N),stroke:ND[j%ND.length],opacity:.6,strokeWidth:"0.01"})),Yn.default.createElement("path",{d:R(e.curveConnection),stroke:"url('#myGradient')",strokeWidth:"0.02"}),Yn.default.createElement("circle",{cx:0,cy:p(1),r:"0.025",stroke:r2,strokeWidth:"0.02",fill:ed}),Yn.default.createElement("circle",{cx:1,cy:p(0),r:"0.025",stroke:ug,strokeWidth:"0.02",fill:ed}),Yn.default.createElement(FD,{ref:T,cx:n.handles[2],cy:p(1-n.handles[3]),fill:r2,opacity:.2}),Yn.default.createElement(i2,{cx:n.handles[2],cy:p(1-n.handles[3])}),Yn.default.createElement(FD,{ref:A,cx:r.handles[0],cy:p(1-r.handles[1]),fill:ug,opacity:.2}),Yn.default.createElement(i2,{cx:r.handles[0],cy:p(1-r.handles[1])})):Yn.default.createElement(Yn.default.Fragment,null,Yn.default.createElement("line",{x1:0,y1:p(1),x2:1,y2:p(1),stroke:qf,strokeWidth:"0.01"}),Yn.default.createElement("line",{x1:1,y1:p(1),x2:1,y2:0,stroke:qf,strokeWidth:"0.01"}),Yn.default.createElement("circle",{cx:0,cy:1,r:"0.025",stroke:ug,strokeWidth:"0.02",fill:ed}),Yn.default.createElement("circle",{cx:1,cy:0,r:"0.025",stroke:ug,strokeWidth:"0.02",fill:ed})))},V7=U7});function o2(e){return e.map(n=>n.toFixed(3)).join(", ")}function a2(e){if(!e||(e==null?void 0:e.length)>H7)return null;let n=e.split(",");if(n.length!==4)return null;let r=n.map(a=>Number(a.trim()));return!r.every(a=>isFinite(a))||r[0]<0||r[0]>1||r[2]<0||r[2]>1?null:r}function Bse(e,n,r={threshold:.02}){if(!e||!n)return!1;let a=0;for(let u=0;u<4;u++)a+=Math.abs(e[u]-n[u]);return a<r.threshold}var H7,s2,G7=z(()=>{H7=128,s2=[{label:"Quad Out",value:"0.250, 0.460, 0.450, 0.940"},{label:"Quad In Out",value:"0.455, 0.030, 0.515, 0.955"},{label:"Quad In",value:"0.550, 0.085, 0.680, 0.530"},{label:"Cubic Out",value:"0.215, 0.610, 0.355, 1.000"},{label:"Cubic In Out",value:"0.645, 0.045, 0.355, 1.000"},{label:"Cubic In",value:"0.550, 0.055, 0.675, 0.190"},{label:"Quart Out",value:"0.165, 0.840, 0.440, 1.000"},{label:"Quart In Out",value:"0.770, 0.000, 0.175, 1.000"},{label:"Quart In",value:"0.895, 0.030, 0.685, 0.220"},{label:"Quint Out",value:"0.230, 1.000, 0.320, 1.000"},{label:"Quint In Out",value:"0.860, 0.000, 0.070, 1.000"},{label:"Quint In",value:"0.755, 0.050, 0.855, 0.060"},{label:"Sine Out",value:"0.390, 0.575, 0.565, 1.000"},{label:"Sine In Out",value:"0.445, 0.050, 0.550, 0.950"},{label:"Sine In",value:"0.470, 0.000, 0.745, 0.715"},{label:"Expo Out",value:"0.190, 1.000, 0.220, 1.000"},{label:"Expo In Out",value:"1.000, 0.000, 0.000, 1.000"},{label:"Expo In",value:"0.780, 0.000, 0.810, 0.00"},{label:"Circ Out",value:"0.075, 0.820, 0.165, 1.000"},{label:"Circ In Out",value:"0.785, 0.135, 0.150, 0.860"},{label:"Circ In",value:"0.600, 0.040, 0.980, 0.335"},{label:"Back Out",value:"0.175, 0.885, 0.320, 1.275"},{label:"Back In Out",value:"0.680, -0.550, 0.265, 1.550"},{label:"Back In",value:"0.600, -0.280, 0.735, 0.045"},{label:"linear",value:"0.5, 0.5, 0.5, 0.5"},{label:"In Out",value:"0.42,0,0.58,1"},{label:"Hold",value:"0, 0, Infinity, Infinity"}]}),oo,l2,Kf,BD,W7,q7,Hb,jD,UD,K7,X7,jse=z(()=>{oo=te(Ie()),l2=.75,Kf=.1,BD=1+l2*2,W7="#F5F5F5",q7="#888888",Hb="#4f4f4f",jD="rgba(255, 255, 255, 0.1)",UD=e=>1-e,K7=e=>{let{easing:n,isSelected:r}=e,a=r?W7:q7,u="".concat(-l2," ").concat(-l2," ").concat(BD," ").concat(BD);if(n){let c=[n[0],UD(n[1])],f=[n[2],UD(n[3])];return oo.default.createElement("svg",{height:"100%",width:"100%",viewBox:u,fill:"none",xmlns:"http://www.w3.org/2000/svg"},oo.default.createElement("line",{x1:"0",y1:"1",x2:c[0],y2:c[1],stroke:Hb,strokeWidth:"0.1"}),oo.default.createElement("line",{x1:"1",y1:"0",x2:f[0],y2:f[1],stroke:Hb,strokeWidth:"0.1"}),oo.default.createElement("circle",{cx:c[0],cy:c[1],r:.1,fill:jD}),oo.default.createElement("circle",{cx:f[0],cy:f[1],r:.1,fill:jD}),oo.default.createElement("circle",{cx:c[0],cy:c[1],r:Kf,fill:Hb}),oo.default.createElement("circle",{cx:f[0],cy:f[1],r:Kf,fill:Hb}),oo.default.createElement("path",{d:"M0 1 C".concat(c[0]," ").concat(c[1]," ").concat(f[0],` 
        `).concat(f[1]," 1 0"),stroke:a,strokeWidth:"0.08"}),oo.default.createElement("circle",{cx:0,cy:1,r:Kf,fill:a}),oo.default.createElement("circle",{cx:1,cy:0,r:Kf,fill:a}))}return oo.default.createElement("svg",{height:"100%",width:"100%",viewBox:u,fill:"none",xmlns:"http://www.w3.org/2000/svg"},oo.default.createElement("line",{x1:"0",y1:"1",x2:1,y2:1,stroke:a,strokeWidth:"0.08"}),oo.default.createElement("line",{x1:"1",y1:"0",x2:1,y2:1,stroke:a,strokeWidth:"0.08"}),oo.default.createElement("circle",{cx:0,cy:1,r:Kf,fill:a}),oo.default.createElement("circle",{cx:1,cy:0,r:Kf,fill:a}))},X7=K7}),Gb,$7,Z7,Y7,J7,Q7,eG,tG,Use=z(()=>{Eb(),Gb=te(Ie()),We(),G7(),jse(),UE(),t2(),cl(),Y7=se.div(Z7||(Z7=Q([`
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
  aspect-ratio: 1;

  transition: background-color 0.15s;
  background-color: `,`;
  border-radius: 2px;
  cursor: pointer;
  outline: none;

  `,`

  &:hover {
    background-color: #31353a;
  }

  &:focus {
    background-color: #383d42;
  }
`])),ed,({isSelected:e})=>e&&Bi($7||($7=Q([`
      background-color: #383d42;
    `])))),Q7=se(ul)(J7||(J7=Q([`
  padding: 0.5em;
  color: white;
  max-width: 240px;
  pointer-events: none !important;
  --popover-bg: black;
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: transparent;
  box-shadow: none;
`]))),eG=Gb.default.forwardRef((e,n)=>{let[r,a]=Qm({enabled:!0,verticalPlacement:e.tooltipPlacement,verticalGap:0},()=>Gb.default.createElement(Q7,{showPopoverEdgeTriangle:!1},e.easing.label));return Gb.default.createElement(Y7,O({ref:jE([a,n])},e),r,Gb.default.createElement(X7,{easing:a2(e.easing.value),isSelected:e.isSelected}))}),tG=eG});function Vse(e){var n;let[r,a]=(0,nG.useState)(null),u=f=>{if(r===null){e.items.length>0&&a(0);return}let p=r+f*e.uiColumns,v=p<0,y=p>e.items.length-1;if(v||y){if(e.canVerticleExit&&e.canVerticleExit(v?"top":"bottom")){a(null);return}return}a(p)},c=f=>{r===null?a(qse(f,e.items.length)):r+f<0?a(null):a(Math.min(r+f,e.items.length-1))};return{focusFirstItem(){a(0)},onParentEltKeyDown:f=>{if(f.key==="ArrowRight")c(1);else if(f.key==="ArrowLeft")c(-1);else if(f.key==="ArrowUp")u(-1);else if(f.key==="ArrowDown")u(1);else return 0;return 1},gridItems:e.items.map((f,p)=>e.renderItem({isSelected:p===r,item:f,select(v){a(p),e.onSelectItem(f)===1&&(v==null||v.preventDefault(),v==null||v.stopPropagation())}})),currentSelection:(n=e.items[r!=null?r:-1])!=null?n:null}}var nG,Hse=z(()=>{nG=te(Ie()),c2()});function rG(e,n,r){var a;(a=e.current)==null||a.discard(),e.current=null;let u=a2(r);u===null?e.current=Wse(n):e.current=Gse(n,u)}function iG(e){var n;(n=e.current)==null||n.discard(),e.current=null}function Gse(e,n){return be().tempTransaction(({stateEditors:r})=>{let{setHandlesForKeyframe:a,setKeyframeType:u}=r.coreByProject.historic.sheetsById.sequence;for(let{projectId:c,sheetId:f,objectKey:p,trackId:v,left:y,right:k}of e)a({projectId:c,sheetId:f,objectKey:p,trackId:v,keyframeId:y.id,start:[n[0],n[1]]}),a({projectId:c,sheetId:f,objectKey:p,trackId:v,keyframeId:k.id,end:[n[2],n[3]]}),u({projectId:c,sheetId:f,objectKey:p,trackId:v,keyframeId:y.id,keyframeType:"bezier"})})}function Wse(e){return be().tempTransaction(({stateEditors:n})=>{let{setKeyframeType:r}=n.coreByProject.historic.sheetsById.sequence;for(let{projectId:a,sheetId:u,objectKey:c,trackId:f,left:p}of e)r({projectId:a,sheetId:u,objectKey:c,trackId:f,keyframeId:p.id,keyframeType:"hold"})})}function qse(e,n){return(e%n+n)%n}function Kse(e,n){return()=>setTimeout(e,n)}function Xse({left:e,right:n}){return({left:r,right:a})=>e.handles[2]!==r.handles[2]||e.handles[3]!==r.handles[3]||n.handles[0]!==a.handles[0]||n.handles[1]!==a.handles[1]}var u2,Dr,oG,VD,HD,aG,sG,lG,uG,cG,dG,fG,hG,pG,mG,gG,vG,GD,$se,WD,yG,c2=z(()=>{u2=St,Dr=te(Ie()),We(),oG=te(Lse()),He(),Fse(),Use(),G7(),t2(),tr(),Hse(),VD=3,HD=53,aG=25,lG=se.div(sG||(sG=Q([`
  background: `,`;
  display: grid;
  grid-template-areas:
    'search  tween'
    'presets tween';
  grid-template-rows: 32px 1fr;
  grid-template-columns: `,`px 120px;
  gap: 1px;
  height: 120px;
`])),zD,VD*HD),cG=se.div(uG||(uG=Q([`
  overflow: auto;
  grid-area: presets;

  display: grid;
  grid-template-columns: repeat(`,`, 1fr);
  grid-auto-rows: min-content;
  gap: 1px;

  overflow-y: scroll;
  scrollbar-width: none; /* Firefox */
  -ms-overflow-style: none; /* Internet Explorer 10+ */
  &::-webkit-scrollbar {
    /* WebKit */
    width: 0;
    height: 0;
  }
`])),VD),fG=se.input.attrs({type:"text"})(dG||(dG=Q([`
  background-color: `,`;
  border: none;
  border-radius: 2px;
  color: rgba(255, 255, 255, 0.8);
  padding: 6px;
  font-size: 12px;
  outline: none;
  cursor: text;
  text-align: left;
  width: 100%;
  height: 100%;
  box-sizing: border-box;

  grid-area: search;

  &:hover {
    background-color: #212121;
  }

  &:focus {
    background-color: rgba(16, 16, 16, 0.26);
    outline: 1px solid rgba(0, 0, 0, 0.35);
  }
`])),ed),pG=se.div(hG||(hG=Q([`
  grid-area: tween;
  background: `,`;
`])),ed),gG=se.div(mG||(mG=Q([`
  grid-column: 1 / 4;
  padding: 6px;
  color: #888888;
`]))),vG=e=>{let n=(0,Dr.useMemo)(()=>[e.curveConnection,...e.additionalConnections],[e.curveConnection,...e.additionalConnections]),r=(0,Dr.useRef)(null);(0,Dr.useEffect)(()=>{let oe=yG(n);return()=>{var Ae;oe(),(Ae=r.current)==null||Ae.commit()}},[r]);let a=[e.curveConnection.left.handles[2],e.curveConnection.left.handles[3],e.curveConnection.right.handles[0],e.curveConnection.right.handles[1]],u=(0,Dr.useRef)(null);(0,Dr.useLayoutEffect)(()=>{var oe,Ae;(oe=u.current)==null||oe.select(),(Ae=u.current)==null||Ae.focus()},[u.current]);let[c,f]=(0,Dr.useState)(o2(a)),p=oe=>{oe!==void 0&&(k(1),f(oe.target.value),a2(oe.target.value)&&T(oe.target.value))},v=oe=>{var Ae,W;k(1),(oe.key==="ArrowDown"||oe.key==="ArrowUp")&&oe.preventDefault(),oe.key==="ArrowDown"?(Ge.focusFirstItem(),(W=(Ae=re.current[N[0].label])==null?void 0:Ae.current)==null||W.focus()):oe.key==="Escape"?(iG(r),e.onRequestClose("key Escape")):oe.key==="Enter"&&e.onRequestClose("key Enter")},[y,k]=(0,Dr.useState)(0);(0,Dr.useEffect)(()=>{y===2?f(o2(a)):y===3&&c!==""&&f("")},n);let[M,T]=(0,Dr.useState)(o2(a)),[E,A]=(0,Dr.useState)(null);(0,Dr.useEffect)(()=>{var oe;y!==0&&y!==3&&rG(r,n,(oe=E!=null?E:M)!=null?oe:"")},[E,M,y]),n.some(Xse(e.curveConnection))&&y===0&&k(3);let C=oe=>{var Ae,W;k(2);let Le=o2(oe);f(Le),T(Le),(Ae=u.current)==null||Ae.select(),(W=u.current)==null||W.focus()},R=()=>{},N=(0,Dr.useMemo)(()=>/^[A-Za-z]/.test(c)?oG.default.filter(c,s2,{extract:oe=>oe.label}).map(oe=>oe.original):s2,[c]);(0,Dr.useEffect)(()=>{y===1&&N[0]&&T(N[0].value)},[N]);let j=oe=>{oe.key==="Escape"?(iG(r),e.onRequestClose("key Escape"),oe.stopPropagation()):oe.key==="Enter"&&(e.onRequestClose("key Enter"),oe.stopPropagation())},G=oe=>{y===0&&k(2),A(oe.value)},J=()=>A(null),Y=oe=>(rG(r,n,oe.value),e.onRequestClose("selected easing option"),1),re=(0,Dr.useRef)(s2.reduce((oe,Ae)=>(oe[Ae.label]={current:null},oe),{})),[ye,ke]=Xn(null),[ce,Ce]=(0,Dr.useState)(0);(0,Dr.useEffect)(()=>{let oe=()=>{var Ae;Ce((Ae=ke==null?void 0:ke.scrollTop)!=null?Ae:0)};return ke==null||ke.addEventListener("scroll",oe),()=>ke==null?void 0:ke.removeEventListener("scroll",oe)},[ke]);let Ge=Vse({items:N,uiColumns:3,onSelectItem:Y,canVerticleExit(oe){var Ae,W;return oe==="top"?((Ae=u.current)==null||Ae.select(),(W=u.current)==null||W.focus(),1):0},renderItem:({item:oe,select:Ae})=>{var W,Le;return Dr.default.createElement(tG,{key:oe.label,easing:oe,tabIndex:0,onKeyDown:j,ref:re.current[oe.label],onMouseOver:()=>G(oe),onMouseOut:J,onClick:Ae,tooltipPlacement:((Le=(W=re.current[oe.label].current)==null?void 0:W.offsetTop)!=null?Le:0)-(ce!=null?ce:0)<HD+aG?"bottom":"top",isSelected:Bse(a,a2(oe.value))})}});return(0,Dr.useLayoutEffect)(()=>{var oe,Ae;if(Ge.currentSelection!==null&&document.activeElement!==u.current){let W=(Ae=(oe=re.current)==null?void 0:oe[Ge.currentSelection.label])==null?void 0:Ae.current;W==null||W.focus(),T(Ge.currentSelection.value),/^[A-Za-z]/.test(c)||f(Ge.currentSelection.value)}},[Ge.currentSelection]),Dr.default.createElement(lG,null,Dr.default.createElement(fG,{value:c,placeholder:y===3?"Multiple easings selected":"Search presets...",onPaste:Kse(p),onChange:p,ref:u,onKeyDown:v}),Dr.default.createElement(cG,{ref:ye,onKeyDown:oe=>Ge.onParentEltKeyDown(oe)},Ge.gridItems,Ge.gridItems.length===0?Dr.default.createElement(gG,null,"No results found"):void 0),Dr.default.createElement(pG,{onClick:()=>{var oe;return(oe=u.current)==null?void 0:oe.focus()}},Dr.default.createElement(V7,{curveConnection:e.curveConnection,backgroundConnections:e.additionalConnections,onCurveChange:C,onCancelCurveChange:R})))},GD=vG,{isCurveEditorOpenD:$se,isConnectionEditingInCurvePopover:WD,getLock:yG}=(()=>{let e=new u2.Atom([]);return{getLock(n){return e.set(n),function(){e.set([])}},isCurveEditorOpenD:(0,u2.prism)(()=>e.prism.getValue().length>0),isConnectionEditingInCurvePopover(n){return u2.prism.ensurePrism(),e.prism.getValue().some(({left:r,right:a})=>n.left.id===r.id&&n.right.id===a.id)}}})()});function Zse(e,n){for(let{keyframeId:r}of Qse(n))if(e.left.id===r)return!0;return!1}function bG(e,n,r){return(0,f2.prism)(()=>{if(r===void 0)return[];let a=[];for(let{objectKey:u,trackId:c}of _G(r)){let f=(0,f2.val)(be().atomP.historic.coreByProject[e].sheetsById[n].sequence.tracksByObject[u].trackData[c]);f&&(a=a.concat(Jse(f.keyframes).filter(p=>Zse(p,r)).map(({left:p,right:v})=>({left:p,right:v,trackId:c,objectKey:u,sheetId:n,projectId:e}))))}return a})}function d2(e,n,r){var a;if(r===void 0)return[];let u=[];for(let{objectKey:f,trackId:p,keyframeIds:v}of _G(r))u=u.concat((a=qD({projectId:e,sheetId:n,objectKey:f,trackId:p,keyframeIds:v}))!=null?a:[]);let c=Gk(u.map(f=>f.pathToProp));return u.map(({keyframe:f,pathToProp:p})=>({keyframe:f,pathToProp:p.slice(c.length)}))}function qD({projectId:e,sheetId:n,objectKey:r,trackId:a,keyframeIds:u}){let c=(0,f2.val)(be().atomP.historic.coreByProject[e].sheetsById[n].sequence.tracksByObject[r]),f=c==null?void 0:c.trackData[a];if(!f)return null;let p=Yse((c==null?void 0:c.trackIdByPropPath)||{})[a];if(!p)return null;let v=[r,...Wk(p)];return u.map(y=>({keyframe:f.keyframes.find(k=>k.id===y),pathToProp:v})).filter(({keyframe:y})=>y!==void 0)}function Yse(e){let n={};for(let[r,a]of Object.entries(e))n[a]=r;return n}function Jse(e){return e.map((n,r)=>({left:n,right:e[r+1]})).slice(0,-1)}function Qse(e){var n,r,a;let u=[];for(let[c,f]of Object.entries((n=e==null?void 0:e.byObjectKey)!=null?n:{}))for(let[p,v]of Object.entries((r=f==null?void 0:f.byTrackId)!=null?r:{}))for(let y of Object.keys((a=v==null?void 0:v.byKeyframeId)!=null?a:{}))u.push({objectKey:c,trackId:p,keyframeId:y});return u}function _G(e){var n,r,a;let u=[];for(let[c,f]of Object.entries((n=e==null?void 0:e.byObjectKey)!=null?n:{}))for(let[p,v]of Object.entries((r=f==null?void 0:f.byTrackId)!=null?r:{}))u.push({objectKey:c,trackId:p,keyframeIds:Object.keys((a=v==null?void 0:v.byKeyframeId)!=null?a:{})});return u}var f2,cg=z(()=>{f2=St,He(),ml()});function ele(e,n){return(0,xG.useMemo)(()=>tle(e,n),[])}function tle(e,n){let r=null,a=f=>be().tempTransaction(p=>e(p,f));function u(){r==null||r.discard(),r=null}let c={createAsset:n.sheet.project.assetStorage.createAsset,getAssetUrl:f=>f.id?n.sheet.project.assetStorage.getAssetUrl(f.id):void 0};return O({temporarilySetValue(f){u(),r=a(f)},discardTemporaryValue:u,permanentlySetValue(f){u(),a(f).commit()}},c)}var xG,nle=z(()=>{He(),xG=te(Ie())});function KD(e){var n;if(e.type==="sheetObject")return Gi.default.createElement(Gi.default.Fragment,null,Gi.default.createElement(h2,{style:{paddingLeft:"".concat(e.indent*p2,"px")}},e.sheetObject.address.objectKey),e.children.map((r,a)=>Gi.default.createElement(KD,q(O({key:a},r),{autoFocusInput:e.autoFocusInput&&a===0,indent:e.indent+1}))));if(e.type==="propWithChildren"){let r=(n=e.propConfig.label)!=null?n:Jl(e.pathToProp);return Gi.default.createElement(Gi.default.Fragment,null,Gi.default.createElement(h2,{style:{paddingLeft:"".concat(e.indent*p2,"px")}},r),e.children.map((a,u)=>Gi.default.createElement(KD,q(O({key:u},a),{autoFocusInput:e.autoFocusInput&&u===0,indent:e.indent+1}))))}else return Gi.default.createElement(rle,q(O({},e),{autoFocusInput:e.autoFocusInput,indent:e.indent}))}function rle(e){var n;let r=(n=e.propConfig.label)!=null?n:Jl(e.pathToProp),a=ile(e);if(e.propConfig.type==="enum")return Gi.default.createElement(Gi.default.Fragment,null);{let u=wI[e.propConfig.type];return Gi.default.createElement(SG,null,Gi.default.createElement(h2,null,Gi.default.createElement("span",{style:{paddingLeft:"".concat(e.indent*p2,"px")}},r)),Gi.default.createElement(TG,null,Gi.default.createElement(u,{editingTools:a,propConfig:e.propConfig,value:uk(e.keyframe.value,e.propConfig),autoFocus:e.autoFocusInput})))}}function ile(e){let n=e.sheetObject;return ele(({stateEditors:r},a)=>{let u=q(O({},e.keyframe),{value:a});r.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},n.address),{trackId:e.trackId,keyframes:[u],snappingFunction:n.sheet.getSequence().closestGridPosition}))},n)}var Gi,wG,SG,EG,h2,p2,kG,TG,ole=z(()=>{Gi=te(Ie()),We(),fj(),vf(),nle(),Wc(),SG=se.div(wG||(wG=Q([`
  display: flex;
  align-items: stretch;
  min-width: 200px;

  select {
    min-width: 100px;
  }
`]))),h2=se.div(EG||(EG=Q([`
  font-style: normal;
  font-weight: 400;
  font-size: 11px;
  line-height: 13px;
  letter-spacing: 0.01em;
  padding: 6px 6px 6px 0;

  width: 40%;

  color: #919191;

  overflow: hidden;
`]))),p2=10,TG=se.div(kG||(kG=Q([`
  display: flex;
  align-items: center;
  width: 60%;
`])))});function m2(e){return sl({debugName:"useKeyframeInlineEditorPopover"},()=>g2.default.createElement(ul,{showPopoverEdgeTriangle:!0},g2.default.createElement("div",{style:{margin:"1px 2px 1px 10px"}},Array.isArray(e)?e.map((n,r)=>g2.default.createElement(KD,q(O({key:r},n),{autoFocusInput:r===0,indent:0}))):void 0)))}var g2,v2=z(()=>{g2=te(Ie()),ll(),cl(),ole()});function ale(e,n,r){return wo(e,{displayName:"Keyframe",menuItems:()=>{let a=d2(r.leaf.sheetObject.address.projectId,r.leaf.sheetObject.address.sheetId,r.selection);return[{label:a.length>0?"Copy (selection)":"Copy",callback:()=>{a.length>0?be().transaction(u=>{u.stateEditors.studio.ahistoric.setClipboardKeyframes(a)}):be().transaction(u=>{u.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:r.keyframe,pathToProp:r.leaf.pathToProp}])})}},{label:r.selection!==void 0?"Delete (selection)":"Delete",callback:()=>{r.selection?r.selection.delete():be().transaction(({stateEditors:u})=>{u.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},r.leaf.sheetObject.address),{keyframeIds:[r.keyframe.id],trackId:r.leaf.trackId}))})}}]},onOpen(){n._debug("Show keyframe",r)}})}function sle(e,n,r){let a=(0,td.useRef)(n);a.current=n;let{onClickFromDrag:u}=r,c=(0,td.useMemo)(()=>({debugName:"KeyframeDot/useDragKeyframe",onDragStart(p){let v=a.current,y=(0,y2.val)(be().atomP.historic.coreByProject[v.leaf.sheetObject.address.projectId].sheetsById[v.leaf.sheetObject.address.sheetId].sequence.tracksByObject),k=d7(y,function(A,{trackId:C,objectKey:R}){var N,j;return A.id!==v.keyframe.id&&!(v.selection&&(j=(N=v.selection.byObjectKey[R])==null?void 0:N.byTrackId[C])!=null&&j.byKeyframeId[A.id])});if(c7(k),v.selection){let{selection:A,leaf:C}=v,{sheetObject:R}=C,N=A.getDragHandlers(q(O({},R.address),{domNode:e,positionAtStartOfDrag:v.track.data.keyframes[v.index].position})).onDragStart(p);return N&&q(O({},N),{onClick:u,onDragEnd:(...j)=>{var G;(G=N.onDragEnd)==null||G.call(N,...j),Hf()}})}let M=v,T=(0,y2.val)(M.layoutP.scaledSpace.toUnitSpace),E;return{onDrag(A,C,R){var N;let j=M.track.data.keyframes[M.index],G=Math.max((N=Eo.checkIfMouseEventSnapToPos(R,{ignore:e}))!=null?N:j.position+T(A),0);E==null||E.discard(),E=void 0,E=be().tempTransaction(({stateEditors:J})=>{J.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},M.leaf.sheetObject.address),{trackId:M.leaf.trackId,keyframes:[q(O({},j),{position:G})],snappingFunction:(0,y2.val)(M.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(A){A?E==null||E.commit():E==null||E.discard(),Hf()},onClick(A){u(A)}}}}),[u]),[f]=Ur(e,c);return _u(f,n.keyframe.position),Da(f,"draggingPositionInSequenceEditor","ew-resize"),[f]}var td,y2,Wb,XD,qb,$D,MG,b2,PG,CG,AG,IG,DG,OG,RG=z(()=>{td=te(Ie()),We(),He(),So(),di(),tr(),y2=St,Hi(),aa(),xs(),$k(),Hc(),cg(),nr(),Gf(),v2(),Nf(),Wb=6,XD=Wb+2,qb={normalColor:"#40AAA4",selectedColor:"#F2C95C",inlineEditorOpenColor:"#FCF3DC",selectedAndInlineEditorOpenColor:"#CBEBEA"},$D=({isSelected:e,isInlineEditorPopoverOpen:n})=>e&&n?qb.inlineEditorOpenColor:e?qb.selectedColor:n?qb.selectedAndInlineEditorOpenColor:qb.normalColor,b2=se.div(MG||(MG=Q([`
  position: absolute;
  `,`

  background: `,`;
  transform: rotateZ(45deg);

  `,`;

  z-index: 1;
  pointer-events: none;
`])),La(Wb),e=>$D(e),e=>e.flag===2?"outline: 2px solid white;":""),CG=se.div(PG||(PG=Q([`
  position: absolute;
  `,`

  background: `,`;

  `,`;

  z-index: 1;
  pointer-events: none;
`])),La(Wb*1.5),e=>$D(e),e=>e.flag===2?"outline: 2px solid white;":""),IG=se.div(AG||(AG=Q([`
  z-index: 1;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  & + `,` {
    `,`
  }

  &:hover + `,` {
    `,`
  }
`])),La(12),Qn,b2,e=>e.isInlineEditorPopoverOpen?La(XD):"",b2,La(XD)),DG=e=>{let n=Vc("SingleKeyframeDot",e.keyframe.id),r=zf(e.itemKey),[a,u]=Xn(null),[c]=ale(u,n,e),{node:f,toggle:p,isOpen:v}=m2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.leaf.pathToProp,propConfig:e.leaf.propConf,sheetObject:e.leaf.sheetObject,trackId:e.leaf.trackId}]);sle(u,e,{onClickFromDrag(k){p(k,a.current)}});let y=!e.keyframe.type||e.keyframe.type==="bezier";return td.default.createElement(td.default.Fragment,null,td.default.createElement(IG,O({ref:a,isInlineEditorPopoverOpen:v},r.attrs)),y?td.default.createElement(b2,{isSelected:!!e.selection,isInlineEditorPopoverOpen:v,flag:r.flag}):td.default.createElement(CG,{isSelected:!!e.selection,isInlineEditorPopoverOpen:v,flag:r.flag}),f,c)},OG=DG}),ZD,YD,JD,Xf,LG,zG,QD,NG=z(()=>{oa(),ZD=te(Ie()),We(),RG(),YD=Wb/2+1,JD=1e3,Xf={normalColor:"#365b59",selectedColor:"#8A7842",barColor:e=>{let n=e.isSelected?Xf.selectedColor:Xf.normalColor;return e.isPopoverOpen?TE(.2,Cm(.2,n)):n},hoverColor:e=>{let n=e.isSelected?Xf.selectedColor:Xf.normalColor;return e.isPopoverOpen?TE(.2,Cm(.2,n)):TE(.1,Cm(.1,n))}},zG=se.div(LG||(LG=Q([`
  position: absolute;
  background: `,`;
  height: `,`px;
  width: `,`px;

  left: 0;
  top: -`,`px;
  transform-origin: top left;
  z-index: 0;
  cursor: ew-resize;

  &:after {
    display: block;
    position: absolute;
    content: ' ';
    top: -4px;
    bottom: -4px;
    left: 0;
    right: 0;
  }

  &:hover {
    background: `,`;
  }
`])),Xf.barColor,YD,JD,YD/2,Xf.hoverColor),QD=ZD.default.forwardRef((e,n)=>{let r={isPopoverOpen:e.isPopoverOpen,isSelected:e.isSelected};return ZD.default.createElement(zG,q(O({},r),{ref:n,style:{transform:"scaleX(calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(e.connectorLengthInUnitSpace/JD,"))")},onClick:a=>{var u;(u=e.openPopover)==null||u.call(e,a)}}),e.children)})});function lle(e,n){let r=(0,eO.useRef)(n);r.current=n;let a=(0,eO.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(u){let c=r.current,f;if(c.selection){let{selection:k,leaf:M}=c,{sheetObject:T}=M;return k.getDragHandlers(q(O({},T.address),{domNode:e,positionAtStartOfDrag:c.track.data.keyframes[c.index].position})).onDragStart(u)}let p=c,v=(0,_2.val)(p.layoutP.sheet).getSequence(),y=(0,_2.val)(p.layoutP.scaledSpace.toUnitSpace);return{onDrag(k,M,T){let E=y(k);f&&(f.discard(),f=void 0),f=be().tempTransaction(({stateEditors:A})=>{A.coreByProject.historic.sheetsById.sequence.transformKeyframes(q(O({},p.leaf.sheetObject.address),{trackId:p.leaf.trackId,keyframeIds:[p.keyframe.id,p.track.data.keyframes[p.index+1].id],translate:E,scale:1,origin:0,snappingFunction:v.closestGridPosition}))})},onDragEnd(k){k?f&&f.commit():f&&f.discard()}}}}),[]);Ur(e,a)}function ule(e,n,r,a){return wo(n,{displayName:"Tween",menuItems:()=>{let u=d2(e.leaf.sheetObject.address.projectId,e.leaf.sheetObject.address.sheetId,e.selection);return[{label:u.length>0?"Copy (selection)":"Copy",callback:()=>{u.length>0?be().transaction(c=>{c.stateEditors.studio.ahistoric.setClipboardKeyframes(u)}):be().transaction(c=>{c.stateEditors.studio.ahistoric.setClipboardKeyframes([{keyframe:r,pathToProp:e.leaf.pathToProp},{keyframe:a,pathToProp:e.leaf.pathToProp}])})}},{label:e.selection?"Delete (selection)":"Delete",callback:()=>{e.selection?e.selection.delete():be().transaction(({stateEditors:c})=>{c.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},e.leaf.sheetObject.address),{keyframeIds:[r.id,a.id],trackId:e.leaf.trackId}))})}}]}})}var _2,nd,eO,tO,FG,BG,jG,UG,VG,cle=z(()=>{He(),So(),di(),tr(),_2=St,nd=te(Ie()),eO=te(Ie()),ll(),cl(),c2(),NG(),t2(),on(),cg(),cg(),We(),tO=5,BG=se(ul)(FG||(FG=Q([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: `,`;
`])),zD),jG=e=>{let{index:n,track:r}=e,a=r.data.keyframes[n],u=r.data.keyframes[n+1],[c,f]=Xn(null),{node:p,toggle:v,close:y}=sl(()=>{let E=(0,_2.val)(e.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:E.screenX+tO,maxX:E.screenX+E.width-tO}}},()=>nd.default.createElement(VG,q(O({},e),{closePopover:y}))),[k]=ule(e,f,a,u);lle(f,e);let M=u.position-a.position,T={isPopoverOpen:Tn(()=>WD(q(O({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,left:a,right:u})),[e.leaf.sheetObject.address,e.leaf.trackId,a,u]),isSelected:e.selection!==void 0};return nd.default.createElement(nd.default.Fragment,null,nd.default.createElement(QD,q(O({ref:c,connectorLengthInUnitSpace:M},T),{openPopover:E=>{f&&v(E,f)}}),p),k)},UG=jG,VG=nd.default.forwardRef((e,n)=>{let{index:r,track:{data:a},selection:u}=e,c=a.keyframes[r],f=a.keyframes[r+1],p=e.leaf.trackId,v=e.leaf.sheetObject.address,y=Tn(()=>bG(v.projectId,v.sheetId,u).getValue(),[v,u]),k=O({left:c,right:f,trackId:p},v);return nd.default.createElement(BG,{showPopoverEdgeTriangle:!1,ref:n},nd.default.createElement(GD,{curveConnection:k,additionalConnections:y,onRequestClose:e.closePopover}))})}),HG,$f,GG,WG,qG,KG,XG,dle=z(()=>{HG=St,$f=te(Ie()),We(),cle(),RG(),WG=se.div(GG||(GG=Q([`
  position: absolute;
`]))),qG=$f.default.createElement($f.default.Fragment,null),KG=$f.default.memo(e=>{let{index:n,track:{data:r}}=e,a=r.keyframes[n],u=r.keyframes[n+1],c=a.connectedRight&&!!u;return $f.default.createElement(WG,{style:{top:"".concat(e.leaf.nodeHeight/2,"px"),left:"calc(".concat((0,HG.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(a.position,"px))")}},$f.default.createElement(OG,q(O({},e),{itemKey:e.itemKey})),c?$f.default.createElement(UG,O({},e)):qG)}),XG=KG});function fle(e,n){return wo(e,{displayName:"Keyframe Track",menuItems:()=>{var r;let a=(r=(0,dg.val)(be().atomP.ahistoric.clipboard.keyframesWithRelativePaths))!=null?r:[];return[hle(n,a)]}})}function hle(e,n){return{label:"Paste Keyframes",enabled:n.length>0,callback:()=>{var r;let a=(0,dg.val)(e.layoutP.sheet).getSequence(),u=(r=n[0])==null?void 0:r.pathToProp,c=n.filter(({keyframe:f,pathToProp:p})=>gse(u,p)).map(({keyframe:f,pathToProp:p})=>f);be().transaction(({stateEditors:f})=>{var p;a.position=a.closestGridPosition(a.position);let v=(p=ple(c))==null?void 0:p.position;for(let y of c)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(q(O({},e.leaf.sheetObject.address),{trackId:e.leaf.trackId,position:a.position+y.position-v,handles:y.handles,value:y.value,snappingFunction:a.closestGridPosition,type:y.type}))})}}}function ple(e){let n=null;for(let r of e)(n===null||r.position<n.position)&&(n=r);return n}var dg,xu,$G,ZG,nO,YG,mle=z(()=>{on(),dg=St,xu=te(Ie()),We(),dle(),So(),tr(),He(),ml(),Gf(),gu(),ZG=se.div($G||($G=Q([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),nO=xu.default.memo(e=>{var n;let{layoutP:r,trackData:a,leaf:u}=e,[c,f]=Xn(null),{selectedKeyframeIds:p,selection:v}=Tn(()=>{let G=(0,dg.val)(r.selectionAtom),J=(0,dg.val)(G.pointer.current.byObjectKey[u.sheetObject.address.objectKey].byTrackId[u.trackId].byKeyframeId);return J?{selectedKeyframeIds:J,selection:(0,dg.val)(G.pointer.current)}:{selectedKeyframeIds:{},selection:void 0}},[r,u.trackId]),[y,k,M]=fle(f,e),T=Cn(OD),E=T.mode==="snapToSome"?(n=T.positions[u.sheetObject.address.objectKey])==null?void 0:n[u.trackId]:[],A=T.mode==="snapToAll",C=(0,xu.useMemo)(()=>({data:a,id:u.trackId,sheetObject:e.leaf.sheetObject}),[a,u.trackId]),R=a.keyframes.map((G,J)=>xu.default.createElement(XG,{key:"keyframe-"+G.id,itemKey:wi.forTrackKeyframe(u.sheetObject,u.trackId,G.id),keyframe:G,index:J,track:C,layoutP:r,leaf:u,selection:p[G.id]===!0?v:void 0})),N=E.map(G=>xu.default.createElement(Bb,{key:"snap-target-"+G,layoutP:r,leaf:u,position:G})),j=A?a.keyframes.map(G=>xu.default.createElement(Bb,{key:"additionalSnapTarget-".concat(G.id),layoutP:r,leaf:u,position:G.position})):null;return xu.default.createElement(ZG,{ref:c,style:{background:M?"#444850 ":"unset"}},R,N,xu.default.createElement(xu.default.Fragment,null,j),y)}),nO.displayName="BasicKeyframedTrack",YG=nO}),JG,Kb,QG,eW,gle=z(()=>{He(),on(),JG=St,Kb=te(Ie()),Qk(),mle(),Hc(),QG=({leaf:e,layoutP:n})=>{let r=Vc("PrimitivePropRow",e.pathToProp.join());return Tn(()=>{let{sheetObject:a}=e,{trackId:u}=e,c=(0,JG.val)(be().atomP.historic.coreByProject[a.address.projectId].sheetsById[a.address.sheetId].sequence.tracksByObject[a.address.objectKey].trackData[u]);return(c==null?void 0:c.type)!=="BasicKeyframedTrack"?(r.errorDev("trackData type ".concat(c==null?void 0:c.type," is not yet supported on the sequence editor")),Kb.default.createElement(sg,{leaf:e,isCollapsed:!1,node:Kb.default.createElement("div",null)})):Kb.default.createElement(sg,{leaf:e,isCollapsed:!1,node:Kb.default.createElement(YG,{layoutP:n,trackData:c,leaf:e})})},[e,n])},eW=QG});function vle(e){return e()}var yle=z(()=>{});function tW(e){let{index:n,aggregateKeyframes:r,selection:a}=e;return Tn(nW(e),[n,r,a,e.viewModel])}function nW(e){let{index:n,aggregateKeyframes:r,selection:a}=e,{projectId:u,sheetId:c}=e.viewModel.type==="sheet"?e.viewModel.sheet.address:e.viewModel.sheetObject.address;return()=>{let f=r[n],p=r[n+1],v=p&&f.keyframes.length===p.keyframes.length&&f.keyframes.every(({track:T},E)=>p.keyframes[E].track===T)?{length:p.position-f.position,selected:f.selected===0&&p.selected===0}:null,y=v?f.keyframes.map(({kf:T,track:E},A)=>q(O({},E.sheetObject.address),{trackId:E.id,left:T,right:p.keyframes[A].kf})):[],k=vle(()=>{let T=rO.prism.memo("selectedConnections",()=>bG(u,c,a),[u,c,a]).getValue();return[...y,...T]}),M=y.every(T=>WD(T));return{itemKey:rO.prism.memo("itemKey",()=>e.viewModel.type==="sheet"?wi.forSheetAggregateKeyframe(e.viewModel.sheet,f.position):e.viewModel.type==="sheetObject"?wi.forSheetObjectAggregateKeyframe(e.viewModel.sheetObject,f.position):wi.forCompoundPropAggregateKeyframe(e.viewModel.sheetObject,e.viewModel.pathToProp,f.position),[e.viewModel,f.position]),cur:f,connected:v,isAggregateEditingInCurvePopover:M,allConnections:k}}}var rO,iO=z(()=>{rO=St,gu(),c2(),on(),cg(),yle()});function ble(e,n){let r=(0,za.useRef)(n);r.current=n;let a=(0,za.useMemo)(()=>({debugName:"useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(u){let c=r.current,f,p=c.aggregateKeyframes[c.index].keyframes,{selection:v,viewModel:y}=c,k=y.type==="sheet"?y.sheet.address:y.sheetObject.address;if(v&&c.aggregateKeyframes[c.index].selected===0)return v.getDragHandlers(q(O({},k),{domNode:e,positionAtStartOfDrag:c.aggregateKeyframes[c.index].position})).onDragStart(u);let M=c,T=(0,x2.val)(M.layoutP.sheet).getSequence(),E=(0,x2.val)(M.layoutP.scaledSpace.toUnitSpace);return{onDrag(A,C,R){let N=E(A);f&&(f.discard(),f=void 0),f=be().tempTransaction(({stateEditors:j})=>{for(let G of p)j.coreByProject.historic.sheetsById.sequence.transformKeyframes(q(O({},G.track.sheetObject.address),{trackId:G.track.id,keyframeIds:[G.kf.id,G.track.data.keyframes[G.track.data.keyframes.indexOf(G.kf)+1].id],translate:N,scale:1,origin:0,snappingFunction:T.closestGridPosition}))})},onDragEnd(A){A?f&&f.commit():f&&f.discard()}}}}),[]);return Ur(e,a)}function _le(e,n){return wo(n,{displayName:"Aggregate Tween",menuItems:()=>{let r=e.utils.allConnections.reduce((p,v)=>{var y;return p.concat((y=qD(q(O({},v),{keyframeIds:[v.left.id,v.right.id]})))!=null?y:[])},[]),a=Gk(r.map(p=>p.pathToProp)),u=r.map(({keyframe:p,pathToProp:v})=>({keyframe:p,pathToProp:v.slice(a.length)})),c=e.editorProps.viewModel,f=c.type==="sheet"?c.sheet.address:c.sheetObject.address;return[{label:"Copy",callback:()=>{if(e.editorProps.selection){let p=d2(f.projectId,f.sheetId,e.editorProps.selection);be().transaction(v=>{v.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}else be().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(u)})}},{label:"Delete",callback:()=>{e.editorProps.selection?e.editorProps.selection.delete():be().transaction(({stateEditors:p})=>{for(let v of e.utils.allConnections)p.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},f),{objectKey:v.objectKey,keyframeIds:[v.left.id,v.right.id],trackId:v.trackId}))})}}]}})}var x2,za,oO,rW,iW,oW,aW,xle=z(()=>{x2=St,za=te(Ie()),NG(),ll(),tr(),He(),di(),c2(),iO(),We(),cl(),cg(),So(),ml(),oO=5,iW=se(ul)(rW||(rW=Q([`
  --popover-outer-stroke: transparent;
  --popover-inner-stroke: rgba(26, 28, 30, 0.97);
`]))),oW=za.default.forwardRef((e,n)=>{let{allConnections:r}=tW(e);return za.default.createElement(iW,{showPopoverEdgeTriangle:!1,ref:n},za.default.createElement(GD,{curveConnection:r[0],additionalConnections:r,onRequestClose:e.closePopover}))}),aW=e=>{let[n,r]=Xn(null),{editorProps:a}=e,[u]=_le(e,r),[c]=ble(r,e.editorProps),{node:f,toggle:p,close:v}=sl(()=>{let M=(0,x2.val)(a.layoutP.rightDims);return{debugName:"Connector",constraints:{minX:M.screenX+oO,maxX:M.screenX+M.width-oO}}},()=>za.default.createElement(oW,q(O({},a),{closePopover:v}))),{connected:y,isAggregateEditingInCurvePopover:k}=e.utils;return y||c?za.default.createElement(za.default.Fragment,null,za.default.createElement(QD,{ref:n,connectorLengthInUnitSpace:y?y.length:0,isSelected:y?y.selected:!1,isPopoverOpen:k,openPopover:M=>{r&&p(M,r)}}),f,u):za.default.createElement(za.default.Fragment,null)}});function wle(e){let n={isSelected:e.isSelected,flag:e.flag};return wu.default.createElement(w2,null,e.isAllHere?wu.default.createElement(fW,O({},n)):wu.default.createElement(hW,O({},n)))}var wu,aO,sW,lW,w2,uW,cW,sO,lO,uO,cO,dW,fW,hW,Sle=z(()=>{wu=te(Ie()),We(),$k(),nr(),aO=16,sW=aO+2,w2=se.div(lW||(lW=Q([`
  position: absolute;
  `,`
  z-index: 1;
`])),La(aO)),cW=se.div(uW||(uW=Q([`
  z-index: 2;
  cursor: ew-resize;

  position: absolute;
  `,`;
  `,`;

  &:hover
    + `,`,
    #pointer-root.draggingPositionInSequenceEditor
    &:hover
    + `,` {
    `,`
  }
`])),La(12),Qn,w2,w2,La(sW)),sO="#F2C95C",lO="#40AAA4",uO="#45747C",cO=e=>e.isSelected===0?sO:e.isSelected===1?lO:uO,dW=e=>e.isSelected===0?sO:e.isSelected===1?lO:uO,fW=e=>wu.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wu.default.createElement("rect",{x:"4.46443",y:"10.0078",width:"5",height:"5",transform:"rotate(-45 4.46443 10.0078)",fill:"#212327",stroke:dW(e)}),wu.default.createElement("rect",{x:"3.75732",y:"6.01953",width:"6",height:"6",transform:"rotate(-45 3.75732 6.01953)",fill:cO(e),stroke:e.flag===2?"white":void 0,strokeWidth:e.flag===2?"2px":void 0})),hW=e=>wu.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},wu.default.createElement("rect",{x:"4.46443",y:"8",width:"5",height:"5",transform:"rotate(-45 4.46443 8)",fill:"#23262B",stroke:e.flag===2?"white":cO(e),strokeWidth:e.flag===2?"2px":void 0}))});function Ele(e,n){let r=e.children.map(a=>a.type==="propWithChildren"?dO(a,n):pW(a,n)).filter(fO);return r.length===0?null:{type:"sheetObject",sheetObject:e.sheetObject,children:r}}function dO(e,n){let r=e.children.map(a=>a.type==="propWithChildren"?dO(a,n):pW(a,n)).filter(fO);return r.length===0?null:{type:"propWithChildren",pathToProp:e.pathToProp,propConfig:e.propConf,children:r}}function pW(e,n){let r=n.find(a=>a.track.id===e.trackId);return r?{type:"primitiveProp",keyframe:r.kf,pathToProp:e.pathToProp,propConfig:e.propConf,sheetObject:e.sheetObject,trackId:e.trackId}:null}function kle(e){var n,r,a,u;let{cur:c}=e.utils,f=m2(e.editorProps.viewModel.type==="sheet"?null:e.editorProps.viewModel.type==="sheetObject"?(r=(n=Ele(e.editorProps.viewModel,c.keyframes))==null?void 0:n.children)!=null?r:null:(u=(a=dO(e.editorProps.viewModel,c.keyframes))==null?void 0:a.children)!=null?u:null),p=zf(e.utils.itemKey);p.useRelations(()=>c.keyframes.map(M=>({affects:M.itemKey,flag:2})),[c.keyframes.map(M=>M.track.id).join("-")]);let[v,y]=Xn(null),[k]=Tle(e,y);return Xb.default.createElement(Xb.default.Fragment,null,Xb.default.createElement(cW,q(O(O({ref:v},p.attrs),Eo.includePositionSnapAttrs(c.position)),{onClick:M=>e.editorProps.viewModel.type!=="sheet"?f.open(M,v.current):null})),Xb.default.createElement(wle,{flag:p.flag,isAllHere:c.allHere,isSelected:c.selected}),k,f.node)}function Tle(e,n){return wo(n,{displayName:"Aggregate Keyframe",menuItems:()=>{let r=e.editorProps.viewModel,a=e.editorProps.selection;return[{label:a?"Copy (selection)":"Copy",callback:()=>{if(a){let{projectId:u,sheetId:c}=r.type==="sheet"?r.sheet.address:r.sheetObject.address,f=d2(u,c,a);be().transaction(p=>{p.stateEditors.studio.ahistoric.setClipboardKeyframes(f)})}else{let u=e.utils.cur.keyframes.flatMap(v=>{var y;return(y=qD(q(O({},v.track.sheetObject.address),{trackId:v.track.id,keyframeIds:[v.kf.id]})))!=null?y:[]}),c=r.type==="sheet"?[]:r.type==="sheetObject"?[r.sheetObject.address.objectKey]:r.type==="propWithChildren"?[r.sheetObject.address.objectKey,...r.pathToProp]:[],f=Gk([c,...u.map(v=>v.pathToProp)]),p=u.map(({keyframe:v,pathToProp:y})=>({keyframe:v,pathToProp:y.slice(f.length)}));be().transaction(v=>{v.stateEditors.studio.ahistoric.setClipboardKeyframes(p)})}}},{label:a?"Delete (selection)":"Delete",callback:()=>{a?a.delete():be().transaction(({stateEditors:u})=>{for(let c of e.utils.cur.keyframes)u.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},c.track.sheetObject.address),{keyframeIds:[c.kf.id],trackId:c.track.id}))})}}]}})}var Xb,fO,Mle=z(()=>{Xb=te(Ie()),tr(),Nf(),So(),Sle(),He(),cg(),ml(),xs(),v2(),fO=e=>e!==null}),mW,$b,gW,vW,yW,bW,Ple=z(()=>{mW=St,$b=te(Ie()),We(),xle(),iO(),Mle(),vW=se.div(gW||(gW=Q([`
  position: absolute;
`]))),yW=$b.default.memo(e=>{let n=tW(e);return $b.default.createElement(vW,{style:{top:"".concat(e.viewModel.nodeHeight/2,"px"),left:"calc(".concat((0,mW.val)(e.layoutP.scaledSpace.leftPadding),"px + calc(var(--unitSpaceToScaledSpaceMultiplier) * ").concat(n.cur.position,"px))")}},$b.default.createElement(kle,{editorProps:e,utils:n}),$b.default.createElement(aW,{editorProps:e,utils:n}))}),bW=yW});function Cle(e){let{layoutP:n,aggregatedKeyframes:r,viewModel:a}=e,u=Vc("AggregatedKeyframeTrack"),[c,f]=Xn(null),{selectedPositions:p,selection:v}=Ale(n,r),[y,k,M]=Ole(f,e,()=>u._debug("see aggregatedKeyframes",e.aggregatedKeyframes)),T=(0,Na.useMemo)(()=>[...r.byPosition.entries()].sort((G,J)=>G[0]-J[0]).map(([G,J])=>({position:G,keyframes:J,selected:p.get(G),allHere:J.length===r.tracks.length})),[r,p]),E=Cn(OD),A=E.mode==="snapToAll",C=E.mode==="snapToSome"?E.positions:LI,R=(0,Na.useMemo)(()=>a.type==="sheet"?kse(a,C):TD(a,C),[C]).map(G=>Na.default.createElement(Bb,{key:"snap-target-"+G,layoutP:n,leaf:a,position:G})),N=(0,Na.useMemo)(()=>T.map(({position:G,keyframes:J},Y)=>({position:G,editorProps:{index:Y,layoutP:n,viewModel:a,aggregateKeyframes:T,selection:p.has(G)?v:void 0}})),[T,a,p]);Nle(f,G=>{var J;return(J=N.find(Y=>Y.position===G))==null?void 0:J.editorProps},{onClickFromDrag(G){}});let j=N.map((G,J)=>Na.default.createElement(Na.Fragment,{key:"agg-"+T[J].keyframes[0].kf.id},A&&Na.default.createElement(Bb,{layoutP:n,leaf:a,position:G.position}),Na.default.createElement(bW,O({},G.editorProps))));return Na.default.createElement(SW,{ref:c,style:{background:M?"#444850 ":"unset"}},j,R,y)}function Ale(e,n){return Tn(()=>(0,To.val)(Ile(e,n)),[e,n])}function Ile(e,n){return(0,To.prism)(()=>{let r=(0,To.val)(e.selectionAtom),a=(0,To.val)(r.pointer.current);if(!a)return EW;let u=new Map;for(let[c,f]of n.byPosition){let p=Dle(f,a);p!==void 0&&p!==E2&&u.set(c,p)}return{selectedPositions:u,selection:(0,To.val)(r.pointer.current)}})}function Dle(e,n){var r,a,u;let c;for(let{track:f,kf:p}of e){let v=((u=(a=(r=n.byObjectKey[f.sheetObject.address.objectKey])==null?void 0:r.byTrackId[f.id])==null?void 0:a.byKeyframeId)==null?void 0:u[p.id])===!0;c===void 0?v?c=mO:c=E2:v?c===E2&&(c=gO):c===mO&&(c=gO)}return c}function Ole(e,n,r){return wo(e,{onOpen:r,displayName:"Aggregate Keyframe Track",menuItems:()=>{var a;let u=(a=(0,To.pointerToPrism)(be().atomP.ahistoric.clipboard.keyframesWithRelativePaths).getValue())!=null?a:[];return[Rle(n,u)]}})}function Rle(e,n){return{label:"Paste Keyframes",enabled:n.length>0,callback:()=>{let r=(0,To.val)(e.layoutP.sheet).getSequence();e.viewModel.type==="sheet"?Lle(e.viewModel,n,r):zle(e.viewModel,n,r)}}}function Lle(e,n,r){var a;let{projectId:u,sheetId:c,sheetInstanceId:f}=e.sheet.address;if(n.every(({pathToProp:p})=>p.length===0))for(let p of e.children.map(v=>v.sheetObject)){let v=(0,To.pointerToPrism)(be().atomP.historic.coreByProject[u].sheetsById[c].sequence.tracksByObject[p.address.objectKey]).getValue(),y=Object.keys((a=v==null?void 0:v.trackData)!=null?a:{});hO(p.address,y,n,r)}else{let p=(0,To.pointerToPrism)(be().atomP.historic.coreByProject[u].sheetsById[c].sequence.tracksByObject).getValue(),v=n.map(({keyframe:y,pathToProp:k})=>{var M,T;let E=k[0],A=k.slice(1),C=pl([...A]),R=((T=(M=p==null?void 0:p[E])==null?void 0:M.trackIdByPropPath)!=null?T:{})[C];return R?{keyframe:y,trackId:R,address:{objectKey:E,projectId:u,sheetId:c,sheetInstanceId:f}}:null}).filter(y=>y!==null);_W(v,r)}}function zle(e,n,r){var a;let{projectId:u,sheetId:c,objectKey:f}=e.sheetObject.address,p=(0,To.pointerToPrism)(be().atomP.historic.coreByProject[u].sheetsById[c].sequence.tracksByObject[f]).getValue();if(n.every(({pathToProp:v})=>v.length===0)){let v=Object.keys((a=p==null?void 0:p.trackData)!=null?a:{});if(e.type==="sheetObject")hO(e.sheetObject.address,v,n,r);else{let y=(p==null?void 0:p.trackIdByPropPath)||{},k=Object.entries(y).filter(([M,T])=>T!==void 0&&mse(Wk(M),e.pathToProp)).map(([M,T])=>T);hO(e.sheetObject.address,k,n,r)}}else{let v=(p==null?void 0:p.trackIdByPropPath)||{},y=e.type==="propWithChildren"?e.pathToProp:[],k=n.map(({keyframe:M,pathToProp:T})=>{let E=pl([...y,...T]),A=v[E];return A?{keyframe:M,trackId:A,address:e.sheetObject.address}:null}).filter(M=>M!==null);_W(k,r)}}function hO(e,n,r,a){var u;a.position=a.closestGridPosition(a.position);let c=(u=xW(r.map(({keyframe:f})=>f)))==null?void 0:u.position;be().transaction(({stateEditors:f})=>{for(let p of n)for(let{keyframe:v}of r)f.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(q(O({},e),{trackId:p,position:a.position+v.position-c,handles:v.handles,value:v.value,snappingFunction:a.closestGridPosition,type:v.type}))})}function _W(e,n){var r;n.position=n.closestGridPosition(n.position);let a=(r=xW(e.map(({keyframe:u})=>u)))==null?void 0:r.position;be().transaction(({stateEditors:u})=>{for(let{keyframe:c,trackId:f,address:p}of e)u.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(q(O({},p),{trackId:f,position:n.position+c.position-a,handles:c.handles,value:c.value,snappingFunction:n.closestGridPosition,type:c.type}))})}function xW(e){let n=null;for(let r of e)(n===null||r.position<n.position)&&(n=r);return n}function Nle(e,n,r){let a=Vc("useDragForAggregateKeyframeDot"),u=r7(),c=(0,Na.useMemo)(()=>({debugName:"AggregateKeyframeDot/useDragKeyframe",onDragStart(p){a._debug("onDragStart",{target:p.target});let v=Number(p.target.dataset.pos),y=n(v);if(!y)return a._debug("no props found for ",{positionToFind:v}),!1;u(!0,v);let k=(0,To.prism)(nW(y)).getValue().cur.keyframes,M=y.viewModel.type==="sheet"?y.viewModel.sheet.address:y.viewModel.sheetObject.address,T=(0,To.val)(be().atomP.historic.coreByProject[M.projectId].sheetsById[M.sheetId].sequence.tracksByObject),E=d7(T,function(N,{trackId:j,objectKey:G}){var J,Y;return k.every(re=>N.id!==re.kf.id)&&!(y.selection&&(Y=(J=y.selection.byObjectKey[G])==null?void 0:J.byTrackId[j])!=null&&Y.byKeyframeId[N.id])});if(c7(E),y.selection&&y.aggregateKeyframes[y.index].selected===0){let{selection:N,viewModel:j}=y,G=N.getDragHandlers(q(O({},M),{domNode:e,positionAtStartOfDrag:k[0].kf.position})).onDragStart(p);return G&&q(O({},G),{onClick:r.onClickFromDrag,onDragEnd:(...J)=>{var Y;(Y=G.onDragEnd)==null||Y.call(G,...J),Hf()}})}let A=y,C=(0,To.val)(A.layoutP.scaledSpace.toUnitSpace),R;return{onDrag(N,j,G){var J;let Y=Math.max((J=Eo.checkIfMouseEventSnapToPos(G,{}))!=null?J:k[0].kf.position+C(N),0);u(!0,Y),R==null||R.discard(),R=void 0,R=be().tempTransaction(({stateEditors:re})=>{for(let ye of k){let ke=ye.kf;re.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},ye.track.sheetObject.address),{trackId:ye.track.id,keyframes:[q(O({},ke),{position:Y})],snappingFunction:(0,To.val)(A.layoutP.sheet).getSequence().closestGridPosition}))}})},onDragEnd(N){u(!1,-1),N?R==null||R.commit():(R==null||R.discard(),r.onClickFromDrag(p)),Hf()},onClick(N){r.onClickFromDrag(N)}}}}),[n,r.onClickFromDrag]),[f]=Ur(e,c);return Da(f,"draggingPositionInSequenceEditor","ew-resize"),[f]}var To,Na,wW,SW,EW,kW,S2,pO,mO,gO,E2,vO=z(()=>{on(),To=St,Na=te(Ie()),We(),So(),tr(),Ple(),og(),Hc(),iO(),xs(),di(),Hi(),aa(),He(),ml(),Gf(),h8(),Gf(),og(),SW=se.div(wW||(wW=Q([`
  position: relative;
  height: 100%;
  width: 100%;
`]))),EW=Object.freeze({selectedPositions:new Map,selection:void 0}),kW=Na.default.memo(Cle),S2=kW,pO=(e=>(e[e.AllSelected=0]="AllSelected",e[e.AtLeastOneUnselected=1]="AtLeastOneUnselected",e[e.NoneSelected=2]="NoneSelected",e))(pO||{}),{AllSelected:mO,AtLeastOneUnselected:gO,NoneSelected:E2}=pO}),fg,yO,TW,Fle=z(()=>{on(),fg=te(Ie()),gle(),Qk(),vO(),og(),Hc(),yO=(e,n)=>e.type==="propWithChildren"?fg.default.createElement(TW,{layoutP:n,viewModel:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}):fg.default.createElement(eW,{layoutP:n,leaf:e,key:"prop"+e.pathToProp[e.pathToProp.length-1]}),TW=({viewModel:e,layoutP:n})=>{let r=Vc("RightPropWithChildrenRow",e.pathToProp.join());return Tn(()=>{let a=Kk(e);return fg.default.createElement(wF,{logger:r},fg.default.createElement(sg,{leaf:e,node:fg.default.createElement(S2,{layoutP:n,aggregatedKeyframes:a,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(u=>yO(u,n))))},[e,n])}}),bO,MW,PW,Ble=z(()=>{on(),bO=te(Ie()),Fle(),Qk(),og(),vO(),MW=({leaf:e,layoutP:n})=>Tn(()=>{let r=Kk(e);return bO.default.createElement(sg,{leaf:e,node:bO.default.createElement(S2,{layoutP:n,aggregatedKeyframes:r,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(a=>yO(a,n)))},[e,n]),PW=MW}),k2,CW,AW,jle=z(()=>{on(),k2=te(Ie()),Ble(),Qk(),og(),vO(),CW=({leaf:e,layoutP:n})=>Tn(()=>{let r=Kk(e);return k2.default.createElement(sg,{leaf:e,node:k2.default.createElement(S2,{layoutP:n,aggregatedKeyframes:r,viewModel:e}),isCollapsed:e.isCollapsed},e.children.map(a=>k2.default.createElement(PW,{layoutP:n,key:"sheetObject-"+a.sheetObject.address.objectKey,leaf:a})))},[e,n]),AW=CW}),Zb,Zf,T2,IW,DW,OW,RW,LW=z(()=>{on(),Zb=St,Zf=te(Ie()),We(),Pse(),w7(),jle(),T2=1e6,DW=se.ul(IW||(IW=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
  position: absolute;
  left: 0;
  width: `,`px;
`])),T2),OW=({layoutP:e})=>Tn(()=>{let n=(0,Zb.val)(e.tree),r=(0,Zb.val)(e.tree.top)+Math.max((0,Zb.val)(e.tree.heightIncludingChildren),(0,Zb.val)(e.dopeSheetDims.height));return Zf.default.createElement(Zf.default.Fragment,null,Zf.default.createElement(LD,{layoutP:e,height:r},Zf.default.createElement(GH,{layoutP:e,height:r},Zf.default.createElement(DW,{style:{top:n.top+"px"}},Zf.default.createElement(AW,{leaf:n,layoutP:e})))))},[e]),RW=OW});function _O(e,n,r,a){let u="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(e,"px)"),c="calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(n,") * 1px)");r===0&&(r=1e-4);let f="calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(r,")");a===0&&(a=.001);let p="calc(var(--graphEditorVerticalSpace) * ".concat(a*-1,")");return"translate(".concat(u,", ").concat(c,") scale(").concat(f,", ").concat(p,")")}function Ule(e,n){let{index:r,trackData:a}=n,u=a.keyframes[r],c=a.keyframes[r+1];return wo(e,{menuItems:()=>[{label:"Delete",callback:()=>{be().transaction(({stateEditors:f})=>{let{deleteKeyframes:p}=f.coreByProject.historic.sheetsById.sequence;p(q(O({},n.sheetObject.address),{trackId:n.trackId,keyframeIds:[u.id,c.id]}))})}}]})}var M2,zW,NW,FW,BW,jW,xO=z(()=>{Wc(),He(),So(),tr(),M2=te(Ie()),We(),NW=se.path(zW||(zW=Q([`
  stroke-width: 2;
  stroke: var(--main-color);
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),FW="M 0 0 L 1 0 L 1 1",BW=e=>{let{index:n,trackData:r}=e,a=r.keyframes[n],u=r.keyframes[n+1],c=u.position-a.position,[f,p]=Xn(null),[v]=Ule(p,e),y=e.isScalar?uk(a.value,e.propConfig):0,k=e.isScalar?uk(u.value,e.propConfig):1,M=e.extremumSpace.fromValueSpace(y),T=e.extremumSpace.fromValueSpace(k)-M,E=_O(a.position,M,c,T),A=a.handles[2],C=a.handles[3],R=u.handles[0],N=u.handles[1],j="M 0 0 C ".concat(A," ").concat(C," ").concat(R," ").concat(N," 1 1");return M2.default.createElement(M2.default.Fragment,null,M2.default.createElement(NW,{ref:f,d:!a.type||a.type==="bezier"?j:FW,style:{transform:E}}),v)},jW=BW});function Vle(e,n){let r=(0,Yf.useRef)(n);r.current=n;let a=(0,Yf.useMemo)(()=>({debugName:"CurveHandler/useOurDrags",lockCSSCursorTo:"move",onDragStart(){let u,c=r.current,f=(0,Yb.val)(c.layoutP.scaledSpace.toUnitSpace),p=(0,Yb.val)(c.layoutP.graphEditorVerticalSpace.toExtremumSpace),v=c.extremumSpace.lock();return{onDrag(y,k){u&&(u.discard(),u=void 0);let{index:M,trackData:T}=c,E=T.keyframes[M],A=T.keyframes[M+1],C=f(y)/(A.position-E.position),R=-k,N=p(R),j=c.extremumSpace.deltaToValueSpace(N),G=n.isScalar?E.value:0,J=n.isScalar?A.value:1,Y=j/(J-G);if(c.which==="left"){let re=Tr(E.handles[2]+C,0,1),ye=E.handles[3]+Y;u=be().tempTransaction(({stateEditors:ke})=>{ke.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},c.sheetObject.address),{snappingFunction:(0,Yb.val)(c.layoutP.sheet).getSequence().closestGridPosition,trackId:c.trackId,keyframes:[q(O({},E),{handles:[E.handles[0],E.handles[1],re,ye]})]}))})}else{let re=Tr(A.handles[0]+C,0,1),ye=A.handles[1]+Y;u=be().tempTransaction(({stateEditors:ke})=>{ke.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},c.sheetObject.address),{trackId:c.trackId,snappingFunction:(0,Yb.val)(c.layoutP.sheet).getSequence().closestGridPosition,keyframes:[q(O({},A),{handles:[re,ye,A.handles[2],A.handles[3]]})]}))})}},onDragEnd(y){v(),y?u&&u.commit():u&&u.discard()}}}}),[]);Ur(e,a)}function Hle(e,n){return wo(e,{menuItems:()=>[{label:"Delete",callback:()=>{be().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}var Yb,Yf,UW,wO,VW,HW,GW,WW,qW,SO,Gle=z(()=>{He(),So(),di(),tr(),Yb=St,Xr(),Yf=te(Ie()),We(),xO(),nr(),wO=se.circle(UW||(UW=Q([`
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;
  fill: var(--main-color);
  r: 2px;
  pointer-events: none;
`]))),HW=se.circle(VW||(VW=Q([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  cursor: move;
  `,`;
  &:hover {
  }
  &:hover + `,` {
    r: 6px;
  }
`])),Qn,wO),WW=se.path(GW||(GW=Q([`
  stroke-width: 1;
  stroke: var(--main-color);
  /* stroke: gray; */
  fill: none;
  vector-effect: non-scaling-stroke;
`]))),qW=e=>{let[n,r]=Xn(null),{index:a,trackData:u}=e,c=u.keyframes[a],f=u.keyframes[a+1],[p]=Hle(r,e);Vle(r,e);let v=e.which==="left"?c.handles[2]:f.handles[0],y=c.position+(f.position-c.position)*v,k=e.which==="left"?c.handles[3]:f.handles[1],M=e.isScalar?c.value:0,T=e.isScalar?f.value:1,E=M+(T-M)*k,A=e.extremumSpace.fromValueSpace(E),C=A-e.extremumSpace.fromValueSpace(e.which==="left"?M:T),R=_O(e.which==="left"?c.position:f.position,e.extremumSpace.fromValueSpace(e.which==="left"?M:T),y-(e.which==="left"?c.position:f.position),C);return Yf.default.createElement("g",null,Yf.default.createElement(HW,{ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(y," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}}),Yf.default.createElement(wO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(y," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(A,") * 1px)")}}),Yf.default.createElement(WW,{d:"M 0 0 L 1 1",style:{transform:R}}),p)},SO=qW});function Wle(e){let[n,r]=(0,rd.useState)(!1);_u(n,e.props.keyframe.position);let a=(0,rd.useRef)(e.props);a.current=e.props;let u=(0,rd.useMemo)(()=>({debugName:"GraphEditorDotScalar/useDragKeyframe",lockCSSCursorTo:"move",onDragStart(c){r(!0);let f=!!c.altKey,p=a.current,v=(0,P2.val)(p.layoutP.scaledSpace.toUnitSpace),y=(0,P2.val)(p.layoutP.graphEditorVerticalSpace.toExtremumSpace),k=p.extremumSpace.lock(),M;return{onDrag(T,E){let A=p.trackData.keyframes[p.index],C=v(T),R=-E,N=y(R),j=p.extremumSpace.deltaToValueSpace(N),G=[],J=q(O({},A),{position:A.position+C,value:A.value+j,handles:[...A.handles]});if(G.push(J),f){let Y=p.trackData.keyframes[p.index-1];if(Y&&Math.abs(A.value-Y.value)>0){let ye=q(O({},Y),{handles:[...Y.handles]});G.push(ye),ye.handles[3]=Kle(Y.handles[3],Y.value,Y.value,A.value,J.value)}let re=p.trackData.keyframes[p.index+1];if(re&&Math.abs(A.value-re.value)>0){let ye=q(O({},re),{handles:[...re.handles]});G.push(ye),ye.handles[1]=Xle(ye.handles[1],ye.value,ye.value,A.value,J.value)}}M==null||M.discard(),M=be().tempTransaction(({stateEditors:Y})=>{Y.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},p.sheetObject.address),{trackId:p.trackId,keyframes:G,snappingFunction:(0,P2.val)(p.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(T){r(!1),k(),T?M==null||M.commit():(M==null||M.discard(),e.onDetectedClick(c))}}}}),[]);return Ur(e.node,u),Da(n,"draggingPositionInSequenceEditor","move"),n}function qle(e,n){return wo(e,{menuItems:()=>[{label:"Delete",callback:()=>{be().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}function Kle(e,n,r,a,u){return(a-n)*e/(u-r)}function Xle(e,n,r,a,u){return((n-a)*e+a-n+r-u)/(r-u)}var P2,rd,KW,EO,XW,$W,ZW,YW,$le=z(()=>{He(),So(),di(),tr(),P2=St,rd=te(Ie()),We(),Hi(),Hi(),nr(),aa(),xs(),v2(),Nf(),EO=se.circle(KW||(KW=Q([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),$W=se.circle(XW||(XW=Q([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: move;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Qn,EO,du),ZW=e=>{let[n,r]=Xn(null),{index:a,trackData:u}=e,c=u.keyframes[a],[f]=qle(r,e),p=zf(e.itemKey),v=c.value,y=e.extremumSpace.fromValueSpace(v),k=m2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),M=Wle({node:r,props:e,onDetectedClick:T=>k.toggle(T,T.target instanceof Element?T.target:r)});return rd.default.createElement(rd.default.Fragment,null,rd.default.createElement($W,q(O(O(O({ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(c.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(y,") * 1px)")}},gl(c.position)),Eo.includePositionSnapAttrs(c.position)),p.attrs),{className:M?"beingDragged":""})),rd.default.createElement(EO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(c.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(y,") * 1px)"),fill:p.flag===2?"white":void 0}}),k.node,f)},YW=ZW});function Zle(e){let[n,r]=(0,id.useState)(!1);_u(n,e.props.keyframe.position);let a=(0,id.useRef)(e.props);a.current=e.props;let u=(0,id.useMemo)(()=>({debugName:"GraphEditorDotNonScalar/useDragKeyframe",lockCSSCursorTo:"ew-resize",onDragStart(c){r(!0);let f=a.current,p=(0,kO.val)(f.layoutP.scaledSpace.toUnitSpace),v=f.extremumSpace.lock(),y;return{onDrag(k,M){let T=f.trackData.keyframes[f.index],E=p(k),A=[],C=q(O({},T),{position:T.position+E,value:T.value,handles:[...T.handles]});A.push(C),y==null||y.discard(),y=be().tempTransaction(({stateEditors:R})=>{R.coreByProject.historic.sheetsById.sequence.replaceKeyframes(q(O({},f.sheetObject.address),{trackId:f.trackId,keyframes:A,snappingFunction:(0,kO.val)(f.layoutP.sheet).getSequence().closestGridPosition}))})},onDragEnd(k){r(!1),v(),k?y==null||y.commit():(y==null||y.discard(),e.onDetectedClick(c))}}}}),[]);return Ur(e.node,u),Da(n,"draggingPositionInSequenceEditor","ew-resize"),n}function Yle(e,n){return wo(e,{menuItems:()=>[{label:"Delete",callback:()=>{be().transaction(({stateEditors:r})=>{r.coreByProject.historic.sheetsById.sequence.deleteKeyframes(q(O({},n.sheetObject.address),{keyframeIds:[n.keyframe.id],trackId:n.trackId}))})}}]})}var kO,id,JW,TO,QW,eq,tq,MO,Jle=z(()=>{He(),So(),di(),tr(),kO=St,id=te(Ie()),We(),Hi(),Hi(),nr(),aa(),xs(),v2(),Nf(),TO=se.circle(JW||(JW=Q([`
  fill: var(--main-color);
  stroke-width: 1px;
  vector-effect: non-scaling-stroke;

  r: 2px;
`]))),eq=se.circle(QW||(QW=Q([`
  stroke-width: 6px;
  vector-effect: non-scaling-stroke;
  r: 6px;
  fill: transparent;
  `,`;

  &:hover + `,` {
    r: 6px;
  }

  #pointer-root.normal & {
    cursor: ew-resize;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.beingDragged {
    pointer-events: none !important;
  }
`])),Qn,TO,du),tq=e=>{let[n,r]=Xn(null),{index:a,trackData:u,itemKey:c}=e,f=u.keyframes[a],[p]=Yle(r,e),v=zf(c),y=e.which==="left"?0:1,k=m2([{type:"primitiveProp",keyframe:e.keyframe,pathToProp:e.pathToProp,propConfig:e.propConfig,sheetObject:e.sheetObject,trackId:e.trackId}]),M=Zle({node:r,props:e,onDetectedClick:E=>k.toggle(E,E.target instanceof Element?E.target:r)}),T=e.extremumSpace.fromValueSpace(y);return id.default.createElement(id.default.Fragment,null,id.default.createElement(eq,q(O(O(O({ref:n,style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(T,") * 1px)")}},v.attrs),gl(f.position)),Eo.includePositionSnapAttrs(f.position)),{className:M?"beingDragged":""})),id.default.createElement(TO,{style:{cx:"calc(var(--unitSpaceToScaledSpaceMultiplier) * ".concat(f.position," * 1px)"),cy:"calc((var(--graphEditorVerticalSpace) - var(--graphEditorVerticalSpace) * ".concat(T,") * 1px)"),fill:v.flag===2?"white":void 0}}),k.node,p)},MO=tq}),C2,nq,rq,iq,oq,Qle=z(()=>{C2=te(Ie()),We(),xO(),rq=se.path(nq||(nq=Q([`
  stroke-width: 2;
  stroke: var(--main-color);
  stroke-dasharray: 3 2;
  fill: none;
  vector-effect: non-scaling-stroke;
  opacity: 0.3;
`]))),iq=e=>{let{index:n,trackData:r}=e,a="M 0 0 L 1 1",u=_O(r.keyframes[n].position,e.extremumSpace.fromValueSpace(0),0,e.extremumSpace.fromValueSpace(1)-e.extremumSpace.fromValueSpace(0));return C2.default.createElement(C2.default.Fragment,null,C2.default.createElement(rq,{d:a,style:{transform:u}}))},oq=iq}),Wi,aq,sq,lq,uq,cq,eue=z(()=>{Wi=te(Ie()),We(),xO(),Gle(),$le(),Jle(),Qle(),sq=se.g(aq||(aq=Q([`
  /* position: absolute; */
`]))),lq=Wi.default.createElement(Wi.default.Fragment,null),uq=e=>{let{index:n,trackData:r,isScalar:a}=e,u=r.keyframes[n],c=r.keyframes[n+1],f=u.connectedRight&&!!c&&c.value!==u.value;return Wi.default.createElement(sq,null,f?Wi.default.createElement(Wi.default.Fragment,null,Wi.default.createElement(jW,O({},e)),!u.type||u.type==="bezier"&&Wi.default.createElement(Wi.default.Fragment,null,Wi.default.createElement(SO,q(O({},e),{which:"left"})),Wi.default.createElement(SO,q(O({},e),{which:"right"})))):lq,a?Wi.default.createElement(YW,O({},e)):Wi.default.createElement(Wi.default.Fragment,null,Wi.default.createElement(MO,q(O({},e),{which:"left"})),Wi.default.createElement(MO,q(O({},e),{which:"right"})),Wi.default.createElement(oq,O({},e))))},cq=uq});function tue(e,n){let r=1/0,a=-1/0;function u(c){r=Math.min(c,r),a=Math.max(c,a)}return e.forEach((c,f)=>{let p=uk(c.value,n);if(u(p),!c.connectedRight)return;let v=e[f+1];if(!v)return;let y=(typeof v.value=="number"?v.value:1)-p;u(p+c.handles[3]*y),u(p+v.handles[1]*y)}),[r,a]}function nue(e){let n=0,r=1;function a(u){n=Math.min(u,n),r=Math.max(u,r)}return e.forEach((u,c)=>{if(!u.connectedRight)return;let f=e[c+1];f&&(a(u.handles[3]),a(f.handles[1]))}),[n,r]}var yl,dq,fq,rue=z(()=>{gu(),yl=te(Ie()),I2(),eue(),Wc(),on(),dq=yl.default.memo(({layoutP:e,trackData:n,sheetObject:r,trackId:a,color:u,pathToProp:c})=>{let f=lk(Cn(r.template.configPointer),c);if(fl(f))return console.error("Composite prop types cannot be keyframed"),yl.default.createElement(yl.default.Fragment,null);let[p,v]=(0,yl.useState)(!1),y=(0,yl.useMemo)(()=>{let E=new Set;return function(){let A=E.size===0;E.add(C),A&&v(!0);function C(){let R=E.size>0;E.delete(C),R&&E.size===0&&v(!1)}return C}},[]),k=(0,yl.useMemo)(()=>{let E=f.type==="number"?tue(n.keyframes,f):nue(n.keyframes),A=N=>(N-E[0])/(E[1]-E[0]),C=N=>E[0]+R(N),R=N=>N*(E[1]-E[0]);return{fromValueSpace:A,toValueSpace:C,deltaToValueSpace:R,lock:y}},[n.keyframes]),M=(0,yl.useRef)(void 0);p||(M.current=k);let T=n.keyframes.map((E,A)=>yl.default.createElement(cq,{pathToProp:c,propConfig:f,itemKey:wi.forTrackKeyframe(r,a,E.id),keyframe:E,index:A,trackData:n,layoutP:e,sheetObject:r,trackId:a,isScalar:f.type==="number",key:E.id,extremumSpace:M.current,color:u}));return yl.default.createElement("g",{style:{"--main-color":Jb[u].iconColor}},T)}),fq=dq}),hq,A2,pq,mq,iue=z(()=>{He(),on(),hq=St,A2=te(Ie()),rue(),pq=e=>Tn(()=>{let{sheetObject:n,trackId:r}=e,a=(0,hq.val)(be().atomP.historic.coreByProject[n.address.projectId].sheetsById[n.address.sheetId].sequence.tracksByObject[n.address.objectKey].trackData[r]);return(a==null?void 0:a.type)!=="BasicKeyframedTrack"?(console.error("trackData type ".concat(a==null?void 0:a.type," is not yet supported on the graph editor")),A2.default.createElement(A2.default.Fragment,null)):A2.default.createElement(fq,q(O({},e),{trackData:a}))},[e.trackId,e.layoutP]),mq=pq});function gq({clippedSpaceRange:e,clippedSpaceWidth:n,fps:r,gapWidth:a=120},u){let c=1/r,f=e.end-e.start,p=n/(r*f),v=Math.floor(a/p),y=(v<r?vq(r).find(T=>T>=v):r*Math.floor(v/r))*c,k=Math.floor(e.start/y),M=Math.ceil(e.end/y);for(let T=k;T<=M;T++){let E=T*y,A=E%1===0;u(E,A)}}var vq,yq=z(()=>{Xr(),vq=Up(e=>{let n=[];for(let r=1;r<=e;r++)e%r===0&&n.push(r);return n})});function oue(e){let{clippedSpaceWidth:n,height:r,ctx:a,unitSpaceToClippedSpace:u,snapToGrid:c}=e;a.clearRect(0,0,n,r),gq(e,(f,p)=>{let v=c(f),y=Math.floor(u(v));a.strokeStyle=p?"rgba(225, 225, 225, 0.04)":"rgba(255, 255, 255, 0.01)",a.beginPath(),a.moveTo(y,0),a.lineTo(y,r),a.stroke(),a.closePath()})}var Jf,Qf,bq,_q,xq,wq,Sq,Eq,kq,Tq,PO,Mq=z(()=>{Jf=St,Qf=te(Ie()),We(),yq(),He(),_q=se.div(bq||(bq=Q([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),wq=se.canvas(xq||(xq=Q([`
  position: relative;
  left: 0;
`]))),Sq=e=>{let n=e;return n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1},Eq=()=>window.devicePixelRatio||1,kq=e=>Eq()/Sq(e),Tq=({layoutP:e,width:n,height:r})=>{let a=(0,Qf.useRef)(null),[u,c]=(0,Qf.useState)(null),{ctx:f,ratio:p}=(0,Qf.useMemo)(()=>{if(!u)return{};let v=u.getContext("2d"),y=kq(v);return{ctx:v,ratio:y}},[u]);return(0,Qf.useLayoutEffect)(()=>{if(!f)return;u.width=n*p,u.height=r*p;let v=(0,Jf.prism)(()=>{let y=(0,Jf.val)(e.sheet).getSequence();return{ctx:f,clippedSpaceRange:(0,Jf.val)(e.clippedSpace.range),clippedSpaceWidth:(0,Jf.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,Jf.val)(e.clippedSpace.fromUnitSpace),height:r,leftPadding:(0,Jf.val)(e.scaledSpace.leftPadding),fps:y.subUnitsPerUnit,snapToGrid:k=>y.closestGridPosition(k)}}).onChange(be().ticker,y=>{f.save(),f.scale(p,p),oue(y),f.restore()},!0);return()=>{v()}},[f,n,r,e]),Qf.default.createElement(_q,{ref:a,style:{width:n+"px"}},Qf.default.createElement(wq,{ref:c,style:{width:n+"px",height:r+"px"}}))},PO=Tq}),bl,eh,Jb,Pq,Cq,Aq,Iq,Dq,Oq,I2=z(()=>{He(),ml(),hk(),on(),bl=St,eh=te(Ie()),We(),LW(),w7(),iue(),Mq(),oa(),Jb={1:{iconColor:"#b98b08"},2:{iconColor:"#70a904"},3:{iconColor:"#2e928a"},4:{iconColor:"#a943bb"},5:{iconColor:"#b90808"},6:{iconColor:"#b4bf0e"}},Cq=se.div(Pq||(Pq=Q([`
  position: absolute;
  right: 0;
  bottom: 0;
  background: `,`;
`])),hs(.03,"#1a1c1e")),Iq=se.svg(Aq||(Aq=Q([`
  position: absolute;
  top: 0;
  left: 0;
  margin: 0;
  pointer-events: none;
`]))),Dq=({layoutP:e})=>Tn(()=>{let n=(0,bl.val)(e.sheet),r=(0,bl.val)(be().atomP.historic.projects.stateByProjectId[n.address.projectId].stateBySheetId[n.address.sheetId].sequenceEditor.selectedPropsByObject),a=(0,bl.val)(e.graphEditorDims.height),u=(0,bl.val)(e.scaledSpace.fromUnitSpace)(1),c=[];if(r)for(let[p,v]of Object.entries(r)){let y=n.getObject(p);if(!y)continue;let k=(0,bl.val)(y.template.getMapOfValidSequenceTracks_forStudio());for(let[M,T]of Object.entries(v)){let E=Wk(M),A=Kc(k,E);A&&c.push(eh.default.createElement(mq,{key:"graph-".concat(p,"-").concat(M),sheetObject:y,pathToProp:E,layoutP:e,trackId:A,color:T}))}}let f=(0,bl.val)(e.rightDims.width);return eh.default.createElement(Cq,{style:{width:f+"px",height:a+"px","--unitSpaceToScaledSpaceMultiplier":u,"--graphEditorVerticalSpace":"".concat((0,bl.val)(e.graphEditorVerticalSpace.space))}},eh.default.createElement(PO,{layoutP:e,width:f,height:a}),eh.default.createElement(LD,{layoutP:e,height:a},eh.default.createElement(Iq,{width:T2,height:a,viewBox:"0 0 ".concat(T2," ").concat(a)},eh.default.createElement("g",{style:{transform:"translate(".concat((0,bl.val)(e.scaledSpace.leftPadding),"px, ").concat((0,bl.val)(e.graphEditorDims.padding.top),"px)")}},c))))},[e]),Oq=Dq}),Rq,Fa,Lq,zq,Nq,Fq,CO,Bq,jq,Uq,Vq,Hq,Gq,Wq,aue=z(()=>{He(),ml(),pk(),on(),Rq=St,Fa=te(Ie()),We(),BI(),yk(),I2(),Hk(),Lf(),xH(),Lq={label:{color:"#9a9a9a"}},Nq=se(bD)(zq||(zq=Q([""]))),CO=se(_D)(Fq||(Fq=Q([`
  display: flex;
  color: `,`;
  padding-right: 12px;
  align-items: center;
  justify-content: flex-end;
  box-sizing: border-box;
`])),Lq.label.color),jq=se.button(Bq||(Bq=Q([`
  background: none;
  border: none;
  outline: none;
  display: flex;
  box-sizing: border-box;
  font-size: 14px;
  align-items: center;
  height: 100%;
  margin-left: 12px;
  color: `,`;

  &:not([disabled]):hover {
    color: white;
  }
`])),e=>e.isSelected?Jb[e.graphEditorColor].iconColor:Xc.offColor),Uq=()=>Fa.default.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"10",height:"12",viewBox:"0 0 640 512"},Fa.default.createElement("g",{transform:"translate(0 100)"},Fa.default.createElement("path",{fill:"currentColor",d:"M368 32h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zM208 88h-84.75C113.75 64.56 90.84 48 64 48 28.66 48 0 76.65 0 112s28.66 64 64 64c26.84 0 49.75-16.56 59.25-40h79.73c-55.37 32.52-95.86 87.32-109.54 152h49.4c11.3-41.61 36.77-77.21 71.04-101.56-3.7-8.08-5.88-16.99-5.88-26.44V88zm-48 232H64c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32zM576 48c-26.84 0-49.75 16.56-59.25 40H432v72c0 9.45-2.19 18.36-5.88 26.44 34.27 24.35 59.74 59.95 71.04 101.56h49.4c-13.68-64.68-54.17-119.48-109.54-152h79.73c9.5 23.44 32.41 40 59.25 40 35.34 0 64-28.65 64-64s-28.66-64-64-64zm0 272h-96c-17.67 0-32 14.33-32 32v96c0 17.67 14.33 32 32 32h96c17.67 0 32-14.33 32-32v-96c0-17.67-14.33-32-32-32z"}))),Hq=se.span(Vq||(Vq=Q([`
  margin-right: 4px;
  `,`;

  `,`:hover & {
    color: #ccc;
  }
`])),qc,CO),Gq=({leaf:e})=>{var n;let r=fb(e.sheetObject.propsP,e.pathToProp),a=e.sheetObject,{controlIndicators:u}=FI(r,a,e.propConf),c=Tn(()=>{let T=e.sheetObject.address,E=pl(e.pathToProp);return(0,Rq.val)(be().atomP.historic.projects.stateByProjectId[T.projectId].stateBySheetId[T.sheetId].sequenceEditor.selectedPropsByObject[T.objectKey][E])},[e]),f=(0,Fa.useRef)(!1),p=typeof c=="string";f.current=p;let v=(0,Fa.useCallback)(()=>{let T=e.sheetObject.address;be().transaction(({stateEditors:E})=>{f.current?E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removePropFromGraphEditor(q(O({},T),{pathToProp:e.pathToProp})):(E.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.addPropToGraphEditor(q(O({},T),{pathToProp:e.pathToProp})),E.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!0}))})},[e]),y=(n=e.propConf.label)!=null?n:e.pathToProp[e.pathToProp.length-1],k=!0,M=(0,Fa.useRef)(null);return bH(M.current,e),Fa.default.createElement(Nq,{depth:e.depth},Fa.default.createElement(CO,{ref:M,isEven:e.n%2===0,style:{height:e.nodeHeight+"px"},isSelected:p===!0},Fa.default.createElement(Hq,null,y),u,Fa.default.createElement(jq,{onClick:v,isSelected:p===!0,graphEditorColor:c!=null?c:"1",style:{opacity:1},disabled:!k},Fa.default.createElement(Uq,null))))},Wq=Gq});function AO(e,n){be().transaction(({stateEditors:r})=>{r.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.sequenceEditorCollapsableItems.set(q(O({},n.sheetAddress),{studioSheetItemKey:n.sheetItemKey,isCollapsed:e}))})}var IO=z(()=>{He()}),hg,DO,qq,sue=z(()=>{hg=te(Ie()),Hk(),aue(),IO(),DO=e=>{let n="prop"+e.pathToProp[e.pathToProp.length-1];return e.shouldRender?e.type==="propWithChildren"?hg.default.createElement(qq,{leaf:e,key:n}):hg.default.createElement(Wq,{leaf:e,key:n}):hg.default.createElement(hg.default.Fragment,{key:n})},qq=({leaf:e})=>hg.default.createElement(Vk,{leaf:e,label:e.pathToProp[e.pathToProp.length-1],isCollapsed:e.isCollapsed,toggleCollapsed:()=>AO(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map(n=>DO(n)))}),Kq,Xq,$q,lue=z(()=>{Kq=te(Ie()),Hk(),sue(),IO(),He(),Xq=({leaf:e})=>Kq.default.createElement(Vk,{leaf:e,label:e.sheetObject.address.objectKey,isCollapsed:e.isCollapsed,toggleSelect:()=>{be().transaction(({stateEditors:n})=>{n.studio.historic.panels.outline.selection.set([e.sheetObject])})},toggleCollapsed:()=>AO(!e.isCollapsed,{sheetAddress:e.sheetObject.address,sheetItemKey:e.sheetItemKey})},e.children.map(n=>DO(n))),$q=Xq}),OO,Zq,Yq,uue=z(()=>{on(),OO=te(Ie()),lue(),Hk(),IO(),sU(),Zq=({leaf:e})=>Tn(()=>OO.default.createElement(Vk,{leaf:e,label:e.sheet.address.sheetId,isCollapsed:e.isCollapsed,toggleCollapsed:()=>{AO(!e.isCollapsed,{sheetAddress:e.sheet.address,sheetItemKey:e.sheetItemKey})}},e.children.map(n=>OO.default.createElement($q,{key:"sheetObject-"+oU(n.sheetObject),leaf:n}))),[e]),Yq=Zq}),RO,D2,Jq,Qq,eK,tK,nK,rK,cue=z(()=>{on(),RO=St,D2=te(Ie()),We(),uue(),Qq=se.div(Jq||(Jq=Q([`
  position: absolute;
  left: 0;
  overflow-x: visible;
`]))),tK=se.ul(eK||(eK=Q([`
  margin: 0;
  padding: 0;
  list-style: none;
`]))),nK=({layoutP:e})=>Tn(()=>{let n=(0,RO.val)(e.tree),r=(0,RO.val)(e.leftDims.width);return D2.default.createElement(Qq,{style:{width:r+"px",top:n.top+"px"}},D2.default.createElement(tK,null,D2.default.createElement(Yq,{leaf:n})))},[e]),rK=nK}),LO,iK,oK,aK,sK,due=z(()=>{nr(),Tu(),on(),oa(),LO=te(Ie()),We(),Mq(),oK=se.div(iK||(iK=Q([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: hidden;
  background: `,`;
  pointer-events: none;
`])),()=>kl.rightBackground,hs(.01,jy(1*.03,zm.panel.bg))),aK=({layoutP:e})=>{let n=Cn(e.rightDims.width),r=Cn(e.panelDims.height);return LO.default.createElement(oK,{style:{width:n+"px"}},LO.default.createElement(PO,{width:n,height:r,layoutP:e}))},sK=aK}),pg,lK,uK,cK,dK,fue=z(()=>{on(),pg=te(Ie()),We(),cue(),due(),LW(),ZH(),uK=se.div(lK||(lK=Q([`
  position: absolute;
  left: 0;
  right: 0;
`]))),cK=({layoutP:e})=>{let n=Cn(e.dopeSheetDims.height);return pg.default.createElement(uK,{style:{height:n+"px"}},pg.default.createElement(sK,{layoutP:e}),pg.default.createElement($H,null,pg.default.createElement(rK,{layoutP:e}),pg.default.createElement(RW,{layoutP:e})))},dK=cK});function hue(e,n,r){return zO.prism.memo(e,()=>(0,zO.prism)(n),r).getValue()}var zO,pue=z(()=>{zO=St});function Pr(e){return function(n,r){return e(n,r())}}function la(e){return Object.freeze({audience:th(e,8)?"internal":th(e,16)?"dev":"public",category:th(e,4)?"troubleshooting":th(e,2)?"todo":"general",level:th(e,512)?512:th(e,256)?256:th(e,128)?128:64})}function th(e,n){return(e&n)===n}function Cr(e,n){return((n&32)===32?!0:(n&16)===16?e.dev:(n&8)===8?e.internal:!1)&&e.min<=n}function fK(e=console,n={}){let r=q(O({},_l),{includes:O({},_l.includes)}),a={styled:vue.bind(r,e),noStyle:bue.bind(r,e)},u=gue.bind(r);function c(){return r.loggingConsoleStyle&&r.loggerConsoleStyle?a.styled:a.noStyle}return r.create=c(),{configureLogger(f){var p;f==="console"?(r.loggerConsoleStyle=_l.loggerConsoleStyle,r.create=c()):f.type==="console"?(r.loggerConsoleStyle=(p=f.style)!=null?p:_l.loggerConsoleStyle,r.create=c()):f.type==="keyed"?(r.creatExt=v=>f.keyed(v.names),r.create=u):f.type==="named"&&(r.creatExt=mue.bind(null,f.named),r.create=u)},configureLogging(f){var p,v,y,k,M;r.includes.dev=(p=f.dev)!=null?p:_l.includes.dev,r.includes.internal=(v=f.internal)!=null?v:_l.includes.internal,r.includes.min=(y=f.min)!=null?y:_l.includes.min,r.include=(k=f.include)!=null?k:_l.include,r.loggingConsoleStyle=(M=f.consoleStyle)!=null?M:_l.loggingConsoleStyle,r.create=c()},getLogger(){return r.create({names:[]})}}}function mue(e,n){let r=[];for(let{name:a,key:u}of n.names)r.push(u==null?a:"".concat(a," (").concat(u,")"));return e(r)}function gue(e){let n=O(O({},this.includes),this.include(e)),r=this.filtered,a=this.named.bind(this,e),u=this.creatExt(e),c=Cr(n,524),f=Cr(n,522),p=Cr(n,521),v=Cr(n,529),y=Cr(n,545),k=Cr(n,265),M=Cr(n,268),T=Cr(n,273),E=Cr(n,289),A=Cr(n,137),C=Cr(n,145),R=Cr(n,73),N=Cr(n,81),j=c?u.error.bind(u,Vo._hmm):r.bind(e,524),G=f?u.error.bind(u,Vo._todo):r.bind(e,522),J=p?u.error.bind(u,Vo._error):r.bind(e,521),Y=v?u.error.bind(u,Vo.errorDev):r.bind(e,529),re=y?u.error.bind(u,Vo.errorPublic):r.bind(e,545),ye=M?u.warn.bind(u,Vo._kapow):r.bind(e,268),ke=k?u.warn.bind(u,Vo._warn):r.bind(e,265),ce=T?u.warn.bind(u,Vo.warnDev):r.bind(e,273),Ce=E?u.warn.bind(u,Vo.warnPublic):r.bind(e,273),Ge=A?u.debug.bind(u,Vo._debug):r.bind(e,137),oe=C?u.debug.bind(u,Vo.debugDev):r.bind(e,145),Ae=R?u.trace.bind(u,Vo._trace):r.bind(e,73),W=N?u.trace.bind(u,Vo.traceDev):r.bind(e,81),Le={_hmm:j,_todo:G,_error:J,errorDev:Y,errorPublic:re,_kapow:ye,_warn:ke,warnDev:ce,warnPublic:Ce,_debug:Ge,debugDev:oe,_trace:Ae,traceDev:W,lazy:{_hmm:c?Pr(j):j,_todo:f?Pr(G):G,_error:p?Pr(J):J,errorDev:v?Pr(Y):Y,errorPublic:y?Pr(re):re,_kapow:M?Pr(ye):ye,_warn:k?Pr(ke):ke,warnDev:T?Pr(ce):ce,warnPublic:E?Pr(Ce):Ce,_debug:A?Pr(Ge):Ge,debugDev:C?Pr(oe):oe,_trace:R?Pr(Ae):Ae,traceDev:N?Pr(W):W},named:a,utilFor:{internal(){return{debug:Le._debug,error:Le._error,warn:Le._warn,trace:Le._trace,named(kt,Te){return Le.named(kt,Te).utilFor.internal()}}},dev(){return{debug:Le.debugDev,error:Le.errorDev,warn:Le.warnDev,trace:Le.traceDev,named(kt,Te){return Le.named(kt,Te).utilFor.dev()}}},public(){return{error:Le.errorPublic,warn:Le.warnPublic,debug(kt,Te){Le._warn('(public "debug" filtered out) '.concat(kt),Te)},trace(kt,Te){Le._warn('(public "trace" filtered out) '.concat(kt),Te)},named(kt,Te){return Le.named(kt,Te).utilFor.public()}}}}};return Le}function vue(e,n){let r=O(O({},this.includes),this.include(n)),a=[],u="";for(let v=0;v<n.names.length;v++){let{name:y,key:k}=n.names[v];if(u+=" %c".concat(y),a.push(this.style.css(y)),k!=null){let M="%c#".concat(k);u+=M,a.push(this.style.css(M))}}let c=this.filtered,f=this.named.bind(this,n),p=[u,...a];return hK(c,n,r,e,p,yue(p),f)}function yue(e){let n=e.slice(0);for(let r=1;r<n.length;r++)n[r]+=";background-color:#e0005a;padding:2px;color:white";return n}function bue(e,n){let r=O(O({},this.includes),this.include(n)),a="";for(let p=0;p<n.names.length;p++){let{name:v,key:y}=n.names[p];a+=" ".concat(v),y!=null&&(a+="#".concat(y))}let u=this.filtered,c=this.named.bind(this,n),f=[a];return hK(u,n,r,e,f,f,c)}function hK(e,n,r,a,u,c,f){let p=Cr(r,524),v=Cr(r,522),y=Cr(r,521),k=Cr(r,529),M=Cr(r,545),T=Cr(r,265),E=Cr(r,268),A=Cr(r,273),C=Cr(r,289),R=Cr(r,137),N=Cr(r,145),j=Cr(r,73),G=Cr(r,81),J=p?a.error.bind(a,...u):e.bind(n,524),Y=v?a.error.bind(a,...u):e.bind(n,522),re=y?a.error.bind(a,...u):e.bind(n,521),ye=k?a.error.bind(a,...u):e.bind(n,529),ke=M?a.error.bind(a,...u):e.bind(n,545),ce=E?a.warn.bind(a,...c):e.bind(n,268),Ce=T?a.warn.bind(a,...u):e.bind(n,265),Ge=A?a.warn.bind(a,...u):e.bind(n,273),oe=C?a.warn.bind(a,...u):e.bind(n,273),Ae=R?a.info.bind(a,...u):e.bind(n,137),W=N?a.info.bind(a,...u):e.bind(n,145),Le=j?a.debug.bind(a,...u):e.bind(n,73),kt=G?a.debug.bind(a,...u):e.bind(n,81),Te={_hmm:J,_todo:Y,_error:re,errorDev:ye,errorPublic:ke,_kapow:ce,_warn:Ce,warnDev:Ge,warnPublic:oe,_debug:Ae,debugDev:W,_trace:Le,traceDev:kt,lazy:{_hmm:p?Pr(J):J,_todo:v?Pr(Y):Y,_error:y?Pr(re):re,errorDev:k?Pr(ye):ye,errorPublic:M?Pr(ke):ke,_kapow:E?Pr(ce):ce,_warn:T?Pr(Ce):Ce,warnDev:A?Pr(Ge):Ge,warnPublic:C?Pr(oe):oe,_debug:R?Pr(Ae):Ae,debugDev:N?Pr(W):W,_trace:j?Pr(Le):Le,traceDev:G?Pr(kt):kt},named:f,utilFor:{internal(){return{debug:Te._debug,error:Te._error,warn:Te._warn,trace:Te._trace,named(Se,Ne){return Te.named(Se,Ne).utilFor.internal()}}},dev(){return{debug:Te.debugDev,error:Te.errorDev,warn:Te.warnDev,trace:Te.traceDev,named(Se,Ne){return Te.named(Se,Ne).utilFor.dev()}}},public(){return{error:Te.errorPublic,warn:Te.warnPublic,debug(Se,Ne){Te._warn('(public "debug" filtered out) '.concat(Se),Ne)},trace(Se,Ne){Te._warn('(public "trace" filtered out) '.concat(Se),Ne)},named(Se,Ne){return Te.named(Se,Ne).utilFor.public()}}}}};return Te}var Vo,_l,pK=z(()=>{Vo={_hmm:la(524),_todo:la(522),_error:la(521),errorDev:la(529),errorPublic:la(545),_kapow:la(268),_warn:la(265),warnDev:la(273),warnPublic:la(289),_debug:la(137),debugDev:la(145),_trace:la(73),traceDev:la(81)},_l={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(e,n,r){return this.create({names:[...e.names,{name:n,key:r}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(e){if(e.length<5)return e;let n=e.replace(this.collapseOnRE,"");return this.cssMemo.has(n)||this.cssMemo.set(n,this.css(e)),n},css(e){var n,r,a,u;let c=this.cssMemo.get(e);if(c)return c;let f="color:".concat((r=(n=this.color)==null?void 0:n.call(this,e))!=null?r:"hsl(".concat((e.charCodeAt(0)+e.charCodeAt(e.length-1))%360,", 100%, 60%)"));return(a=this.bold)!=null&&a.test(e)&&(f+=";font-weight:600"),(u=this.italic)!=null&&u.test(e)&&(f+=";font-style:italic"),this.cssMemo.set(e,f),f}}}}),NO,O2,R2=z(()=>{pK(),pK(),NO=fK(console,{_debug:function(){},_error:function(){}}),NO.configureLogging({dev:!0,min:64}),O2=NO.getLogger().named("Theatre.js (default logger)").utilFor.dev()}),od,nh,mK,_ue=z(()=>{gu(),od=St,R2(),uu(),nh=28,mK=(e,n)=>{var r;od.prism.ensurePrism();let a=!0,u=RE+nh,c=0,f=n.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId].sequence.collapsableItems,p=f.byId[wi.forSheet()].isCollapsed,v=(r=(0,od.pointerToPrism)(p).getValue())!=null?r:!1,y={type:"sheet",isCollapsed:v,sheet:e,children:[],sheetItemKey:wi.forSheet(),shouldRender:a,top:RE,depth:0,n:c,nodeHeight:a?nh:0,heightIncludingChildren:-1};c+=1;for(let C of Object.values((0,od.val)(e.objectsP)))C&&k(C,y.children,y.depth+1,!v);y.heightIncludingChildren=u-y.top;function k(C,R,N,j){var G;let J=(0,od.val)(C.template.getMapOfValidSequenceTracks_forStudio()),Y=(0,od.val)(C.template.configPointer);if(Object.keys(J).length===0)return;let re=f.byId[wi.forSheetObject(C)].isCollapsed,ye=(G=(0,od.pointerToPrism)(re).getValue())!=null?G:!1,ke={type:"sheetObject",isCollapsed:ye,sheetItemKey:wi.forSheetObject(C),shouldRender:j,top:u,children:[],depth:N,n:c,sheetObject:C,nodeHeight:j?nh:0,heightIncludingChildren:-1};R.push(ke),j&&(c+=1,u+=ke.nodeHeight),M(C,J,[],Y,ke.children,N+1,j&&!ye),ke.heightIncludingChildren=u-ke.top}function M(C,R,N,j,G,J,Y){for(let[re,ye]of Object.entries(R)){let ke=j.props[re];T(C,ye,[...N,re],ke,G,J,Y)}}function T(C,R,N,j,G,J,Y){j.type==="compound"?E(C,R,j,N,j,G,J,Y):j.type==="enum"?O2.warn("Prop type enum is not yet supported in the sequence editor"):A(C,R,N,j,G,J,Y)}function E(C,R,N,j,G,J,Y,re){var ye;let ke=f.byId[wi.forSheetObjectProp(C,j)].isCollapsed,ce=(ye=(0,od.pointerToPrism)(ke).getValue())!=null?ye:!1,Ce={type:"propWithChildren",isCollapsed:ce,propConf:N,pathToProp:j,sheetItemKey:wi.forSheetObjectProp(C,j),sheetObject:C,shouldRender:re,top:u,children:[],nodeHeight:re?nh:0,heightIncludingChildren:-1,depth:Y,trackMapping:R,n:c};J.push(Ce),re&&(u+=Ce.nodeHeight,c+=1),M(C,R,j,G,Ce.children,Y+1,re&&!ce),Ce.heightIncludingChildren=u-Ce.top}function A(C,R,N,j,G,J,Y){let re={type:"primitiveProp",propConf:j,depth:J,sheetItemKey:wi.forSheetObjectProp(C,N),sheetObject:C,pathToProp:N,shouldRender:Y,top:u,nodeHeight:Y?nh:0,heightIncludingChildren:Y?nh:0,trackId:R,n:c};G.push(re),c+=1,u+=re.nodeHeight}return y}});function xue(e,n){let r=be(),a=r.atomP.ahistoric.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId],u=r.atomP.historic.projects.stateByProjectId[e.address.projectId].stateBySheetId[e.address.sheetId];return(0,Ho.prism)(()=>{var c;let f=hue("tree",()=>mK(e,r),[]),p=(0,Ho.val)(n),v=(0,Ho.val)(r.atomP.historic.panels.sequenceEditor.graphEditor),y=(0,Ho.val)(u.sequenceEditor.selectedPropsByObject),k=!!y&&Object.keys(y).length>0,{leftDims:M,rightDims:T,graphEditorDims:E,dopeSheetDims:A,horizontalScrollbarDims:C}=Ho.prism.memo("leftDims",()=>{var Ce;let Ge={width:Math.floor(p.width*gK),height:p.height,screenX:p.screenX,screenY:p.screenY},oe={width:p.width-Ge.width,height:p.height,screenX:p.screenX+Ge.width,screenY:p.screenY},Ae=k&&(v==null?void 0:v.isOpen)===!0,W=Math.floor((Ae?Tr((Ce=v==null?void 0:v.height)!=null?Ce:.5,.1,.7):0)*p.heightWithoutBorder),Le=0+W,kt=p.height-Le,Te={width:p.width,height:kt,screenX:p.screenX,screenY:p.screenY},Se={isAvailable:k,isOpen:Ae,width:oe.width,height:W,screenX:p.screenX,screenY:p.screenY+kt,padding:{top:20,bottom:20}};return{leftDims:Ge,rightDims:oe,graphEditorDims:Se,dopeSheetDims:Te,horizontalScrollbarDims:{bottom:0}}},[p,v,k]),R=Ho.prism.memo("graphEditorVerticalSpace",()=>{let Ce=E.height-E.padding.top-E.padding.bottom;return{space:Ce,fromExtremumSpace(Ge){return Ge*Ce},toExtremumSpace(Ge){return Ge/Ce}}},[E]),[N,j]=Ho.prism.state("isSeeking",!1),G={isSeeking:N,setIsSeeking:j},J={},Y=(c=(0,Ho.val)(a.sequence.clippedSpaceRange))!=null?c:vK,re=Ho.prism.memo("scaledSpace",()=>{let Ce=Y.end-Y.start,Ge=T.width,oe=Ce/Ge,Ae=Ge/Ce;return{fromUnitSpace(W){return W*Ae},toUnitSpace(W){return W*oe},leftPadding:10}},[Y,T.width]),ye=Ho.prism.memo("setClippedSpaceRange",()=>function(Ce){r.transaction(({stateEditors:Ge})=>{let oe=O({},Ce);if(oe.end<=oe.start&&(oe.end=oe.start+1),oe.start<0){let Ae=oe.end-oe.start;oe.start=0,oe.end=Ae}Ge.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.clippedSpaceRange.set(q(O({},e.address),{range:oe}))})},[]),ke=Ho.prism.memo("clippedSpace",()=>({range:Y,width:T.width,fromUnitSpace(Ce){return re.fromUnitSpace(Ce-Y.start)+re.leftPadding},toUnitSpace(Ce){return re.toUnitSpace(Ce-re.leftPadding)+Y.start},setRange:ye}),[Y,T.width,re,ye]),ce=Ho.prism.memo("selection.current",()=>new Ho.Atom({}),[]);return yD("finalAtom",{sheet:e,tree:f,panelDims:p,leftDims:M,rightDims:T,dopeSheetDims:A,horizontalScrollbarDims:C,seeker:G,unitSpace:J,scaledSpace:re,clippedSpace:ke,graphEditorDims:E,graphEditorVerticalSpace:R,selectionAtom:ce}).pointer})}var Ho,gK,vK,wue=z(()=>{He(),pue(),yH(),Ho=St,_ue(),Xr(),gK=.2,vK={start:0,end:10}});function Sue(e){let{fullSecondStampsContainer:n,sequencePositionFormatter:r,snapToGrid:a,unitSpaceToClippedSpace:u}=e,c="";gq(e,(f,p)=>{let v=a(f),y=u(v);p?c+=yK(r.formatFullUnitForGrid(v),y,"full-unit"):c+=yK(r.formatSubUnitForGrid(v),y,"sub-unit")}),n.innerHTML=c}function yK(e,n,r){return'<span class="'.concat(r,'" style="transform: translate3d(').concat(n.toFixed(1),'px, -50%, 0);">').concat(e,"</span>")}var rh,ih,bK,_K,ad,xK,wK,SK,EK,kK,TK,MK=z(()=>{rh=St,oa(),ih=te(Ie()),We(),yq(),He(),_K=se.div(bK||(bK=Q([`
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  pointer-events: none;
`]))),ad={fullUnitStampColor:"#6a6a6a",stampFontSize:"10px",get subUnitStampColor(){return jy(.2,ad.fullUnitStampColor)}},wK=se.div(xK||(xK=Q([`
  position: absolute;
  top: 0;
  height: 100%;
  left: 0;
  overflow: hidden;
  z-index: 2;
  will-change: transform;
  pointer-events: none;
`]))),EK=se.div(SK||(SK=Q([`
  position: absolute;
  top: 0;
  left: 0;

  & > span {
    position: absolute;
    display: block;
    top: 9px;
    left: -10px;
    color: `,`;
    text-align: center;
    font-size: `,`;
    width: 20px;

    &.full-unit {
      color: `,`;
    }

    &.sub-unit {
      color: `,`;
    }
  }

  pointer-events: none;
`])),ad.fullUnitStampColor,ad.stampFontSize,ad.fullUnitStampColor,ad.subUnitStampColor),kK=({layoutP:e,width:n})=>{let r=(0,ih.useRef)(null),[a,u]=(0,ih.useState)(null);return(0,ih.useLayoutEffect)(()=>{if(a)return(0,rh.prism)(()=>{let c=(0,rh.val)(e.sheet).getSequence();return{fullSecondStampsContainer:a,clippedSpaceRange:(0,rh.val)(e.clippedSpace.range),clippedSpaceWidth:(0,rh.val)(e.clippedSpace.width),unitSpaceToClippedSpace:(0,rh.val)(e.clippedSpace.fromUnitSpace),leftPadding:(0,rh.val)(e.scaledSpace.leftPadding),fps:c.subUnitsPerUnit,sequencePositionFormatter:c.positionFormatter,snapToGrid:f=>c.closestGridPosition(f)}}).onChange(be().ticker,Sue,!0)},[a,n,e]),ih.default.createElement(_K,{ref:r,style:{width:n+"px"}},ih.default.createElement(wK,{style:{width:n+"px"}},ih.default.createElement(EK,{ref:u})))},TK=kK});function Eue(e){let[n,r]=(0,FO.useState)(!1);return(0,FO.useEffect)(()=>{if(r(!1),!e)return;let a=c=>{c.target===e?r(!0):r(!1)},u=()=>{r(!1)};return e.addEventListener("mouseenter",a),e.addEventListener("mousemove",a),e.addEventListener("mouseleave",u),()=>{r(!1),e.removeEventListener("mouseenter",a),e.removeEventListener("mousemove",a),e.removeEventListener("mouseleave",u)}},[e]),n}var FO,kue=z(()=>{FO=te(Ie())});function Tue(e,n){let r=0,[a,u]=e,[c,f]=n;return u-a>f-c?[c,f]:(a<c&&(r=0-a),u>f&&(r=f-u),[a+r,u+r])}var xl,sd,fi,BO,PK,L2,CK,AK,IK=z(()=>{xl=St,on(),nr(),He(),ah(),So(),di(),tr(),sd=te(Ie()),We(),Hi(),fi={enabled:{backgroundColor:"#2C2F34",stroke:"#646568"},disabled:{backgroundColor:"#282a2cc5",stroke:"#595a5d"},hover:{backgroundColor:"#34373D",stroke:"#C8CAC0"},dragging:{backgroundColor:"#3F444A",stroke:"#C8CAC0"},thumbWidth:9,hitZoneWidth:26,rangeStripMinWidth:30},BO=1e3,L2=se.div(PK||(PK=Q([`
  position: absolute;
  height: `,`px;
  background-color: `,`;
  cursor: grab;
  top: 0;
  left: 0;
  width: `,`px;
  transform-origin: left top;
  &:hover {
    background-color: `,`;
  }
  &.dragging {
    background-color: `,`;
    cursor: grabbing !important;
  }
  `,`;

  /* covers the one pixel space between the focus range strip and the top strip
  of the sequence editor panel, which would have caused that one pixel to act
  like a panel drag zone */
  &:after {
    display: block;
    content: ' ';
    position: absolute;
    bottom: -1px;
    height: 1px;
    left: 0;
    right: 0;
    background: transparent;
    pointer-events: normal;
    z-index: -1;
  }
`])),()=>Sl-1,e=>e.enabled?fi.enabled.backgroundColor:fi.disabled.backgroundColor,BO,fi.hover.backgroundColor,fi.dragging.backgroundColor,Qn),CK=({layoutP:e})=>{let n=(0,sd.useMemo)(()=>(0,xl.prism)(()=>{let{projectId:y,sheetId:k}=(0,xl.val)(e.sheet).address;return(0,xl.val)(be().atomP.ahistoric.projects.stateByProjectId[y].stateBySheetId[k].sequence.focusRange)}),[e]),[r,a]=Xn(null),[u]=wo(a,{menuItems:()=>{let y=(0,xl.val)(e.sheet),k=n.getValue();return[{label:"Delete focus range",callback:()=>{be().tempTransaction(({stateEditors:M})=>{M.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.unset(O({},y.address))}).commit()}},{label:k!=null&&k.enabled?"Disable focus range":"Enable focus range",callback:()=>{k!==void 0&&be().tempTransaction(({stateEditors:M})=>{M.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(q(O({},y.address),{range:k.range,enabled:!k.enabled}))}).commit()}}]}}),c=Cn(e.scaledSpace.toUnitSpace),f=Cn(e.sheet),p=(0,sd.useMemo)(()=>{let y,k;return{debugName:"FocusRangeStrip",onDragStart(M){let T,E=n.getValue();if(!E)return!1;let A=E.range.start,C=E.range.end,R=!1,N=(0,xl.val)(e.sheet).getSequence();return{onDrag(j){if(E=n.getValue(),E){R=!0;let G=c(j),J=A+G,Y=C+G;Y<J&&(Y=J),[y,k]=Tue([J,Y],[0,N.length]).map(re=>N.closestGridPosition(re)),T&&T.discard(),T=be().tempTransaction(({stateEditors:re})=>{var ye;re.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(q(O({},f.address),{range:{start:y,end:k},enabled:(ye=E==null?void 0:E.enabled)!=null?ye:!0}))})}},onDragEnd(){E&&(R&&T!==void 0?T.commit():T&&T.discard())}}},lockCSSCursorTo:"grabbing"}},[f,c]),[v]=Ur(a,p);return _u(v,-1),Tn(()=>{let y=n.getValue(),k=(y==null?void 0:y.range)||{start:0,end:0},M=(0,xl.val)(e.clippedSpace.fromUnitSpace)(k.start),T=(0,xl.val)(e.clippedSpace.fromUnitSpace)(k.end),E,A;return M<0&&(M=0),T>(0,xl.val)(e.clippedSpace.width)&&(T=(0,xl.val)(e.clippedSpace.width)),M>T?(A=0,E=0):(A=M,E=(T-M)/BO),y?sd.default.createElement(sd.default.Fragment,null,u,sd.default.createElement(L2,{id:"range-strip",enabled:y.enabled,className:"".concat(v?"dragging":""," ").concat(y.enabled?"enabled":""),ref:r,style:{transform:"translateX(".concat(A,"px) scale(").concat(E,", 1)")}})):sd.default.createElement(sd.default.Fragment,null)},[e,r,n,u,v])},AK=CK}),ld,Su,DK,OK,RK,LK,zK,NK,FK,jO,Mue=z(()=>{ld=St,on(),He(),ah(),aa(),di(),tr(),Su=te(Ie()),We(),Hi(),IK(),xs(),OK=se.div(DK||(DK=Q([`
  position: absolute;
  top: 0;
  // the right handle has to be pulled back by its width since its right side indicates its position, not its left side
  left: `,`px;
  transform-origin: left top;
  width: `,`px;
  height: `,`px;
  z-index: 3;

  --bg: `,`;

  stroke: `,`;
  user-select: none;

  cursor: `,`;

  // no pointer events unless pointer-root is in normal mode _and_ the
  // focus range is enabled
  #pointer-root & {
    pointer-events: none;
  }

  #pointer-root.normal & {
    pointer-events: auto;
  }

  #pointer-root.draggingPositionInSequenceEditor & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &.dragging {
    pointer-events: none !important;
  }

  // highlight the handle if it's hovered, or the whole strip is hovverd
  `,`:hover ~ &, &:hover {
    --bg: `,`;
    stroke: `,`;
  }

  // highlight the handle when it's being dragged or the whole strip is being dragged.
  // using dragging.dragging to give this selector priority, as it seems to be overridden
  // by the hover selector above
  &.dragging,
  `,`.dragging.dragging ~ & {
    --bg: `,`;
    stroke: `,`;
  }

  #pointer-root.draggingPositionInSequenceEditor &:hover {
    --bg: `,`;
    stroke: #40aaa4;
  }

  background-color: var(--bg);

  // a larger hit zone
  &:before {
    display: block;
    content: ' ';
    position: absolute;
    inset: -8px;
  }
`])),e=>e.type==="start"?0:-fi.thumbWidth,fi.thumbWidth,()=>Sl-1,({enabled:e})=>e?fi.enabled.backgroundColor:fi.disabled.backgroundColor,fi.enabled.stroke,e=>e.type==="start"?"w-resize":"e-resize",du,()=>L2,fi.hover.backgroundColor,fi.hover.stroke,()=>L2,fi.dragging.backgroundColor,fi.dragging.stroke,fi.dragging.backgroundColor),LK=se.div(RK||(RK=Q([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    var(--bg) 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),e=>e.type==="start"?90:-90,e=>e.type==="start"?fi.thumbWidth:-fi.thumbWidth+1),NK=se.div(zK||(zK=Q([`
  position: absolute;
  top: 0;
  bottom: 0;
  pointer-events: none;

  background: linear-gradient(
    `,`deg,
    `,` 0%,
    #ffffff00 100%
  );

  width: 12px;
  left: `,`px;
`])),e=>e.type==="start"?-90:90,()=>Qb.backgroundColor,e=>e.type==="start"?-12:fi.thumbWidth),FK=({layoutP:e,thumbType:n})=>{var r;let[a,u]=Xn(null),c=(0,Su.useMemo)(()=>(0,ld.prism)(()=>{let{projectId:y,sheetId:k}=(0,ld.val)(e.sheet).address;return(0,ld.val)(be().atomP.ahistoric.projects.stateByProjectId[y].stateBySheetId[k].sequence.focusRange)}),[e]),f=(0,Su.useMemo)(()=>({debugName:"FocusRangeThumb",onDragStart(){let y,k,M=(0,ld.val)(e.sheet),T={start:0,end:M.getSequence().length},E=c.getValue()||{range:T,enabled:!1},A=E.enabled,C=E.range[n],R=(0,ld.val)(e.scaledSpace.toUnitSpace),N=R(fi.rangeStripMinWidth);return{onDrag(j,G,J){var Y;let re,ye=Eo.checkIfMouseEventSnapToPos(J,{ignore:u});if(ye==null){let ce=R(j);re=C+ce}else re=ye;k=((Y=c.getValue())==null?void 0:Y.range)||T,n==="start"?re=Math.max(Math.min(re,k.end-N),0):re=Math.min(Math.max(re,k.start+N),M.getSequence().length);let ke=M.getSequence().closestGridPosition(re);y!==void 0&&y.discard(),y=be().tempTransaction(({stateEditors:ce})=>{ce.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(q(O({},M.address),{range:q(O({},k),{[n]:ke}),enabled:A}))})},onDragEnd(j){j?y==null||y.commit():y==null||y.discard()}}}}),[e]),[p]=Ur(u,f);Da(p,"draggingPositionInSequenceEditor",n==="start"?"w-resize":"e-resize");let v=Cn(c);return _u(p,(r=v==null?void 0:v.range[n])!=null?r:0),Tn(()=>{let y=c.getValue();if(!y)return null;let{enabled:k}=y,M=y.range[n],T=(0,ld.val)(e.clippedSpace.fromUnitSpace)(M);return(T<0||(0,ld.val)(e.clippedSpace.width)<T)&&(T=-1e4),Su.default.createElement(OK,q(O(O({ref:a},Eo.includePositionSnapAttrs(M)),gl(M)),{className:"".concat(p&&"dragging"," ").concat(k&&"enabled"),enabled:k,type:n,style:{transform:"translate3d(".concat(T,"px, 0, 0)")}}),Su.default.createElement(LK,{type:n,enabled:k}),Su.default.createElement(NK,{type:n}),Su.default.createElement("svg",{viewBox:"0 0 9 18",xmlns:"http://www.w3.org/2000/svg"},Su.default.createElement("line",{x1:"4",y1:"6",x2:"4",y2:"12"}),Su.default.createElement("line",{x1:"6",y1:"6",x2:"6",y2:"12"})))},[e,a,c,p])},jO=FK});function Pue(e,n){let[r,a]=(0,wl.useState)("none");return Da(r!=="none","dragging",r==="creating"?"ew-resize":"move"),(0,wl.useMemo)(()=>{let u=()=>({debugName:"FocusRangeZone/focusRangeCreationGestureHandlers",onDragStart(f){let p,v=(0,oh.val)(e.clippedSpace.toUnitSpace),y=(0,oh.val)(e.scaledSpace.toUnitSpace),k=(0,oh.val)(e.sheet),M=k.getSequence(),T=f.target.getBoundingClientRect(),E=v(f.clientX-T.left),A=y(fi.rangeStripMinWidth);return{onDrag(C){let R=y(C),N=E,j=E+R;[N,j]=[Tr(N,0,M.length),Tr(j,0,M.length)].map(G=>M.closestGridPosition(G)),j<N?[N,j]=[Math.max(Math.min(j,N-A),0),N]:C>0&&(j=Math.min(Math.max(j,N+A),M.length)),p&&p.discard(),p=be().tempTransaction(({stateEditors:G})=>{G.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence.focusRange.set(q(O({},k.address),{range:{start:N,end:j},enabled:!0}))})},onDragEnd(C){C&&p!==void 0?p.commit():p&&p.discard()}}},lockCSSCursorTo:"ew-resize"}),c=()=>({debugName:"FocusRangeZone/panelMoveGestureHandlers",onDragStart(){let f,p=n.current,v=n.current.addBoundsHighlightLock();return{onDrag(y,k){let M=q(O({},p.dims),{top:Tr(p.dims.top+k,0,window.innerHeight-rl),left:Tr(p.dims.left+y,-p.dims.width+rl,window.innerWidth-rl)}),T=Bk(M,{width:window.innerWidth,height:window.innerHeight});f==null||f.discard(),f=be().tempTransaction(({stateEditors:E})=>{E.studio.historic.panelPositions.setPanelPosition({position:T,panelId:p.panelId})})},onDragEnd(y){v(),y?f==null||f.commit():f==null||f.discard()}}},lockCSSCursorTo:"move"});return{debugName:"FocusRangeZone",onDragStart(f){let[p,v]=f.shiftKey?["creating",u().onDragStart(f)]:["moving-panel",c().onDragStart(f)];return a(p),v===!1?!1:{onDrag(y,k,M,T,E){v.onDrag(y,k,M,T,E)},onDragEnd(y){var k;a("none"),(k=v.onDragEnd)==null||k.call(v,y)}}}}},[e,n])}var oh,wl,BK,jK,UK,VK,Cue=z(()=>{oh=St,on(),He(),ig(),ah(),aa(),di(),kue(),RH(),tr(),Xr(),wl=te(Ie()),We(),IK(),Mue(),uu(),jK=se.div(BK||(BK=Q([`
  position: absolute;
  height: `,`px;
  left: 0;
  right: 0;
  box-sizing: border-box;
  /* Use the "grab" cursor if the shift key is up, which is the one used on the top strip of the sequence editor */
  cursor: `,`;
`])),()=>Sl,e=>e.isShiftDown?"ew-resize":"move"),UK=({layoutP:e})=>{let[n,r]=Xn(null),a=rg(),u=(0,wl.useRef)(a);u.current=a;let c=(0,wl.useMemo)(()=>(0,oh.prism)(()=>{let{projectId:v,sheetId:y}=(0,oh.val)(e.sheet).address;return(0,oh.val)(be().atomP.ahistoric.projects.stateByProjectId[v].stateBySheetId[y].sequence.focusRange)}),[e]);Ur(r,Pue(e,u));let f=DH("Shift"),p=Eue(r);return(0,wl.useEffect)(()=>{if(!f&&p)return u.current.addBoundsHighlightLock()},[!f&&p]),Tn(()=>wl.default.createElement(jK,{ref:n,isShiftDown:f},wl.default.createElement(AK,{layoutP:e}),wl.default.createElement(jO,{thumbType:"start",layoutP:e}),wl.default.createElement(jO,{thumbType:"end",layoutP:e})),[e,c,f])},VK=UK}),mg,Sl,Qb,HK,GK,WK,qK,ah=z(()=>{on(),mg=te(Ie()),We(),MK(),Hi(),nr(),Cue(),Sl=18,Qb={backgroundColor:"#1f2120eb",borderColor:"#1c1e21"},GK=se.div(HK||(HK=Q([`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: `,`px;
  box-sizing: border-box;
  background: `,`;
  border-bottom: 1px solid `,`;
  `,`;
`])),Sl,Qb.backgroundColor,Qb.borderColor,Qn),WK=({layoutP:e})=>{let n=Cn(e.rightDims.width);return mg.default.createElement(mg.default.Fragment,null,mg.default.createElement(GK,O({},gl("hide")),mg.default.createElement(TK,{layoutP:e,width:n,height:Sl}),mg.default.createElement(VK,{layoutP:e})))},qK=WK}),sh,KK,XK,$K,ZK,YK,JK,QK,eX,Aue=z(()=>{sh=te(Ie()),We(),on(),He(),GA(),Lf(),KK=e=>isFinite(e)&&e>0,$K=se.div(XK||(XK=Q([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),YK=se.div(ZK||(ZK=Q([`
  `,`;
  white-space: nowrap;
`])),qc),JK=({deltaX:e})=>e*.25,QK=({layoutP:e})=>{let n=Cn(e.sheet),r=(0,sh.useMemo)(()=>{let u;return{temporarilySetValue(c){u&&(u.discard(),u=void 0),u=be().tempTransaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.setLength(q(O({},n.address),{length:c}))})},discardTemporaryValue(){u&&(u.discard(),u=void 0)},permanentlySetValue(c){u&&(u.discard(),u=void 0),be().transaction(({stateEditors:f})=>{f.coreByProject.historic.sheetsById.sequence.setLength(q(O({},n.address),{length:c}))})}}},[e,n]),a=(0,sh.useRef)(null);return(0,sh.useLayoutEffect)(()=>{a.current.focus()},[]),Tn(()=>{let u=n.getSequence().length;return sh.default.createElement($K,null,sh.default.createElement(YK,null,"Sequence length"),sh.default.createElement(HE,q(O({value:u},r),{isValid:KK,inputRef:a,nudge:JK})))},[n,r,a])},eX=QK});function Iue(e,n){let r=(0,Go.useRef)(n);r.current=n;let a=(0,Go.useMemo)(()=>({debugName:"LengthIndicator/useDragBulge",lockCSSCursorTo:"ew-resize",onDragStart(c){let f,p=r.current,v=(0,lh.val)(r.current.layoutP.sheet),y=v.getSequence().length,k=(0,lh.val)(p.layoutP.scaledSpace.toUnitSpace);return{onDrag(M,T,E){let A=k(M);f&&(f.discard(),f=void 0),f=be().tempTransaction(({stateEditors:C})=>{C.coreByProject.historic.sheetsById.sequence.setLength(q(O({},v.address),{length:y+A}))})},onDragEnd(M){M?f&&f.commit():f&&f.discard()}}}}),[]),[u]=Ur(e,a);return _u(u,-1),[u]}var lh,Go,UO,e_,tX,ud,nX,rX,iX,oX,aX,sX,lX,uX,cX,dX,fX,Due=z(()=>{on(),lh=St,Go=te(Ie()),We(),Tu(),ah(),tr(),di(),He(),ll(),Hi(),Wm(),Aue(),nr(),cl(),UO=1e3,e_={stripNormal:"#0000006c",stripActive:"#000000"},ud=se.div(tX||(tX=Q([`
  position: absolute;
  top: 0;
  left: 0;
  width: 4px;
  z-index: `,`;
  pointer-events: none;

  &:after {
    display: block;
    content: ' ';
    position: absolute;
    /* top: `,`px; */
    top: 0;
    bottom: 0;
    left: -1px;
    width: 1px;
    background-color: `,`;
  }

  &:hover:after,
  &.dragging:after {
    background-color: `,`;
  }
`])),()=>kl.lengthIndicatorStrip,Sl,e_.stripNormal,e_.stripActive),rX=se.div(nX||(nX=Q([`
  position: absolute;
  top: `,`px;
  width: 100px;
  left: -50px;
  pointer-events: none;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 1;
`])),Sl-15),oX=se.div(iX||(iX=Q([`
  margin-top: 8px;
  font-size: 10px;
  white-space: nowrap;
  padding: 2px 8px;
  border-radius: 2px;
  `,`;
  cursor: ew-resize;
  color: #464646;
  background-color: #0000004d;
  display: none;

  `,":hover &, ",`.dragging & {
    display: block;
    color: white;
    background-color: `,`;
  }
`])),Qn,ud,ud,e_.stripActive),sX=se.div(aX||(aX=Q([`
  font-size: 10px;
  white-space: nowrap;
  padding: 1px 2px;
  border-radius: 2px;
  `,`;
  justify-content: center;
  align-items: center;
  cursor: ew-resize;
  color: #5d5d5d;
  background-color: #191919;

  `,":hover &, ",`.dragging & {
    color: white;
    background-color: `,`;

    & > svg:first-child {
      margin-right: -1px;
    }
  }

  & > svg:first-child {
    margin-right: -4px;
  }
`])),Qn,ud,ud,e_.stripActive),uX=se.div(lX||(lX=Q([`
  position: absolute;
  top: 0;
  left: 0;
  background-color: rgb(23 23 23 / 43%);
  width: `,`px;
  z-index: `,`;
  transform-origin: left top;

  `,".dragging ~ &, ",`:hover ~ & {
    background-color: rgb(23 23 23 / 60%);
  }
`])),UO,()=>kl.lengthIndicatorCover,ud,ud),cX=-1e4,dX=({layoutP:e})=>{let[n,r]=Xn(null),[a]=Iue(r,{layoutP:e}),{node:u,toggle:c,close:f}=sl({debugName:"LengthIndicator"},()=>Go.default.createElement(ul,null,Go.default.createElement(eX,{layoutP:e,onRequestClose:f})));return Tn(()=>{let p=(0,lh.val)(e.sheet),v=(0,lh.val)(e.rightDims.height),y=p.getSequence(),k=y.length,M=k,T=(0,lh.val)(e.clippedSpace.fromUnitSpace)(M),E=(0,lh.val)(e.clippedSpace.width),A,C;return T>E?(C=0,A=0):(T<0&&(T=0),C=T,A=(E-T)/UO),Go.default.createElement(Go.default.Fragment,null,u,Go.default.createElement(ud,{style:{height:v+"px",transform:"translateX(".concat(C===0?cX:C,"px)")},className:a?"dragging":""},Go.default.createElement(rX,null,Go.default.createElement(sX,O({ref:n,onClick:R=>{c(R,r)}},gl("hide")),Go.default.createElement(xoe,null),Go.default.createElement(woe,null)),Go.default.createElement(oX,null,"Sequence length:"," ",y.positionFormatter.formatBasic(k)))),Go.default.createElement(uX,{title:"Length",style:{height:v+"px",transform:"translateX(".concat(C,"px) scale(").concat(A,", 1)")}}))},[e,n,a,u])},fX=dX}),VO,Eu,hX,pX,mX,gX,vX,yX,bX,_X,Oue=z(()=>{on(),VO=St,Eu=te(Ie()),We(),MK(),Tu(),ah(),Hi(),pX=se.div(hX||(hX=Q([`
  position: absolute;
  top: 0;
  left: 0;
  margin-top: 0px;
`]))),gX=se.div(mX||(mX=Q([`
  position: absolute;
  top: 16px;
  font-size: `,`;
  color: `,`;
  text-align: center;
  transform: translateX(-50%);
  background: `,`;
  padding: 1px 8px;
  font-variant-numeric: tabular-nums;
  pointer-events: none;
  z-index: `,`;
`])),ad.stampFontSize,ad.fullUnitStampColor,Qb.backgroundColor,()=>kl.currentFrameStamp),yX=se.div(vX||(vX=Q([`
  position: absolute;
  top: 5px;
  left: -0px;
  bottom: 0;
  width: 0.5px;
  background: rgba(100, 100, 100, 0.2);
  pointer-events: none;
`]))),bX=Eu.default.memo(({layoutP:e})=>{let[n,r]=Cn(n7()),a=Cn(e.clippedSpace.fromUnitSpace),{sequence:u,formatter:c,clippedSpaceWidth:f}=Tn(()=>{let k=(0,VO.val)(e.sheet).getSequence(),M=(0,VO.val)(e.clippedSpace.width);return{sequence:k,formatter:k.positionFormatter,clippedSpaceWidth:M}},[e]);if(n==-1)return Eu.default.createElement(Eu.default.Fragment,null);let p=r===3?u.closestGridPosition(n):n,v=a(p),y=v>=0&&v<=f;return Eu.default.createElement(Eu.default.Fragment,null,Eu.default.createElement(pX,null,Eu.default.createElement(gX,{style:{opacity:y?1:0,transform:"translate3d(calc(".concat(v,"px - 50%), 0, 0)")}},c.formatForPlayhead(p)),Eu.default.createElement(yX,{posType:r,style:{opacity:y?1:0,transform:"translate3d(".concat(v,"px, 0, 0)")}}))," ")}),_X=bX}),ws,Mo,xX,wX,SX,EX,kX,z2,TX,HO,MX,N2,PX,F2,CX,GO,AX,IX,Rue=z(()=>{on(),ws=St,AS(),oa(),Mo=te(Ie()),We(),Tu(),Hi(),nr(),di(),wX=se.div(xX||(xX=Q([`
  --threadHeight: 6px;
  --bg-inactive: #32353b;
  --bg-active: #5b5c5d;
  position: absolute;
  height: 0;
  width: 100%;
  left: 12px;
  /* bottom: 8px; */
  z-index: `,`;
  `,`
`])),()=>kl.horizontalScrollbar,Qn),EX=se.div(SX||(SX=Q([`
  position: relative;
  top: 0;
  left: 0;
  width: 100%;
  height: var(--threadHeight);
`]))),z2=se.div(kX||(kX=Q([`
  position: absolute;
  height: 5px;
  background: var(--bg-inactive);
  cursor: ew-resize;
  z-index: 2;

  &:hover,
  &:active {
    background: var(--bg-active);
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),X3("absolute","-4px")),HO=se.div(TX||(TX=Q([`
  position: absolute;
  height: 5px;
  width: 7px;
  left: 0;
  z-index: 2;
  top: 0;
  bottom: 0;
  display: block;

  &:hover:before {
    background: var(--bg-active);
  }

  &:before {
    `,`;
    display: block;
    content: ' ';
    background: var(--bg-inactive);
    border-radius: 0 2px 2px 0;
  }

  &:after {
    `,`;
    display: block;
    content: ' ';
  }
`])),X3("absolute","0"),X3("absolute","-4px")),N2=se(HO)(MX||(MX=Q([`
  left: calc(-1 * 7px);
  cursor: w-resize;
  &:before {
    transform: scaleX(-1);
  }
`]))),F2=se(HO)(PX||(PX=Q([`
  cursor: e-resize;
  left: 0px;
`]))),GO=se.div(CX||(CX=Q([`
  display: `,`;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 4px;
  transform: translateX(-50%);
  background: #131d1f;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;

  `,`:hover &,
  `,`:hover &,
  `,":hover ~ ",` &,
  `,":hover ~ ",` & {
    display: block;
  }
`])),e=>e.active?"block":"none",N2,F2,z2,N2,z2,F2),AX=({layoutP:e})=>{let n=(0,Mo.useCallback)(R=>R.toFixed(2),[]),r=(0,Mo.useMemo)(()=>(0,ws.prism)(()=>{let R=(0,ws.val)(e.rightDims.width)-25,N=(0,ws.val)(e.clippedSpace.range),j=(0,ws.val)(e.sheet).getSequence().length,G=Math.max(N.end,j),J=N.start/G*R,Y=N.end/G*R;return{rightWidth:R,clippedSpaceRange:N,sequenceLength:j,assumedLengthOfSequence:G,rangeStartX:J,rangeEndX:Y,bottom:(0,ws.val)(e.horizontalScrollbarDims.bottom)}}),[e]),{rangeStartX:a,rangeEndX:u,clippedSpaceRange:c,bottom:f}=Cn(r),[p,v]=(0,Mo.useState)("nothing"),y=(0,Mo.useMemo)(()=>{let R=(0,ws.val)(r),N=()=>{R=(0,ws.val)(r)},j=G=>G/R.rightWidth*R.assumedLengthOfSequence;return{onRangeDragStart(){return N(),{onDrag(G){v("both");let J=j(G),Y=Ql(R.clippedSpaceRange,re=>re+J);(0,ws.val)(e.clippedSpace.setRange)(Y)},onDragEnd(){v("nothing")}}},onRangeStartDragStart(){return N(),{onDrag(G){v("start");let J=j(G),Y={start:R.clippedSpaceRange.start+J,end:R.clippedSpaceRange.end};Y.start>Y.end-1&&(Y.start=Y.end-1),Y.start<=0&&(Y.start=0),(0,ws.val)(e.clippedSpace.setRange)(Y)},onDragEnd(){v("nothing")}}},onRangeEndDragStart(){return N(),{onDrag(G){v("end");let J=j(G),Y={start:R.clippedSpaceRange.start,end:R.clippedSpaceRange.end+J};Y.end<Y.start+1&&(Y.end=Y.start+1),Y.end>=R.assumedLengthOfSequence&&(Y.end=R.assumedLengthOfSequence),(0,ws.val)(e.clippedSpace.setRange)(Y)},onDragEnd(){v("nothing")}}}}},[e,r]),[k,M]=(0,Mo.useState)(null);Ur(k,{debugName:"HorizontalScrollbar/onRangeDrag",onDragStart:y.onRangeDragStart,lockCSSCursorTo:"ew-resize"});let[T,E]=(0,Mo.useState)(null);Ur(T,{debugName:"HorizontalScrollbar/onRangeStartDrag",onDragStart:y.onRangeStartDragStart,lockCSSCursorTo:"w-resize"});let[A,C]=(0,Mo.useState)(null);return Ur(A,{debugName:"HorizontalScrollbar/onRangeEndDrag",onDragStart:y.onRangeEndDragStart,lockCSSCursorTo:"e-resize"}),Mo.default.createElement(wX,O({style:{bottom:f+8+"px"}},gl("hide")),Mo.default.createElement(EX,null,Mo.default.createElement(z2,{ref:M,style:{width:"".concat(u-a,"px"),transform:"translate3d(".concat(a,"px, 0, 0)")}}),Mo.default.createElement(N2,{ref:E,style:{transform:"translate3d(".concat(a,"px, 0, 0)")}},Mo.default.createElement(GO,{active:p==="both"||p==="start"},n(c.start))),Mo.default.createElement(F2,{ref:C,style:{transform:"translate3d(".concat(u,"px, 0, 0)")}},Mo.default.createElement(GO,{active:p==="both"||p==="end"},n(c.end)))))},IX=AX}),DX,OX,RX,LX,zX,Lue=z(()=>{DX=te(Ie()),We(),RX=se.div(OX||(OX=Q([`
  position: absolute;
  inset: `,`px;
`])),e=>e.room*-1),LX=e=>DX.default.createElement(RX,{room:e.room}),zX=LX}),B2,j2,WO,NX,FX,BX,jX,UX,VX,HX,GX,zue=z(()=>{We(),on(),GA(),Lf(),B2=te(Ie()),j2=te(Ie()),WO=St,Xp(),NX=e=>isFinite(e)&&e>=0,BX=se.div(FX||(FX=Q([`
  display: flex;
  gap: 8px;
  padding: 4px 8px;
  height: 28px;
  align-items: center;
`]))),UX=se.div(jX||(jX=Q([`
  `,`;
  white-space: nowrap;
`])),qc),VX=({deltaX:e})=>e*.25,HX=({layoutP:e,onRequestClose:n})=>{let r=(0,WO.val)(e.sheet),a=r.getSequence(),u=(0,B2.useMemo)(()=>{let f,p=a.position;return{temporarilySetValue(v){f&&(f=void 0),f=Tr(v,0,a.length),a.position=f},discardTemporaryValue(){f&&(f=void 0,a.position=p,n("discardTemporaryValue"))},permanentlySetValue(v){f&&(f=void 0),a.position=Tr(v,0,a.length),n("permanentlySetValue")}}},[e,a]),c=(0,B2.useRef)(null);return(0,B2.useLayoutEffect)(()=>{c.current.focus()},[]),Tn(()=>{let f=r.getSequence(),p=Number((0,WO.val)(f.pointer.position).toFixed(3));return j2.default.createElement(BX,null,j2.default.createElement(UX,null,"Sequence position"),j2.default.createElement(HE,q(O({value:p},u),{isValid:NX,inputRef:c,nudge:VX})))},[r,u,c])},GX=HX}),WX,Nue=z(()=>{WX=typeof navigator!="undefined"&&navigator.platform.toUpperCase().indexOf("MAC")>=0}),qX,Fue=z(()=>{Nue(),qX=e=>WX?e.metaKey===!0:e.ctrlKey===!0});function Bue(){U2=!1}function jue(){U2=!0}function Uue(){let e=be();(0,KX.useEffect)(()=>{let n=r=>{let a=r.composedPath()[0];if(!(a&&(a.tagName==="INPUT"||a.tagName==="TEXTAREA"))){if(r.key==="z"||r.key==="Z"||r.code==="KeyZ")if(qX(r))r.shiftKey===!0?e.redo():e.undo();else return;else if(r.code==="Space"&&!r.shiftKey&&!r.metaKey&&!r.altKey&&!r.ctrlKey){if(!U2)return;let u=Gie();if(u)if(u.playing)u.pause();else{let{projectId:c,sheetId:f}=u.address,p=(0,Ss.prism)(()=>{let k=(0,Ss.val)(be().atomP.ahistoric.projects.stateByProjectId[c].stateBySheetId[f].sequence.focusRange);return Ss.prism.memo("shouldFollowFocusRange",()=>{let M=u.position;if(k){let T=M>=k.range.start&&M<=k.range.end;return k.enabled?!!T:!0}else return!0},[])&&k&&k.enabled?{range:[k.range.start,k.range.end],isFollowingARange:!0}:{range:[0,(0,Ss.val)(u.pointer.length)],isFollowingARange:!1}}),v=u.playDynamicRange((0,Ss.prism)(()=>(0,Ss.val)(p).range),be().ticker),y=qO(u);v.finally(()=>{y.set(void 0)}),y.set(p)}else return}else if(r.altKey&&(r.key==="\\"||r.code==="Backslash"||r.code==="IntlBackslash"))e.transaction(({stateEditors:u,drafts:c})=>{u.studio.ahistoric.setVisibilityState(c.ahistoric.visibilityState==="everythingIsHidden"?"everythingIsVisible":"everythingIsHidden")});else return;r.preventDefault(),r.stopPropagation()}};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[])}var KX,Ss,U2,qO,XX,KO=z(()=>{KX=te(Ie()),He(),Fue(),Uc(),Ss=St,sk(),U2=!0,qO=sb(e=>new Ss.Atom(void 0)),XX=sb(e=>(0,Ss.prism)(()=>{let n=qO(e).prism.getValue();if(n)return n.getValue().isFollowingARange;{let{projectId:r,sheetId:a}=e.address,u=(0,Ss.val)(be().atomP.ahistoric.projects.stateByProjectId[r].stateBySheetId[a].sequence.focusRange);if(!u||!u.enabled)return!1;let c=(0,Ss.val)(e.pointer.position);return c>=u.range.start&&c<=u.range.end}}))});function Vue(e,n){return wo(e,{menuItems(){return[{label:"Place marker",callback:()=>{be().transaction(({stateEditors:r})=>{let a=(0,El.val)(n.layoutP.sheet),u=a.getSequence();r.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:a.address,markers:[{id:Pae(),position:u.position}],snappingFunction:u.closestGridPosition})})}}]}})}var El,Ba,$X,uh,ZX,YX,JX,XO,QX,e$,t$,n$,r$,i$,Hue=z(()=>{Lue(),di(),tr(),on(),El=St,Xp(),Ba=te(Ie()),We(),Tu(),Hi(),nr(),ll(),cl(),zue(),KO(),aa(),So(),He(),gu(),xs(),Gf(),uh=se.div($X||($X=Q([`
  --thumbColor: #00e0ff;
  position: absolute;
  top: 0;
  left: 0;
  width: 5px;
  height: 100%;
  z-index: `,`;
  pointer-events: none;

  display: `,`;
`])),()=>kl.playhead,e=>e.isVisible?"block":"none"),YX=se.div(ZX||(ZX=Q([`
  position: absolute;
  top: 8px;
  width: 0;
  height: calc(100% - 8px);
  border-left: 1px solid #27e0fd;
  z-index: 10;
  pointer-events: none;

  #pointer-root.draggingPositionInSequenceEditor &:not(.seeking) {
    /* pointer-events: auto; */
    /* cursor: var(`,`); */

    &:after {
      position: absolute;
      inset: -8px;
      display: block;
      content: ' ';
    }
  }
`])),du),XO=se.div(JX||(JX=Q([`
  background-color: var(--thumbColor);
  position: absolute;
  width: 5px;
  height: 13px;
  top: -4px;
  left: -2px;
  z-index: 11;
  cursor: ew-resize;
  --sunblock-color: #1f2b2b;

  `,`;

  `,`.seeking > & {
    pointer-events: none !important;
  }

  #pointer-root.draggingPositionInSequenceEditor
    `,`:not(.seeking)
    > & {
    pointer-events: auto;
    cursor: var(`,`);
  }

  `,`.playheadattachedtofocusrange > & {
    top: -8px;
    --sunblock-color: #005662;
    &:before,
    &:after {
      border-bottom-width: 8px;
    }
  }

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    left: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-left: 2px solid transparent;
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    right: -2px;
    width: 0;
    height: 0;
    border-bottom: 4px solid var(--sunblock-color);
    border-right: 2px solid transparent;
  }
`])),Qn,uh,uh,du,uh),e$=se.div(QX||(QX=Q([`
  position: absolute;
  left: 1px;
  right: 1px;
  top: 13px;
  border-top: 3px solid var(--thumbColor);
  border-right: 1px solid transparent;
  border-left: 1px solid transparent;
  pointer-events: none;

  /* `,`.playheadattachedtofocusrange & {
    top: 10px;
    &:before,
    &:after {
      height: 15px;
    }
  } */

  &:before {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    left: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 0 100% 0 0;
    border-top: 1px solid var(--thumbColor);
    border-right: 1px solid var(--thumbColor);
  }

  &:after {
    position: absolute;
    display: block;
    content: ' ';
    top: -4px;
    right: -2px;
    height: 8px;
    width: 2px;
    background: none;
    border-radius: 100% 0 0 0;
    border-top: 1px solid var(--thumbColor);
    border-left: 1px solid var(--thumbColor);
  }
`])),uh),n$=se.div(t$||(t$=Q([`
  display: none;
  position: absolute;
  top: -20px;
  left: 4px;
  padding: 0 2px;
  transform: translateX(-50%);
  background: #1a1a1a;
  border-radius: 4px;
  color: #fff;
  font-size: 10px;
  line-height: 18px;
  text-align: center;
  `,":hover &, ",`.seeking & {
    display: block;
  }
`])),XO,uh),r$=({layoutP:e})=>{let[n,r]=Xn(null),{node:a,toggle:u,close:c}=sl({debugName:"Playhead"},()=>Ba.default.createElement(ul,null,Ba.default.createElement(GX,{layoutP:e,onRequestClose:c}))),f=(0,Ba.useMemo)(()=>({debugName:"RightOverlay/Playhead",onDragStart(){let y=(0,El.val)(e.sheet).getSequence(),k=y.position,M=(0,El.val)(e.scaledSpace.toUnitSpace),T=(0,El.val)(e.seeker.setIsSeeking);return T(!0),ID(),{onDrag(E,A,C){var R;let N=M(E);y.position=(R=Eo.checkIfMouseEventSnapToPos(C,{ignore:r}))!=null?R:Tr(k+N,0,y.length)},onDragEnd(E){T(!1),Hf()},onClick(E){u(E,n.current)}}}}),[e,r]),[p]=Ur(r,f);Da(p,"draggingPositionInSequenceEditor","ew-resize"),_u(Cn(e.seeker.isSeeking)||p,-1);let[v]=Vue(r,{layoutP:e});return Tn(()=>{let y=(0,El.val)(e.seeker.isSeeking),k=(0,El.val)(e.sheet).getSequence(),M=(0,El.val)(XX(k)),T=k.positionPrism.getValue(),E=(0,El.val)(e.clippedSpace.fromUnitSpace)(T),A=E>=0&&E<=(0,El.val)(e.clippedSpace.width);return Ba.default.createElement(Ba.default.Fragment,null,v,a,Ba.default.createElement(uh,O({isVisible:A,style:{transform:"translate3d(".concat(E,"px, 0, 0)")},className:"".concat(y&&"seeking"," ").concat(M&&"playheadattachedtofocusrange")},gl("hide")),Ba.default.createElement(XO,O({ref:n},Eo.includePositionSnapAttrs(T)),Ba.default.createElement(zX,{room:8}),Ba.default.createElement(e$,null),Ba.default.createElement(n$,null,k.positionFormatter.formatForPlayhead(k.closestGridPosition(T)))),Ba.default.createElement(YX,q(O({},Eo.includePositionSnapAttrs(T)),{className:y?"seeking":""}))))},[e,n,a])},i$=r$}),ch,t_,V2,o$,a$,s$,l$,Gue=z(()=>{ch=St,on(),He(),ah(),t_=te(Ie()),We(),V2=1e3,a$=se.div(o$||(o$=Q([`
  position: absolute;
  top: `,`px;
  left: 0;
  opacity: 0.15;
  width: `,`px;
  transform-origin: top left;
  pointer-events: none;
  background-color: `,`;
`])),Sl,V2,e=>e.enabled?"#000000":"transparent"),s$=({layoutP:e})=>{let n=(0,t_.useMemo)(()=>(0,ch.prism)(()=>{let{projectId:r,sheetId:a}=(0,ch.val)(e.sheet).address;return(0,ch.val)(be().atomP.ahistoric.projects.stateByProjectId[r].stateBySheetId[a].sequence.focusRange)}),[e]);return Tn(()=>{let r=n.getValue();if(!r||!r.enabled)return null;let a=(0,ch.val)(e.rightDims.height)-Sl,u=(0,ch.val)(e.clippedSpace.fromUnitSpace),c=(0,ch.val)(e.clippedSpace.width),f=[];{let p=0,v=u(r.range.start),y,k;p>v?(k=0,y=0):(v>c&&(v=c),k=p,y=(v-p)/V2),f.push({translateX:k,scaleX:y})}{let p=u(r.range.end),v=c,y,k;p>v?(k=0,y=0):(p<0&&(p=0),k=p,y=(v-p)/V2),f.push({translateX:k,scaleX:y})}return t_.default.createElement(t_.default.Fragment,null,f.map(({translateX:p,scaleX:v},y)=>t_.default.createElement(a$,{key:"curtain-".concat(y),enabled:!0,style:{height:"".concat(a,"px"),transform:"translateX(".concat(p,"px) scaleX(").concat(v,")")}})))},[e,n])},l$=s$}),gg,u$,c$,d$,f$,h$,Wue=z(()=>{gg=te(Ie()),We(),on(),He(),Lf(),YA(),c$=se.div(u$||(u$=Q([`
  display: flex;
  gap: 8px;
  /* padding: 4px 8px; */
  height: 28px;
  align-items: center;
`]))),se.div(d$||(d$=Q([`
  `,`;
  white-space: nowrap;
`])),qc),f$=({layoutP:e,marker:n})=>{var r;let a=Cn(e.sheet),u=(0,gg.useMemo)(()=>{let f;return{temporarilySetValue(p){f&&(f.discard(),f=void 0),f=be().tempTransaction(({stateEditors:v})=>{v.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:a.address,markerId:n.id,label:p})})},discardTemporaryValue(){f&&(f.discard(),f=void 0)},permanentlySetValue(p){f&&(f.discard(),f=void 0),be().transaction(({stateEditors:v})=>{v.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.updateMarker({sheetAddress:a.address,markerId:n.id,label:p})})}}},[e,a]),c=(0,gg.useRef)(null);return(0,gg.useLayoutEffect)(()=>{c.current.focus()},[]),gg.default.createElement(c$,null,gg.default.createElement(WE,q(O({value:(r=n.label)!=null?r:""},u),{isValid:()=>!0,inputRef:c})))},h$=f$});function que(e,n){return wo(e,{menuItems(){return[{label:"Remove marker",callback:()=>{be().transaction(({stateEditors:r})=>{r.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.removeMarker({sheetAddress:n.sheetAddress,markerId:n.markerId})})}}]}})}function Kue(e,n){let r=(0,Po.useRef)(n);r.current=n;let a=(0,Po.useMemo)(()=>({debugName:"MarkerDot/useDragMarker (".concat(n.marker.id,")"),onDragStart(c){let f=r.current.marker,p=(0,H2.val)(n.layoutP.scaledSpace.toUnitSpace),v;return ID(),{onDrag(y,k,M){var T;let E=f,A=Math.max((T=Eo.checkIfMouseEventSnapToPos(M,{ignore:e}))!=null?T:E.position+p(y),0);v==null||v.discard(),v=be().tempTransaction(({stateEditors:C})=>{C.studio.historic.projects.stateByProjectId.stateBySheetId.sequenceEditor.replaceMarkers({sheetAddress:(0,H2.val)(n.layoutP.sheet.address),markers:[q(O({},E),{position:A})],snappingFunction:(0,H2.val)(n.layoutP.sheet).getSequence().closestGridPosition})})},onDragEnd(y){y?v==null||v.commit():v==null||v.discard(),Hf()}}}}),[]),[u]=Ur(e,a);return _u(u,n.marker.position),Da(u,"draggingPositionInSequenceEditor draggingMarker","ew-resize"),[u]}var H2,Po,$O,ZO,p$,m$,g$,v$,y$,G2,b$,_$,x$,w$,S$,E$,Xue=z(()=>{H2=St,on(),He(),aa(),So(),tr(),Po=te(Ie()),We(),Hi(),di(),Tu(),xs(),$k(),u7(),Gf(),ll(),cl(),Wue(),$O=12,ZO=12,p$=$O*2,m$=ZO*2,v$=se.div(g$||(g$=Q([`
  position: absolute;
  // below the sequence ruler "top bar"
  top: 18px;
  z-index: `,`;
`])),()=>kl.marker),G2=se.div(y$||(y$=Q([`
  position: absolute;
  `,`
  pointer-events: none;
`])),La($O,ZO)),b$=Po.default.memo(()=>Po.default.createElement(G2,{children:Po.default.createElement("svg",{width:"100%",height:"100%",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg"},Po.default.createElement("path",{d:"M12 5H0V7H2.71973L5.96237 10.2426L9.20501 7H12V5Z",fill:"#40AAA4"}))})),x$=se.div(_$||(_$=Q([`
  z-index: 1;
  cursor: ew-resize;

  `,`

  // :not dragging marker to ensure that markers don't snap to other markers
  // this works because only one marker track (so this technique is not used by keyframes...)
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) & {
    `,`
  }

  // "All instances of this component <Mark/> inside #pointer-root when it has the .draggingPositionInSequenceEditor class"
  // ref: https://styled-components.com/docs/basics#pseudoelements-pseudoselectors-and-nesting
  #pointer-root.draggingPositionInSequenceEditor:not(.draggingMarker) &,
  #pointer-root.draggingPositionInSequenceEditor
    &.`,` {
    pointer-events: auto;
    cursor: var(`,`);
  }

  &:hover
    + `,`,
    // notice , "or" in CSS
    &.`,`
    + `,` {
    `,`
  }
`])),vl.CSS,vl.CSS_WHEN_SOMETHING_DRAGGING,vl.BEING_DRAGGED_CLASS,du,G2,vl.BEING_DRAGGED_CLASS,G2,La(p$,m$)),w$=({layoutP:e,markerId:n})=>{let r=Cn(e.sheet.address),a=Cn(be().atomP.historic.projects.stateByProjectId[r.projectId].stateBySheetId[r.sheetId].sequenceEditor.markerSet.byId[n]);if(!a)return null;let u=Cn(e.clippedSpace.width),c=Cn(e.clippedSpace.fromUnitSpace)(a.position),f=c<=0||c>u,p=f?-1e4:c,v=f?0:1;return Po.default.createElement(v$,{style:{transform:"translateX(".concat(p,"px) scale(").concat(v,")")}},Po.default.createElement(E$,{marker:a,layoutP:e}))},S$=w$,E$=({layoutP:e,marker:n})=>{let r=Cn(e.sheet.address),[a,u]=Xn(null),[c]=que(u,{sheetAddress:r,markerId:n.id}),[f]=Kue(u,{layoutP:e,marker:n}),{node:p,toggle:v,close:y}=sl({debugName:"MarkerPopover"},()=>Po.default.createElement(ul,null,Po.default.createElement(h$,{marker:n,layoutP:e,onRequestClose:y})));return Po.default.createElement(Po.default.Fragment,null,c,p,Po.default.createElement(x$,O({title:n.label?"Marker: ".concat(n.label):"Marker",ref:a,onClick:k=>{v(k,a.current)}},vl.reactProps({isDragging:f,position:n.position}))),Po.default.createElement(b$,null))}}),W2,k$,T$,$ue=z(()=>{on(),He(),W2=te(Ie()),Xue(),k$=({layoutP:e})=>{let n=Cn(e.sheet.address),r=be().atomP.historic.projects.stateByProjectId[n.projectId].stateBySheetId[n.sheetId].sequenceEditor.markerSet,a=Cn(r.allIds);return W2.default.createElement(W2.default.Fragment,null,a&&Object.keys(a).map(u=>W2.default.createElement(S$,{key:u,layoutP:e,markerId:u})))},T$=k$}),M$,ku,P$,C$,A$,I$,Zue=z(()=>{Tu(),on(),M$=St,ku=te(Ie()),We(),Due(),Oue(),Rue(),Hue(),ah(),Gue(),$ue(),C$=se.div(P$||(P$=Q([`
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  z-index: `,`;
  overflow: visible;
  pointer-events: none;
`])),()=>kl.rightOverlay),A$=({layoutP:e})=>Tn(()=>{let n=(0,M$.val)(e.rightDims.width);return ku.default.createElement(C$,{style:{width:n+"px"}},ku.default.createElement(i$,{layoutP:e}),ku.default.createElement(IX,{layoutP:e}),ku.default.createElement(_X,{layoutP:e}),ku.default.createElement(qK,{layoutP:e}),ku.default.createElement(T$,{layoutP:e}),ku.default.createElement(fX,{layoutP:e}),ku.default.createElement(l$,{layoutP:e}))},[e]),I$=A$}),D$,q2,O$,R$,L$,z$,Yue=z(()=>{D$=St,on(),He(),q2=te(Ie()),We(),Wm(),Hi(),R$=se.button(O$||(O$=Q([`
  outline: none;
  background-color: #1c1d21;
  border: 1px solid #191919;
  border-radius: 2px;
  display: flex;
  bottom: 14px;
  right: 8px;
  z-index: 1;
  position: absolute;

  padding: 4px 8px;
  display: flex;
  color: #656d77;
  line-height: 20px;
  font-size: 10px;

  &:hover {
    color: white;
  }

  & > svg {
    transition: transform 0.3s;
    transform: rotateZ(0deg);
  }

  &:hover > svg {
    transform: rotateZ(-20deg);
  }

  &.open > svg {
    transform: rotateZ(-180deg);
  }

  &.open:hover > svg {
    transform: rotateZ(-160deg);
  }
`]))),L$=({layoutP:e})=>{let n=Cn(e.graphEditorDims.isOpen),r=(0,q2.useCallback)(()=>{let a=(0,D$.val)(e.graphEditorDims.isOpen);be().transaction(({stateEditors:u})=>{u.studio.historic.panels.sequenceEditor.graphEditor.setIsOpen({isOpen:!a})})},[e]);return q2.default.createElement(R$,O({onClick:r,title:"Toggle graph editor",className:n?"open":""},gl("hide")),q2.default.createElement(Boe,null))},z$=L$}),Es,Or,N$,F$,B$,j$,kl,U$,V$,H$,G$,W$,q$,K$,X$,$$,Tu=z(()=>{Uc(),on(),yH(),Es=St,Or=te(Ie()),We(),fue(),I2(),wue(),Zue(),ig(),S9(),J9(),Hi(),On(),Xr(),Yue(),uu(),Nf(),F$=se(gD)(N$||(N$=Q([`
  z-index: `,`;
  box-shadow: 2px 2px 0 rgb(0 0 0 / 11%);
`])),Nm.sequenceEditorPanel),j$=se.div(B$||(B$=Q([`
  background-color: rgba(40, 43, 47, 0.99);
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  z-index: -1;
  pointer-events: none;
`]))),kl=(()=>{let e={rightBackground:0,scrollableArea:0,rightOverlay:0,lengthIndicatorCover:0,lengthIndicatorStrip:0,playhead:0,currentFrameStamp:0,marker:0,horizontalScrollbar:0},n=-1;for(let r of Object.keys(e))e[r]=n,n++;return e})(),V$=se(cD)(U$||(U$=Q([`
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1;
`]))),H$={edges:{left:{from:"screenLeft",distance:.1},right:{from:"screenRight",distance:.2},top:{from:"screenBottom",distance:.4},bottom:{from:"screenBottom",distance:.01}}},G$={width:800,height:200},W$=e=>Or.default.createElement(uD,{panelId:"sequenceEditor",defaultPosition:H$,minDims:G$},Or.default.createElement(q$,null)),q$=()=>{let{dims:e}=rg(),[n,r]=(0,Or.useState)(null);return Bj(n),Tn(()=>{let a=Es.prism.memo("panelSize",()=>{let T=e.width,E=e.height;return{width:T,height:E,widthWithoutBorder:T-2,heightWithoutBorder:E-4,screenX:e.left,screenY:e.top}},[e]),u=vo(jc().filter(T=>Yt(T)||mt(T)).map(T=>mt(T)?T.sheet:T));if(vo(u.map(T=>T.template)).length!==1)return Or.default.createElement(Or.default.Fragment,null);let c=u[0];if(!c)return Or.default.createElement(Or.default.Fragment,null);let f=yD("panelSizeP",a).pointer,p=Es.prism.memo("key",()=>JSON.stringify(c.address),[c]),v=Es.prism.memo("layout",()=>xue(c,f),[c,f]).getValue();if((0,Es.val)(v.tree.children).length===0)return Or.default.createElement(Or.default.Fragment,null);let y=Es.prism.memo("containerRef",$$,[]),k=(0,Es.val)(v.graphEditorDims.isAvailable),M=(0,Es.val)(v.graphEditorDims.isOpen);return Or.default.createElement(F$,{ref:T=>{y(T),T!==n&&r(T)}},Or.default.createElement(j$,{style:{width:"".concat((0,Es.val)(v.leftDims.width),"px")}}),Or.default.createElement(o7,{layoutP:v},Or.default.createElement(K$,{layoutP:v}),Or.default.createElement(dK,{key:p+"-dopeSheet",layoutP:v}),M&&Or.default.createElement(Oq,{key:p+"-graphEditor",layoutP:v}),k&&Or.default.createElement(z$,{layoutP:v}),Or.default.createElement(I$,{layoutP:v})))},[e,n])},K$=({layoutP:e})=>Tn(()=>{let n=(0,Es.val)(e.sheet);return Or.default.createElement(V$,{style:{width:(0,Es.val)(e.leftDims.width)}},Or.default.createElement(vA,null,Or.default.createElement(Bc,null,n.address.sheetId," "),Or.default.createElement(Ky,null,":","\xA0"),Or.default.createElement(Bc,null,n.address.sheetInstanceId," "),Or.default.createElement(Ky,null,"\xA0",">","\xA0"),Or.default.createElement(Bc,null,"Sequence")))},[e]),X$=W$,$$=()=>{let e=null,n={passive:!1,capture:!1},r=a=>{Math.abs(a.deltaY)<Math.abs(a.deltaX)&&(a.preventDefault(),a.stopPropagation())};return a=>{e!==a&&e&&e.removeEventListener("wheel",r,n),e=a,a&&a.addEventListener("wheel",r,n)}}}),dh,Z$,Y$,Jue=z(()=>{eoe(),aD(),dh=te(Ie()),He(),on(),pse(),Tu(),Z$=()=>{let e=Cn(be().paneManager.allPanesD),n=Object.entries(e).map(([r,a])=>dh.default.createElement(vH,{key:"pane-".concat(r),paneInstance:a}));return dh.default.createElement(dh.default.Fragment,null,n,dh.default.createElement(aF,null),dh.default.createElement(y9,null),dh.default.createElement(X$,null))},Y$=Z$}),J$,Q$,eZ,Que=z(()=>{We(),Mk(),Q$=se(eg)(J$||(J$=Q([`
  --popover-outer-stroke: #e11c1c;
  --popover-inner-stroke: #2c1c1c;
  --popover-bg: #2c1c1c;
  pointer-events: none !important;
`]))),eZ=Q$}),ece=le((e,n)=>{var r,a;r=[],a=[];function u(c,f,p){var v,y,k,M,T,E,A,C;if(c===f)return 0;if(v=c.length,y=f.length,v===0)return y;if(y===0)return v;for(p&&(c=c.toLowerCase(),f=f.toLowerCase()),A=0;A<v;)a[A]=c.charCodeAt(A),r[A]=++A;for(C=0;C<y;)for(k=f.charCodeAt(C),M=T=C++,A=-1;++A<v;)E=k===a[A]?T:T+1,T=r[A],r[A]=M=T>M?E>M?M+1:E:E>T?T+1:E;return M}n.exports=u}),tce=le((e,n)=>{var r=ece();function a(){var u,c,f,p,v,y=0,k=arguments[0],M=arguments[1],T=M.length,E=arguments[2];E&&(p=E.threshold,v=E.ignoreCase),p===void 0&&(p=0);for(var A=0;A<T;++A)v?c=r(k,M[A],!0):c=r(k,M[A]),c>k.length?u=1-c/M[A].length:u=1-c/k.length,u>y&&(y=u,f=M[A]);return y>=p?f:null}n.exports=a});function nce(e,n,r="Did you mean ",a="?"){let u=(0,tZ.default)(e,n,{threshold:.7});return u?r+JSON.stringify(u)+a:""}var tZ,rce=z(()=>{tZ=te(tce())});function nZ(e,n){return e.length<=n?e:e.substr(0,n-3)+"..."}var ice=z(()=>{}),rZ,YO,iZ=z(()=>{ice(),rZ=e=>typeof e=="string"?'string("'.concat(nZ(e,10),'")'):typeof e=="number"?"number(".concat(nZ(String(e),10),")"):e===null?"null":e===void 0?"undefined":typeof e=="boolean"?String(e):Array.isArray(e)?"array":typeof e=="object"?"object":"unknown",YO=rZ}),oZ,aZ,JO,sZ=z(()=>{We(),Df(),aZ=se(Vz)(oZ||(oZ=Q([`
  display: flex;
  height: fit-content;
  backdrop-filter: blur(14px);
  border-radius: 2px;
`]))),JO=aZ}),vg,lZ,uZ,cZ,yg,n_=z(()=>{We(),nr(),vg=te(Ie()),Eb(),UE(),yV(),sZ(),uZ=se.button(lZ||(lZ=Q([`
  `,`;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  font-weight: 600;
  width: 32px;
  height: 32px;
  outline: none;

  color: #a8a8a9;

  background: rgba(40, 43, 47, 0.8);
  backdrop-filter: blur(14px);
  border: none;
  border-bottom: 1px solid rgba(255, 255, 255, 0.08);
  border-radius: 2px;

  svg {
    display: block;
  }

  &:hover {
    background: rgba(59, 63, 69, 0.8);
  }

  &:active {
    background: rgba(82, 88, 96, 0.8);
  }

  &.selected {
    color: rgba(255, 255, 255, 0.8);
    border-bottom: 1px solid rgba(255, 255, 255, 0.7);
  }

  // Don't blur if in a button group, because it already blurs. We need to blur
  // on the group-level, otherwise we get seams.
  `,` > & {
    backdrop-filter: none;
    filter: none;
    border-radius: 0;

    &:first-child {
      border-top-left-radius: 2px;
      border-bottom-left-radius: 2px;
    }

    &:last-child {
      border-bottom-right-radius: 2px;
      border-top-right-radius: 2px;
    }
  }

  @supports not (backdrop-filter: blur()) {
    background: rgba(40, 43, 47, 0.95);
  }
`])),Qn,JO),cZ=vg.default.forwardRef((e,n)=>{var r=e,{title:a}=r,u=_e(r,["title"]);let[c,f]=Qm({enabled:typeof a=="string"},()=>vg.default.createElement(YI,null,a));return vg.default.createElement(vg.default.Fragment,null,c,vg.default.createElement(uZ,O({ref:jE([f,n])},u))," ")}),yg=cZ}),dZ,fZ,hZ,pZ,mZ,oce=z(()=>{dZ=te(Ie()),n_(),We(),nr(),hZ=se(yg)(fZ||(fZ=Q([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Qn),pZ=({config:e,testId:n})=>{var r;return dZ.default.createElement(hZ,{onClick:e.onClick,"data-testid":n,title:e.title,dangerouslySetInnerHTML:{__html:(r=e.svgSource)!=null?r:""}})},mZ=pZ});function ace({value:e,label:n,icon:r,onClick:a,isSelected:u}){return bg.default.createElement(bg.default.Fragment,null,bg.default.createElement(yg,{forwardedAs:Bz,className:u?"selected":void 0,"aria-label":n,onClick:a,title:n},r))}var bg,gZ,vZ,sce=z(()=>{bg=te(Ie()),Df(),n_(),sZ(),gZ=({value:e,onChange:n,options:r})=>bg.default.createElement(JO,null,r.map(({label:a,icon:u,value:c})=>bg.default.createElement(ace,{key:c,value:c,isSelected:e===c,label:a,icon:u,onClick:()=>n(c)}))),vZ=gZ}),QO,yZ,bZ,_Z,xZ,lce=z(()=>{QO=te(Ie()),We(),nr(),sce(),bZ=se.div(yZ||(yZ=Q([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Qn),_Z=({config:e})=>QO.default.createElement(vZ,{onChange:e.onChange,options:e.options.map(({label:n,value:r,svgSource:a})=>({label:n,value:r,icon:QO.default.createElement(bZ,{dangerouslySetInnerHTML:{__html:a}})})),value:e.value}),xZ=_Z}),r_,wZ,SZ,EZ,kZ,uce=z(()=>{r_=te(Ie()),We(),nr(),n_(),Cj(),ll(),SZ=se.div(wZ||(wZ=Q([`
  `,`;
  & > svg {
    width: 1em;
    height: 1em;
    pointer-events: none;
  }
`])),Qn),EZ=({config:e})=>{let n=(0,r_.useRef)(null),r=sl(()=>{let a=n.current.getBoundingClientRect();return{debugName:"ExtensionFlyoutMenu:"+e.label,constraints:{maxX:a.right,maxY:8,minX:a.left,minY:8},verticalGap:2}},()=>r_.default.createElement(TI,{items:e.items.map((a,u)=>({label:a.label,callback:()=>{var c;try{(c=a.onClick)==null||c.call(a)}catch(f){console.error(f)}}})),onRequestClose:()=>{r.close("clicked")}}));return r_.default.createElement(SZ,null,r.node,r_.default.createElement(yg,{ref:n,onClick:a=>{r.open(a,n.current)}},e.label))},kZ=EZ});function cce(e){return e5[e]}var i_,TZ,e5,MZ,PZ,dce=z(()=>{rce(),iZ(),i_=te(Ie()),oce(),lce(),uce(),TZ=e=>i_.default.createElement(i_.default.Fragment,null,e.config.map((n,r)=>i_.default.createElement(MZ,{config:n,key:r}))),e5={Icon:mZ,Switch:xZ,Flyout:kZ},MZ=({config:e})=>{let n=cce(e.type);if(!n)throw new Error("No tool with tool.type ".concat(YO(e.type)," exists. Did you mean ").concat(nce(e.type,Object.keys(e5))));return i_.default.createElement(n,{config:e})},PZ=TZ}),CZ,Tl,AZ,IZ,DZ,t5,OZ,RZ,n5,LZ=z(()=>{CZ=St,on(),He(),Tl=te(Ie()),We(),dce(),IZ=se.div(AZ||(AZ=Q([`
  height: 36px;
  /* pointer-events: none; */

  display: flex;
  gap: 0.5rem;
  justify-content: center;
`]))),t5=se.div(DZ||(DZ=Q([`
  position: abolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),OZ=({extension:e,toolbarId:n})=>{var r;let a=(0,Tl.useMemo)(()=>new CZ.Atom([]),[]),u=(r=e.toolbars)==null?void 0:r[n];(0,Tl.useLayoutEffect)(()=>{let f=u==null?void 0:u(a.set.bind(a),be().publicApi);if(typeof f=="function")return f},[e,n,u]);let c=Cn(a.prism);return Tl.default.createElement(PZ,{config:c})},RZ=({toolbarId:e,showLeftDivider:n})=>{var r;let a=[],u=Cn(be().atomP.ephemeral.extensions.byId),c=!1;for(let[,f]of Object.entries(u))!f||!((r=f.toolbars)!=null&&r[e])||(a.push(Tl.default.createElement(Tl.default.Fragment,{key:"extensionToolbar-"+f.id},c?Tl.default.createElement(t5,null):void 0,Tl.default.createElement(OZ,{extension:f,toolbarId:e}))),c=!0);return a.length===0?null:Tl.default.createElement(IZ,{"data-testid":"theatre-extensionToolbar-".concat(e)},n?Tl.default.createElement(t5,null):void 0,a)},n5=RZ}),o_,zZ,NZ,FZ,K2,fce=z(()=>{We(),o_=te(Ie()),n_(),NZ=se(yg)(zZ||(zZ=Q([`
  color: `,`;

  border-bottom: 1px solid
    `,`;
`])),({pinned:e})=>e?"rgba(255, 255, 255, 0.8)":"#A8A8A9",({pinned:e})=>e?"rgba(255, 255, 255, 0.7)":"rgba(255, 255, 255, 0.08)"),FZ=(0,o_.forwardRef)((e,n)=>{var r=e,{children:a,hint:u,pinned:c,icon:f,pinHintIcon:p,unpinHintIcon:v}=r,y=_e(r,["children","hint","pinned","icon","pinHintIcon","unpinHintIcon"]);let[k,M]=(0,o_.useState)(!1),T=k||u;return o_.default.createElement(NZ,q(O({},y),{pinned:c,ref:n,onMouseOver:()=>M(!0),onMouseOut:()=>M(!1)}),o_.default.createElement("div",{style:{pointerEvents:"none",width:"fit-content",height:"fit-content",inset:0}},T&&!c?p:T&&c?v:f),a)}),K2=FZ});function hce(e){return r5.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r5.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.732 4.048l-.792-.792L7.2 8l4.74 4.744.792-.792L8.781 8l3.951-3.952zm-3.932 0l-.792-.792L3.268 8l4.74 4.744.792-.792L4.848 8 8.8 4.048z",fill:"currentColor"}))}var r5,i5,pce=z(()=>{r5=te(Ie()),i5=hce});function mce(e){return o5.createElement("svg",O({width:16,height:16,viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),o5.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M3.694 3.765l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.951-3.951-3.951-3.952zm3.932 0l.792-.792 4.74 4.744-4.74 4.744-.792-.793 3.952-3.951-3.952-3.952z",fill:"currentColor"}))}var o5,a5,gce=z(()=>{o5=te(Ie()),a5=mce}),hi,BZ,jZ,UZ,s5,VZ,cd,HZ,GZ,WZ,qZ,KZ,XZ,$Z,ZZ,YZ,X2,JZ,QZ,l5,u5,eY,tY,vce=z(()=>{on(),He(),hi=te(Ie()),We(),jZ=se.div(BZ||(BZ=Q([`
  width: 138px;
  border-radius: 2px;
  background-color: rgba(42, 45, 50, 0.9);
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: stretch;
  justify-content: flex-start;
  box-shadow: 0px 1px 1px rgba(0, 0, 0, 0.25), 0px 2px 6px rgba(0, 0, 0, 0.15);
  backdrop-filter: blur(14px);
  pointer-events: auto;
  // makes the edges of the item highlights match the rounded corners
  overflow: hidden;

  @supports not (backdrop-filter: blur()) {
    background-color: rgba(42, 45, 50, 0.98);
  }

  color: rgba(255, 255, 255, 0.9);

  & a {
    // Fix colors of links to not be default
    color: inherit;
  }
`]))),s5=se.div(UZ||(UZ=Q([`
  position: relative;
  padding: 0px 12px;
  font-weight: 400;
  font-size: 11px;
  height: 32px;
  text-decoration: none;
  user-select: none;
  display: flex;
  flex-direction: row;
  align-items: center;
  cursor: default;
`]))),cd=se(s5)(VZ||(VZ=Q([`
  &:before {
    position: absolute;
    display: block;
    content: ' ';
    inset: 3px;
    border-radius: 3px;
    background: rgba(255, 255, 255, 0.1);
    opacity: 0;
  }

  &.secondary {
    color: rgba(255, 255, 255, 0.5);
  }

  &:hover {
    /* background-color: #398995; */
    color: white !important;
    &:before {
      opacity: 1;
    }
  }
`]))),GZ=se(s5)(HZ||(HZ=Q([`
  height: auto;
  min-height: 32px;
  padding-top: 12px;
  padding-bottom: 10px;
  flex-direction: column;
  justify-content: flex-start;
  align-items: stretch;
  gap: 8px;
  color: rgba(255, 255, 255, 0.5);
`]))),qZ=se.div(WZ||(WZ=Q([`
  font-weight: 600;
`]))),XZ=se.div(KZ||(KZ=Q([`
  display: flex;
  flex-direction: row;
  justify-content: space-between;
`]))),ZZ=se.div($Z||($Z=Q([`
  margin-left: 2px;
`]))),X2=se.div(YZ||(YZ=Q([`
  height: 1px;
  margin: 0 2px;
  background: rgba(255, 255, 255, 0.02);
`]))),QZ=se.div(JZ||(JZ=Q([`
  position: absolute;
  width: 8px;
  height: 8px;
  background: #40aaa4;
  right: 14px;
  top: 12px;
  border-radius: 50%;
`]))),l5="0.7.2",u5=l5.match(/^[^\-]+/)[0],eY=hi.default.forwardRef((e,n)=>{let r=Cn(be().atomP.ahistoric.updateChecker.result.hasUpdates);return hi.default.createElement(jZ,{ref:n},hi.default.createElement(cd,{as:"a",href:"https://www.theatrejs.com/docs/latest",className:"",target:"_blank"},"Docs"),hi.default.createElement(cd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases",className:"",target:"_blank"},"Changelog"),hi.default.createElement(X2,null),hi.default.createElement(cd,{as:"a",href:"https://github.com/theatre-js/theatre",className:"",target:"_blank"},"Github"),hi.default.createElement(cd,{as:"a",href:"https://twitter.com/theatre_js",className:"",target:"_blank"},"Twitter"),hi.default.createElement(cd,{className:"",as:"a",href:"https://discord.gg/bm9f8F9Y9N",target:"_blank"},"Discord"),hi.default.createElement(X2,null),hi.default.createElement(GZ,null,hi.default.createElement(qZ,null,"Version"),hi.default.createElement(XZ,null,hi.default.createElement(ZZ,null,l5," ",r===!0?"(outdated)":r===!1?"(latest)":""))),r===!0&&hi.default.createElement(hi.default.Fragment,null,hi.default.createElement(X2,null),hi.default.createElement(cd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases".concat(encodeURIComponent(u5)),className:"",target:"_blank"},"Update",hi.default.createElement(QZ,null)),hi.default.createElement(cd,{as:"a",href:"https://www.theatrejs.com/docs/latest/releases#".concat(encodeURIComponent(u5)),className:"",target:"_blank"},"What's new?")))}),tY=eY}),pr,nY,rY,iY,oY,aY,sY,c5,lY,d5,uY,f5,cY,dY,yce=z(()=>{on(),He(),pr=te(Ie()),We(),Eb(),Que(),Mk(),nY=St,LZ(),fce(),Xy(),pce(),gce(),n_(),ll(),vce(),Ob(),iY=se.div(rY||(rY=Q([`
  height: 36px;
  pointer-events: none;

  display: flex;
  justify-content: space-between;
  padding: 12px;
`]))),aY=se.div(oY||(oY=Q([`
  color: white;
  width: 14px;
  height: 14px;
  background: #d00;
  border-radius: 4px;
  text-align: center;
  line-height: 14px;
  font-weight: 600;
  font-size: 8px;
  position: relative;
  left: -6px;
  top: -11px;
  margin-right: -14px;
  box-shadow: 0 4px 6px -4px #00000059;
`]))),c5=se.div(sY||(sY=Q([`
  display: flex;
  gap: 8px;
`]))),d5=se.div(lY||(lY=Q([`
  position: absolute;
  background: `,`;
  width: 6px;
  height: 6px;
  border-radius: 50%;
  right: -2px;
  top: -2px;
`])),({type:e})=>e==="info"?"#40aaa4":"#f59e0b"),se.div(uY||(uY=Q([`
  position: absolute;
  height: 32px;
  width: 1px;
  background: #373b40;
  opacity: 0.4;
`]))),f5=!1,cY=()=>{var e,n,r;let a=Tn(()=>{let C=(0,nY.val)(be().atomP.ephemeral.coreByProject);return Object.entries(C).map(([R,N])=>({projectId:R,state:N})).filter(({state:R})=>R.loadingState.type==="browserStateIsNotBasedOnDiskState")},[]),[u,c]=Qm({enabled:a.length>0,enterDelay:a.length>0?0:200},()=>a.length>0?pr.default.createElement(eZ,null,a.length===1?'There is a state conflict in project "'.concat(a[0].projectId,'". Select the project in the outline below in order to fix it.'):"There are ".concat(a.length," projects that have state conflicts. They are highlighted in the outline below. ")):pr.default.createElement(eg,null,pr.default.createElement(pr.default.Fragment,null,"Outline"))),f=(e=Cn(be().atomP.ahistoric.pinOutline))!=null?e:!0,p=(n=Cn(be().atomP.ahistoric.pinDetails))!=null?n:!0,v=Cn(be().atomP.ahistoric.updateChecker.result.hasUpdates)===!0,y=sl(()=>{let C=k.current.getBoundingClientRect();return{debugName:"More Menu",constraints:{maxX:C.right,maxY:8,minX:C.left-140,minY:8},verticalGap:2}},()=>pr.default.createElement(tY,null)),k=(0,pr.useRef)(null),M=(0,pr.useMemo)(()=>(window.__IS_VISUAL_REGRESSION_TESTING&&(f5||(f5=!0,console.warn("Visual regression testing enabled, so we're showing the updates badge unconditionally"))),v||window.__IS_VISUAL_REGRESSION_TESTING?!0:v),[v]),{hasNotifications:T}=eD(),[E,A]=jV();return pr.default.createElement(iY,null,pr.default.createElement(c5,null,u,pr.default.createElement(K2,{ref:c,"data-testid":"OutlinePanel-TriggerButton",onClick:()=>{be().transaction(({stateEditors:C,drafts:R})=>{var N;C.studio.ahistoric.setPinOutline(!((N=R.ahistoric.pinOutline)==null||N))})},icon:pr.default.createElement(bA,null),pinHintIcon:pr.default.createElement(a5,null),unpinHintIcon:pr.default.createElement(i5,null),pinned:f}),a.length>0?pr.default.createElement(aY,null,a.length):null,pr.default.createElement(n5,{showLeftDivider:!0,toolbarId:"global"})),pr.default.createElement(c5,null,E,pr.default.createElement(K2,{ref:A,onClick:()=>{be().transaction(({stateEditors:C,drafts:R})=>{var N;C.studio.ahistoric.setPinNotifications(!((N=R.ahistoric.pinNotifications)!=null&&N))})},icon:pr.default.createElement(LE,null),pinHintIcon:pr.default.createElement(LE,null),unpinHintIcon:pr.default.createElement(LE,null),pinned:(r=Cn(be().atomP.ahistoric.pinNotifications))!=null?r:!1},T&&pr.default.createElement(d5,{type:"warning"})),y.node,pr.default.createElement(yg,{ref:k,onClick:C=>{y.toggle(C,k.current)}},pr.default.createElement(oN,null),M&&pr.default.createElement(d5,{type:"info"})),pr.default.createElement(K2,{ref:c,onClick:()=>{be().transaction(({stateEditors:C,drafts:R})=>{var N;C.studio.ahistoric.setPinDetails(!((N=R.ahistoric.pinDetails)==null||N))})},icon:pr.default.createElement(iN,null),pinHintIcon:pr.default.createElement(i5,null),unpinHintIcon:pr.default.createElement(a5,null),pinned:p})))},dY=cY}),fY,a_,hY,s_,pY,mY,gY,vY,yY=z(()=>{fY=St,on(),a_=te(Ie()),hY=te(Ma()),s_=new fY.Atom({set:{},byId:{}}),pY=1,mY=()=>{let e=pY++;function n(a,u,c){s_.reduce(f=>({byId:q(O({},f.byId),{[e]:{comp:a,props:u,portalNode:c}}),set:q(O({},f.set),{[e]:!0})}))}function r(){s_.reduce(a=>{let u=O({},a.set),c=O({},a.byId);return delete u[e],{byId:c,set:u}})}return{mountOrRender:n,unmount:r}},gY=()=>{let e=Object.keys(Cn(s_.pointer.set));return a_.default.createElement(a_.default.Fragment,null,e.map(n=>a_.default.createElement(vY,{key:"id-"+n,id:n})))},vY=({id:e})=>{let{comp:n,portalNode:r,props:a}=Cn(s_.pointer.byId[e]);return(0,hY.createPortal)(a_.default.createElement(n,O({},a)),r)}});function bce(e){let n=be(),[r,a]=Xn(void 0),u=fK();u.configureLogging({min:128,dev:p5,internal:p5});let c=u.getLogger().named("Theatre.js UIRoot");Uue();let f=Cn(n.atomP.ahistoric.visibilityState);return(0,qi.useEffect)(()=>(f==="everythingIsHidden"&&console.warn("Theatre.js Studio is hidden. Use the keyboard shortcut 'alt + \\' to restore the studio, or call studio.ui.restore()."),()=>{}),[f]),Tn(()=>{let p=(0,h5.val)(n.atomP.ahistoric.visibilityState);return(0,h5.val)(n.atomP.ephemeral.initialised)?qi.default.createElement(wF,{logger:c},qi.default.createElement(EU,null,qi.default.createElement(ooe,null,qi.default.createElement(EY,null),qi.default.createElement(Lm.Provider,{value:a},qi.default.createElement(gA,{target:window.__IS_VISUAL_REGRESSION_TESTING===!0?void 0:e.containerShadow},qi.default.createElement(qi.default.Fragment,null,qi.default.createElement(_Y,null),qi.default.createElement(wY,{className:p==="everythingIsHidden"?"invisible":""},qi.default.createElement(mA,{ref:r}),qi.default.createElement(dY,null),qi.default.createElement(Y$,null),qi.default.createElement(UV,null)))))))):null},[n,r,a])}var h5,qi,bY,_Y,xY,wY,SY,p5,EY,_ce=z(()=>{He(),on(),h5=St,qi=te(Ie()),We(),Jue(),yce(),tr(),Df(),KO(),aa(),kU(),UA(),yY(),nr(),R2(),Hc(),Ob(),_Y=typeof window!="undefined"?xm(bY||(bY=Q([`
  :host {
    contain: strict;
  }
`]))):{},wY=se(xF)(xY||(xY=Q([`
  z-index: 50;
  position: fixed;
  inset: 0;

  &.invisible {
    pointer-events: none !important;
    opacity: 0;
    transform: translateX(1000000px);
  }
`]))),p5=/Playground.+Theatre\.js/.test((SY=typeof document!="undefined"?document==null?void 0:document.title:null)!=null?SY:""),EY=()=>qi.default.createElement(gY,null)}),xce=le(e=>{var n=Ma();e.createRoot=n.createRoot,e.hydrateRoot=n.hydrateRoot}),kY={};Ee(kY,{default:()=>PY});var TY,MY,PY,wce=z(()=>{_ce(),TY=te(Ie()),MY=te(xce()),yY(),nr(),LZ(),PY=class{constructor(){Pe(this,"containerEl",document.createElement("div")),Pe(this,"_renderTimeout"),Pe(this,"_documentBodyUIIsRenderedIn"),Pe(this,"containerShadow"),this.containerEl.id="theatrejs-studio-root",this.containerEl.style.cssText=`
      position: fixed;
      top: 0;
      right: 0;
      bottom: 0;
      left: 0;
      pointer-events: none;
      z-index: 100;
    `;let e=()=>{if(window.__IS_VISUAL_REGRESSION_TESTING===!0){let n=document.createElement("div");return n.id="theatrejs-faux-shadow-root",document.body.appendChild(n),n}else return this.containerEl.attachShadow({mode:"open"})};this.containerShadow=e()}render(){let e=()=>{if(!document.body){this._renderTimeout=setTimeout(e,5);return}this._renderTimeout=void 0,this._documentBodyUIIsRenderedIn=document.body,this._documentBodyUIIsRenderedIn.appendChild(this.containerEl),MY.default.createRoot(this.containerShadow).render(TY.default.createElement(bce,{containerShadow:this.containerShadow}))};this._renderTimeout=setTimeout(e,10)}renderToolset(e,n){let r=mY();return r.mountOrRender(Mie(n5),{toolbarId:e},n),r.unmount}}}),Sce=le(e=>{e.compare=u,e.reduce=c;var n,r,a;e.REMOVE=n=-1,e.ADD=r=1,e.EQUAL=a=0;function u(k,M){var T=k.length,E=M.length,A=f(k,M),C=A<T&&A<E?p(k,M):0,R=C+A-1;T-=R,E-=R;for(var N=y(T,E),j=T-1;j>=0;--j)for(var G=E-1;G>=0;--G)N[G][j]=v(N,k,M,A,j,G);return{prefix:A,matrix:N,suffix:C}}function c(k,M,T){var E,A,C,R,N=T.matrix,j=T.prefix;for(E=0;E<j;++E)M=k(M,a,E,E);for(C=E,j=N.length,E=0,A=0;E<j;)switch(R=N[E][A].type,M=k(M,R,E+C,A+C),R){case a:++E,++A;break;case n:++A;break;case r:++E;break}for(E+=C,A+=C,j=T.suffix,C=0;C<j;++C)M=k(M,a,E+C,A+C);return M}function f(k,M){for(var T=0,E=Math.min(k.length,M.length);T<E&&k[T]===M[T];)++T;return T}function p(k,M){for(var T=k.length-1,E=M.length-1,A=Math.min(T,E),C=0;C<A&&k[T-C]===M[E-C];)++C;return C}function v(k,M,T,E,A,C){return M[A+E]===T[C+E]?{value:k[C+1][A+1].value,type:a}:k[C][A+1].value<k[C+1][A].value?{value:k[C][A+1].value+1,type:n}:{value:k[C+1][A].value+1,type:r}}function y(k,M){var T=[],E,A,C;for(C=T[M]=[],A=0;A<k;++A)C[A]={value:k-A,type:n};for(E=0;E<M;++E)T[E]=[],T[E][k]={value:M-E,type:r};return T[M][k]={value:0,type:a},T}}),CY=le(e=>{e.cons=n,e.tail=r,e.map=a;function n(u,c){var f=c.length,p=new Array(f+1);p[0]=u;for(var v=0;v<f;++v)p[v+1]=c[v];return p}function r(u){for(var c=u.length-1,f=new Array(c),p=0;p<c;++p)f[p]=u[p+1];return f}function a(u,c){for(var f=new Array(c.length),p=0;p<c.length;++p)f[p]=u(c[p]);return f}}),Ece=le((e,n)=>{n.exports=f;var r=/\/|~1|~0/g,a="/",u="~",c="~1";function f(p,v){var y,k,M,T;for(y=p.charAt(0)===a?1:0,k="",r.lastIndex=y;M=r.exec(p);)if(T=M[0],k+=p.slice(y,r.lastIndex-T.length),y=r.lastIndex,T===a){if(v(k)===!1)return p;k=""}else k+=T===c?a:u;return k+=p.slice(y),v(k),p}}),m5=le(e=>{var n=Ece();e.find=k,e.join=T,e.absolute=M,e.parse=E,e.contains=A,e.encodeSegment=R,e.decodeSegment=C,e.parseArrayIndex=G,e.isValidArrayIndex=j;var r="/",a=/\//g,u="~1",c=/~1/g,f="~",p=/~/g,v="~0",y=/~0/g;function k(Y,re,ye,ke){if(typeof re=="string"){if(re==="")return{target:Y,key:void 0};if(re===r)return{target:Y,key:""};var ce=Y,Ce,Ge=ke!==void 0;return n(re,function(oe){if(Y==null)return ce=null,!1;Array.isArray(Y)?Ce=Ge?J(ye,G(oe),Y,ke):oe==="-"?oe:G(oe):Ce=oe,ce=Y,Y=Y[Ce]}),ce===null?void 0:{target:ce,key:Ce}}}function M(Y){return Y[0]===r?Y:r+Y}function T(Y){return Y.join(r)}function E(Y){var re=[];return n(Y,re.push.bind(re)),re}function A(Y,re){return re.indexOf(Y)===0&&re[Y.length]===r}function C(Y){return Y.replace(c,r).replace(y,f)}function R(Y){return Y.replace(p,v).replace(a,u)}var N=/^(0|[1-9]\d*)$/;function j(Y){return N.test(Y)}function G(Y){if(j(Y))return+Y;throw new SyntaxError("invalid array index "+Y)}function J(Y,re,ye,ke){var ce=re;if(ce<0)throw new Error("array index out of bounds "+ce);if(ke!==void 0&&typeof Y=="function"&&(ce=Y(re,ye,ke),ce<0))throw new Error("could not find patch context "+ke);return ce}}),AY=le((e,n)=>{n.exports=r;function r(c){return c==null||typeof c!="object"?c:Array.isArray(c)?a(c):u(c)}function a(c){for(var f=c.length,p=new Array(f),v=0;v<f;++v)p[v]=r(c[v]);return p}function u(c){for(var f=Object.keys(c),p={},v,y=0,k=f.length;y<k;++y)v=f[y],p[v]=r(c[v]);return p}}),kce=le((e,n)=>{n.exports=r;function r(c,f){return c===f?!0:Array.isArray(c)&&Array.isArray(f)?a(c,f):typeof c=="object"&&typeof f=="object"?u(c,f):!1}function a(c,f){if(c.length!==f.length)return!1;for(var p=0;p<c.length;++p)if(!r(c[p],f[p]))return!1;return!0}function u(c,f){if(c===null&&f!==null||c!==null&&f===null)return!1;var p=Object.keys(c),v=Object.keys(f);if(p.length!==v.length)return!1;for(var y=0,k;y<p.length;++y)if(k=p[y],!(k in f&&r(c[k],f[k])))return!1;return!0}}),Tce=le((e,n)=>{var r=m5();n.exports=function(k,M){var T=r.parse(k.path),E=r.parse(M.path),A=v(T,E),C=c(T,E,A.length),R=y(k),N=y(M);return A.length===0&&!C?[N,R]:C?u(R,T,N,E):a(R,T,N)};function a(k,M,T,E){if(k.path===T.path)throw new TypeError("cannot commute "+k.op+","+T.op+" with identical object paths");return[T,k]}function u(k,M,T,E){return M.length===E.length?f(k,M,T,E):(M.length>E.length?(M=p(T,E,k,M,-1),k.path=r.absolute(r.join(M))):(E=p(k,M,T,E,1),T.path=r.absolute(r.join(E))),[T,k])}function c(k,M,T){return r.isValidArrayIndex(k[T])&&r.isValidArrayIndex(M[T])}function f(k,M,T,E){var A=M.length-1,C=+M[A],R=+E[A],N;return C<R?k.op==="add"||k.op==="copy"?(N=E.slice(),N[A]=Math.max(0,R-1),T.path=r.absolute(r.join(N))):k.op==="remove"&&(N=E.slice(),N[A]=R+1,T.path=r.absolute(r.join(N))):T.op==="add"||T.op==="copy"?(N=M.slice(),N[A]=C+1,k.path=r.absolute(r.join(N))):C>R&&T.op==="remove"&&(N=M.slice(),N[A]=Math.max(0,C-1),k.path=r.absolute(r.join(N))),[T,k]}function p(k,M,T,E,A){var C=M.length-1,R=+M[C],N=+E[C],j=E.slice();return R>N||(k.op==="add"||k.op==="copy"?j[C]=Math.max(0,N-A):k.op==="remove"&&(j[C]=Math.max(0,N+A))),j}function v(k,M){var T=k.length,E=M.length;if(T===0||E===0||T<2&&E<2)return[];for(var A=T===E?T-1:Math.min(T,E),C=0;C<A&&k[C]===M[C];)++C;return k.slice(0,C)}function y(k){return k.op==="remove"?{op:k.op,path:k.path}:k.op==="copy"||k.op==="move"?{op:k.op,path:k.path,from:k.from}:{op:k.op,path:k.path,value:k.value}}}),IY=le((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),g5=le((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),DY=le((e,n)=>{n.exports=r;function r(a){Error.call(this),this.name=this.constructor.name,this.message=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,this.constructor)}r.prototype=Object.create(Error.prototype),r.prototype.constructor=r}),OY=le(e=>{var n=m5(),r=AY(),a=kce(),u=Tce(),c=CY(),f=IY(),p=g5(),v=DY(),y=n.find,k=n.parseArrayIndex;e.test={apply:M,inverse:T,commute:E},e.add={apply:A,inverse:R,commute:N},e.remove={apply:Y,inverse:ye,commute:ke},e.replace={apply:j,inverse:G,commute:J},e.move={apply:ce,inverse:Ce,commute:Ge},e.copy={apply:oe,inverse:Ae,commute:N};function M(Te,Se,Ne){var pt=y(Te,Se.path,Ne.findContext,Se.context),ae=pt.target,de,Ke;if(Array.isArray(ae)?(de=k(pt.key),Ke=ae[de]):Ke=pt.key===void 0?pt.target:pt.target[pt.key],!a(Ke,Se.value))throw new f("test failed "+JSON.stringify(Se));return Te}function T(Te,Se){return Te.push(Se),1}function E(Te,Se){if(Te.path===Se.path&&Se.op==="remove")throw new TypeError("Can't commute test,remove -> remove,test for same path");return Se.op==="test"||Se.op==="replace"?[Se,Te]:u(Te,Se)}function A(Te,Se,Ne){var pt=y(Te,Se.path,Ne.findContext,Se.context);if(W(pt))throw new p("path does not exist "+Se.path);if(Se.value===void 0)throw new p("missing value");var ae=r(Se.value);return pt.key===void 0?ae:(C(pt,ae),Te)}function C(Te,Se){var Ne=Te.target;if(Array.isArray(Ne))if(Te.key==="-")Ne.push(Se);else{if(Te.key>Ne.length)throw new p("target of add outside of array bounds");Ne.splice(Te.key,0,Se)}else if(kt(Ne))Ne[Te.key]=Se;else throw new p("target of add must be an object or array "+Te.key)}function R(Te,Se){var Ne=Se.context;return Ne!==void 0&&(Ne={before:Ne.before,after:c.cons(Se.value,Ne.after)}),Te.push({op:"test",path:Se.path,value:Se.value,context:Ne}),Te.push({op:"remove",path:Se.path,context:Ne}),1}function N(Te,Se){if(Te.path===Se.path&&Se.op==="remove")throw new TypeError("Can't commute add,remove -> remove,add for same path");return u(Te,Se)}function j(Te,Se,Ne){var pt=y(Te,Se.path,Ne.findContext,Se.context);if(W(pt)||Le(pt))throw new p("path does not exist "+Se.path);if(Se.value===void 0)throw new p("missing value");var ae=r(Se.value);if(pt.key===void 0)return ae;var de=pt.target;return Array.isArray(de)?de[k(pt.key)]=ae:de[pt.key]=ae,Te}function G(Te,Se,Ne,pt){var ae=pt[Ne-1];if(ae===void 0||ae.op!=="test"||ae.path!==Se.path)throw new v("cannot invert replace w/o test");var de=ae.context;return de!==void 0&&(de={before:de.before,after:c.cons(ae.value,c.tail(de.after))}),Te.push({op:"test",path:ae.path,value:Se.value}),Te.push({op:"replace",path:ae.path,value:ae.value}),2}function J(Te,Se){if(Te.path===Se.path&&Se.op==="remove")throw new TypeError("Can't commute replace,remove -> remove,replace for same path");return Se.op==="test"||Se.op==="replace"?[Se,Te]:u(Te,Se)}function Y(Te,Se,Ne){var pt=y(Te,Se.path,Ne.findContext,Se.context);if(W(pt)||pt.target[pt.key]===void 0)throw new p("path does not exist "+Se.path);return re(pt),Te}function re(Te){var Se=Te.target,Ne;if(Array.isArray(Se))return Ne=Se.splice(k(Te.key),1),Ne[0];if(kt(Se))return Ne=Se[Te.key],delete Se[Te.key],Ne;throw new p("target of remove must be an object or array")}function ye(Te,Se,Ne,pt){var ae=pt[Ne-1];if(ae===void 0||ae.op!=="test"||ae.path!==Se.path)throw new v("cannot invert remove w/o test");var de=ae.context;return de!==void 0&&(de={before:de.before,after:c.tail(de.after)}),Te.push({op:"add",path:ae.path,value:ae.value,context:de}),2}function ke(Te,Se){return Te.path===Se.path&&Se.op==="remove"?[Se,Te]:u(Te,Se)}function ce(Te,Se,Ne){if(n.contains(Se.path,Se.from))throw new p("move.from cannot be ancestor of move.path");var pt=y(Te,Se.path,Ne.findContext,Se.context),ae=y(Te,Se.from,Ne.findContext,Se.fromContext);return C(pt,re(ae)),Te}function Ce(Te,Se){return Te.push({op:"move",path:Se.from,context:Se.fromContext,from:Se.path,fromContext:Se.context}),1}function Ge(Te,Se){if(Te.path===Se.path&&Se.op==="remove")throw new TypeError("Can't commute move,remove -> move,replace for same path");return u(Te,Se)}function oe(Te,Se,Ne){var pt=y(Te,Se.path,Ne.findContext,Se.context),ae=y(Te,Se.from,Ne.findContext,Se.fromContext);if(W(ae)||Le(ae))throw new p("copy.from must exist");var de=ae.target,Ke;return Array.isArray(de)?Ke=de[k(ae.key)]:Ke=de[ae.key],C(pt,r(Ke)),Te}function Ae(Te,Se){throw new v("cannot invert "+Se.op)}function W(Te){return Te===void 0||Te.target==null&&Te.key!==void 0}function Le(Te){return Te.key!==void 0&&Te.target[Te.key]===void 0}function kt(Te){return Te!==null&&typeof Te=="object"}}),Mce=le(e=>{var n=OY(),r=AY(),a=g5();e.apply=c,e.applyInPlace=f,e.clone=r,e.isValidObject=v,e.defaultHash=p;var u={};function c(k,M,T){return f(k,r(M),T)}function f(k,M,T){if(T||(T=u),!Array.isArray(k))return M;for(var E,A,C=0;C<k.length;++C){if(A=k[C],E=n[A.op],E===void 0)throw new a("invalid op "+JSON.stringify(A));M=E.apply(M,A,T)}return M}function p(k){return v(k)||y(k)?JSON.stringify(k):k}function v(k){return k!==null&&Object.prototype.toString.call(k)==="[object Object]"}function y(k){return Object.prototype.toString.call(k)==="[object Array]"}}),Pce=le((e,n)=>{var r=OY();n.exports=function(u){var c=[],f,p;for(f=u.length-1;f>=0;f-=p)p=a(c,u[f],f,u);return c};function a(u,c,f,p){var v=r[c.op];return v!==void 0&&typeof v.inverse=="function"?v.inverse(u,c,f,p):1}}),Cce=le(e=>{var n=Sce(),r=CY(),a=Mce(),u=Pce(),c=m5(),f=c.encodeSegment;e.diff=y,e.patch=a.apply,e.patchInPlace=a.applyInPlace,e.inverse=u,e.clone=a.clone,e.InvalidPatchOperationError=g5(),e.TestFailedError=IY(),e.PatchNotInvertibleError=DY();var p=a.isValidObject,v=a.defaultHash;function y(G,J,Y){return M(G,J,"",k(Y,[])).patch}function k(G,J){return typeof G=="object"?{patch:J,hash:R(j,G.hash,v),makeContext:R(j,G.makeContext,N),invertible:G.invertible!==!1}:{patch:J,hash:R(j,G,v),makeContext:N,invertible:!0}}function M(G,J,Y,re){return Array.isArray(G)&&Array.isArray(J)?E(G,J,Y,re):p(G)&&p(J)?T(G,J,Y,re):C(G,J,Y,re)}function T(G,J,Y,re){var ye=Object.keys(J),ke=re.patch,ce,Ce;for(ce=ye.length-1;ce>=0;--ce){Ce=ye[ce];var Ge=Y+"/"+f(Ce);G[Ce]!==void 0?M(G[Ce],J[Ce],Ge,re):ke.push({op:"add",path:Ge,value:J[Ce]})}for(ye=Object.keys(G),ce=ye.length-1;ce>=0;--ce)if(Ce=ye[ce],J[Ce]===void 0){var oe=Y+"/"+f(Ce);re.invertible&&ke.push({op:"test",path:oe,value:G[Ce]}),ke.push({op:"remove",path:oe})}return re}function E(G,J,Y,re){var ye=r.map(re.hash,G),ke=r.map(re.hash,J),ce=n.compare(ye,ke);return A(G,J,Y,re,ce)}function A(G,J,Y,re,ye){var ke=0;return n.reduce(function(ce,Ce,Ge,oe){var Ae,W,Le=ce.patch,kt=Y+"/"+(oe+ke);return Ce===n.REMOVE?(Ae=Le[Le.length-1],W=ce.makeContext(oe,G),ce.invertible&&Le.push({op:"test",path:kt,value:G[oe],context:W}),Ae!==void 0&&Ae.op==="add"&&Ae.path===kt?(Ae.op="replace",Ae.context=W):Le.push({op:"remove",path:kt,context:W}),ke-=1):Ce===n.ADD?(Le.push({op:"add",path:kt,value:J[Ge],context:ce.makeContext(oe,G)}),ke+=1):M(G[oe],J[Ge],kt,ce),ce},re,ye)}function C(G,J,Y,re){return G!==J&&(re.invertible&&re.patch.push({op:"test",path:Y,value:G}),re.patch.push({op:"replace",path:Y,value:J})),re}function R(G,J,Y){return G(J)?J:Y}function N(){}function j(G){return typeof G=="function"}}),fh=le((e,n)=>{function r(a,u){for(var c=0,f=u.length-1;c<f;c++){if(!a[u[c]])return null;a=a[u[c]]}return a}n.exports=r}),dd=le((e,n)=>{function r(u){return u==="~0"?"~":"/"}function a(u){var c=u.split("/");if(u.indexOf("~")===-1)return c;for(var f=0,p=c.length;f<p;f++)c[f].indexOf("~")!==-1&&(c[f]=c[f].replace(/~[01]/g,r));return c}n.exports=a}),Ace=le((e,n)=>{var r=fh(),a=dd();function u(c,f){var p=a(f),v=p[p.length-1],y=r(c,p);return y?y[v]:void 0}n.exports=u}),$2=le((e,n)=>{function r(a,u){if(a===u)return!0;if(!(a&&u)||typeof a!="object"||typeof u!="object"||a.length!==u.length)return!1;if(Array.isArray(a)){if(!Array.isArray(u))return!1;for(var c=0,f=a.length;c<f;c++)if(!r(a[c],u[c]))return!1;return!0}var p=Object.keys(a);if(p.length!==Object.keys(u).length)return!1;for(var v=0,y=p.length;v<y;v++){var k=p[v];if(!r(a[k],u[k]))return!1}return!0}n.exports=r}),Z2=le((e,n)=>{function r(a,u){if(u==="-")return a.length;for(var c=0,f=u.length;c<f;c++){var p=u.charCodeAt(c);if(57<p||p<48)return 1/0}return+u}n.exports=r}),Y2=le((e,n)=>{var r=$2(),a=fh(),u=Z2(),c=dd();function f(p,v,y,k){if(typeof y=="undefined")return"[op:add] require value, but got undefined";var M=c(v),T=M[M.length-1],E=a(p,M);if(E===null)return"[op:add] path not found: "+v;if(Array.isArray(E)){var A=u(E,T);if(E.length<A)return"[op:add] invalid array index: "+v;k(p,M).splice(A,0,y)}else r(E[T],y)||(k(p,M)[T]=y)}n.exports=f}),RY=le((e,n)=>{var r=fh(),a=Z2(),u=dd();function c(f,p,v){var y=u(p),k=y[y.length-1],M=r(f,y);if(M===null)return"[op:remove] path not found: "+p;if(Array.isArray(M)){var T=a(M,k);if(M.length<=T)return"[op:remove] invalid array index: "+p;v(f,y).splice(T,1)}else delete v(f,y)[k]}n.exports=c}),LY=le((e,n)=>{var r=$2(),a=fh(),u=Z2(),c=dd();function f(p,v,y,k){if(typeof y=="undefined")return"[op:replace] require value, but got undefined";var M=c(v),T=M[M.length-1],E=a(p,M);if(E===null)return"[op:replace] path not found: "+v;if(Array.isArray(E)){var A=u(E,T);if(E.length<=A)return"[op:replace] invalid array index: "+v;r(E[A],y)||k(p,M).splice(A,1,y)}else r(E[T],y)||(k(p,M)[T]=y)}n.exports=f}),zY=le((e,n)=>{var r=Y2(),a=fh(),u=Z2(),c=dd();function f(p,v,y,k){if(y!==v){var M=c(v),T=M[M.length-1],E=a(p,M);if(E===null)return"[op:move] path not found: "+v;var A=void 0;if(Array.isArray(E)){var C=u(E,T);if(E.length<=C)return"[op:move] invalid array index: "+y;A=E[C],k(p,M).splice(C,1)}else A=E[T],delete k(p,M)[T];return r(p,y,A,k)}}n.exports=f}),NY=le((e,n)=>{var r=fh(),a=dd(),u=Y2();function c(f,p,v,y){var k=a(p),M=k[k.length-1],T=r(f,k);return T===null?"[op:copy] path not found: "+p:u(f,v,T[M],y)}n.exports=c}),FY=le((e,n)=>{var r=$2(),a=fh(),u=dd();function c(f,p,v){var y=u(p),k=y[y.length-1],M=a(f,y);if(M===null)return"[op:test] path not found: "+p;if(!r(M[k],v)){var T=JSON.stringify(M[k]),E=JSON.stringify(v);return"[op:test] not matched: "+T+" "+E}}n.exports=c}),v5=le((e,n)=>{function r(a){if(!a||typeof a!="object")return a;if(Array.isArray(a)){for(var u=a.length,c=new Array(u),f=0;f<u;f++)c[f]=a[f];return c}for(var p=Object.keys(a),v={},y=0,k=p.length;y<k;y++){var M=p[y];v[M]=a[M]}return v}n.exports=r}),Ice=le((e,n)=>{var r=Ace(),a=Y2(),u=RY(),c=LY(),f=zY(),p=NY(),v=FY(),y=$2(),k=v5(),M=dd();function T(E,A){return{get:function(C){return r(E,C)},add:function(C,R){return a(E,C,R,A)},remove:function(C){return u(E,C,A)},replace:function(C,R){return c(E,C,R,A)},move:function(C,R){return f(E,C,R,A)},copy:function(C,R){return p(E,C,R,A)},test:function(C,R){return v(E,C,R)},deepEqual:y,shallowCopy:k,toKeys:M}}n.exports=T}),Dce=le((e,n)=>{function r(a,u,c,f){return f.error=c,f.partial?u[""]:a}n.exports=r}),Oce=le((e,n)=>{function r(a){return!!a}n.exports=r}),Rce=le((e,n)=>{function r(a){if(a)throw new TypeError(a)}n.exports=r}),Lce=le((e,n)=>{var r=v5();function a(u,c){for(var f=0,p=c.length-1;f<p;f++)u=u[c[f]]=r(u[c[f]]);return u}n.exports=a}),zce=le((e,n)=>{var r=v5();function a(c,f,p){var v=c[f];return p.has(v)||(v=r(v),p.add(v)),v}function u(c,f,p){for(var v=0,y=f.length-1;v<y;v++)c=c[f[v]]=a(c,f[v],p);return c}n.exports=u}),Nce=le((e,n)=>{var r=Ice(),a=Dce(),u=Oce(),c=Rce(),f=Lce(),p=zce(),v=Y2(),y=RY(),k=LY(),M=zY(),T=NY(),E=FY(),A=Set||function(){var R=[];return R.has=function(N){return this.indexOf(N)!==-1},R.add=function(N){this.push(N)},R};function C(R,N,j){if(N.length===0)return R;j=j||{};for(var G=j.strict?c:u,J=N.length===1?f:function(Ce){return function(Ge,oe){return p(Ge,oe,Ce)}}(new A),Y={"":R},re,ye=0,ke=N.length;ye<ke;ye++){var ce=N[ye];switch(ce.op){case"add":if(G(v(Y,""+ce.path,ce.value,J)))return a(R,Y,ce,j);break;case"remove":if(G(y(Y,""+ce.path,J)))return a(R,Y,ce,j);break;case"replace":if(G(k(Y,""+ce.path,ce.value,J)))return a(R,Y,ce,j);break;case"move":if(G(M(Y,""+ce.from,""+ce.path,J)))return a(R,Y,ce,j);break;case"copy":if(G(T(Y,""+ce.from,""+ce.path,J)))return a(R,Y,ce,j);break;case"test":if(G(E(Y,""+ce.path,ce.value)))return a(R,Y,ce,j);break;default:if(j.custom&&j.custom[ce.op]){if(re=re||r(Y,J),G(j.custom[ce.op](re,ce,ye,N)))return a(R,Y,ce,j)}else return G("[op:"+ce.op+"] unknown"),a(R,Y,ce,j);break}}return Y[""]}n.exports=C}),Fce=le((e,n)=>{n.exports=Nce()}),Bce=le((e,n)=>{(function(r,a){typeof e=="object"&&typeof n=="object"?n.exports=a():typeof e=="object"?e.blobCompare=a():r.blobCompare=a()})(window,function(){return function(r){var a={};function u(c){if(a[c])return a[c].exports;var f=a[c]={i:c,l:!1,exports:{}};return r[c].call(f.exports,f,f.exports,u),f.l=!0,f.exports}return u.m=r,u.c=a,u.d=function(c,f,p){u.o(c,f)||Object.defineProperty(c,f,{enumerable:!0,get:p})},u.r=function(c){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},u.t=function(c,f){if(1&f&&(c=u(c)),8&f||4&f&&typeof c=="object"&&c&&c.__esModule)return c;var p=Object.create(null);if(u.r(p),Object.defineProperty(p,"default",{enumerable:!0,value:c}),2&f&&typeof c!="string")for(var v in c)u.d(p,v,function(y){return c[y]}.bind(null,v));return p},u.n=function(c){var f=c&&c.__esModule?function(){return c.default}:function(){return c};return u.d(f,"a",f),f},u.o=function(c,f){return Object.prototype.hasOwnProperty.call(c,f)},u.p="",u(u.s=4)}([function(r,a,u){var c=function(k,M){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return function(T,E){var A=[],C=!0,R=!1,N=void 0;try{for(var j,G=T[Symbol.iterator]();!(C=(j=G.next()).done)&&(A.push(j.value),!E||A.length!==E);C=!0);}catch(J){R=!0,N=J}finally{try{!C&&G.return&&G.return()}finally{if(R)throw N}}return A}(k,M);throw new TypeError("Invalid attempt to destructure non-iterable instance")},f=function(){function k(M,T){for(var E=0;E<T.length;E++){var A=T[E];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(M,A.key,A)}}return function(M,T,E){return T&&k(M.prototype,T),E&&k(M,E),M}}();function p(k){if(Array.isArray(k)){for(var M=0,T=Array(k.length);M<k.length;M++)T[M]=k[M];return T}return Array.from(k)}var v=u(2),y=function(k){function M(T){(function(A,C){if(!(A instanceof C))throw new TypeError("Cannot call a class as a function")})(this,M);var E=function(A,C){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!C||typeof C!="object"&&typeof C!="function"?A:C}(this,(M.__proto__||Object.getPrototypeOf(M)).call(this));return E._messageId=1,E._messages=new Map,E._worker=T,E._worker.onmessage=E._onMessage.bind(E),E._id=Math.ceil(1e7*Math.random()),E}return function(T,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);T.prototype=Object.create(E&&E.prototype,{constructor:{value:T,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(T,E):T.__proto__=E)}(M,k),f(M,[{key:"terminate",value:function(){this._worker.terminate()}},{key:"isFree",value:function(){return this._messages.size===0}},{key:"jobsLength",value:function(){return this._messages.size}},{key:"exec",value:function(T){var E=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null,A=this,C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],R=arguments[3];return new Promise(function(N,j){var G=A._messageId++;A._messages.set(G,[N,j,R]),A._worker.postMessage([G,E,T],C||[])})}},{key:"postMessage",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:null,E=this,A=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],C=arguments[2];return new Promise(function(R,N){var j=E._messageId++;E._messages.set(j,[R,N,C]),E._worker.postMessage([j,T],A||[])})}},{key:"emit",value:function(T){for(var E=arguments.length,A=Array(E>1?E-1:0),C=1;C<E;C++)A[C-1]=arguments[C];this._worker.postMessage({eventName:T,args:A})}},{key:"_onMessage",value:function(T){var E;if(!Array.isArray(T.data)&&T.data.eventName)return(E=function j(G,J,Y){G===null&&(G=Function.prototype);var re=Object.getOwnPropertyDescriptor(G,J);if(re===void 0){var ye=Object.getPrototypeOf(G);return ye===null?void 0:j(ye,J,Y)}if("value"in re)return re.value;var ke=re.get;return ke!==void 0?ke.call(Y):void 0}(M.prototype.__proto__||Object.getPrototypeOf(M.prototype),"emit",this)).call.apply(E,[this,T.data.eventName].concat(p(T.data.args)));var A,C=(A=T.data,Array.isArray(A)?A:Array.from(A)),R=C[0],N=C.slice(1);if(R===1)this._onEvent.apply(this,p(N));else{if(R!==0)throw new Error("Wrong message type '"+R+"'");this._onResult.apply(this,p(N))}}},{key:"_onResult",value:function(T,E,A){var C=this._messages.get(T),R=c(C,2),N=R[0],j=R[1];return this._messages.delete(T),E===1?N(A):j(A)}},{key:"_onEvent",value:function(T,E,A){var C=this._messages.get(T),R=c(C,3)[2];R&&R(E,A)}}]),M}(v);r.exports=y},function(r,a,u){r.exports=function(){return u(3)(`!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=2)}([function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=function e(t,r,n){null===t&&(t=Function.prototype);var o=Object.getOwnPropertyDescriptor(t,r);if(void 0===o){var i=Object.getPrototypeOf(t);return null===i?void 0:e(i,r,n)}if("value"in o)return o.value;var a=o.get;return void 0!==a?a.call(n):void 0},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function a(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var f=r(1),c=0,l=1,s=0,y=1,p="main",b=function(e){return"object"===(void 0===e?"undefined":i(e))&&"function"==typeof e.then&&"function"==typeof e.catch};var v=function e(t,r){u(this,e),this.payload=t,this.transferable=r};e.exports=function(e){var t,r,i,h=(i=e,(r=p)in(t={})?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t),d=self.postMessage.bind(self),m=new(function(e){function t(){return u(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"emit",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return d({eventName:e,args:r}),this}},{key:"emitLocally",value:function(e){for(var r,n=arguments.length,i=Array(n>1?n-1:0),a=1;a<n;a++)i[a-1]=arguments[a];(r=o(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"emit",this)).call.apply(r,[this,e].concat(i))}},{key:"operation",value:function(e,t){return h[e]=t,this}}]),t}(f)),g=function(e,t,r){var n=function(t){t&&t instanceof v?w(e,y,t.payload,t.transferable):w(e,y,t)},o=function(t){w(e,s,{message:t.message,stack:t.stack})};try{var i=_(e,t,r);b(i)?i.then(n).catch(o):n(i)}catch(e){o(e)}},_=function(e,t,r){var n=h[r||p];if(!n)throw new Error("Not found handler for this request");return n(t,O.bind(null,e))},w=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];d([c,e,t,r],n)},O=function(e,t,r){if(!t)throw new Error("eventName is required");if("string"!=typeof t)throw new Error("eventName should be string");d([l,e,t,r])};return self.addEventListener("message",(function(e){var t=e.data;Array.isArray(t)?g.apply(void 0,a(t)):t&&t.eventName&&m.emitLocally.apply(m,[t.eventName].concat(a(t.args)))})),m},e.exports.TransferableResponse=v},function(e,t,r){"use strict";var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return n(e,[{key:"emit",value:function(e){if(!this.__listeners[e])return this;for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=!0,i=!1,a=void 0;try{for(var u,f=this.__listeners[e][Symbol.iterator]();!(o=(u=f.next()).done);o=!0){var c=u.value;c.apply(void 0,r)}}catch(e){i=!0,a=e}finally{try{!o&&f.return&&f.return()}finally{if(i)throw a}}return this}},{key:"once",value:function(e,t){var r=this,n=function n(){r.off(e,n),t.apply(void 0,arguments)};return this.on(e,n)}},{key:"on",value:function(e,t){return this.__listeners[e]||(this.__listeners[e]=[]),this.__listeners[e].push(t),this}},{key:"off",value:function(e,t){return this.__listeners[e]=t?this.__listeners[e].filter((function(e){return e!==t})):[],this}}]),e}();e.exports=o},function(e,t,r){"use strict";r.r(t);var n=r(0);r.n(n)()().operation("binary",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsBinaryString(a)})}(e,t)).operation("buffer",async({blob:e,chunk:t})=>await function(e,t){return new Promise((r,n)=>{const o=new FileReader,i=t?Math.min(t,e.size):e.size,a=e.slice(0,i);o.onload=()=>r(o.result),o.onerror=n,o.readAsArrayBuffer(a)})}(e,t)).operation("compare",({buf1:e,buf2:t})=>(function(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;const r=new DataView(e),n=new DataView(t);for(var o=e.byteLength;o--;)if(r.getUint8(o)!==n.getUint8(o))return!1;return!0})(e,t))}]);`,null)}},function(r,a,u){var c=function(){function p(v,y){for(var k=0;k<y.length;k++){var M=y[k];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(v,M.key,M)}}return function(v,y,k){return y&&p(v.prototype,y),k&&p(v,k),v}}(),f=function(){function p(){(function(v,y){if(!(v instanceof y))throw new TypeError("Cannot call a class as a function")})(this,p),Object.defineProperty(this,"__listeners",{value:{},enumerable:!1,writable:!1})}return c(p,[{key:"emit",value:function(v){if(!this.__listeners[v])return this;for(var y=arguments.length,k=Array(y>1?y-1:0),M=1;M<y;M++)k[M-1]=arguments[M];var T=!0,E=!1,A=void 0;try{for(var C,R=this.__listeners[v][Symbol.iterator]();!(T=(C=R.next()).done);T=!0){var N=C.value;N.apply(void 0,k)}}catch(j){E=!0,A=j}finally{try{!T&&R.return&&R.return()}finally{if(E)throw A}}return this}},{key:"once",value:function(v,y){var k=this,M=function T(){k.off(v,T),y.apply(void 0,arguments)};return this.on(v,M)}},{key:"on",value:function(v,y){return this.__listeners[v]||(this.__listeners[v]=[]),this.__listeners[v].push(y),this}},{key:"off",value:function(v,y){return this.__listeners[v]=y?this.__listeners[v].filter(function(k){return k!==y}):[],this}}]),p}();r.exports=f},function(r,a,u){var c=window.URL||window.webkitURL;r.exports=function(f,p){try{try{var v;try{(v=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(f),v=v.getBlob()}catch{v=new Blob([f])}return new Worker(c.createObjectURL(v))}catch{return new Worker("data:application/javascript,"+encodeURIComponent(f))}}catch{if(!p)throw Error("Inline worker is not supported");return new Worker(p)}}},function(r,a,u){u.r(a);var c=u(0),f=u.n(c),p=u(1),v=u.n(p);u.d(a,"workersEnabled",function(){return y}),u.d(a,"default",function(){return k});let y=!!window.Worker;class k{static toBinaryStringWithWorker(T,E){return Je(this,null,function*(){let A=new f.a(new v.a),C=yield A.exec("binary",{blob:T,chunk:E});return A.terminate(),C})}static toBinaryStringWithoutWorker(T,E){return function(A,C){return new Promise((R,N)=>{let j=new FileReader,G=C?Math.min(C,A.size):A.size,J=A.slice(0,G);j.onload=()=>R(j.result),j.onerror=N,j.readAsBinaryString(J)})}(T,E)}static toBinaryString(T,E,A=!0){return A&&y?this.toBinaryStringWithWorker(T,E):this.toBinaryStringWithoutWorker(T,E)}static toArrayBufferWithWorker(T,E){return Je(this,null,function*(){let A=new f.a(new v.a),C=yield A.exec("buffer",{blob:T,chunk:E});return A.terminate(),C})}static toArrayBufferWithoutWorker(T,E){return function(A,C){return new Promise((R,N)=>{let j=new FileReader,G=C?Math.min(C,A.size):A.size,J=A.slice(0,G);j.onload=()=>R(j.result),j.onerror=N,j.readAsArrayBuffer(J)})}(T,E)}static toArrayBuffer(T,E,A=!0){return A&&y?this.toArrayBufferWithWorker(T,E):this.toArrayBufferWithoutWorker(T,E)}static compareBuffersWithWorker(T,E){return Je(this,null,function*(){if(T===E)return!0;let A=new f.a(new v.a),C=yield A.exec("compare",{buf1:T,buf2:E},[T,E]);return A.terminate(),C})}static compareBuffersWithoutWorker(T,E){return function(A,C){if(A===C)return!0;if(A.byteLength!==C.byteLength)return!1;let R=new DataView(A),N=new DataView(C);for(var j=A.byteLength;j--;)if(R.getUint8(j)!==N.getUint8(j))return!1;return!0}(T,E)}static compareBuffers(T,E,A=!0){return A&&y?this.compareBuffersWithWorker(T,E):this.compareBuffersWithoutWorker(T,E)}static sizeEqual(T,E){return T.size===E.size}static typeEqual(T,E){return T.type===E.type}static magicNumbersEqual(T,E,A=!0){return Je(this,null,function*(){if(T===E)return!0;let C=[24,16,14,12,8,6,4],[R,N]=yield Promise.all([this.toBinaryString(T,24,A),this.toBinaryString(E,24,A)]);for(let j of C)if(R.substring(0,j)===N.substring(0,j))return!0;return!1})}static bytesEqualWithBinaryString(T,E,A,C=!0){return Je(this,null,function*(){if(T===E)return!0;let[R,N]=yield Promise.all([this.toBinaryString(T,A,C),this.toBinaryString(E,A,C)]);return R===N})}static bytesEqualWithArrayBuffer(T,E,A,C=!0){return Je(this,null,function*(){if(T===E)return!0;let[R,N]=yield Promise.all([this.toArrayBuffer(T,A,C),this.toArrayBuffer(E,A,C)]);return this.compareBuffers(R,N,C)})}static isEqual(T,E){return Je(this,arguments,function*(A,C,{methods:R=["size","type","magic","byte"],byte:N="buffer",partial:j=!1,chunks:G=null,worker:J=!0}={}){let Y=null;for(let re of R){if(Y===!1||j&&Y===!0)break;switch(re){case"byte":case"bytes":case"content":G=G instanceof Array?G:[A.size],Y=!0;for(let ye of G){let ke=!1;ke=N==="buffer"?yield this.bytesEqualWithArrayBuffer(A,C,ye,J):yield this.bytesEqualWithBinaryString(A,C,ye,J),ke||(Y=!1)}break;case"magic":case"headers":case"numbers":case"mime":Y=yield this.magicNumbersEqual(A,C,J);break;case"size":case"sizes":Y=this.sizeEqual(A,C);break;case"type":case"types":Y=this.typeEqual(A,C);break;default:throw new Error("Blob-compare : Unknown comparison method")}}return Y})}}}])})}),BY={};Ee(BY,{ToolbarDropdownSelect:()=>rfe,default:()=>ofe}),w.exports=me(BY),He(),Lt();var jY=St;On();var jce=0,Uce=class{constructor(e){this._studio=e,Pe(this,"_id"),Pe(this,"_state",{type:"Ready"}),this._id=String(jce++)}get status(){return this._state.type}reset(){let{_state:e}=this;if(e.type!=="Ready")if(e.type==="Captured")this._state={type:"Ready"},e.transaction.discard(),e.flagsTransaction.discard();else throw e.type==="Committed"?new Error("This scrub is already committed and can't be reset."):new Error("This scrub is already discarded and can't be reset.")}commit(){let{_state:e}=this;if(e.type==="Captured")e.transaction.commit(),e.flagsTransaction.discard(),this._state={type:"Committed"};else if(e.type==="Ready"){console.warn("Scrub is empty. Nothing to commit.");return}else throw e.type==="Committed"?new Error("This scrub is already committed."):new Error("This scrub is already discarded and can't be comitted.")}capture(e){if(this._state.type==="Captured"&&this.reset(),this._state.type==="Ready"){let n=!0;try{this._state=O({type:"Captured"},this._capture(e)),n=!1}finally{n&&(console.error("This scrub's callback threw an error. We're undo-ing all of the changes made by this scrub, and marking it as discarded."),this._state={type:"Discarded"})}}else throw this._state.type==="Committed"?new Error("This scrub is already committed and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.commit()"):new Error("This scrub is already discarded and cannot capture again. If you wish to capture more, you can start a new studio.scrub() or do so before scrub.discard()")}_capture(e){let n=[],r=this._studio.tempTransaction(u=>{let c=!0,f={set:(p,v)=>{if(!c)throw new Error("You seem to have called the scrub api after scrub.capture()");let{root:y,path:k}=(0,jY.getPointerParts)(p);if(!mt(y))throw new Error("We can only scrub props of Sheet Objects for now");u.set(p,v),n.push(p)}};try{e(f)}finally{c=!1}}),a=this._studio.tempTransaction(({stateEditors:u})=>{n.forEach(c=>{let{root:f,path:p}=(0,jY.getPointerParts)(c);if(!mt(f))return;let v=f.template.getDefaultsAtPointer(c);yt(v,(y,k)=>{u.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey.propsBeingScrubbed.flag(q(O({},f.address),{pathToProp:k}))},p)})});return{transaction:r,flagsTransaction:a}}discard(){let{_state:e}=this;if(e.type==="Captured"||e.type==="Ready")e.type==="Captured"&&(e.transaction.discard(),e.flagsTransaction.discard()),this._state={type:"Discarded"};else throw e.type==="Committed"?new Error("This scrub is already committed and can't be discarded."):new Error("This scrub is already discarded")}},Vce=St,UY=typeof window!="undefined"?Promise.resolve().then(()=>(wce(),kY)).then(e=>e.default):null,Hce=class{constructor(e){this.studio=e,Pe(this,"_rendered",!1),Pe(this,"_nonSSRBits",UY?UY.then(n=>new n):Promise.reject()),Pe(this,"ready",this._nonSSRBits.then(()=>{},()=>{}))}render(){this._rendered||(this._rendered=!0,this._nonSSRBits.then(e=>{e.render()}).catch(e=>{throw console.error(e),e}))}hide(){this.studio.transaction(({drafts:e})=>{e.ahistoric.visibilityState="everythingIsHidden"})}restore(){this.render(),this.studio.transaction(({drafts:e})=>{e.ahistoric.visibilityState="everythingIsVisible"})}get isHidden(){return(0,Vce.val)(this.studio.atomP.ahistoric.visibilityState)==="everythingIsHidden"}renderToolset(e,n){let r=!1,a=null;return this._nonSSRBits.then(u=>{r||(a=u.renderToolset(e,n))}).catch(u=>{console.error(u)}),()=>{if(a){a();return}r||(r=!0)}}},J2=St;function Gce(e){return e}var Wce=(e,n=Gce)=>{let r=a=>({type:e,payload:n(a)});return r.type=e,r.is=a=>a&&a.type&&a.type===e,r},Ml=Wce,VY=te(Cce()),HY=te(Fce());vf();var Q2,qce=new Uint8Array(16);function Kce(){if(!Q2&&(Q2=typeof crypto!="undefined"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto!="undefined"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!Q2))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Q2(qce)}var Xce=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function $ce(e){return typeof e=="string"&&Xce.test(e)}var Zce=$ce,Ki=[];for(eT=0;eT<256;++eT)Ki.push((eT+256).toString(16).substr(1));var eT;function Yce(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(Ki[e[n+0]]+Ki[e[n+1]]+Ki[e[n+2]]+Ki[e[n+3]]+"-"+Ki[e[n+4]]+Ki[e[n+5]]+"-"+Ki[e[n+6]]+Ki[e[n+7]]+"-"+Ki[e[n+8]]+Ki[e[n+9]]+"-"+Ki[e[n+10]]+Ki[e[n+11]]+Ki[e[n+12]]+Ki[e[n+13]]+Ki[e[n+14]]+Ki[e[n+15]]).toLowerCase();if(!Zce(r))throw TypeError("Stringified UUID is invalid");return r}var Jce=Yce;function Qce(e,n,r){e=e||{};var a=e.random||(e.rng||Kce)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,n){r=r||0;for(var u=0;u<16;++u)n[r+u]=a[u];return n}return Jce(a)}var ede=Qce,l_={replaceHistory:Ml("@history/replaceHistory"),startHistoryFromScratch:Ml("@history/startHistoryFromScratch"),undo:Ml("@history/undo"),redo:Ml("@history/redo")},tde={type:"@history/unknownAction",payload:""},nde={maxNumberOfCommits:100},rde=(e,n=nde)=>{let r=y5(e(void 0,tde));return function(a,u){return l_.startHistoryFromScratch.is(u)?y5(e(void 0,u.payload)):l_.replaceHistory.is(u)?u.payload:l_.undo.is(u)?a?ade(a):r:l_.redo.is(u)?a?sde(a):r:a?ide(a,e(a.innerState,u),n):y5(e(void 0,u))}};function y5(e){return{currentCommitHash:void 0,commitsByHash:{},listOfCommitHashes:[],innerState:e}}function ide(e,n,r){if(n===e.innerState)return e;let a=ode(e.innerState,n);if(a.forwardDiff.length===0)return e;let u=Jl(e.listOfCommitHashes),c={currentCommitHash:a.hash,commitsByHash:O({},e.commitsByHash),listOfCommitHashes:[...e.listOfCommitHashes],innerState:n};if(e.currentCommitHash!==u){let f=e.listOfCommitHashes.findIndex(p=>p===e.currentCommitHash);e.listOfCommitHashes.slice(f+1).forEach(p=>{delete c.commitsByHash[p]}),c.listOfCommitHashes.splice(f+1,c.listOfCommitHashes.length)}if(c.listOfCommitHashes.push(a.hash),c.commitsByHash[a.hash]=a,c.listOfCommitHashes.length>r.maxNumberOfCommits){let f=c.listOfCommitHashes.length-r.maxNumberOfCommits;c.listOfCommitHashes.slice(0,f).forEach(p=>{delete c.commitsByHash[p]}),c.listOfCommitHashes.splice(0,f)}return c}function ode(e,n){let r=VY.default.diff(e,n,{invertible:!1}),a=VY.default.diff(n,e,{invertible:!1}),u=Date.now(),c=ede();return{forwardDiff:r,backwardDiff:a,timestamp:u,hash:c}}function ade(e){if(e.currentCommitHash===void 0)return e;let n=e.listOfCommitHashes.findIndex(f=>f===e.currentCommitHash);if(n===-1)throw new Error("This should never happen");let r=e.commitsByHash[e.currentCommitHash],a=(0,HY.default)(e.innerState,r.backwardDiff),u=n-1,c=u===-1?void 0:e.listOfCommitHashes[u];return q(O({},e),{currentCommitHash:c,innerState:a})}function sde(e){if(e.listOfCommitHashes.length===0)return e;let n=e.listOfCommitHashes.findIndex(f=>f===e.currentCommitHash);if(n===e.listOfCommitHashes.length-1)return e;let r=n+1,a=e.listOfCommitHashes[r],u=e.commitsByHash[a],c=(0,HY.default)(e.innerState,u.forwardDiff);return q(O({},e),{currentCommitHash:a,innerState:c})}R2();var tT={ahistoric:{visibilityState:"everythingIsVisible",theTrigger:{position:{closestCorner:"bottomLeft",distanceFromHorizontalEdge:.02,distanceFromVerticalEdge:.02}},coreByProject:{},projects:{stateByProjectId:{}}},historic:{projects:{stateByProjectId:{}},autoKey:!0,coreByProject:{},panelInstanceDesceriptors:{}},ephemeral:{initialised:!1,coreByProject:{},projects:{stateByProjectId:{}},extensions:{byId:{},paneClasses:{}},showOutline:!1}},GY=Ml("@storeBundle/replacePersistentState",e=>e),WY=Ml("@storeBundle/reduceParts",e=>e),_g={historic:l_,replacePersistentState:GY,reduceParts:WY},qY=Ml("@storeBundle/setInnerHistoricState",e=>e),lde=(e=tT.historic,n)=>qY.is(n)?n.payload:e,b5=rde(lde),KY=(e,n)=>{if(GY.is(n)){let{historic:r,ahistoric:a}=n.payload,u=(e==null?void 0:e.ephemeral)||tT.ephemeral;return{$persistent:{historic:r,ahistoric:a},ephemeral:u}}else if(e){let{historic:r,ahistoric:a}=e.$persistent,{ephemeral:u}=e;if(WY.is(n)){let c={historic:e.$persistent.historic.innerState,ahistoric:e.$persistent.ahistoric,ephemeral:e.ephemeral},f=n.payload(c);if(f===c)return e;r.innerState!==f.historic&&(r=b5(r,qY(f.historic))),a=f.ahistoric,u=f.ephemeral}else{let c=b5(r,n);if(c===r)return e;r=c}return{$persistent:r===e.$persistent.historic&&a===e.$persistent.ahistoric?e.$persistent:{historic:r,ahistoric:a},ephemeral:u}}else{let r=b5(void 0,{}),a=tT.ahistoric,u=tT.ephemeral;return{$persistent:{historic:r,ahistoric:a},ephemeral:u}}},XY=Ml("@history/pushTempAction",e=>e),$Y=Ml("@history/discardTempAction",e=>e),ZY=Ml("@history/commitTempAction",e=>e),ude=0,cde=()=>{let e=ude++;return{push:n=>XY({id:e,originalAction:n}),discard:()=>$Y(e),commit:()=>ZY(e)}},dde=(e,n)=>{if(e){let{tempActions:r,permanent:a}=e.$temps,u;if(XY.is(n))r=[...r,n];else if(ZY.is(n)){let f=r.find(p=>p.payload.id===n.payload);f?(u=f.payload.originalAction,r=r.filter(p=>p.payload.id!==n.payload)):O2.error("Comitting temp action group ".concat(n.payload," isn't possible as this group doesn't exist"))}else $Y.is(n)?r=r.filter(f=>f.payload.id!==n.payload):u=n;u&&(a=KY(e.$temps.permanent,u));let c={historic:a.$persistent.historic.innerState,ahistoric:a.$persistent.ahistoric,ephemeral:a.ephemeral};for(let f of r)c=f.payload.originalAction.payload(c);return O({$temps:{tempActions:r,permanent:a},$persistent:a.$persistent},c)}else{let r=KY(void 0,n);return{$temps:{permanent:r,tempActions:[]},$persistent:r.$persistent,historic:r.$persistent.historic.innerState,ahistoric:r.$persistent.ahistoric,ephemeral:r.ephemeral}}};ml(),ml(),gu();function YY(e,n){if(typeof e!="object"||e===null)return;if(n.length===0){for(let f of Object.keys(e))delete e[f];return}let r=n.slice(0,n.length-1),a=e,u=new WeakMap;for(let f of r){let p=a,v=p[f];if(typeof v!="object"||v===null)return;u.set(v,p),a=v}let c=n.slice().reverse();for(let f of c){if(delete a[f],Object.keys(a).length>0)return;a=u.get(a)}}function fde(e,{scale:n,origin:r,translate:a}){let u=r+(e-r)*n;return a+u}function ks(e){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];throw Error("[Immer] minified error nr: "+e+(r.length?" "+r.map(function(u){return"'"+u+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function xg(e){return!!e&&!!e[ua]}function hh(e){return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var a=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return a===Object||typeof a=="function"&&Function.toString.call(a)===bde}(e)||Array.isArray(e)||!!e[sJ]||!!e.constructor[sJ]||x5(e)||w5(e))}function u_(e,n,r){r===void 0&&(r=!1),wg(e)===0?(r?Object.keys:R5)(e).forEach(function(a){r&&typeof a=="symbol"||n(a,e[a],e)}):e.forEach(function(a,u){return n(u,a,e)})}function wg(e){var n=e[ua];return n?n.i>3?n.i-4:n.i:Array.isArray(e)?1:x5(e)?2:w5(e)?3:0}function _5(e,n){return wg(e)===2?e.has(n):Object.prototype.hasOwnProperty.call(e,n)}function hde(e,n){return wg(e)===2?e.get(n):e[n]}function JY(e,n,r){var a=wg(e);a===2?e.set(n,r):a===3?(e.delete(n),e.add(r)):e[n]=r}function pde(e,n){return e===n?e!==0||1/e==1/n:e!=e&&n!=n}function x5(e){return vde&&e instanceof Map}function w5(e){return yde&&e instanceof Set}function ph(e){return e.o||e.t}function S5(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var n=_de(e);delete n[ua];for(var r=R5(n),a=0;a<r.length;a++){var u=r[a],c=n[u];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(n[u]={configurable:!0,writable:!0,enumerable:c.enumerable,value:e[u]})}return Object.create(Object.getPrototypeOf(e),n)}function E5(e,n){return n===void 0&&(n=!1),k5(e)||xg(e)||!hh(e)||(wg(e)>1&&(e.set=e.add=e.clear=e.delete=mde),Object.freeze(e),n&&u_(e,function(r,a){return E5(a,!0)},!0)),e}function mde(){ks(2)}function k5(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function Mu(e){var n=xde[e];return n||ks(18,e),n}function QY(){return c_}function T5(e,n){n&&(Mu("Patches"),e.u=[],e.s=[],e.v=n)}function nT(e){M5(e),e.p.forEach(gde),e.p=null}function M5(e){e===c_&&(c_=e.l)}function eJ(e){return c_={p:[],l:c_,h:e,m:!0,_:0}}function gde(e){var n=e[ua];n.i===0||n.i===1?n.j():n.O=!0}function P5(e,n){n._=n.p.length;var r=n.p[0],a=e!==void 0&&e!==r;return n.h.g||Mu("ES5").S(n,e,a),a?(r[ua].P&&(nT(n),ks(4)),hh(e)&&(e=rT(n,e),n.l||iT(n,e)),n.u&&Mu("Patches").M(r[ua],e,n.u,n.s)):e=rT(n,r,[]),nT(n),n.u&&n.v(n.u,n.s),e!==aJ?e:void 0}function rT(e,n,r){if(k5(n))return n;var a=n[ua];if(!a)return u_(n,function(c,f){return tJ(e,a,n,c,f,r)},!0),n;if(a.A!==e)return n;if(!a.P)return iT(e,a.t,!0),a.t;if(!a.I){a.I=!0,a.A._--;var u=a.i===4||a.i===5?a.o=S5(a.k):a.o;u_(a.i===3?new Set(u):u,function(c,f){return tJ(e,a,u,c,f,r)}),iT(e,u,!1),r&&e.u&&Mu("Patches").R(a,r,e.u,e.s)}return a.o}function tJ(e,n,r,a,u,c){if(xg(u)){var f=rT(e,u,c&&n&&n.i!==3&&!_5(n.D,a)?c.concat(a):void 0);if(JY(r,a,f),!xg(f))return;e.m=!1}if(hh(u)&&!k5(u)){if(!e.h.F&&e._<1)return;rT(e,u),n&&n.A.l||iT(e,u)}}function iT(e,n,r){r===void 0&&(r=!1),e.h.F&&e.m&&E5(n,r)}function C5(e,n){var r=e[ua];return(r?ph(r):e)[n]}function nJ(e,n){if(n in e)for(var r=Object.getPrototypeOf(e);r;){var a=Object.getOwnPropertyDescriptor(r,n);if(a)return a;r=Object.getPrototypeOf(r)}}function A5(e){e.P||(e.P=!0,e.l&&A5(e.l))}function I5(e){e.o||(e.o=S5(e.t))}function D5(e,n,r){var a=x5(n)?Mu("MapSet").N(n,r):w5(n)?Mu("MapSet").T(n,r):e.g?function(u,c){var f=Array.isArray(u),p={i:f?1:0,A:c?c.A:QY(),P:!1,I:!1,D:{},l:c,t:u,k:null,o:null,j:null,C:!1},v=p,y=aT;f&&(v=[p],y=sT);var k=Proxy.revocable(v,y),M=k.revoke,T=k.proxy;return p.k=T,p.j=M,T}(n,r):Mu("ES5").J(n,r);return(r?r.A:QY()).p.push(a),a}function oT(e){return xg(e)||ks(22,e),function n(r){if(!hh(r))return r;var a,u=r[ua],c=wg(r);if(u){if(!u.P&&(u.i<4||!Mu("ES5").K(u)))return u.t;u.I=!0,a=rJ(r,c),u.I=!1}else a=rJ(r,c);return u_(a,function(f,p){u&&hde(u.t,f)===p||JY(a,f,n(p))}),c===3?new Set(a):a}(e)}function rJ(e,n){switch(n){case 2:return new Map(e);case 3:return Array.from(e)}return S5(e)}var iJ,c_,O5=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",vde=typeof Map!="undefined",yde=typeof Set!="undefined",oJ=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",aJ=O5?Symbol.for("immer-nothing"):((iJ={})["immer-nothing"]=!0,iJ),sJ=O5?Symbol.for("immer-draftable"):"__$immer_draftable",ua=O5?Symbol.for("immer-state"):"__$immer_state",bde=""+Object.prototype.constructor,R5=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,_de=Object.getOwnPropertyDescriptors||function(e){var n={};return R5(e).forEach(function(r){n[r]=Object.getOwnPropertyDescriptor(e,r)}),n},xde={},aT={get:function(e,n){if(n===ua)return e;var r=ph(e);if(!_5(r,n))return function(u,c,f){var p,v=nJ(c,f);return v?"value"in v?v.value:(p=v.get)===null||p===void 0?void 0:p.call(u.k):void 0}(e,r,n);var a=r[n];return e.I||!hh(a)?a:a===C5(e.t,n)?(I5(e),e.o[n]=D5(e.A.h,a,e)):a},has:function(e,n){return n in ph(e)},ownKeys:function(e){return Reflect.ownKeys(ph(e))},set:function(e,n,r){var a=nJ(ph(e),n);if(a!=null&&a.set)return a.set.call(e.k,r),!0;if(!e.P){var u=C5(ph(e),n),c=u==null?void 0:u[ua];if(c&&c.t===r)return e.o[n]=r,e.D[n]=!1,!0;if(pde(r,u)&&(r!==void 0||_5(e.t,n)))return!0;I5(e),A5(e)}return e.o[n]===r&&typeof r!="number"&&(r!==void 0||n in e.o)||(e.o[n]=r,e.D[n]=!0,!0)},deleteProperty:function(e,n){return C5(e.t,n)!==void 0||n in e.t?(e.D[n]=!1,I5(e),A5(e)):delete e.D[n],e.o&&delete e.o[n],!0},getOwnPropertyDescriptor:function(e,n){var r=ph(e),a=Reflect.getOwnPropertyDescriptor(r,n);return a&&{writable:!0,configurable:e.i!==1||n!=="length",enumerable:a.enumerable,value:r[n]}},defineProperty:function(){ks(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){ks(12)}},sT={};u_(aT,function(e,n){sT[e]=function(){return arguments[0]=arguments[0][0],n.apply(this,arguments)}}),sT.deleteProperty=function(e,n){return aT.deleteProperty.call(this,e[0],n)},sT.set=function(e,n,r){return aT.set.call(this,e[0],n,r,e[0])};var wde=function(){function e(r){var a=this;this.g=oJ,this.F=!0,this.produce=function(u,c,f){if(typeof u=="function"&&typeof c!="function"){var p=c;c=u;var v=a;return function(E){var A=this;E===void 0&&(E=p);for(var C=arguments.length,R=Array(C>1?C-1:0),N=1;N<C;N++)R[N-1]=arguments[N];return v.produce(E,function(j){var G;return(G=c).call.apply(G,[A,j].concat(R))})}}var y;if(typeof c!="function"&&ks(6),f!==void 0&&typeof f!="function"&&ks(7),hh(u)){var k=eJ(a),M=D5(a,u,void 0),T=!0;try{y=c(M),T=!1}finally{T?nT(k):M5(k)}return typeof Promise!="undefined"&&y instanceof Promise?y.then(function(E){return T5(k,f),P5(E,k)},function(E){throw nT(k),E}):(T5(k,f),P5(y,k))}if(!u||typeof u!="object")return(y=c(u))===aJ?void 0:(y===void 0&&(y=u),a.F&&E5(y,!0),y);ks(21,u)},this.produceWithPatches=function(u,c){return typeof u=="function"?function(v){for(var y=arguments.length,k=Array(y>1?y-1:0),M=1;M<y;M++)k[M-1]=arguments[M];return a.produceWithPatches(v,function(T){return u.apply(void 0,[T].concat(k))})}:[a.produce(u,c,function(v,y){f=v,p=y}),f,p];var f,p},typeof(r==null?void 0:r.useProxies)=="boolean"&&this.setUseProxies(r.useProxies),typeof(r==null?void 0:r.autoFreeze)=="boolean"&&this.setAutoFreeze(r.autoFreeze)}var n=e.prototype;return n.createDraft=function(r){hh(r)||ks(8),xg(r)&&(r=oT(r));var a=eJ(this),u=D5(this,r,void 0);return u[ua].C=!0,M5(a),u},n.finishDraft=function(r,a){var u=r&&r[ua],c=u.A;return T5(c,a),P5(void 0,c)},n.setAutoFreeze=function(r){this.F=r},n.setUseProxies=function(r){r&&!oJ&&ks(20),this.g=r},n.applyPatches=function(r,a){var u;for(u=a.length-1;u>=0;u--){var c=a[u];if(c.path.length===0&&c.op==="replace"){r=c.value;break}}var f=Mu("Patches").$;return xg(r)?f(r,a):this.produce(r,function(p){return f(p,a.slice(u+1))})},e}(),ca=new wde;ca.produce,ca.produceWithPatches.bind(ca),ca.setAutoFreeze.bind(ca),ca.setUseProxies.bind(ca),ca.applyPatches.bind(ca);var L5=ca.createDraft.bind(ca),z5=ca.finishDraft.bind(ca);yf(),_3(),fm(),vy(),HS(),I2(),Xr(),On();var Ts={create(e){let n={byId:{},allIds:{}};if(e)for(let[r,a]of e)n.byId[r]=a,n.allIds[r]=!0;return n},shallowCopy(e){return{byId:O({},e==null?void 0:e.byId),allIds:O({},e==null?void 0:e.allIds)}},add(e,n,r){return{byId:q(O({},e==null?void 0:e.byId),{[n]:r}),allIds:q(O({},e==null?void 0:e.allIds),{[n]:!0})}},merge(e){let n=Ts.create();for(let r=0;r<e.length;r++)n.byId=O(O({},n.byId),e[r].byId),n.allIds=O(O({},n.allIds),e[r].allIds);return n},remove(e,n){let r=Ts.shallowCopy(e);return delete r.allIds[n],delete r.byId[n],r},filter(e,n){let r=Ts.shallowCopy(e);for(let[a,u]of Object.entries(r.byId))n(u)||(delete r.allIds[a],delete r.byId[a]);return r}},lJ=e=>(N5=e,F5),N5,Xi=()=>{if(N5===void 0)throw new Error("Calling stateEditors outside of a transaction is not allowed.");return N5},F5;(e=>{(n=>{(r=>{(a=>{function u(c){let f=Xi().historic;f.panelPositions!=null||(f.panelPositions={}),f.panelPositions[c.panelId]=c.position}a.setPanelPosition=u})(r.panelPositions||(r.panelPositions={})),(a=>{function u(){var c;return(c=Xi().historic).panels!=null||(c.panels={}),Xi().historic.panels}a._ensure=u,(c=>{function f(){let p=e.studio.historic.panels._ensure();return p.outlinePanel!=null||(p.outlinePanel={}),p.outlinePanel}c._ensure=f,(p=>{function v(k){let M=[];for(let T of vo(k))Ot(T)?M.push(O({type:"Project"},T.address)):Yt(T)?(M.push(O({type:"Sheet"},T.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(T.address)):Qt(T)?M.push(O({type:"Sheet"},T.address)):mt(T)?(M.push(O({type:"SheetObject"},T.template.address)),e.studio.historic.projects.stateByProjectId.stateBySheetId.setSelectedInstanceId(T.sheet.address)):Dn(T)&&M.push(O({type:"SheetObject"},T.address));c._ensure().selection=M}p.set=v;function y(){c._ensure().selection=[]}p.unset=y})(c.selection||(c.selection={}))})(a.outline||(a.outline={})),(c=>{function f(){let p=e.studio.historic.panels._ensure();return p.sequenceEditor!=null||(p.sequenceEditor={}),p.sequenceEditor}c._ensure=f,(p=>{function v(){let k=c._ensure();return k.graphEditor!=null||(k.graphEditor={height:.5,isOpen:!1}),k.graphEditor}function y(k){v().isOpen=k.isOpen}p.setIsOpen=y})(c.graphEditor||(c.graphEditor={}))})(a.sequenceEditor||(a.sequenceEditor={}))})(r.panels||(r.panels={})),(a=>{(u=>{function c(f){let p=Xi().historic;return p.projects.stateByProjectId[f.projectId]||(p.projects.stateByProjectId[f.projectId]={stateBySheetId:{}}),p.projects.stateByProjectId[f.projectId]}u._ensure=c,(f=>{function p(y){let k=e.studio.historic.projects.stateByProjectId._ensure(y);return k.stateBySheetId[y.sheetId]||(k.stateBySheetId[y.sheetId]={selectedInstanceId:void 0,sequenceEditor:{selectedPropsByObject:{}}}),k.stateBySheetId[y.sheetId]}f._ensure=p;function v(y){e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(y).selectedInstanceId=y.sheetInstanceId}f.setSelectedInstanceId=v,(y=>{function k(R){let{selectedPropsByObject:N}=f._ensure(R).sequenceEditor;N[R.objectKey]||(N[R.objectKey]={});let j=N[R.objectKey],G=pl(R.pathToProp),J=new Set(Object.keys(Jb));for(let[re,ye]of Object.entries(oT(N)))for(let[ke,ce]of Object.entries(ye))J.delete(ce);let Y=J.size>0?J.values().next().value:Object.keys(Jb)[0];j[G]=Y}y.addPropToGraphEditor=k;function M(R){let{selectedPropsByObject:N}=f._ensure(R).sequenceEditor;if(!N[R.objectKey])return;let j=N[R.objectKey],G=pl(R.pathToProp);j[G]&&YY(N,[R.objectKey,G])}y.removePropFromGraphEditor=M;function T(R){let N=e.studio.historic.projects.stateByProjectId.stateBySheetId._ensure(R).sequenceEditor;return N.markerSet||(N.markerSet=Ts.create()),N.markerSet}function E(R){let N=T(R.sheetAddress),j=R.markers.filter(re=>!!isFinite(re.position)).map(re=>q(O({},re),{position:R.snappingFunction(re.position)})),G=Cc(j,"id"),J=Ts.filter(N,re=>re&&!G[re.id]),Y=Cc(Object.values(J.byId),"position");j.forEach(({position:re})=>{let ye=Y[re];ye&&(J=Ts.remove(J,ye.id))}),Object.assign(N,Ts.merge([J,Ts.create(j.map(re=>[re.id,re]))]))}y.replaceMarkers=E;function A(R){let N=T(R.sheetAddress);Object.assign(N,Ts.remove(N,R.markerId))}y.removeMarker=A;function C(R){let N=T(R.sheetAddress).byId[R.markerId];N!==void 0&&(N.label=R.label)}y.updateMarker=C})(f.sequenceEditor||(f.sequenceEditor={}))})(u.stateBySheetId||(u.stateBySheetId={}))})(a.stateByProjectId||(a.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.historic||(n.historic={})),(r=>{function a(u){Xi().ephemeral.showOutline=u}r.setShowOutline=a,(u=>{(c=>{function f(p){let v=Xi().ephemeral;return v.projects.stateByProjectId[p.projectId]||(v.projects.stateByProjectId[p.projectId]={stateBySheetId:{}}),v.projects.stateByProjectId[p.projectId]}c._ensure=f,(p=>{function v(y){let k=e.studio.ephemeral.projects.stateByProjectId._ensure(y);return k.stateBySheetId[y.sheetId]||(k.stateBySheetId[y.sheetId]={stateByObjectKey:{}}),k.stateBySheetId[y.sheetId]}p._ensure=v,(y=>{function k(M){var T;let E=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId._ensure(M).stateByObjectKey;return E[T=M.objectKey]!=null||(E[T]={}),E[M.objectKey]}y._ensure=k,(M=>{function T(A){let C=e.studio.ephemeral.projects.stateByProjectId.stateBySheetId.stateByObjectKey._ensure(A);return C.valuesBeingScrubbed!=null||(C.valuesBeingScrubbed={}),C.valuesBeingScrubbed}M._ensure=T;function E(A){el(T(A),A.pathToProp,!0)}M.flag=E})(y.propsBeingScrubbed||(y.propsBeingScrubbed={}))})(p.stateByObjectKey||(p.stateByObjectKey={}))})(c.stateBySheetId||(c.stateBySheetId={}))})(u.stateByProjectId||(u.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.ephemeral||(n.ephemeral={})),(r=>{function a(v){Xi().ahistoric.pinOutline=v}r.setPinOutline=a;function u(v){Xi().ahistoric.pinDetails=v}r.setPinDetails=u;function c(v){Xi().ahistoric.pinNotifications=v}r.setPinNotifications=c;function f(v){Xi().ahistoric.visibilityState=v}r.setVisibilityState=f;function p(v){let y=Gk(v.map(T=>T.pathToProp)),k=v.map(({keyframe:T,pathToProp:E})=>({keyframe:T,pathToProp:E.slice(y.length)})),M=Xi();M.ahistoric.clipboard?M.ahistoric.clipboard.keyframesWithRelativePaths=k:M.ahistoric.clipboard={keyframesWithRelativePaths:k}}r.setClipboardKeyframes=p,(v=>{(y=>{function k(M){let T=Xi().ahistoric;return T.projects.stateByProjectId[M.projectId]||(T.projects.stateByProjectId[M.projectId]={stateBySheetId:{}}),T.projects.stateByProjectId[M.projectId]}y._ensure=k,(M=>{function T(A){let C=e.studio.ahistoric.projects.stateByProjectId._ensure(A);return C.collapsedItemsInOutline||(C.collapsedItemsInOutline={}),C.collapsedItemsInOutline}M._ensure=T;function E(A){let C=e.studio.ahistoric.projects.stateByProjectId.collapsedItemsInOutline._ensure(A);A.isCollapsed?C[A.itemKey]=!0:delete C[A.itemKey]}M.set=E})(y.collapsedItemsInOutline||(y.collapsedItemsInOutline={})),(M=>{function T(E){let A=e.studio.ahistoric.projects.stateByProjectId._ensure(E);return A.stateBySheetId[E.sheetId]||(A.stateBySheetId[E.sheetId]={}),A.stateBySheetId[E.sheetId]}M._ensure=T,(E=>{function A(C){let R=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId._ensure(C);return R.sequence||(R.sequence={}),R.sequence}E._ensure=A,(C=>{function R(j){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(j).focusRange={range:j.range,enabled:j.enabled}}C.set=R;function N(j){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(j).focusRange=void 0}C.unset=N})(E.focusRange||(E.focusRange={})),(C=>{function R(N){e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(N).clippedSpaceRange=O({},N.range)}C.set=R})(E.clippedSpaceRange||(E.clippedSpaceRange={})),(C=>{function R(j){let G=e.studio.ahistoric.projects.stateByProjectId.stateBySheetId.sequence._ensure(j),J=G.collapsableItems;return J||(J=G.collapsableItems=Ts.create()),J}function N(j){let G=R(j);Object.assign(G,Ts.add(G,j.studioSheetItemKey,{isCollapsed:j.isCollapsed}))}C.set=N})(E.sequenceEditorCollapsableItems||(E.sequenceEditorCollapsableItems={}))})(M.sequence||(M.sequence={}))})(y.stateBySheetId||(y.stateBySheetId={}))})(v.stateByProjectId||(v.stateByProjectId={}))})(r.projects||(r.projects={}))})(n.ahistoric||(n.ahistoric={}))})(e.studio||(e.studio={})),(n=>{(r=>{(a=>{function u(c){let f=Xi().historic.coreByProject[c.projectId].revisionHistory,p=50;f.unshift(c.revision),f.length>p&&(f.length=p)}a.add=u})(r.revisionHistory||(r.revisionHistory={})),(a=>{function u(p){let v=Xi().historic.coreByProject[p.projectId].sheetsById;return v[p.sheetId]||(v[p.sheetId]={staticOverrides:{byObject:{}}}),v[p.sheetId]}a._ensure=u;function c(p){let v=Xi().historic.coreByProject[p.projectId].sheetsById[p.sheetId];if(!v)return;delete v.staticOverrides.byObject[p.objectKey];let y=v.sequence;y&&delete y.tracksByObject[p.objectKey]}a.forgetObject=c;function f(p){Xi().historic.coreByProject[p.projectId].sheetsById[p.sheetId]&&delete Xi().historic.coreByProject[p.projectId].sheetsById[p.sheetId]}a.forgetSheet=f,(p=>{function v(ce){let Ce=e.coreByProject.historic.sheetsById._ensure(ce);return Ce.sequence!=null||(Ce.sequence={subUnitsPerUnit:30,length:10,type:"PositionalSequence",tracksByObject:{}}),Ce.sequence}p._ensure=v;function y(ce){v(ce).length=Tr(parseFloat(ce.length.toFixed(2)),.01,1/0)}p.setLength=y;function k(ce){v(ce).subUnitsPerUnit=Tr(ce.subUnitsPerUnit,1,ie(2,12))}p.setSubUnitsPerUnit=k;function M(ce){var Ce;let Ge=e.coreByProject.historic.sheetsById.sequence._ensure(ce).tracksByObject;return Ge[Ce=ce.objectKey]!=null||(Ge[Ce]={trackData:{},trackIdByPropPath:{}}),Ge[ce.objectKey]}function T(ce,Ce){let Ge=M(ce),oe=pl(ce.pathToProp);if(typeof Ge.trackIdByPropPath[oe]=="string")return;let Ae=Mae(),W={type:"BasicKeyframedTrack",__debugName:"".concat(ce.objectKey,":").concat(oe),keyframes:[]};Ge.trackData[Ae]=W,Ge.trackIdByPropPath[oe]=Ae}p.setPrimitivePropAsSequenced=T;function E(ce){let Ce=M(ce),Ge=pl(ce.pathToProp),oe=Ce.trackIdByPropPath[Ge];typeof oe=="string"&&(delete Ce.trackIdByPropPath[Ge],delete Ce.trackData[oe],e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(ce))}p.setPrimitivePropAsStatic=E;function A(ce){let Ce=M(ce);for(let Ge of Object.keys(Ce.trackIdByPropPath)){let oe=JSON.parse(Ge);if(ce.pathToProp.every((Ae,W)=>oe[W]===Ae)){let Ae=Ce.trackIdByPropPath[Ge];if(typeof Ae!="string")continue;delete Ce.trackIdByPropPath[Ge],delete Ce.trackData[Ae]}}e.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfCompoundProp(ce)}p.setCompoundPropAsStatic=A;function C(ce){return M(ce).trackData[ce.trackId]}function R(ce){let Ce=C(ce);if(Ce)return Ce.keyframes.find(Ge=>Ge.id===ce.keyframeId)}function N(ce){let Ce=ce.snappingFunction(ce.position),Ge=C(ce);if(!Ge)return;let{keyframes:oe}=Ge,Ae=oe.findIndex(kt=>kt.position===Ce);if(Ae!==-1){let kt=oe[Ae];kt.value=ce.value;return}let W=PS(oe,kt=>kt.position<Ce);if(W===-1){oe.unshift({id:u8(),position:Ce,connectedRight:!0,handles:ce.handles||[.5,1,.5,0],type:ce.type||"bezier",value:ce.value});return}let Le=oe[W];oe.splice(W+1,0,{id:u8(),position:Ce,connectedRight:Le.connectedRight,handles:ce.handles||[.5,1,.5,0],type:ce.type||"bezier",value:ce.value})}p.setKeyframeAtPosition=N;function j(ce){let Ce=C(ce);if(!Ce)return;let{keyframes:Ge}=Ce,oe=Ge.findIndex(Ae=>Ae.position===ce.position);oe!==-1&&Ge.splice(oe,1)}p.unsetKeyframeAtPosition=j;function G(ce){let Ce=C(ce);if(!Ce)return;let Ge=oT(Ce.keyframes).filter(oe=>ce.keyframeIds.includes(oe.id)).map(oe=>{let Ae=oe.position,W=ce.snappingFunction(fde(Ae,ce));return q(O({},oe),{position:W})});ke(q(O({},ce),{keyframes:Ge}))}p.transformKeyframes=G;function J(ce){let Ce=C(ce);Ce&&(Ce.keyframes=Ce.keyframes.map((Ge,oe)=>{let Ae=Ce.keyframes[oe-1],W=ce.keyframeIds.includes(Ge.id),Le=ce.keyframeIds.includes(Ae==null?void 0:Ae.id);return W&&!Le?q(O({},Ge),{handles:[Ge.handles[0],Ge.handles[1],ce.handles[0],ce.handles[1]]}):W&&Le?q(O({},Ge),{handles:[ce.handles[2],ce.handles[3],ce.handles[0],ce.handles[1]]}):Le?q(O({},Ge),{handles:[ce.handles[2],ce.handles[3],Ge.handles[2],Ge.handles[3]]}):Ge}))}p.setTweenBetweenKeyframes=J;function Y(ce){var Ce,Ge,oe,Ae,W,Le,kt,Te;let Se=R(ce);Se&&(Se.handles=[(Ge=(Ce=ce.end)==null?void 0:Ce[0])!=null?Ge:Se.handles[0],(Ae=(oe=ce.end)==null?void 0:oe[1])!=null?Ae:Se.handles[1],(Le=(W=ce.start)==null?void 0:W[0])!=null?Le:Se.handles[2],(Te=(kt=ce.start)==null?void 0:kt[1])!=null?Te:Se.handles[3]])}p.setHandlesForKeyframe=Y;function re(ce){let Ce=C(ce);Ce&&(Ce.keyframes=Ce.keyframes.filter(Ge=>ce.keyframeIds.indexOf(Ge.id)===-1))}p.deleteKeyframes=re;function ye(ce){let Ce=R(ce);Ce&&(Ce.type=ce.keyframeType)}p.setKeyframeType=ye;function ke(ce){let Ce=C(ce);if(!Ce)return;let Ge=oT(Ce.keyframes),oe=ce.keyframes.filter(Te=>!(typeof Te.value=="number"&&!isFinite(Te.value)||!Te.handles.every(Se=>isFinite(Se)))).map(Te=>q(O({},Te),{position:ce.snappingFunction(Te.position)})),Ae=Cc(oe,"id"),W=Ge.filter(Te=>!Ae[Te.id]),Le=Cc(W,"position");oe.forEach(({position:Te})=>{let Se=Le[Te];Se&&jS(W,Se)});let kt=yy([...W,...oe],"position");Ce.keyframes=kt}p.replaceKeyframes=ke})(a.sequence||(a.sequence={})),(p=>{(v=>{function y(E){var A;let C=e.coreByProject.historic.sheetsById._ensure(E).staticOverrides.byObject;return C[A=E.objectKey]!=null||(C[A]={}),C[E.objectKey]}function k(E){let A=y(E);el(A,E.pathToProp,E.value)}v.setValueOfCompoundProp=k;function M(E){let A=y(E);el(A,E.pathToProp,E.value)}v.setValueOfPrimitiveProp=M;function T(E){let A=e.coreByProject.historic.sheetsById._ensure(E).staticOverrides.byObject[E.objectKey];A&&YY(A,E.pathToProp)}v.unsetValueOfPrimitiveProp=T})(p.byObject||(p.byObject={}))})(a.staticOverrides||(a.staticOverrides={}))})(r.sheetsById||(r.sheetsById={}))})(n.historic||(n.historic={}))})(e.coreByProject||(e.coreByProject={}))})(F5||(F5={}));function B5(){let e,n,r=new Promise((u,c)=>{e=f=>{u(f),a.status="resolved"},n=f=>{c(f),a.status="rejected"}}),a={resolve:e,reject:n,promise:r,status:"pending"};return a}var Sde=St;function Ede(e){let n=e.getState(),r=new Sde.Atom(n);return e.subscribe(()=>{let a=e.getState();r.set(a),n=a}),r}Kx();function kde(e){var n,r=e.Symbol;return typeof r=="function"?r.observable?n=r.observable:(n=r("observable"),r.observable=n):n="@@observable",n}var d_;typeof self!="undefined"?d_=self:typeof window!="undefined"?d_=window:typeof qr!="undefined"?d_=qr:d_=w;var Tde=kde(d_),uJ=Tde,cJ={INIT:"@@redux/INIT"};function dJ(e,n,r){var a;if(typeof n=="function"&&typeof r=="undefined"&&(r=n,n=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error("Expected the enhancer to be a function.");return r(dJ)(e,n)}if(typeof e!="function")throw new Error("Expected the reducer to be a function.");var u=e,c=n,f=[],p=f,v=!1;function y(){p===f&&(p=f.slice())}function k(){return c}function M(C){if(typeof C!="function")throw new Error("Expected listener to be a function.");var R=!0;return y(),p.push(C),function(){if(R){R=!1,y();var N=p.indexOf(C);p.splice(N,1)}}}function T(C){if(!Js(C))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(typeof C.type=="undefined")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(v)throw new Error("Reducers may not dispatch actions.");try{v=!0,c=u(c,C)}finally{v=!1}for(var R=f=p,N=0;N<R.length;N++){var j=R[N];j()}return C}function E(C){if(typeof C!="function")throw new Error("Expected the nextReducer to be a function.");u=C,T({type:cJ.INIT})}function A(){var C,R=M;return C={subscribe:function(N){if(typeof N!="object")throw new TypeError("Expected the observer to be an object.");function j(){N.next&&N.next(k())}j();var G=R(j);return{unsubscribe:G}}},C[uJ]=function(){return this},C}return T({type:cJ.INIT}),a={dispatch:T,subscribe:M,getState:k,replaceReducer:E},a[uJ]=A,a}function Mde(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return n.length===0?function(a){return a}:n.length===1?n[0]:n.reduce(function(a,u){return function(){return a(u.apply(void 0,arguments))}})}function Pde(e){let n=Mde();return dJ(e.rootReducer,void 0,n)}R2(),wS();var j5=new WeakMap,Cde=(e,n,r)=>{let a=v=>{e.dispatch(_g.replacePersistentState(v))},u=fJ(r),c=()=>e.getState().$persistent;p();let f=()=>{let v=c(),y=j5.get(e);v!==y&&(j5.set(e,v),localStorage.setItem(u,JSON.stringify(v)))};e.subscribe(lm(f,1e3)),window&&window.addEventListener("beforeunload",f);function p(){let v=localStorage.getItem(u);if(v){let y,k=!0;try{y=JSON.parse(v),k=!1}catch{O2.warn("Could not parse Theatre's persisted state. This must be a bug. Please report it.")}finally{k||a(y),n()}}else n()}},Ade=(e,n)=>{let r=fJ(n),a=e.getState().$persistent;localStorage.removeItem(r),j5.set(e,a)};function fJ(e){return e+".persistent"}bU(),On(),Zl(),hr(),Lt(),hk();var lT=St;Wc(),Xr(),iZ();function U5(e){if(typeof e=="boolean"||typeof e=="string"||typeof e=="number")return e;if(Js(e)){let n={},r=!1;for(let[a,u]of Object.entries(e))U5(u)!==void 0&&(n[a]=u,r=!0);if(r)return n}else return}function hJ(e,n,r){for(let[a,u]of Object.entries(e.props))if(u.type==="compound")hJ(u,[...n,a],r);else{if(u.type==="enum")throw new Error("Not yet implemented");r(u,[...n,a])}}function Ide(e,n,r){return{set:(a,u)=>{e();let c=U5(u);if(typeof c=="undefined")return;let{root:f,path:p}=(0,lT.getPointerParts)(a);if(mt(f)){let v=f.template.getMapOfValidSequenceTracks_forStudio().getValue(),y=lk(f.template.staticConfig,p);if(!y)throw new Error("Object ".concat(f.address.objectKey," does not have a prop at ").concat(JSON.stringify(p)));let k=(M,T,E)=>{if(M==null)return;if(U5(T.deserializeAndSanitize(M))===void 0)throw new Error("Invalid value ".concat(YO(M)," for object.props").concat(E.map(R=>"[".concat(JSON.stringify(R),"]")).join("")," is invalid"));let A=q(O({},f.address),{pathToProp:E}),C=$l(v,E);if(typeof C=="string"){let R=f.sheet.getSequence();R.position=R.closestGridPosition(R.position),n.coreByProject.historic.sheetsById.sequence.setKeyframeAtPosition(q(O({},A),{trackId:C,position:R.position,value:M,snappingFunction:R.closestGridPosition,type:"bezier"}))}else n.coreByProject.historic.sheetsById.staticOverrides.byObject.setValueOfPrimitiveProp(q(O({},A),{value:M}))};if(y.type==="compound"){let M=(0,lT.getPointerParts)(a).path,T=M.length;hJ(y,M,(E,A)=>{let C=A.slice(T),R=Kc(c,C);if(typeof R!="undefined")k(R,E,A);else throw new Error("Property object.props".concat(A.map(N=>"[".concat(JSON.stringify(N),"]")).join("")," is required but not provided"))})}else{if(y.type==="enum")throw new Error("Enums aren't implemented yet");k(c,y,p)}}else if(Jn(f)){let[v]=p;if(v==="subUnitsPerUnit"){if(typeof c!="number"||!is(c)||c<1)throw new Error("Value ".concat(c," is not an integer, which is required for setting sequence prop ").concat(v));n.coreByProject.historic.sheetsById.sequence.setSubUnitsPerUnit(q(O({},f.address),{subUnitsPerUnit:c}))}else if(v==="length"){if(typeof c!="number"||c<=.001)throw new Error("Value ".concat(c," is not a positive number, which is required for setting sequence prop ").concat(v));n.coreByProject.historic.sheetsById.sequence.setLength(q(O({},f.address),{length:c}))}else throw new Error("Setting sequence prop ".concat(v," is not supported"))}else throw new Error("Only setting props of SheetObject-s and sequences is supported in a transaction so far")},unset:a=>{e();let{root:u,path:c}=(0,lT.getPointerParts)(a);if(mt(u)){let f=u.template.getMapOfValidSequenceTracks_forStudio().getValue(),p=Kc(u.template.getDefaultValues().getValue(),c),v=lk(u.template.staticConfig,c),y=(k,M)=>{let T=q(O({},u.address),{pathToProp:M}),E=$l(f,M);typeof E=="string"?n.coreByProject.historic.sheetsById.sequence.unsetKeyframeAtPosition(q(O({},T),{trackId:E,position:u.sheet.getSequence().positionSnappedToGrid})):v!==void 0&&n.coreByProject.historic.sheetsById.staticOverrides.byObject.unsetValueOfPrimitiveProp(T)};v.type==="compound"?yt(p,(k,M)=>{y(k,M)},(0,lT.getPointerParts)(a).path):y(p,c)}else throw new Error("Only setting props of SheetObject-s is supported in a transaction so far")},get drafts(){return e(),r},get stateEditors(){return n}}}var Dde=class{constructor(){Pe(this,"_reduxStore"),Pe(this,"_atom"),Pe(this,"atomP"),this._reduxStore=Pde({rootReducer:dde,devtoolsOptions:{name:"Theatre.js Studio"}}),this._atom=Ede(this._reduxStore),this.atomP=this._atom.pointer}initialize(e){let n=B5();return e.usePersistentStorage===!0?Cde(this._reduxStore,()=>{this.tempTransaction(({drafts:r})=>{r.ephemeral.initialised=!0}).commit(),n.resolve()},e.persistenceKey):(this.tempTransaction(({drafts:r})=>{r.ephemeral.initialised=!0}).commit(),n.resolve()),n.promise}getState(){return this._reduxStore.getState()}__experimental_clearPersistentStorage(e){return Ade(this._reduxStore,e),this.getState()}__dev_startHistoryFromScratch(e){this._reduxStore.dispatch(_g.historic.startHistoryFromScratch(_g.reduceParts(n=>q(O({},n),{historic:e}))))}tempTransaction(e){let n=cde(),r,a=n.push(_g.reduceParts(u=>{let c={historic:L5(u.historic),ahistoric:L5(u.ahistoric),ephemeral:L5(u.ephemeral)},f=!0,p=()=>{if(!f)throw new Error("You seem to have called the transaction api after studio.transaction() has finished running")},v=lJ(c),y=Ide(p,v,c);try{return e(y),f=!1,{historic:z5(c.historic),ahistoric:z5(c.ahistoric),ephemeral:z5(c.ephemeral)}}catch(k){return r=k,u}finally{lJ(void 0)}}));if(this._reduxStore.dispatch(a),r)throw this._reduxStore.dispatch(n.discard()),r;return{commit:()=>{this._reduxStore.dispatch(n.commit())},discard:()=>{this._reduxStore.dispatch(n.discard())}}}undo(){this._reduxStore.dispatch(_g.historic.undo())}redo(){this._reduxStore.dispatch(_g.historic.redo())}createContentOfSaveFile(e){if(!this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e])throw new Error("Project ".concat(e," has not been initialized."));let n=yU();this.tempTransaction(({stateEditors:a})=>{a.coreByProject.historic.revisionHistory.add({projectId:e,revision:n})}).commit();let r=this._reduxStore.getState().$persistent.historic.innerState.coreByProject[e];return O({},r)}},Ode=St,V5=class{constructor(){Pe(this,"_values",{})}get(e,n){if(this.has(e))return this._values[e];{let r=n();return this._values[e]=r,r}}has(e){return this._values.hasOwnProperty(e)}};On(),Uc(),He(),Xr(),KO();var Rde=class{constructor(e){Pe(this,"ui",{hide(){be().ui.hide()},get isHidden(){return be().ui.isHidden},restore(){be().ui.restore()},renderToolset(n,r){return be().ui.renderToolset(n,r)}}),Pe(this,"_cache",new V5),Pe(this,"__experimental",{__experimental_disblePlayPauseKeyboardShortcut(){Bue()},__experimental_enablePlayPauseKeyboardShortcut(){jue()},__experimental_clearPersistentStorage(n){return be().clearPersistentStorage(n)},__experimental_createContentOfSaveFileTyped(n){return be().createContentOfSaveFile(n)}})}initialize(e){return be().initialize(e)}extend(e,n){be().extend(e,n)}transaction(e){return be().transaction(({set:n,unset:r,stateEditors:a})=>e({set:n,unset:r,__experimental_forgetObject:u=>{if(!qt(u))throw new Error("object in transactionApi.__experimental_forgetObject(object) must be the return type of sheet.object(...)");a.coreByProject.historic.sheetsById.forgetObject(u.address)},__experimental_forgetSheet:u=>{if(!wn(u))throw new Error("sheet in transactionApi.__experimental_forgetSheet(sheet) must be the return type of project.sheet()");a.coreByProject.historic.sheetsById.forgetSheet(u.address)}}))}_getSelectionPrism(){return this._cache.get("_getSelectionPrism()",()=>(0,Ode.prism)(()=>jc().filter(e=>e.type==="Theatre_SheetObject"||e.type==="Theatre_Sheet").map(e=>e.publicApi)))}_getSelection(){return this._getSelectionPrism().getValue()}setSelection(e){let n=[...e].filter(r=>qt(r)||wn(r)).map(r=>be().corePrivateAPI(r));be().transaction(({stateEditors:r})=>{r.studio.historic.panels.outline.selection.set(n)})}onSelectionChange(e){let n=be();return this._getSelectionPrism().onChange(n.ticker,e,!0)}get selection(){return this._getSelection()}scrub(){return be().scrub()}getStudioProject(){let e=be().core;if(!e)throw new Error("You're calling studio.getStudioProject() before `@theatre/core` is loaded. To fix this:\n1. Check if `@theatre/core` is import/required in your bundle.\n2. Check the stack trace of this error and make sure the funciton that calls getStudioProject() is run after `@theatre/core` is loaded.");return be().getStudioProject(e)}debouncedScrub(e=1e3){let n,r=lm(()=>{let a=n;a&&(n=void 0,a.commit())},e);return{capture:a=>{n||(n=this.scrub());let u=!0;try{n.capture(a),u=!1}finally{if(u){let c=n;n=void 0,c.discard()}else r()}}}}createPane(e){return be().paneManager.createPane(e)}destroyPane(e){return be().paneManager.destroyPane(e)}createContentOfSaveFile(e){return be().createContentOfSaveFile(e)}};l8();var mh=St,Lde=class{constructor(e){this._studio=e,Pe(this,"_cache",new V5),this._instantiatePanesAsTheyComeIn()}_instantiatePanesAsTheyComeIn(){let e=this._getAllPanes();e.onStale(()=>{e.getValue()})}_getAllPanes(){return this._cache.get("_getAllPanels()",()=>(0,mh.prism)(()=>{if(!(0,mh.val)(this._studio.coreP))return{};let e=(0,mh.val)(this._studio.atomP.historic.panelInstanceDesceriptors),n=(0,mh.val)(this._studio.atomP.ephemeral.extensions.paneClasses),r={};for(let a of Object.values(e)){if(!a)continue;let u=n[a.paneClass];if(!u)continue;let{instanceId:c}=a,{extensionId:f,classDefinition:p}=u,v=mh.prism.memo("instance-".concat(a.instanceId),()=>({extensionId:f,instanceId:c,definition:p}),[p]);r[c]=v}return r}))}get allPanesD(){return this._getAllPanes()}createPane(e){if(!this._studio.core)throw new Error("Can't create a pane because @theatre/core is not yet loaded");let n=(0,mh.val)(this._studio.atomP.ephemeral.extensions.paneClasses[e].extensionId),r=(0,mh.val)(this._studio.atomP.historic.panelInstanceDesceriptors),a;for(let u=1;u<1e3&&(a="".concat(e," #").concat(u),!!r[a]);u++);if(!n)throw new Error('Pane class "'.concat(e,'" is not registered.'));return this._studio.transaction(({drafts:u})=>{u.historic.panelInstanceDesceriptors[a]={instanceId:a,paneClass:e}}),this._getAllPanes().getValue()[a]}destroyPane(e){if(!this._studio.core)throw new Error("Can't do this yet because @theatre/core is not yet loaded");this._studio.transaction(({drafts:n})=>{delete n.historic.panelInstanceDesceriptors[e]})}},uT=St;He();var pJ=30*60*1e3,zde=1e3*60*60;function Nde(){return Je(this,null,function*(){let e=be().atomP.ahistoric.visibilityState;if((0,uT.val)(e)==="everythingIsVisible")return;let n=B5(),r=(0,uT.pointerToPrism)(e).onStale(()=>{(0,uT.val)(e)==="everythingIsVisible"&&(r(),n.resolve(void 0))});return n.promise})}function Fde(){return Je(this,null,function*(){if(!"0.7.2".match(/COMPAT/))for(yield cT(500),yield Nde();;){let e=(0,uT.val)(be().atomP.ahistoric.updateChecker);if(e&&e.result!=="error"){let n=e.lastChecked,r=Date.now(),a=Math.abs(r-n);a<pJ&&(yield cT(pJ-a))}try{let n=yield fetch(new Request("https://updates.theatrejs.com/updates/0.7.2"));if(n.ok){let r=yield n.json();if(!Bde(r))throw new Error("Bad response");be().transaction(({drafts:a})=>{a.ahistoric.updateChecker={lastChecked:Date.now(),result:O({},r)}}),yield cT(1e3)}else throw new Error("HTTP Error ".concat(n.statusText))}catch{yield cT(zde)}}})}var cT=e=>new Promise(n=>setTimeout(n,e));function Bde(e){if(typeof e!="object")return!1;let n=e;return typeof n.hasUpdates!="boolean"?!1:n.hasUpdates===!0&&typeof n.newVersion=="string"&&typeof n.releasePage=="string"||n.hasUpdates===!1}var jde=te(Ic());function Pu(e){return new Promise((n,r)=>{e.oncomplete=e.onsuccess=()=>n(e.result),e.onabort=e.onerror=()=>r(e.error)})}function mJ(e,n){let r=indexedDB.open(e);r.onupgradeneeded=()=>r.result.createObjectStore(n);let a=Pu(r);return(u,c)=>a.then(f=>c(f.transaction(n,u).objectStore(n)))}var H5;function Sg(){return H5||(H5=mJ("keyval-store","keyval")),H5}function Ude(e,n=Sg()){return n("readonly",r=>Pu(r.get(e)))}function Vde(e,n,r=Sg()){return r("readwrite",a=>(a.put(n,e),Pu(a.transaction)))}function Hde(e,n=Sg()){return n("readwrite",r=>(r.delete(e),Pu(r.transaction)))}function G5(e,n){return e.openCursor().onsuccess=function(){this.result&&(n(this.result),this.result.continue())},Pu(e.transaction)}function Gde(e=Sg()){return e("readonly",n=>{if(n.getAllKeys)return Pu(n.getAllKeys());let r=[];return G5(n,a=>r.push(a.key)).then(()=>r)})}function Wde(e=Sg()){return e("readonly",n=>{if(n.getAll)return Pu(n.getAll());let r=[];return G5(n,a=>r.push(a.value)).then(()=>r)})}function qde(e=Sg()){return e("readonly",n=>{if(n.getAll&&n.getAllKeys)return Promise.all([Pu(n.getAllKeys()),Pu(n.getAll())]).then(([a,u])=>a.map((c,f)=>[c,u[f]]));let r=[];return e("readonly",a=>G5(a,u=>r.push([u.key,u.value])).then(()=>r))})}var Kde=e=>{let n=mJ("theatrejs-".concat(e),"default-store");return{set:(r,a)=>Vde(r,a,n),get:r=>Ude(r,n),del:r=>Hde(r,n),keys:()=>Gde(n),entries:()=>qde(n),values:()=>Wde(n)}};HV(),Ob();var gJ="theatre-0.4",Xde=`You seem to have imported '@theatre/studio' but haven't initialized it. You can initialize the studio by:
\`\`\`
import studio from '@theatre/studio'
studio.initialize()
\`\`\`

* If you didn't mean to import '@theatre/studio', this means that your bundler is not tree-shaking it. This is most likely a bundler misconfiguration.

* If you meant to import '@theatre/studio' without showing its UI, you can do that by running:

\`\`\`
import studio from '@theatre/studio'
studio.initialize()
studio.ui.hide()
\`\`\`
`,$de="You seem to have imported '@theatre/studio' but called `studio.initialize()` after some delay.\nTheatre.js projects remain in pending mode (won't play their sequences) until the studio is initialized, so you should place the `studio.initialize()` line right after the import line:\n\n```\nimport studio from '@theatre/studio'\n// ... and other imports\n\nstudio.initialize()\n```\n",Zde=class{constructor(){Pe(this,"ui"),Pe(this,"publicApi"),Pe(this,"address"),Pe(this,"_projectsProxy",new J2.PointerProxy(new J2.Atom({}).pointer)),Pe(this,"projectsP",this._projectsProxy.pointer),Pe(this,"_store",new Dde),Pe(this,"_corePrivateApi"),Pe(this,"_cache",new V5),Pe(this,"paneManager"),Pe(this,"_coreAtom",new J2.Atom({})),Pe(this,"_initializedDeferred",B5()),Pe(this,"_initializeFnCalled",!1),Pe(this,"_didWarnAboutNotInitializing",!1),Pe(this,"_coreBits"),Pe(this,"_rafDriver"),this.address={studioId:_b(10)},this.publicApi=new Rde(this),this.ui=new Hce(this),this._attachToIncomingProjects(),this.paneManager=new Lde(this),typeof window!="undefined"&&setTimeout(()=>{this._initializeFnCalled||(console.error(Xde),this._didWarnAboutNotInitializing=!0)},100)}get ticker(){if(!this._rafDriver)throw new Error("`studio.ticker` was read before studio.initialize() was called.");return this._rafDriver.ticker}get atomP(){return this._store.atomP}initialize(e){return Je(this,null,function*(){if(!this._coreBits)throw new Error("You seem to have imported `@theatre/studio` without importing `@theatre/core`. Make sure to include an import of `@theatre/core` before calling `studio.initializer()`.");if(this._initializeFnCalled)return this._initializedDeferred.promise;this._initializeFnCalled=!0,this._didWarnAboutNotInitializing&&console.warn($de);let n={persistenceKey:gJ,usePersistentStorage:!0};if(typeof(e==null?void 0:e.persistenceKey)=="string"&&(n.persistenceKey=e.persistenceKey),((e==null?void 0:e.usePersistentStorage)===!1||typeof window=="undefined")&&(n.usePersistentStorage=!1),e!=null&&e.__experimental_rafDriver){if(e.__experimental_rafDriver.type!=="Theatre_RafDriver_PublicAPI")throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` must be either be undefined, or the return type of core.createRafDriver()");let r=this._coreBits.privateAPI(e.__experimental_rafDriver);if(!r)throw new Error("parameter `rafDriver` in `studio.initialize({__experimental_rafDriver})` seems to come from a different version of `@theatre/core` than the version that is attached to `@theatre/studio`");this._rafDriver=r}else this._rafDriver=this._coreBits.getCoreRafDriver();try{yield this._store.initialize(n)}catch(r){this._initializedDeferred.reject(r);return}typeof window!="undefined"&&(yield this.ui.ready),this._initializedDeferred.resolve(),this.ui.render(),Fde().catch(r=>{console.error(r)})})}get initialized(){return this._initializedDeferred.promise}_attachToIncomingProjects(){let e=(0,J2.pointerToPrism)(this.projectsP),n=r=>{for(let a of Object.values(r))a.isAttachedToStudio||a.attachToStudio(this)};e.onStale(()=>{n(e.getValue())}),n(e.getValue())}setCoreBits(e){this._coreBits=e,this._corePrivateApi=e.privateAPI,this._coreAtom.setByPointer(n=>n.core,e.coreExports),this._setProjectsP(e.projectsP)}_setProjectsP(e){this._projectsProxy.setPointer(e)}scrub(){return new Uce(this)}tempTransaction(e){return this._store.tempTransaction(e)}transaction(e){return this.tempTransaction(e).commit()}__dev_startHistoryFromScratch(e){return this._store.__dev_startHistoryFromScratch(e)}get corePrivateAPI(){return this._corePrivateApi}get core(){return this._coreAtom.get().core}get coreP(){return this._coreAtom.pointer.core}extend(e,n){if(!e||typeof e!="object")throw new Error("Extensions must be JS objects");if(typeof e.id!="string")throw new Error("extension.id must be a string");let r=(n==null?void 0:n.__experimental_reconfigure)===!0,a=e.id,u=this._store.getState().ephemeral.extensions.byId[a];if(u&&!r){if(e===u||(0,jde.default)(e,u))return;throw new Error('Extension id "'.concat(e.id,'" is already defined. If you mean to re-configure the extension, do it like this: studio.extend(extension, {__experimental_reconfigure: true})})'))}this.transaction(({drafts:c})=>{var f,p;c.ephemeral.extensions.byId[e.id]=e;let v=c.ephemeral.extensions.paneClasses;r&&u&&((f=u.panes)==null||f.forEach(y=>{delete v[y.class]})),(p=e.panes)==null||p.forEach(y=>{if(typeof y.class!="string")throw new Error("pane.class must be a string");if(y.class.length<3)throw new Error("pane.class should be a string with 3 or more characters");let k=v[y.class];if(k)if(r&&k.extensionId===e.id)console.warn('Pane class "'.concat(y.class,'" already exists. This is a bug in Theatre.js. Please report it at https://github.com/theatre-js/theatre/issues/new'));else throw new Error('Pane class "'.concat(y.class,'" already exists and is supplied by extension ').concat(k));v[y.class]={extensionId:e.id,classDefinition:y}})})}getStudioProject(e){return this._cache.get("getStudioProject",()=>e.getProject("Studio"))}getExtensionSheet(e,n){return this._cache.get("extensionSheet-"+e,()=>this.getStudioProject(n).sheet("Extension "+e))}undo(){this._store.undo()}redo(){this._store.redo()}createContentOfSaveFile(e){return this._store.createContentOfSaveFile(e)}createAssetStorage(e,n){return Je(this,null,function*(){if(typeof window=="undefined")return{getAssetUrl:()=>"",createAsset:()=>Promise.resolve(null)};if(!("indexedDB"in window))return console.log("This browser doesn't support IndexedDB."),{getAssetUrl:y=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")},createAsset:y=>{throw new Error("IndexedDB is required by the default asset manager, but it's not supported by this browser. To use assets, please provide your own asset manager to the project config.")}};let r=Kde("".concat(e.address.projectId,"-assets")),a=tD(e),u=yield r.keys();yield Promise.all(u.map(y=>Je(this,null,function*(){a.includes(y)||(yield r.del(y))}))),yield Promise.all(u.map(y=>Je(this,null,function*(){var k,M;let T="".concat(n,"/").concat(y);try{(yield fetch(T,{method:"HEAD"})).ok&&(yield r.del(y))}catch{Db.error("Failed to access assets","Failed to access assets at ".concat((M=(k=e.config.assets)==null?void 0:k.baseUrl)!=null?M:"/",". This is likely due to a CORS issue."))}})));let c=new Map(yield r.entries()),f=new Map,p=y=>{if(f.has(y))return f.get(y);{let k=URL.createObjectURL(y);return f.set(y,k),k}},v=y=>{let k=c.get(y);if(!k)throw new Error("Asset with id ".concat(y," not found"));return p(k)};return{getAssetUrl:y=>c.has(y)?v(y):"".concat(n,"/").concat(y),createAsset:y=>Je(this,null,function*(){var k,M,T;let E=tD(e),A=!1;if(E.includes(y.name)){let C;try{C=(k=c.get(y.name))!=null?k:yield fetch("".concat(n,"/").concat(y.name)).then(R=>R.ok?R.blob():void 0)}catch{return Db.error("Failed to access assets","Failed to access assets at ".concat((T=(M=e.config.assets)==null?void 0:M.baseUrl)!=null?T:"/",". This is likely due to a CORS issue.")),Promise.resolve(null)}if(C){if(A=yield(yield Promise.resolve().then(()=>te(Bce()))).default.isEqual(y,C),A)return y.name;{let R=N=>{let j=prompt(N,y.name);return j===null?!1:j===""?R("Asset name cannot be empty. Please choose a different file name for this asset."):E.includes(j)?(console.log(E),R("An asset with this name already exists. Please choose a different file name for this asset.")):(y=new File([y],j,{type:y.type}),!0)};if(!R("An asset with this name already exists. Please choose a different file name for this asset."))return null}}}return c.set(y.name,y),yield r.set(y.name,y),y.name})}})}clearPersistentStorage(e=gJ){this._store.__experimental_clearPersistentStorage(e)}},W5="__TheatreJS_StudioBundle",Yde="__TheatreJS_CoreBundle",Jde="__TheatreJS_Notifications",Qde=class{constructor(e){this._studio=e,Pe(this,"_coreBundle")}get type(){return"Theatre_StudioBundle"}registerCoreBundle(e){if(this._coreBundle)throw new Error("StudioBundle.coreBundle is already registered. This is a bug.");this._coreBundle=e;let n;e.getBitsForStudio(this._studio,r=>{n=r}),this._studio.setCoreBits(n)}},efe=te(Ie());We();var vJ,tfe=se.div(vJ||(vJ=Q([""]))),nfe=e=>efe.default.createElement(tfe,null),rfe=nfe;Ob();var q5=new Zde;et(q5);var ife=q5.publicApi,ofe=ife;afe();function afe(){if(typeof window=="undefined")return;let e=window[W5];if(typeof e!="undefined")throw typeof e=="object"&&e&&typeof e.version=="string"?new Error(`It seems that the module '@theatre/studio' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/studio' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(W5," seems to be already set by a module other than @theatre/core."));let n=new Qde(q5);window[W5]=n;let r=window[Yde];r&&r!==null&&r.type==="Theatre_CoreBundle"&&n.registerCoreBundle(r)}typeof window!="undefined"&&(window[Jde]={notify:Db});/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

queue-microtask/index.js:
  (*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)

react/cjs/react.production.min.js:
  (**
   * @license React
   * react.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

scheduler/cjs/scheduler.production.min.js:
  (**
   * @license React
   * scheduler.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.min.js:
  (**
   * @license React
   * react-dom.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v17.0.2
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-is/cjs/react-is.production.min.js:
  (** @license React v16.13.1
   * react-is.production.min.js
   *
   * Copyright (c) Facebook, Inc. and its affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

jszip/dist/jszip.min.js:
  (*!
  
  JSZip v3.10.1 - A JavaScript class for generating and reading zip files
  <http://stuartk.com/jszip>
  
  (c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
  Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.
  
  JSZip uses the library pako released under the MIT license :
  https://github.com/nodeca/pako/blob/main/LICENSE
  *)

jiff/lib/lcs.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/array.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointerParse.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPointer.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/clone.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/lib/jsonPatch.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)

jiff/jiff.js:
  (** @license MIT License (c) copyright 2010-2014 original author or authors *)
*/})(xL,xL.exports);var bre=x_e(xL.exports),Xa={exports:{}};(function(w,t){var i=Object.create,l=Object.defineProperty,d=Object.defineProperties,g=Object.getOwnPropertyDescriptor,x=Object.getOwnPropertyDescriptors,_=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,D=Object.getPrototypeOf,B=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable,V=(h,b,I)=>b in h?l(h,b,{enumerable:!0,configurable:!0,writable:!0,value:I}):h[b]=I,X=(h,b)=>{for(var I in b||(b={}))B.call(b,I)&&V(h,I,b[I]);if(P)for(var I of P(b))F.call(b,I)&&V(h,I,b[I]);return h},ie=(h,b)=>d(h,x(b)),K=(h,b)=>function(){return b||(0,h[_(h)[0]])((b={exports:{}}).exports,b),b.exports},O=(h,b)=>{for(var I in b)l(h,I,{get:b[I],enumerable:!0})},q=(h,b,I,H)=>{if(b&&typeof b=="object"||typeof b=="function")for(let ee of _(b))!B.call(h,ee)&&ee!==I&&l(h,ee,{get:()=>b[ee],enumerable:!(H=g(b,ee))||H.enumerable});return h},_e=(h,b,I)=>(I=h!=null?i(D(h)):{},q(b||!h||!h.__esModule?l(I,"default",{value:h,enumerable:!0}):I,h)),z=h=>q(l({},"__esModule",{value:!0}),h),le=(h,b,I)=>(V(h,typeof b!="symbol"?b+"":b,I),I),Ee=K({"../node_modules/timing-function/lib/UnitBezier.js"(h,b){b.exports=function(){function I(H,ee,ue,Me){this.set(H,ee,ue,Me)}return I.prototype.set=function(H,ee,ue,Me){this._cx=3*H,this._bx=3*(ue-H)-this._cx,this._ax=1-this._cx-this._bx,this._cy=3*ee,this._by=3*(Me-ee)-this._cy,this._ay=1-this._cy-this._by},I.epsilon=1e-6,I.prototype._sampleCurveX=function(H){return((this._ax*H+this._bx)*H+this._cx)*H},I.prototype._sampleCurveY=function(H){return((this._ay*H+this._by)*H+this._cy)*H},I.prototype._sampleCurveDerivativeX=function(H){return(3*this._ax*H+2*this._bx)*H+this._cx},I.prototype._solveCurveX=function(H,ee){var ue,Me,Ue,qe,lt,Pt;for(Ue=void 0,qe=void 0,lt=void 0,Pt=void 0,ue=void 0,Me=void 0,lt=H,Me=0;Me<8;){if(Pt=this._sampleCurveX(lt)-H,Math.abs(Pt)<ee)return lt;if(ue=this._sampleCurveDerivativeX(lt),Math.abs(ue)<ee)break;lt=lt-Pt/ue,Me++}if(Ue=0,qe=1,lt=H,lt<Ue)return Ue;if(lt>qe)return qe;for(;Ue<qe;){if(Pt=this._sampleCurveX(lt),Math.abs(Pt-H)<ee)return lt;H>Pt?Ue=lt:qe=lt,lt=(qe-Ue)*.5+Ue}return lt},I.prototype.solve=function(H,ee){return this._sampleCurveY(this._solveCurveX(H,ee))},I.prototype.solveSimple=function(H){return this._sampleCurveY(this._solveCurveX(H,1e-6))},I}()}}),je=K({"../node_modules/levenshtein-edit-distance/index.js"(h,b){var I,H;I=[],H=[];function ee(ue,Me,Ue){var qe,lt,Pt,At,se,We,Xt,Ln;if(ue===Me)return 0;if(qe=ue.length,lt=Me.length,qe===0)return lt;if(lt===0)return qe;for(Ue&&(ue=ue.toLowerCase(),Me=Me.toLowerCase()),Xt=0;Xt<qe;)H[Xt]=ue.charCodeAt(Xt),I[Xt]=++Xt;for(Ln=0;Ln<lt;)for(Pt=Me.charCodeAt(Ln),At=se=Ln++,Xt=-1;++Xt<qe;)We=Pt===H[Xt]?se:se+1,se=I[Xt],I[Xt]=At=se>At?We>At?At+1:We:We>se?se+1:We;return At}b.exports=ee}}),te=K({"../node_modules/propose/propose.js"(h,b){var I=je();function H(){var ee,ue,Me,Ue,qe,lt=0,Pt=arguments[0],At=arguments[1],se=At.length,We=arguments[2];We&&(Ue=We.threshold,qe=We.ignoreCase),Ue===void 0&&(Ue=0);for(var Xt=0;Xt<se;++Xt)qe?ue=I(Pt,At[Xt],!0):ue=I(Pt,At[Xt]),ue>Pt.length?ee=1-ue/At[Xt].length:ee=1-ue/Pt.length,ee>lt&&(lt=ee,Me=At[Xt]);return lt>=Ue?Me:null}b.exports=H}}),me=K({"../node_modules/fast-deep-equal/index.js"(h,b){b.exports=function I(H,ee){if(H===ee)return!0;if(H&&ee&&typeof H=="object"&&typeof ee=="object"){if(H.constructor!==ee.constructor)return!1;var ue,Me,Ue;if(Array.isArray(H)){if(ue=H.length,ue!=ee.length)return!1;for(Me=ue;Me--!==0;)if(!I(H[Me],ee[Me]))return!1;return!0}if(H.constructor===RegExp)return H.source===ee.source&&H.flags===ee.flags;if(H.valueOf!==Object.prototype.valueOf)return H.valueOf()===ee.valueOf();if(H.toString!==Object.prototype.toString)return H.toString()===ee.toString();if(Ue=Object.keys(H),ue=Ue.length,ue!==Object.keys(ee).length)return!1;for(Me=ue;Me--!==0;)if(!Object.prototype.hasOwnProperty.call(ee,Ue[Me]))return!1;for(Me=ue;Me--!==0;){var qe=Ue[Me];if(!I(H[qe],ee[qe]))return!1}return!0}return H!==H&&ee!==ee}}}),Pe={};O(Pe,{createRafDriver:()=>el,getProject:()=>Ny,notify:()=>eu,onChange:()=>Pm,types:()=>by,val:()=>Fy}),w.exports=z(Pe);var Q={};O(Q,{createRafDriver:()=>el,getProject:()=>Ny,notify:()=>eu,onChange:()=>Pm,types:()=>by,val:()=>Fy});var Je=St,Ut=class{constructor(){le(this,"atom",new Je.Atom({projects:{}}))}add(h,b){this.atom.setByPointer(I=>I.projects[h],b)}get(h){return this.atom.get().projects[h]}has(h){return!!this.get(h)}},Dt=new Ut,et=Dt,be=new WeakMap;function tt(h){return be.get(h)}function He(h,b){be.set(h,b)}var yt=[],dt=Array.isArray,vt=dt,Lt=typeof qr=="object"&&qr&&qr.Object===Object&&qr,Et=Lt,Ot=typeof self=="object"&&self&&self.Object===Object&&self,Yt=Et||Ot||Function("return this")(),Qt=Yt,mt=Qt.Symbol,Jn=mt,Dn=Object.prototype,wn=Dn.hasOwnProperty,qt=Dn.toString,On=Jn?Jn.toStringTag:void 0;function Fn(h){var b=wn.call(h,On),I=h[On];try{h[On]=void 0;var H=!0}catch{}var ee=qt.call(h);return H&&(b?h[On]=I:delete h[On]),ee}var hn=Fn,Br=Object.prototype,Yr=Br.toString;function ai(h){return Yr.call(h)}var wr=ai,$n="[object Null]",Zn="[object Undefined]",kr=Jn?Jn.toStringTag:void 0;function vi(h){return h==null?h===void 0?Zn:$n:kr&&kr in Object(h)?hn(h):wr(h)}var xe=vi;function he(h){return h!=null&&typeof h=="object"}var ft=he,zt="[object Symbol]";function Nt(h){return typeof h=="symbol"||ft(h)&&xe(h)==zt}var Ht=Nt,Sn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,ht=/^\w*$/;function ln(h,b){if(vt(h))return!1;var I=typeof h;return I=="number"||I=="symbol"||I=="boolean"||h==null||Ht(h)?!0:ht.test(h)||!Sn.test(h)||b!=null&&h in Object(b)}var Jt=ln;function Kt(h){var b=typeof h;return h!=null&&(b=="object"||b=="function")}var De=Kt,Vt="[object AsyncFunction]",Bt="[object Function]",pn="[object GeneratorFunction]",$t="[object Proxy]";function cn(h){if(!De(h))return!1;var b=xe(h);return b==Bt||b==pn||b==Vt||b==$t}var Rt=cn,fn=Qt["__core-js_shared__"],Rn=fn,Bn=function(){var h=/[^.]+$/.exec(Rn&&Rn.keys&&Rn.keys.IE_PROTO||"");return h?"Symbol(src)_1."+h:""}();function Jr(h){return!!Bn&&Bn in h}var zi=Jr,No=Function.prototype,Ya=No.toString;function Gs(h){if(h!=null){try{return Ya.call(h)}catch{}try{return h+""}catch{}}return""}var Ti=Gs,Ja=/[\\^$.*+?()[\]{}|]/g,Fl=/^\[object .+?Constructor\]$/,yi=Function.prototype,Ni=Object.prototype,Zu=yi.toString,ge=Ni.hasOwnProperty,Qe=RegExp("^"+Zu.call(ge).replace(Ja,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ut(h){if(!De(h)||zi(h))return!1;var b=Rt(h)?Qe:Fl;return b.test(Ti(h))}var ot=ut;function bt(h,b){return h==null?void 0:h[b]}var _n=bt;function En(h,b){var I=_n(h,b);return ot(I)?I:void 0}var xn=En,An=xn(Object,"create"),Un=An;function Nn(){this.__data__=Un?Un(null):{},this.size=0}var Vn=Nn;function yr(h){var b=this.has(h)&&delete this.__data__[h];return this.size-=b?1:0,b}var Yo=yr,Qr="__lodash_hash_undefined__",Mi=Object.prototype,Qi=Mi.hasOwnProperty;function Hn(h){var b=this.__data__;if(Un){var I=b[h];return I===Qr?void 0:I}return Qi.call(b,h)?b[h]:void 0}var Jo=Hn,Sr=Object.prototype,Fi=Sr.hasOwnProperty;function si(h){var b=this.__data__;return Un?b[h]!==void 0:Fi.call(b,h)}var bi=si,Qo="__lodash_hash_undefined__";function ei(h,b){var I=this.__data__;return this.size+=this.has(h)?0:1,I[h]=Un&&b===void 0?Qo:b,this}var ea=ei;function po(h){var b=-1,I=h==null?0:h.length;for(this.clear();++b<I;){var H=h[b];this.set(H[0],H[1])}}po.prototype.clear=Vn,po.prototype.delete=Yo,po.prototype.get=Jo,po.prototype.has=bi,po.prototype.set=ea;var li=po;function Yh(){this.__data__=[],this.size=0}var C0=Yh;function ya(h,b){return h===b||h!==h&&b!==b}var Ws=ya;function A0(h,b){for(var I=h.length;I--;)if(Ws(h[I][0],b))return I;return-1}var ba=A0,Yu=Array.prototype,I0=Yu.splice;function Jh(h){var b=this.__data__,I=ba(b,h);if(I<0)return!1;var H=b.length-1;return I==H?b.pop():I0.call(b,I,1),--this.size,!0}var Qh=Jh;function ep(h){var b=this.__data__,I=ba(b,h);return I<0?void 0:b[I][1]}var Qa=ep;function Ju(h){return ba(this.__data__,h)>-1}var tp=Ju;function Qu(h,b){var I=this.__data__,H=ba(I,h);return H<0?(++this.size,I.push([h,b])):I[H][1]=b,this}var ec=Qu;function qs(h){var b=-1,I=h==null?0:h.length;for(this.clear();++b<I;){var H=h[b];this.set(H[0],H[1])}}qs.prototype.clear=C0,qs.prototype.delete=Qh,qs.prototype.get=Qa,qs.prototype.has=tp,qs.prototype.set=ec;var tc=qs,Vd=xn(Qt,"Map"),Ks=Vd;function D0(){this.size=0,this.__data__={hash:new li,map:new(Ks||tc),string:new li}}var O0=D0;function np(h){var b=typeof h;return b=="string"||b=="number"||b=="symbol"||b=="boolean"?h!=="__proto__":h===null}var rp=np;function _a(h,b){var I=h.__data__;return rp(b)?I[typeof b=="string"?"string":"hash"]:I.map}var Bl=_a;function ip(h){var b=Bl(this,h).delete(h);return this.size-=b?1:0,b}var Hd=ip;function Gd(h){return Bl(this,h).get(h)}var op=Gd;function ap(h){return Bl(this,h).has(h)}var sp=ap;function lp(h,b){var I=Bl(this,h),H=I.size;return I.set(h,b),this.size+=I.size==H?0:1,this}var up=lp;function es(h){var b=-1,I=h==null?0:h.length;for(this.clear();++b<I;){var H=h[b];this.set(H[0],H[1])}}es.prototype.clear=O0,es.prototype.delete=Hd,es.prototype.get=op,es.prototype.has=sp,es.prototype.set=up;var nc=es,R0="Expected a function";function rc(h,b){if(typeof h!="function"||b!=null&&typeof b!="function")throw new TypeError(R0);var I=function(){var H=arguments,ee=b?b.apply(this,H):H[0],ue=I.cache;if(ue.has(ee))return ue.get(ee);var Me=h.apply(this,H);return I.cache=ue.set(ee,Me)||ue,Me};return I.cache=new(rc.Cache||nc),I}rc.Cache=nc;var L0=rc,z0=500;function xa(h){var b=L0(h,function(H){return I.size===z0&&I.clear(),H}),I=b.cache;return b}var ts=xa,cp=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ic=/\\(\\)?/g,N0=ts(function(h){var b=[];return h.charCodeAt(0)===46&&b.push(""),h.replace(cp,function(I,H,ee,ue){b.push(ee?ue.replace(ic,"$1"):H||I)}),b}),F0=N0;function dp(h,b){for(var I=-1,H=h==null?0:h.length,ee=Array(H);++I<H;)ee[I]=b(h[I],I,h);return ee}var B0=dp,fp=1/0,Wd=Jn?Jn.prototype:void 0,hp=Wd?Wd.toString:void 0;function pp(h){if(typeof h=="string")return h;if(vt(h))return B0(h,pp)+"";if(Ht(h))return hp?hp.call(h):"";var b=h+"";return b=="0"&&1/h==-fp?"-0":b}var qd=pp;function j0(h){return h==null?"":qd(h)}var mp=j0;function oc(h,b){return vt(h)?h:Jt(h,b)?[h]:F0(mp(h))}var Xs=oc,Kd=1/0;function gp(h){if(typeof h=="string"||Ht(h))return h;var b=h+"";return b=="0"&&1/h==-Kd?"-0":b}var ta=gp;function jl(h,b){b=Xs(b,h);for(var I=0,H=b.length;h!=null&&I<H;)h=h[ta(b[I++])];return I&&I==H?h:void 0}var Ul=jl;function Xd(h,b,I){var H=h==null?void 0:Ul(h,b);return H===void 0?I:H}var wa=Xd;function $s(h,b){return b.length===0?h:wa(h,b)}var ns=class{constructor(){le(this,"_values",{})}get(h,b){if(this.has(h))return this._values[h];{const I=b();return this._values[h]=I,I}}has(h){return this._values.hasOwnProperty(h)}},Kr=St,Vl=function(){try{var h=xn(Object,"defineProperty");return h({},"",{}),h}catch{}}(),$d=Vl;function vp(h,b,I){b=="__proto__"&&$d?$d(h,b,{configurable:!0,enumerable:!0,value:I,writable:!0}):h[b]=I}var Sa=vp,Hl=Object.prototype,U0=Hl.hasOwnProperty;function ac(h,b,I){var H=h[b];(!(U0.call(h,b)&&Ws(H,I))||I===void 0&&!(b in h))&&Sa(h,b,I)}var Gl=ac,V0=9007199254740991,Zd=/^(?:0|[1-9]\d*)$/;function H0(h,b){var I=typeof h;return b=b==null?V0:b,!!b&&(I=="number"||I!="symbol"&&Zd.test(h))&&h>-1&&h%1==0&&h<b}var Yd=H0;function yp(h,b,I,H){if(!De(h))return h;b=Xs(b,h);for(var ee=-1,ue=b.length,Me=ue-1,Ue=h;Ue!=null&&++ee<ue;){var qe=ta(b[ee]),lt=I;if(qe==="__proto__"||qe==="constructor"||qe==="prototype")return h;if(ee!=Me){var Pt=Ue[qe];lt=H?H(Pt,qe,Ue):void 0,lt===void 0&&(lt=De(Pt)?Pt:Yd(b[ee+1])?[]:{})}Gl(Ue,qe,lt),Ue=Ue[qe]}return h}var bp=yp;function _p(h,b,I){return h==null?h:bp(h,b,I)}var Zs=_p,ti=new WeakMap;function G0(h){return sc(h)}function sc(h){if(ti.has(h))return ti.get(h);const b=h.type==="compound"?wp(h):h.type==="enum"?xp(h):h.default;return ti.set(h,b),b}function xp(h){const b={$case:h.defaultCase};for(const[I,H]of Object.entries(h.cases))b[I]=sc(H);return b}function wp(h){const b={};for(const[I,H]of Object.entries(h.props))b[I]=sc(H);return b}var Pi=St,Sp=_e(Ee());function Wl(h,b,I){return(0,Pi.prism)(()=>{const H=(0,Pi.val)(b);return Pi.prism.memo("driver",()=>H?H.type==="BasicKeyframedTrack"?lc(h,H,I):(h.logger.error("Track type not yet supported."),(0,Pi.prism)(()=>{})):(0,Pi.prism)(()=>{}),[H]).getValue()})}function lc(h,b,I){return(0,Pi.prism)(()=>{let H=Pi.prism.ref("state",{started:!1}),ee=H.current;const ue=I.getValue();return(!ee.started||ue<ee.validFrom||ee.validTo<=ue)&&(H.current=ee=uc(h,I,b)),ee.der.getValue()})}var Ep=(0,Pi.prism)(()=>{});function uc(h,b,I){const H=b.getValue();if(I.keyframes.length===0)return{started:!0,validFrom:-1/0,validTo:1/0,der:Ep};let ee=0;for(;;){const ue=I.keyframes[ee];if(!ue)return jr.error;const Me=ee===I.keyframes.length-1;if(H<ue.position)return ee===0?jr.beforeFirstKeyframe(ue):jr.error;if(ue.position===H)return Me?jr.lastKeyframe(ue):jr.between(ue,I.keyframes[ee+1],b);if(ee===I.keyframes.length-1)return jr.lastKeyframe(ue);{const Ue=ee+1;if(I.keyframes[Ue].position<=H){ee=Ue;continue}else return jr.between(ue,I.keyframes[ee+1],b)}}}var jr={beforeFirstKeyframe(h){return{started:!0,validFrom:-1/0,validTo:h.position,der:(0,Pi.prism)(()=>({left:h.value,progression:0}))}},lastKeyframe(h){return{started:!0,validFrom:h.position,validTo:1/0,der:(0,Pi.prism)(()=>({left:h.value,progression:0}))}},between(h,b,I){if(!h.connectedRight)return{started:!0,validFrom:h.position,validTo:b.position,der:(0,Pi.prism)(()=>({left:h.value,progression:0}))};const H=ue=>(ue-h.position)/(b.position-h.position);if(!h.type||h.type==="bezier"){const ue=new Sp.default(h.handles[2],h.handles[3],b.handles[0],b.handles[1]),Me=(0,Pi.prism)(()=>{const Ue=H(I.getValue()),qe=ue.solveSimple(Ue);return{left:h.value,right:b.value,progression:qe}});return{started:!0,validFrom:h.position,validTo:b.position,der:Me}}const ee=(0,Pi.prism)(()=>{const ue=H(I.getValue()),Me=Math.floor(ue);return{left:h.value,right:b.value,progression:Me}});return{started:!0,validFrom:h.position,validTo:b.position,der:ee}},error:{started:!0,validFrom:-1/0,validTo:1/0,der:Ep}};function ql(h,b,I){const ee=I.get(h);if(ee&&ee.override===b)return ee.merged;const ue=X({},h);for(const Me of Object.keys(b)){const Ue=b[Me],qe=h[Me];ue[Me]=typeof Ue=="object"&&typeof qe=="object"?ql(qe,Ue,I):Ue===void 0?qe:Ue}return I.set(h,{override:b,merged:ue}),ue}function na(h,b){let I=h;for(const H of b)I=I[H];return I}var Ea=St,kp=(h,b)=>{const I=Ea.prism.memo(h,()=>new Ea.Atom(b),[]);return I.set(b),I},or=St,cc=St,Tp=/\s/;function Mp(h){for(var b=h.length;b--&&Tp.test(h.charAt(b)););return b}var Pp=Mp,dc=/^\s+/;function Cp(h){return h&&h.slice(0,Pp(h)+1).replace(dc,"")}var fc=Cp,Jd=0/0,Qd=/^[-+]0x[0-9a-f]+$/i,Ap=/^0b[01]+$/i,Ip=/^0o[0-7]+$/i,Dp=parseInt;function hc(h){if(typeof h=="number")return h;if(Ht(h))return Jd;if(De(h)){var b=typeof h.valueOf=="function"?h.valueOf():h;h=De(b)?b+"":b}if(typeof h!="string")return h===0?h:+h;h=fc(h);var I=Ap.test(h);return I||Ip.test(h)?Dp(h.slice(2),I?2:8):Qd.test(h)?Jd:+h}var Z=hc,fe=1/0,Oe=17976931348623157e292;function st(h){if(!h)return h===0?h:0;if(h=Z(h),h===fe||h===-fe){var b=h<0?-1:1;return b*Oe}return h===h?h:0}var vn=st;function Kn(h){var b=vn(h),I=b%1;return b===b?I?b-I:b:0}var _i=Kn;function Fo(h){return h}var ef=Fo,rs=xn(Qt,"WeakMap"),Kl=rs,_1=Object.create,x1=function(){function h(){}return function(b){if(!De(b))return{};if(_1)return _1(b);h.prototype=b;var I=new h;return h.prototype=void 0,I}}(),JM=x1;function QM(h,b){var I=-1,H=h.length;for(b||(b=Array(H));++I<H;)b[I]=h[I];return b}var w1=QM;function W0(h,b){for(var I=-1,H=h==null?0:h.length;++I<H&&b(h[I],I,h)!==!1;);return h}var eP=W0;function q0(h,b,I,H){var ee=!I;I||(I={});for(var ue=-1,Me=b.length;++ue<Me;){var Ue=b[ue],qe=H?H(I[Ue],h[Ue],Ue,I,h):void 0;qe===void 0&&(qe=h[Ue]),ee?Sa(I,Ue,qe):Gl(I,Ue,qe)}return I}var tf=q0,S1=9007199254740991;function E1(h){return typeof h=="number"&&h>-1&&h%1==0&&h<=S1}var pc=E1;function K0(h){return h!=null&&pc(h.length)&&!Rt(h)}var k1=K0,T1=Object.prototype;function tP(h){var b=h&&h.constructor,I=typeof b=="function"&&b.prototype||T1;return h===I}var nf=tP;function X0(h,b){for(var I=-1,H=Array(h);++I<h;)H[I]=b(I);return H}var M1=X0,$0="[object Arguments]";function P1(h){return ft(h)&&xe(h)==$0}var Z0=P1,rf=Object.prototype,C1=rf.hasOwnProperty,nP=rf.propertyIsEnumerable,A1=Z0(function(){return arguments}())?Z0:function(h){return ft(h)&&C1.call(h,"callee")&&!nP.call(h,"callee")},Y0=A1;function I1(){return!1}var D1=I1,J0=t&&!t.nodeType&&t,Q0=J0&&!0&&w&&!w.nodeType&&w,O1=Q0&&Q0.exports===J0,ev=O1?Qt.Buffer:void 0,R1=ev?ev.isBuffer:void 0,L1=R1||D1,of=L1,z1="[object Arguments]",N1="[object Array]",F1="[object Boolean]",B1="[object Date]",j1="[object Error]",U1="[object Function]",V1="[object Map]",H1="[object Number]",G1="[object Object]",W1="[object RegExp]",q1="[object Set]",K1="[object String]",X1="[object WeakMap]",br="[object ArrayBuffer]",$1="[object DataView]",rP="[object Float32Array]",iP="[object Float64Array]",Op="[object Int8Array]",tv="[object Int16Array]",nv="[object Int32Array]",mc="[object Uint8Array]",Z1="[object Uint8ClampedArray]",Rp="[object Uint16Array]",Y1="[object Uint32Array]",fr={};fr[rP]=fr[iP]=fr[Op]=fr[tv]=fr[nv]=fr[mc]=fr[Z1]=fr[Rp]=fr[Y1]=!0,fr[z1]=fr[N1]=fr[br]=fr[F1]=fr[$1]=fr[B1]=fr[j1]=fr[U1]=fr[V1]=fr[H1]=fr[G1]=fr[W1]=fr[q1]=fr[K1]=fr[X1]=!1;function oP(h){return ft(h)&&pc(h.length)&&!!fr[xe(h)]}var rv=oP;function J1(h){return function(b){return h(b)}}var af=J1,iv=t&&!t.nodeType&&t,sf=iv&&!0&&w&&!w.nodeType&&w,Q1=sf&&sf.exports===iv,Lp=Q1&&Et.process,ex=function(){try{var h=sf&&sf.require&&sf.require("util").types;return h||Lp&&Lp.binding&&Lp.binding("util")}catch{}}(),gc=ex,tx=gc&&gc.isTypedArray,ov=tx?af(tx):rv,av=ov,nx=Object.prototype,rx=nx.hasOwnProperty;function aP(h,b){var I=vt(h),H=!I&&Y0(h),ee=!I&&!H&&of(h),ue=!I&&!H&&!ee&&av(h),Me=I||H||ee||ue,Ue=Me?M1(h.length,String):[],qe=Ue.length;for(var lt in h)(b||rx.call(h,lt))&&!(Me&&(lt=="length"||ee&&(lt=="offset"||lt=="parent")||ue&&(lt=="buffer"||lt=="byteLength"||lt=="byteOffset")||Yd(lt,qe)))&&Ue.push(lt);return Ue}var ix=aP;function ox(h,b){return function(I){return h(b(I))}}var sv=ox,ax=sv(Object.keys,Object),sP=ax,lP=Object.prototype,zp=lP.hasOwnProperty;function lv(h){if(!nf(h))return sP(h);var b=[];for(var I in Object(h))zp.call(h,I)&&I!="constructor"&&b.push(I);return b}var uP=lv;function sx(h){return k1(h)?ix(h):uP(h)}var vc=sx;function Np(h){var b=[];if(h!=null)for(var I in Object(h))b.push(I);return b}var uv=Np,lx=Object.prototype,yc=lx.hasOwnProperty;function Fp(h){if(!De(h))return uv(h);var b=nf(h),I=[];for(var H in h)H=="constructor"&&(b||!yc.call(h,H))||I.push(H);return I}var cP=Fp;function ux(h){return k1(h)?ix(h,!0):cP(h)}var cv=ux;function dP(h,b){for(var I=-1,H=b.length,ee=h.length;++I<H;)h[ee+I]=b[I];return h}var dv=dP,fP=sv(Object.getPrototypeOf,Object),fv=fP,cx="[object Object]",dx=Function.prototype,fx=Object.prototype,hv=dx.toString,hP=fx.hasOwnProperty,pP=hv.call(Object);function hx(h){if(!ft(h)||xe(h)!=cx)return!1;var b=fv(h);if(b===null)return!0;var I=hP.call(b,"constructor")&&b.constructor;return typeof I=="function"&&I instanceof I&&hv.call(I)==pP}var px=hx;function mx(h,b,I){var H=-1,ee=h.length;b<0&&(b=-b>ee?0:ee+b),I=I>ee?ee:I,I<0&&(I+=ee),ee=b>I?0:I-b>>>0,b>>>=0;for(var ue=Array(ee);++H<ee;)ue[H]=h[H+b];return ue}var gx=mx;function mP(h,b,I){var H=h.length;return I=I===void 0?H:I,!b&&I>=H?h:gx(h,b,I)}var vx=mP,yx="\\ud800-\\udfff",gP="\\u0300-\\u036f",bc="\\ufe20-\\ufe2f",pv="\\u20d0-\\u20ff",vP=gP+bc+pv,yP="\\ufe0e\\ufe0f",bx="\\u200d",bP=RegExp("["+bx+yx+vP+yP+"]");function _P(h){return bP.test(h)}var Xl=_P;function Bp(h){return h.split("")}var xP=Bp,mv="\\ud800-\\udfff",_x="\\u0300-\\u036f",xx="\\ufe20-\\ufe2f",wP="\\u20d0-\\u20ff",SP=_x+xx+wP,wx="\\ufe0e\\ufe0f",EP="["+mv+"]",gv="["+SP+"]",jp="\\ud83c[\\udffb-\\udfff]",kP="(?:"+gv+"|"+jp+")",Sx="[^"+mv+"]",vv="(?:\\ud83c[\\udde6-\\uddff]){2}",Ex="[\\ud800-\\udbff][\\udc00-\\udfff]",_c="\\u200d",xc=kP+"?",lf="["+wx+"]?",kx="(?:"+_c+"(?:"+[Sx,vv,Ex].join("|")+")"+lf+xc+")*",wc=lf+xc+kx,yv="(?:"+[Sx+gv+"?",gv,vv,Ex,EP].join("|")+")",TP=RegExp(jp+"(?="+jp+")|"+yv+wc,"g");function Tx(h){return h.match(TP)||[]}var MP=Tx;function PP(h){return Xl(h)?MP(h):xP(h)}var Mx=PP;function CP(h,b,I){return h===h&&(I!==void 0&&(h=h<=I?h:I),b!==void 0&&(h=h>=b?h:b)),h}var AP=CP;function uf(h,b,I){return I===void 0&&(I=b,b=void 0),I!==void 0&&(I=Z(I),I=I===I?I:0),b!==void 0&&(b=Z(b),b=b===b?b:0),AP(Z(h),b,I)}var cf=uf;function IP(){this.__data__=new tc,this.size=0}var Px=IP;function DP(h){var b=this.__data__,I=b.delete(h);return this.size=b.size,I}var OP=DP;function Cx(h){return this.__data__.get(h)}var RP=Cx;function LP(h){return this.__data__.has(h)}var Ax=LP,zP=200;function NP(h,b){var I=this.__data__;if(I instanceof tc){var H=I.__data__;if(!Ks||H.length<zP-1)return H.push([h,b]),this.size=++I.size,this;I=this.__data__=new nc(H)}return I.set(h,b),this.size=I.size,this}var Ix=NP;function Sc(h){var b=this.__data__=new tc(h);this.size=b.size}Sc.prototype.clear=Px,Sc.prototype.delete=OP,Sc.prototype.get=RP,Sc.prototype.has=Ax,Sc.prototype.set=Ix;var ka=Sc;function df(h,b){return h&&tf(b,vc(b),h)}var bv=df;function _v(h,b){return h&&tf(b,cv(b),h)}var Dx=_v,Up=t&&!t.nodeType&&t,xv=Up&&!0&&w&&!w.nodeType&&w,FP=xv&&xv.exports===Up,wv=FP?Qt.Buffer:void 0,Sv=wv?wv.allocUnsafe:void 0;function BP(h,b){if(b)return h.slice();var I=h.length,H=Sv?Sv(I):new h.constructor(I);return h.copy(H),H}var Ox=BP;function Rx(h,b){for(var I=-1,H=h==null?0:h.length,ee=0,ue=[];++I<H;){var Me=h[I];b(Me,I,h)&&(ue[ee++]=Me)}return ue}var Lx=Rx;function zx(){return[]}var Nx=zx,jP=Object.prototype,Vp=jP.propertyIsEnumerable,Ev=Object.getOwnPropertySymbols,UP=Ev?function(h){return h==null?[]:(h=Object(h),Lx(Ev(h),function(b){return Vp.call(h,b)}))}:Nx,Ec=UP;function kv(h,b){return tf(h,Ec(h),b)}var VP=kv,Fx=Object.getOwnPropertySymbols,kc=Fx?function(h){for(var b=[];h;)dv(b,Ec(h)),h=fv(h);return b}:Nx,Tc=kc;function HP(h,b){return tf(h,Tc(h),b)}var Hp=HP;function Tv(h,b,I){var H=b(h);return vt(h)?H:dv(H,I(h))}var Bx=Tv;function $l(h){return Bx(h,vc,Ec)}var Zl=$l;function GP(h){return Bx(h,cv,Tc)}var Mv=GP,jx=xn(Qt,"DataView"),Pv=jx,Cv=xn(Qt,"Promise"),Gp=Cv,WP=xn(Qt,"Set"),Wp=WP,Av="[object Map]",qP="[object Object]",Iv="[object Promise]",Dv="[object Set]",Ux="[object WeakMap]",Vx="[object DataView]",Hx=Ti(Pv),Gx=Ti(Ks),Wx=Ti(Gp),Ov=Ti(Wp),qx=Ti(Kl),Ys=xe;(Pv&&Ys(new Pv(new ArrayBuffer(1)))!=Vx||Ks&&Ys(new Ks)!=Av||Gp&&Ys(Gp.resolve())!=Iv||Wp&&Ys(new Wp)!=Dv||Kl&&Ys(new Kl)!=Ux)&&(Ys=function(h){var b=xe(h),I=b==qP?h.constructor:void 0,H=I?Ti(I):"";if(H)switch(H){case Hx:return Vx;case Gx:return Av;case Wx:return Iv;case Ov:return Dv;case qx:return Ux}return b});var Js=Ys,Kx=Object.prototype,KP=Kx.hasOwnProperty;function Xx(h){var b=h.length,I=new h.constructor(b);return b&&typeof h[0]=="string"&&KP.call(h,"index")&&(I.index=h.index,I.input=h.input),I}var $x=Xx,Zx=Qt.Uint8Array,qp=Zx;function XP(h){var b=new h.constructor(h.byteLength);return new qp(b).set(new qp(h)),b}var Kp=XP;function $P(h,b){var I=b?Kp(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.byteLength)}var ZP=$P,Tr=/\w*$/;function Xp(h){var b=new h.constructor(h.source,Tr.exec(h));return b.lastIndex=h.lastIndex,b}var YP=Xp,Rv=Jn?Jn.prototype:void 0,Yx=Rv?Rv.valueOf:void 0;function JP(h){return Yx?Object(Yx.call(h)):{}}var Jx=JP;function QP(h,b){var I=b?Kp(h.buffer):h.buffer;return new h.constructor(I,h.byteOffset,h.length)}var eC=QP,Qx="[object Boolean]",tC="[object Date]",nC="[object Map]",ew="[object Number]",rC="[object RegExp]",iC="[object Set]",tw="[object String]",nw="[object Symbol]",oC="[object ArrayBuffer]",Mc="[object DataView]",ff="[object Float32Array]",rw="[object Float64Array]",aC="[object Int8Array]",iw="[object Int16Array]",sC="[object Int32Array]",lC="[object Uint8Array]",ow="[object Uint8ClampedArray]",uC="[object Uint16Array]",aw="[object Uint32Array]";function sw(h,b,I){var H=h.constructor;switch(b){case oC:return Kp(h);case Qx:case tC:return new H(+h);case Mc:return ZP(h,I);case ff:case rw:case aC:case iw:case sC:case lC:case ow:case uC:case aw:return eC(h,I);case nC:return new H;case ew:case tw:return new H(h);case rC:return YP(h);case iC:return new H;case nw:return Jx(h)}}var Lv=sw;function lw(h){return typeof h.constructor=="function"&&!nf(h)?JM(fv(h)):{}}var uw=lw,cC="[object Map]";function dC(h){return ft(h)&&Js(h)==cC}var cw=dC,dw=gc&&gc.isMap,fC=dw?af(dw):cw,zv=fC,hC="[object Set]";function fw(h){return ft(h)&&Js(h)==hC}var $p=fw,hw=gc&&gc.isSet,pw=hw?af(hw):$p,Zp=pw,pC=1,mw=2,Yl=4,Nv="[object Arguments]",Fv="[object Array]",gw="[object Boolean]",Bv="[object Date]",jv="[object Error]",Yp="[object Function]",Uv="[object GeneratorFunction]",vw="[object Map]",yw="[object Number]",Vv="[object Object]",bw="[object RegExp]",_w="[object Set]",Qs="[object String]",Hv="[object Symbol]",mC="[object WeakMap]",xw="[object ArrayBuffer]",Gv="[object DataView]",gC="[object Float32Array]",vC="[object Float64Array]",ww="[object Int8Array]",Sw="[object Int16Array]",yC="[object Int32Array]",bC="[object Uint8Array]",Ew="[object Uint8ClampedArray]",_C="[object Uint16Array]",Jp="[object Uint32Array]",cr={};cr[Nv]=cr[Fv]=cr[xw]=cr[Gv]=cr[gw]=cr[Bv]=cr[gC]=cr[vC]=cr[ww]=cr[Sw]=cr[yC]=cr[vw]=cr[yw]=cr[Vv]=cr[bw]=cr[_w]=cr[Qs]=cr[Hv]=cr[bC]=cr[Ew]=cr[_C]=cr[Jp]=!0,cr[jv]=cr[Yp]=cr[mC]=!1;function hf(h,b,I,H,ee,ue){var Me,Ue=b&pC,qe=b&mw,lt=b&Yl;if(I&&(Me=ee?I(h,H,ee,ue):I(h)),Me!==void 0)return Me;if(!De(h))return h;var Pt=vt(h);if(Pt){if(Me=$x(h),!Ue)return w1(h,Me)}else{var At=Js(h),se=At==Yp||At==Uv;if(of(h))return Ox(h,Ue);if(At==Vv||At==Nv||se&&!ee){if(Me=qe||se?{}:uw(h),!Ue)return qe?Hp(h,Dx(Me,h)):VP(h,bv(Me,h))}else{if(!cr[At])return ee?h:{};Me=Lv(h,At,Ue)}}ue||(ue=new ka);var We=ue.get(h);if(We)return We;ue.set(h,Me),Zp(h)?h.forEach(function(jn){Me.add(hf(jn,b,I,jn,h,ue))}):zv(h)&&h.forEach(function(jn,In){Me.set(In,hf(jn,b,I,In,h,ue))});var Xt=lt?qe?Mv:Zl:qe?cv:vc,Ln=Pt?void 0:Xt(h);return eP(Ln||h,function(jn,In){Ln&&(In=jn,jn=h[In]),Gl(Me,In,hf(jn,b,I,In,h,ue))}),Me}var xC=hf,kw=1,wC=4;function SC(h){return xC(h,kw|wC)}var Wv=SC,Tw="__lodash_hash_undefined__";function EC(h){return this.__data__.set(h,Tw),this}var Mw=EC;function Pw(h){return this.__data__.has(h)}var qv=Pw;function pf(h){var b=-1,I=h==null?0:h.length;for(this.__data__=new nc;++b<I;)this.add(h[b])}pf.prototype.add=pf.prototype.push=Mw,pf.prototype.has=qv;var kC=pf;function Cw(h,b){for(var I=-1,H=h==null?0:h.length;++I<H;)if(b(h[I],I,h))return!0;return!1}var TC=Cw;function MC(h,b){return h.has(b)}var Qp=MC,Kv=1,PC=2;function Aw(h,b,I,H,ee,ue){var Me=I&Kv,Ue=h.length,qe=b.length;if(Ue!=qe&&!(Me&&qe>Ue))return!1;var lt=ue.get(h),Pt=ue.get(b);if(lt&&Pt)return lt==b&&Pt==h;var At=-1,se=!0,We=I&PC?new kC:void 0;for(ue.set(h,b),ue.set(b,h);++At<Ue;){var Xt=h[At],Ln=b[At];if(H)var jn=Me?H(Ln,Xt,At,b,h,ue):H(Xt,Ln,At,h,b,ue);if(jn!==void 0){if(jn)continue;se=!1;break}if(We){if(!TC(b,function(In,Gn){if(!Qp(We,Gn)&&(Xt===In||ee(Xt,In,I,H,ue)))return We.push(Gn)})){se=!1;break}}else if(!(Xt===Ln||ee(Xt,Ln,I,H,ue))){se=!1;break}}return ue.delete(h),ue.delete(b),se}var Xv=Aw;function Iw(h){var b=-1,I=Array(h.size);return h.forEach(function(H,ee){I[++b]=[ee,H]}),I}var Dw=Iw;function Ow(h){var b=-1,I=Array(h.size);return h.forEach(function(H){I[++b]=H}),I}var Rw=Ow,Lw=1,zw=2,Nw="[object Boolean]",Fw="[object Date]",Bw="[object Error]",jw="[object Map]",Uw="[object Number]",$v="[object RegExp]",em="[object Set]",Vw="[object String]",CC="[object Symbol]",AC="[object ArrayBuffer]",Hw="[object DataView]",Zv=Jn?Jn.prototype:void 0,tm=Zv?Zv.valueOf:void 0;function Gw(h,b,I,H,ee,ue,Me){switch(I){case Hw:if(h.byteLength!=b.byteLength||h.byteOffset!=b.byteOffset)return!1;h=h.buffer,b=b.buffer;case AC:return!(h.byteLength!=b.byteLength||!ue(new qp(h),new qp(b)));case Nw:case Fw:case Uw:return Ws(+h,+b);case Bw:return h.name==b.name&&h.message==b.message;case $v:case Vw:return h==b+"";case jw:var Ue=Dw;case em:var qe=H&Lw;if(Ue||(Ue=Rw),h.size!=b.size&&!qe)return!1;var lt=Me.get(h);if(lt)return lt==b;H|=zw,Me.set(h,b);var Pt=Xv(Ue(h),Ue(b),H,ee,ue,Me);return Me.delete(h),Pt;case CC:if(tm)return tm.call(h)==tm.call(b)}return!1}var IC=Gw,DC=1,Ww=Object.prototype,Yv=Ww.hasOwnProperty;function Jv(h,b,I,H,ee,ue){var Me=I&DC,Ue=Zl(h),qe=Ue.length,lt=Zl(b),Pt=lt.length;if(qe!=Pt&&!Me)return!1;for(var At=qe;At--;){var se=Ue[At];if(!(Me?se in b:Yv.call(b,se)))return!1}var We=ue.get(h),Xt=ue.get(b);if(We&&Xt)return We==b&&Xt==h;var Ln=!0;ue.set(h,b),ue.set(b,h);for(var jn=Me;++At<qe;){se=Ue[At];var In=h[se],Gn=b[se];if(H)var ci=Me?H(Gn,In,se,b,h,ue):H(In,Gn,se,h,b,ue);if(!(ci===void 0?In===Gn||ee(In,Gn,I,H,ue):ci)){Ln=!1;break}jn||(jn=se=="constructor")}if(Ln&&!jn){var to=h.constructor,Ci=b.constructor;to!=Ci&&"constructor"in h&&"constructor"in b&&!(typeof to=="function"&&to instanceof to&&typeof Ci=="function"&&Ci instanceof Ci)&&(Ln=!1)}return ue.delete(h),ue.delete(b),Ln}var mf=Jv,qw=1,nm="[object Arguments]",Qv="[object Array]",rm="[object Object]",Kw=Object.prototype,im=Kw.hasOwnProperty;function Xw(h,b,I,H,ee,ue){var Me=vt(h),Ue=vt(b),qe=Me?Qv:Js(h),lt=Ue?Qv:Js(b);qe=qe==nm?rm:qe,lt=lt==nm?rm:lt;var Pt=qe==rm,At=lt==rm,se=qe==lt;if(se&&of(h)){if(!of(b))return!1;Me=!0,Pt=!1}if(se&&!Pt)return ue||(ue=new ka),Me||av(h)?Xv(h,b,I,H,ee,ue):IC(h,b,qe,I,H,ee,ue);if(!(I&qw)){var We=Pt&&im.call(h,"__wrapped__"),Xt=At&&im.call(b,"__wrapped__");if(We||Xt){var Ln=We?h.value():h,jn=Xt?b.value():b;return ue||(ue=new ka),ee(Ln,jn,I,H,ue)}}return se?(ue||(ue=new ka),mf(h,b,I,H,ee,ue)):!1}var OC=Xw;function ey(h,b,I,H,ee){return h===b?!0:h==null||b==null||!ft(h)&&!ft(b)?h!==h&&b!==b:OC(h,b,I,H,ey,ee)}var ty=ey,$w=1,RC=2;function LC(h,b,I,H){var ee=I.length,ue=ee,Me=!H;if(h==null)return!ue;for(h=Object(h);ee--;){var Ue=I[ee];if(Me&&Ue[2]?Ue[1]!==h[Ue[0]]:!(Ue[0]in h))return!1}for(;++ee<ue;){Ue=I[ee];var qe=Ue[0],lt=h[qe],Pt=Ue[1];if(Me&&Ue[2]){if(lt===void 0&&!(qe in h))return!1}else{var At=new ka;if(H)var se=H(lt,Pt,qe,h,b,At);if(!(se===void 0?ty(Pt,lt,$w|RC,H,At):se))return!1}}return!0}var ny=LC;function Zw(h){return h===h&&!De(h)}var Yw=Zw;function Jw(h){for(var b=vc(h),I=b.length;I--;){var H=b[I],ee=h[H];b[I]=[H,ee,Yw(ee)]}return b}var zC=Jw;function NC(h,b){return function(I){return I==null?!1:I[h]===b&&(b!==void 0||h in Object(I))}}var om=NC;function Qw(h){var b=zC(h);return b.length==1&&b[0][2]?om(b[0][0],b[0][1]):function(I){return I===h||ny(I,h,b)}}var FC=Qw;function eS(h,b){return h!=null&&b in Object(h)}var BC=eS;function jC(h,b,I){b=Xs(b,h);for(var H=-1,ee=b.length,ue=!1;++H<ee;){var Me=ta(b[H]);if(!(ue=h!=null&&I(h,Me)))break;h=h[Me]}return ue||++H!=ee?ue:(ee=h==null?0:h.length,!!ee&&pc(ee)&&Yd(Me,ee)&&(vt(h)||Y0(h)))}var tS=jC;function UC(h,b){return h!=null&&tS(h,b,BC)}var VC=UC,nS=1,HC=2;function GC(h,b){return Jt(h)&&Yw(b)?om(ta(h),b):function(I){var H=wa(I,h);return H===void 0&&H===b?VC(I,h):ty(b,H,nS|HC)}}var rS=GC;function WC(h){return function(b){return b==null?void 0:b[h]}}var iS=WC;function oS(h){return function(b){return Ul(b,h)}}var aS=oS;function sS(h){return Jt(h)?iS(ta(h)):aS(h)}var qC=sS;function KC(h){return typeof h=="function"?h:h==null?ef:typeof h=="object"?vt(h)?rS(h[0],h[1]):FC(h):qC(h)}var lS=KC;function XC(h){return function(b,I,H){for(var ee=-1,ue=Object(b),Me=H(b),Ue=Me.length;Ue--;){var qe=Me[h?Ue:++ee];if(I(ue[qe],qe,ue)===!1)break}return b}}var $C=XC,uS=$C(),ZC=uS;function YC(h,b){return h&&ZC(h,b,vc)}var cS=YC,JC=function(){return Qt.Date.now()},ry=JC,Pc="Expected a function",gf=Math.max,QC=Math.min;function dS(h,b,I){var H,ee,ue,Me,Ue,qe,lt=0,Pt=!1,At=!1,se=!0;if(typeof h!="function")throw new TypeError(Pc);b=Z(b)||0,De(I)&&(Pt=!!I.leading,At="maxWait"in I,ue=At?gf(Z(I.maxWait)||0,b):ue,se="trailing"in I?!!I.trailing:se);function We(ur){var Ai=H,_o=ee;return H=ee=void 0,lt=ur,Me=h.apply(_o,Ai),Me}function Xt(ur){return lt=ur,Ue=setTimeout(In,b),Pt?We(ur):Me}function Ln(ur){var Ai=ur-qe,_o=ur-lt,Aa=b-Ai;return At?QC(Aa,ue-_o):Aa}function jn(ur){var Ai=ur-qe,_o=ur-lt;return qe===void 0||Ai>=b||Ai<0||At&&_o>=ue}function In(){var ur=ry();if(jn(ur))return Gn(ur);Ue=setTimeout(In,Ln(ur))}function Gn(ur){return Ue=void 0,se&&H?We(ur):(H=ee=void 0,Me)}function ci(){Ue!==void 0&&clearTimeout(Ue),lt=0,H=qe=ee=Ue=void 0}function to(){return Ue===void 0?Me:Gn(ry())}function Ci(){var ur=ry(),Ai=jn(ur);if(H=arguments,ee=this,qe=ur,Ai){if(Ue===void 0)return Xt(qe);if(At)return clearTimeout(Ue),Ue=setTimeout(In,b),We(qe)}return Ue===void 0&&(Ue=setTimeout(In,b)),Me}return Ci.cancel=ci,Ci.flush=to,Ci}var e3=dS;function t3(h){var b=h==null?0:h.length;return b?h[b-1]:void 0}var fS=t3;function n3(h,b){return b.length<2?h:Ul(h,gx(b,0,-1))}var hS=n3;function pS(h){return typeof h=="number"&&h==_i(h)}var r3=pS;function i3(h,b){var I={};return b=lS(b),cS(h,function(H,ee,ue){Sa(I,ee,b(H,ee,ue))}),I}var iy=i3;function mS(h,b){return b=Xs(b,h),h=hS(h,b),h==null||delete h[ta(fS(b))]}var o3=mS,gS=9007199254740991,a3=Math.floor;function vS(h,b){var I="";if(!h||b<1||b>gS)return I;do b%2&&(I+=h),b=a3(b/2),b&&(h+=h);while(b);return I}var am=vS,yS=iS("length"),s3=yS,oy="\\ud800-\\udfff",l3="\\u0300-\\u036f",u3="\\ufe20-\\ufe2f",bS="\\u20d0-\\u20ff",c3=l3+u3+bS,_S="\\ufe0e\\ufe0f",sm="["+oy+"]",ay="["+c3+"]",sy="\\ud83c[\\udffb-\\udfff]",xS="(?:"+ay+"|"+sy+")",ly="[^"+oy+"]",uy="(?:\\ud83c[\\udde6-\\uddff]){2}",lm="[\\ud800-\\udbff][\\udc00-\\udfff]",wS="\\u200d",SS=xS+"?",cy="["+_S+"]?",d3="(?:"+wS+"(?:"+[ly,uy,lm].join("|")+")"+cy+SS+")*",f3=cy+SS+d3,Jl="(?:"+[ly+ay+"?",ay,uy,lm,sm].join("|")+")",vf=RegExp(sy+"(?="+sy+")|"+Jl+f3,"g");function h3(h){for(var b=vf.lastIndex=0;vf.test(h);)++b;return b}var ES=h3;function dy(h){return Xl(h)?ES(h):s3(h)}var kS=dy,p3=Math.ceil;function TS(h,b){b=b===void 0?" ":qd(b);var I=b.length;if(I<2)return I?am(b,h):b;var H=am(b,p3(h/kS(b)));return Xl(b)?vx(Mx(H),0,h).join(""):H.slice(0,h)}var MS=TS;function PS(h,b,I){h=mp(h),b=_i(b);var H=b?kS(h):0;return b&&H<b?MS(b-H,I)+h:h}var yf=PS;function m3(h,b){return h==null?!0:o3(h,b)}var fy=m3,g3=5*1e3,v3=class{constructor(h){le(this,"_cache",new ns),le(this,"_keepHotUntapDebounce"),He(this,h)}get type(){return"Theatre_SheetObject_PublicAPI"}get props(){return tt(this).propsP}get sheet(){return tt(this).sheet.publicApi}get project(){return tt(this).sheet.project.publicApi}get address(){return X({},tt(this).address)}_valuesPrism(){return this._cache.get("_valuesPrism",()=>{const h=tt(this);return(0,cc.prism)(()=>(0,cc.val)(h.getValues().getValue()))})}onValuesChange(h,b){return Pm(this._valuesPrism(),h,b)}get value(){const h=this._valuesPrism();{if(!h.isHot){this._keepHotUntapDebounce!=null&&this._keepHotUntapDebounce.flush();const b=h.keepHot();this._keepHotUntapDebounce=e3(()=>{b(),this._keepHotUntapDebounce=void 0},g3)}this._keepHotUntapDebounce&&this._keepHotUntapDebounce()}return h.getValue()}set initialValue(h){tt(this).setInitialValue(h)}};function CS(h){const b=new WeakMap;return I=>(b.has(I)||b.set(I,h(I)),b.get(I))}function bf(h){return h.type==="compound"||h.type==="enum"}function um(h,b){if(!h)return;const[I,...H]=b;if(I===void 0)return h;if(!bf(h))return;const ee=h.type==="enum"?h.cases[I]:h.props[I];return um(ee,H)}function y3(h){return!bf(h)}var b3=class{constructor(h,b,I){this.sheet=h,this.template=b,this.nativeObject=I,le(this,"$$isPointerToPrismProvider",!0),le(this,"address"),le(this,"publicApi"),le(this,"_initialValue",new or.Atom({})),le(this,"_cache",new ns),le(this,"_logger"),le(this,"_internalUtilCtx"),this._logger=h._logger.named("SheetObject",b.address.objectKey),this._logger._trace("creating object"),this._internalUtilCtx={logger:this._logger.utilFor.internal()},this.address=ie(X({},b.address),{sheetInstanceId:h.address.sheetInstanceId}),this.publicApi=new v3(this)}get type(){return"Theatre_SheetObject"}getValues(){return this._cache.get("getValues()",()=>(0,or.prism)(()=>{const h=(0,or.val)(this.template.getDefaultValues()),b=(0,or.val)(this._initialValue.pointer),I=or.prism.memo("withInitialCache",()=>new WeakMap,[]),H=ql(h,b,I),ee=(0,or.val)(this.template.getStaticValues()),ue=or.prism.memo("withStatics",()=>new WeakMap,[]);let Ue=ql(H,ee,ue),qe;{const Pt=or.prism.memo("seq",()=>this.getSequencedValues(),[]),At=or.prism.memo("withSeqsCache",()=>new WeakMap,[]);qe=(0,or.val)((0,or.val)(Pt)),Ue=ql(Ue,qe,At)}return kp("finalAtom",Ue).pointer}))}getValueByPointer(h){const b=(0,or.val)(this.getValues()),{path:I}=(0,or.getPointerParts)(h);return(0,or.val)(na(b,I))}pointerToPrism(h){const{path:b}=(0,or.getPointerParts)(h);return(0,or.prism)(()=>{const I=(0,or.val)(this.getValues());return(0,or.val)(na(I,b))})}getSequencedValues(){return(0,or.prism)(()=>{const h=or.prism.memo("tracksToProcess",()=>this.template.getArrayOfValidSequenceTracks(),[]),b=(0,or.val)(h),I=new or.Atom({}),H=(0,or.val)(this.template.configPointer);return or.prism.effect("processTracks",()=>{const ee=[];for(const{trackId:ue,pathToProp:Me}of b){const Ue=this._trackIdToPrism(ue),qe=um(H,Me),lt=qe.deserializeAndSanitize,Pt=qe.interpolate,At=()=>{const We=Ue.getValue();if(!We)return I.setByPointer(Gn=>na(Gn,Me),void 0);const Xt=lt(We.left),Ln=Xt===void 0?qe.default:Xt;if(We.right===void 0)return I.setByPointer(Gn=>na(Gn,Me),Ln);const jn=lt(We.right),In=jn===void 0?qe.default:jn;return I.setByPointer(Gn=>na(Gn,Me),Pt(Ln,In,We.progression))},se=Ue.onStale(At);At(),ee.push(se)}return()=>{for(const ue of ee)ue()}},[H,...b]),I.pointer})}_trackIdToPrism(h){const b=this.template.project.pointers.historic.sheetsById[this.address.sheetId].sequence.tracksByObject[this.address.objectKey].trackData[h],I=this.sheet.getSequence().positionPrism;return Wl(this._internalUtilCtx,b,I)}get propsP(){return this._cache.get("propsP",()=>(0,or.pointer)({root:this,path:[]}))}validateValue(h,b){}setInitialValue(h){this.validateValue(this.propsP,h),this._initialValue.set(h)}};function dr(h){return function(I,H){return h(I,H())}}var mo={_hmm:go(524),_todo:go(522),_error:go(521),errorDev:go(529),errorPublic:go(545),_kapow:go(268),_warn:go(265),warnDev:go(273),warnPublic:go(289),_debug:go(137),debugDev:go(145),_trace:go(73),traceDev:go(81)};function go(h){return Object.freeze({audience:is(h,8)?"internal":is(h,16)?"dev":"public",category:is(h,4)?"troubleshooting":is(h,2)?"todo":"general",level:is(h,512)?512:is(h,256)?256:is(h,128)?128:64})}function is(h,b){return(h&b)===b}function hr(h,b){return((b&32)===32?!0:(b&16)===16?h.dev:(b&8)===8?h.internal:!1)&&h.min<=b}var Ta={loggingConsoleStyle:!0,loggerConsoleStyle:!0,includes:Object.freeze({internal:!1,dev:!1,min:256}),filtered:function(){},include:function(){return{}},create:null,creatExt:null,named(h,b,I){return this.create({names:[...h.names,{name:b,key:I}]})},style:{bold:void 0,italic:void 0,cssMemo:new Map([["",""]]),collapseOnRE:/[a-z- ]+/g,color:void 0,collapsed(h){if(h.length<5)return h;const b=h.replace(this.collapseOnRE,"");return this.cssMemo.has(b)||this.cssMemo.set(b,this.css(h)),b},css(h){var b,I,H,ee;const ue=this.cssMemo.get(h);if(ue)return ue;let Me="color:".concat((I=(b=this.color)==null?void 0:b.call(this,h))!=null?I:"hsl(".concat((h.charCodeAt(0)+h.charCodeAt(h.length-1))%360,", 100%, 60%)"));return(H=this.bold)!=null&&H.test(h)&&(Me+=";font-weight:600"),(ee=this.italic)!=null&&ee.test(h)&&(Me+=";font-style:italic"),this.cssMemo.set(h,Me),Me}}};function Cc(h=console,b={}){const I=ie(X({},Ta),{includes:X({},Ta.includes)}),H={styled:Ql.bind(I,h),noStyle:w3.bind(I,h)},ee=x3.bind(I);function ue(){return I.loggingConsoleStyle&&I.loggerConsoleStyle?H.styled:H.noStyle}return I.create=ue(),{configureLogger(Me){var Ue;Me==="console"?(I.loggerConsoleStyle=Ta.loggerConsoleStyle,I.create=ue()):Me.type==="console"?(I.loggerConsoleStyle=(Ue=Me.style)!=null?Ue:Ta.loggerConsoleStyle,I.create=ue()):Me.type==="keyed"?(I.creatExt=qe=>Me.keyed(qe.names),I.create=ee):Me.type==="named"&&(I.creatExt=_3.bind(null,Me.named),I.create=ee)},configureLogging(Me){var Ue,qe,lt,Pt,At;I.includes.dev=(Ue=Me.dev)!=null?Ue:Ta.includes.dev,I.includes.internal=(qe=Me.internal)!=null?qe:Ta.includes.internal,I.includes.min=(lt=Me.min)!=null?lt:Ta.includes.min,I.include=(Pt=Me.include)!=null?Pt:Ta.include,I.loggingConsoleStyle=(At=Me.consoleStyle)!=null?At:Ta.loggingConsoleStyle,I.create=ue()},getLogger(){return I.create({names:[]})}}}function _3(h,b){const I=[];for(let{name:H,key:ee}of b.names)I.push(ee==null?H:"".concat(H," (").concat(ee,")"));return h(I)}function x3(h){const b=X(X({},this.includes),this.include(h)),I=this.filtered,H=this.named.bind(this,h),ee=this.creatExt(h),ue=hr(b,524),Me=hr(b,522),Ue=hr(b,521),qe=hr(b,529),lt=hr(b,545),Pt=hr(b,265),At=hr(b,268),se=hr(b,273),We=hr(b,289),Xt=hr(b,137),Ln=hr(b,145),jn=hr(b,73),In=hr(b,81),Gn=ue?ee.error.bind(ee,mo._hmm):I.bind(h,524),ci=Me?ee.error.bind(ee,mo._todo):I.bind(h,522),to=Ue?ee.error.bind(ee,mo._error):I.bind(h,521),Ci=qe?ee.error.bind(ee,mo.errorDev):I.bind(h,529),ur=lt?ee.error.bind(ee,mo.errorPublic):I.bind(h,545),Ai=At?ee.warn.bind(ee,mo._kapow):I.bind(h,268),_o=Pt?ee.warn.bind(ee,mo._warn):I.bind(h,265),Aa=se?ee.warn.bind(ee,mo.warnDev):I.bind(h,273),au=We?ee.warn.bind(ee,mo.warnPublic):I.bind(h,273),su=Xt?ee.debug.bind(ee,mo._debug):I.bind(h,137),Ia=Ln?ee.debug.bind(ee,mo.debugDev):I.bind(h,145),lu=jn?ee.trace.bind(ee,mo._trace):I.bind(h,73),us=In?ee.trace.bind(ee,mo.traceDev):I.bind(h,81),$r={_hmm:Gn,_todo:ci,_error:to,errorDev:Ci,errorPublic:ur,_kapow:Ai,_warn:_o,warnDev:Aa,warnPublic:au,_debug:su,debugDev:Ia,_trace:lu,traceDev:us,lazy:{_hmm:ue?dr(Gn):Gn,_todo:Me?dr(ci):ci,_error:Ue?dr(to):to,errorDev:qe?dr(Ci):Ci,errorPublic:lt?dr(ur):ur,_kapow:At?dr(Ai):Ai,_warn:Pt?dr(_o):_o,warnDev:se?dr(Aa):Aa,warnPublic:We?dr(au):au,_debug:Xt?dr(su):su,debugDev:Ln?dr(Ia):Ia,_trace:jn?dr(lu):lu,traceDev:In?dr(us):us},named:H,utilFor:{internal(){return{debug:$r._debug,error:$r._error,warn:$r._warn,trace:$r._trace,named(xo,_r){return $r.named(xo,_r).utilFor.internal()}}},dev(){return{debug:$r.debugDev,error:$r.errorDev,warn:$r.warnDev,trace:$r.traceDev,named(xo,_r){return $r.named(xo,_r).utilFor.dev()}}},public(){return{error:$r.errorPublic,warn:$r.warnPublic,debug(xo,_r){$r._warn('(public "debug" filtered out) '.concat(xo),_r)},trace(xo,_r){$r._warn('(public "trace" filtered out) '.concat(xo),_r)},named(xo,_r){return $r.named(xo,_r).utilFor.public()}}}}};return $r}function Ql(h,b){const I=X(X({},this.includes),this.include(b)),H=[];let ee="";for(let qe=0;qe<b.names.length;qe++){const{name:lt,key:Pt}=b.names[qe];if(ee+=" %c".concat(lt),H.push(this.style.css(lt)),Pt!=null){const At="%c#".concat(Pt);ee+=At,H.push(this.style.css(At))}}const ue=this.filtered,Me=this.named.bind(this,b),Ue=[ee,...H];return hy(ue,b,I,h,Ue,AS(Ue),Me)}function AS(h){const b=h.slice(0);for(let I=1;I<b.length;I++)b[I]+=";background-color:#e0005a;padding:2px;color:white";return b}function w3(h,b){const I=X(X({},this.includes),this.include(b));let H="";for(let Ue=0;Ue<b.names.length;Ue++){const{name:qe,key:lt}=b.names[Ue];H+=" ".concat(qe),lt!=null&&(H+="#".concat(lt))}const ee=this.filtered,ue=this.named.bind(this,b),Me=[H];return hy(ee,b,I,h,Me,Me,ue)}function hy(h,b,I,H,ee,ue,Me){const Ue=hr(I,524),qe=hr(I,522),lt=hr(I,521),Pt=hr(I,529),At=hr(I,545),se=hr(I,265),We=hr(I,268),Xt=hr(I,273),Ln=hr(I,289),jn=hr(I,137),In=hr(I,145),Gn=hr(I,73),ci=hr(I,81),to=Ue?H.error.bind(H,...ee):h.bind(b,524),Ci=qe?H.error.bind(H,...ee):h.bind(b,522),ur=lt?H.error.bind(H,...ee):h.bind(b,521),Ai=Pt?H.error.bind(H,...ee):h.bind(b,529),_o=At?H.error.bind(H,...ee):h.bind(b,545),Aa=We?H.warn.bind(H,...ue):h.bind(b,268),au=se?H.warn.bind(H,...ee):h.bind(b,265),su=Xt?H.warn.bind(H,...ee):h.bind(b,273),Ia=Ln?H.warn.bind(H,...ee):h.bind(b,273),lu=jn?H.info.bind(H,...ee):h.bind(b,137),us=In?H.info.bind(H,...ee):h.bind(b,145),$r=Gn?H.debug.bind(H,...ee):h.bind(b,73),xo=ci?H.debug.bind(H,...ee):h.bind(b,81),_r={_hmm:to,_todo:Ci,_error:ur,errorDev:Ai,errorPublic:_o,_kapow:Aa,_warn:au,warnDev:su,warnPublic:Ia,_debug:lu,debugDev:us,_trace:$r,traceDev:xo,lazy:{_hmm:Ue?dr(to):to,_todo:qe?dr(Ci):Ci,_error:lt?dr(ur):ur,errorDev:Pt?dr(Ai):Ai,errorPublic:At?dr(_o):_o,_kapow:We?dr(Aa):Aa,_warn:se?dr(au):au,warnDev:Xt?dr(su):su,warnPublic:Ln?dr(Ia):Ia,_debug:jn?dr(lu):lu,debugDev:In?dr(us):us,_trace:Gn?dr($r):$r,traceDev:ci?dr(xo):xo},named:Me,utilFor:{internal(){return{debug:_r._debug,error:_r._error,warn:_r._warn,trace:_r._trace,named(cs,ds){return _r.named(cs,ds).utilFor.internal()}}},dev(){return{debug:_r.debugDev,error:_r.errorDev,warn:_r.warnDev,trace:_r.traceDev,named(cs,ds){return _r.named(cs,ds).utilFor.dev()}}},public(){return{error:_r.errorPublic,warn:_r.warnPublic,debug(cs,ds){_r._warn('(public "debug" filtered out) '.concat(cs),ds)},trace(cs,ds){_r._warn('(public "trace" filtered out) '.concat(cs),ds)},named(cs,ds){return _r.named(cs,ds).utilFor.public()}}}}};return _r}var IS=Cc(console,{_debug:function(){},_error:function(){}});IS.configureLogging({dev:!0,min:64});var cm=IS.getLogger().named("Theatre.js (default logger)").utilFor.dev(),py=new WeakMap;function S3(h){const b=py.get(h);if(b)return b;const I=new Map;return py.set(h,I),DS([],h,I),I}function DS(h,b,I){for(const[H,ee]of Object.entries(b.props))if(!bf(ee)){const ue=[...h,H];I.set(JSON.stringify(ue),I.size),my(ue,ee,I)}for(const[H,ee]of Object.entries(b.props))if(bf(ee)){const ue=[...h,H];I.set(JSON.stringify(ue),I.size),my(ue,ee,I)}}function my(h,b,I){if(b.type==="compound")DS(h,b,I);else{if(b.type==="enum")throw new Error("Enums aren't supported yet");I.set(JSON.stringify(h),I.size)}}function OS(h){return typeof h=="object"&&h!==null&&Object.keys(h).length===0}var E3=class{constructor(h,b,I,H,ee){this.sheetTemplate=h,le(this,"address"),le(this,"type","Theatre_SheetObjectTemplate"),le(this,"_config"),le(this,"_temp_actions_atom"),le(this,"_cache",new ns),le(this,"project"),le(this,"pointerToSheetState"),le(this,"pointerToStaticOverrides"),this.address=ie(X({},h.address),{objectKey:b}),this._config=new Kr.Atom(H),this._temp_actions_atom=new Kr.Atom(ee),this.project=h.project,this.pointerToSheetState=this.sheetTemplate.project.pointers.historic.sheetsById[this.address.sheetId],this.pointerToStaticOverrides=this.pointerToSheetState.staticOverrides.byObject[this.address.objectKey]}get staticConfig(){return this._config.get()}get configPointer(){return this._config.pointer}get _temp_actions(){return this._temp_actions_atom.get()}get _temp_actionsPointer(){return this._temp_actions_atom.pointer}createInstance(h,b,I){return this._config.set(I),new b3(h,this,b)}reconfigure(h){this._config.set(h)}_temp_setActions(h){this._temp_actions_atom.set(h)}getDefaultValues(){return this._cache.get("getDefaultValues()",()=>(0,Kr.prism)(()=>{const h=(0,Kr.val)(this.configPointer);return G0(h)}))}getStaticValues(){return this._cache.get("getStaticValues",()=>(0,Kr.prism)(()=>{var h;const b=(h=(0,Kr.val)(this.pointerToStaticOverrides))!=null?h:{};return(0,Kr.val)(this.configPointer).deserializeAndSanitize(b)||{}}))}getArrayOfValidSequenceTracks(){return this._cache.get("getArrayOfValidSequenceTracks",()=>(0,Kr.prism)(()=>{const h=this.project.pointers.historic.sheetsById[this.address.sheetId],b=(0,Kr.val)(h.sequence.tracksByObject[this.address.objectKey].trackIdByPropPath);if(!b)return yt;const I=[];if(!b)return yt;const H=(0,Kr.val)(this.configPointer),ee=Object.entries(b);for(const[Me,Ue]of ee){const qe=RS(Me);if(!qe)continue;const lt=um(H,qe);!(lt&&y3(lt))||I.push({pathToProp:qe,trackId:Ue})}const ue=S3(H);return I.sort((Me,Ue)=>{const qe=Me.pathToProp,lt=Ue.pathToProp,Pt=ue.get(JSON.stringify(qe)),At=ue.get(JSON.stringify(lt));return Pt>At?1:-1}),I.length===0?yt:I}))}getMapOfValidSequenceTracks_forStudio(){return this._cache.get("getMapOfValidSequenceTracks_forStudio",()=>(0,Kr.prism)(()=>{const h=(0,Kr.val)(this.getArrayOfValidSequenceTracks());let b={};for(const{pathToProp:I,trackId:H}of h)Zs(b,I,H);return b}))}getStaticButNotSequencedOverrides(){return this._cache.get("getStaticButNotSequencedOverrides",()=>(0,Kr.prism)(()=>{const h=(0,Kr.val)(this.getStaticValues()),b=(0,Kr.val)(this.getArrayOfValidSequenceTracks()),I=Wv(h);for(const{pathToProp:H}of b){fy(I,H);let ee=H.slice(0,-1);for(;ee.length>0;){const ue=$s(I,ee);if(!OS(ue))break;fy(I,ee),ee=ee.slice(0,-1)}}if(!OS(I))return I}))}getDefaultsAtPointer(h){const{path:b}=(0,Kr.getPointerParts)(h),I=this.getDefaultValues().getValue();return $s(I,b)}};function RS(h){try{return JSON.parse(h)}catch{cm.warn("property ".concat(JSON.stringify(h)," cannot be parsed. Skipping."));return}}var LS=St,k3=CS(h=>JSON.stringify(h));_e(te());var zS=class extends Error{},_f=class extends zS{},NS=St,FS=St,T3=St,ui=St;function os(){let h,b;const I=new Promise((ee,ue)=>{h=Me=>{ee(Me),H.status="resolved"},b=Me=>{ue(Me),H.status="rejected"}}),H={resolve:h,reject:b,promise:I,status:"pending"};return H}var gy=()=>{},xf=gy,M3=St,P3=class{constructor(){le(this,"_stopPlayCallback",xf),le(this,"_state",new M3.Atom({position:0,playing:!1})),le(this,"statePointer"),this.statePointer=this._state.pointer}destroy(){}pause(){this._stopPlayCallback(),this.playing=!1,this._stopPlayCallback=xf}gotoPosition(h){this._updatePositionInState(h)}_updatePositionInState(h){this._state.setByPointer(b=>b.position,h)}getCurrentPosition(){return this._state.get().position}get playing(){return this._state.get().playing}set playing(h){this._state.setByPointer(b=>b.playing,h)}play(h,b,I,H,ee){this.playing&&this.pause(),this.playing=!0;const ue=b[1]-b[0];{const se=this.getCurrentPosition();se<b[0]||se>b[1]?H==="normal"||H==="alternate"?this._updatePositionInState(b[0]):(H==="reverse"||H==="alternateReverse")&&this._updatePositionInState(b[1]):H==="normal"||H==="alternate"?se===b[1]&&this._updatePositionInState(b[0]):se===b[0]&&this._updatePositionInState(b[1])}const Me=os(),Ue=ee.time,qe=ue*h;let lt=this.getCurrentPosition()-b[0];(H==="reverse"||H==="alternateReverse")&&(lt=b[1]-this.getCurrentPosition());const Pt=se=>{const Xt=Math.max(se-Ue,0)/1e3,Ln=Math.min(Xt*I+lt,qe);if(Ln!==qe){const jn=Math.floor(Ln/ue);let In=Ln/ue%1*ue;if(H!=="normal")if(H==="reverse")In=ue-In;else{const Gn=jn%2===0;H==="alternate"?Gn||(In=ue-In):Gn&&(In=ue-In)}this._updatePositionInState(In+b[0]),At()}else{if(H==="normal")this._updatePositionInState(b[1]);else if(H==="reverse")this._updatePositionInState(b[0]);else{const jn=(h-1)%2===0;H==="alternate"?jn?this._updatePositionInState(b[1]):this._updatePositionInState(b[0]):jn?this._updatePositionInState(b[0]):this._updatePositionInState(b[1])}this.playing=!1,Me.resolve(!0)}};this._stopPlayCallback=()=>{ee.offThisOrNextTick(Pt),ee.offNextTick(Pt),this.playing&&Me.resolve(!1)};const At=()=>ee.onNextTick(Pt);return ee.onThisOrNextTick(Pt),Me.promise}playDynamicRange(h,b){this.playing&&this.pause(),this.playing=!0;const I=os(),H=h.keepHot();I.promise.then(H,H);let ee=b.time;const ue=Ue=>{const qe=Math.max(Ue-ee,0);ee=Ue;const lt=qe/1e3,Pt=this.getCurrentPosition(),At=h.getValue();if(Pt<At[0]||Pt>At[1])this.gotoPosition(At[0]);else{let se=Pt+lt;se>At[1]&&(se=At[0]+(se-At[1])),this.gotoPosition(se)}Me()};this._stopPlayCallback=()=>{b.offThisOrNextTick(ue),b.offNextTick(ue),I.resolve(!1)};const Me=()=>b.onNextTick(ue);return b.onThisOrNextTick(ue),I.promise}},BS=St,C3="__TheatreJS_StudioBundle",dm="__TheatreJS_CoreBundle",jS="__TheatreJS_Notifications",fm=h=>(...b)=>{var I;switch(h){case"success":{cm.debug(b.slice(0,2).join(`
`));break}case"info":{cm.debug(b.slice(0,2).join(`
`));break}case"warning":{cm.warn(b.slice(0,2).join(`
`));break}}return typeof window!="undefined"?(I=window[jS])==null?void 0:I.notify[h](...b):void 0},eu={warning:fm("warning"),success:fm("success"),info:fm("info"),error:fm("error")};typeof window!="undefined"&&(window.addEventListener("error",h=>{eu.error("An error occurred","<pre>".concat(h.message,`</pre>

See **console** for details.`))}),window.addEventListener("unhandledrejection",h=>{eu.error("An error occurred","<pre>".concat(h.reason,`</pre>

See **console** for details.`))}));var US=class{constructor(h,b,I){this._decodedBuffer=h,this._audioContext=b,this._nodeDestination=I,le(this,"_mainGain"),le(this,"_state",new BS.Atom({position:0,playing:!1})),le(this,"statePointer"),le(this,"_stopPlayCallback",xf),this.statePointer=this._state.pointer,this._mainGain=this._audioContext.createGain(),this._mainGain.connect(this._nodeDestination)}playDynamicRange(h,b){const I=os();this._playing&&this.pause(),this._playing=!0;let H;const ee=()=>{H==null||H(),H=this._loopInRange(h.getValue(),b).stop},ue=h.onStale(ee);return ee(),this._stopPlayCallback=()=>{H==null||H(),ue(),I.resolve(!1)},I.promise}_loopInRange(h,b){let H=this.getCurrentPosition();const ee=h[1]-h[0];H<h[0]||H>h[1]?this._updatePositionInState(h[0]):H===h[1]&&this._updatePositionInState(h[0]),H=this.getCurrentPosition();const ue=this._audioContext.createBufferSource();ue.buffer=this._decodedBuffer,ue.connect(this._mainGain),ue.playbackRate.value=1,ue.loop=!0,ue.loopStart=h[0],ue.loopEnd=h[1];const Me=b.time;let Ue=H-h[0];ue.start(0,H);const qe=At=>{let Ln=(Math.max(At-Me,0)/1e3*1+Ue)/ee%1*ee;this._updatePositionInState(Ln+h[0]),lt()},lt=()=>b.onNextTick(qe);return b.onThisOrNextTick(qe),{stop:()=>{ue.stop(),ue.disconnect(),b.offThisOrNextTick(qe),b.offNextTick(qe)}}}get _playing(){return this._state.get().playing}set _playing(h){this._state.setByPointer(b=>b.playing,h)}destroy(){}pause(){this._stopPlayCallback(),this._playing=!1,this._stopPlayCallback=xf}gotoPosition(h){this._updatePositionInState(h)}_updatePositionInState(h){this._state.reduce(b=>ie(X({},b),{position:h}))}getCurrentPosition(){return this._state.get().position}play(h,b,I,H,ee){this._playing&&this.pause(),this._playing=!0;let ue=this.getCurrentPosition();const Me=b[1]-b[0];if(H!=="normal")throw new _f('Audio-controlled sequences can only be played in the "normal" direction. '+"'".concat(H,"' given."));ue<b[0]||ue>b[1]?this._updatePositionInState(b[0]):ue===b[1]&&this._updatePositionInState(b[0]),ue=this.getCurrentPosition();const Ue=os(),qe=this._audioContext.createBufferSource();qe.buffer=this._decodedBuffer,qe.connect(this._mainGain),qe.playbackRate.value=I,h>1e3&&(eu.warning("Can't play sequences with audio more than 1000 times","The sequence will still play, but only 1000 times. The `iterationCount: ".concat(h,"` provided to `sequence.play()`\nis too high for a sequence with audio.\n\nTo fix this, either set `iterationCount` to a lower value, or remove the audio from the sequence."),[{url:"https://www.theatrejs.com/docs/latest/manual/audio",title:"Using Audio"},{url:"https://www.theatrejs.com/docs/latest/api/core#sequence.attachaudio",title:"Audio API"}]),h=1e3),h>1&&(qe.loop=!0,qe.loopStart=b[0],qe.loopEnd=b[1]);const lt=ee.time;let Pt=ue-b[0];const At=Me*h;qe.start(0,ue,At-Pt);const se=Ln=>{const In=Math.max(Ln-lt,0)/1e3,Gn=Math.min(In*I+Pt,At);if(Gn!==At){let ci=Gn/Me%1*Me;this._updatePositionInState(ci+b[0]),Xt()}else this._updatePositionInState(b[1]),this._playing=!1,We(),Ue.resolve(!0)},We=()=>{qe.stop(),qe.disconnect()};this._stopPlayCallback=()=>{We(),ee.offThisOrNextTick(se),ee.offNextTick(se),this._playing&&Ue.resolve(!1)};const Xt=()=>ee.onNextTick(se);return ee.onThisOrNextTick(se),Ue.promise}},A3=St,VS=0;function el(h){var b;const I=Me=>{H.tick(Me)},H=new A3.Ticker({onActive(){var Me;(Me=h==null?void 0:h.start)==null||Me.call(h)},onDormant(){var Me;(Me=h==null?void 0:h.stop)==null||Me.call(h)}}),ee={tick:I,id:VS++,name:(b=h==null?void 0:h.name)!=null?b:"CustomRafDriver-".concat(VS),type:"Theatre_RafDriver_PublicAPI"},ue={type:"Theatre_RafDriver_PrivateAPI",publicApi:ee,ticker:H,start:h==null?void 0:h.start,stop:h==null?void 0:h.stop};return He(ee,ue),ee}function vy(){let h=null;const H=el({name:"DefaultCoreRafDriver",start:()=>{if(typeof window!="undefined"){const ee=ue=>{H.tick(ue),h=window.requestAnimationFrame(ee)};h=window.requestAnimationFrame(ee)}else H.tick(0),setTimeout(()=>H.tick(1),0)},stop:()=>{typeof window!="undefined"&&h!==null&&window.cancelAnimationFrame(h)}});return H}var wf;function yy(){return wf||GS(vy()),wf}function HS(){return yy().ticker}function GS(h){if(wf)throw new Error("`setCoreRafDriver()` is already called.");wf=tt(h)}var WS=class{get type(){return"Theatre_Sequence_PublicAPI"}constructor(h){He(this,h)}play(h){const b=tt(this);if(b._project.isReady()){const I=h!=null&&h.rafDriver?tt(h.rafDriver).ticker:HS();return b.play(h!=null?h:{},I)}else{const I=os();return I.resolve(!0),I.promise}}pause(){tt(this).pause()}get position(){return tt(this).position}set position(h){tt(this).position=h}__experimental_getKeyframes(h){return tt(this).getKeyframesOfSimpleProp(h)}async attachAudio(h){const{audioContext:b,destinationNode:I,decodedBuffer:H,gainNode:ee}=await qS(h),ue=new US(H,b,ee);return tt(this).replacePlaybackController(ue),{audioContext:b,destinationNode:I,decodedBuffer:H,gainNode:ee}}get pointer(){return tt(this).pointer}};async function qS(h){function b(){if(h.audioContext)return Promise.resolve(h.audioContext);const lt=new AudioContext;return lt.state==="running"||typeof window=="undefined"?Promise.resolve(lt):new Promise(Pt=>{const At=()=>{lt.resume().catch(Xt=>{console.error(Xt)})},se=["mousedown","keydown","touchstart"],We={capture:!0,passive:!1};se.forEach(Xt=>{window.addEventListener(Xt,At,We)}),lt.addEventListener("statechange",()=>{lt.state==="running"&&(se.forEach(Xt=>{window.removeEventListener(Xt,At,We)}),Pt(lt))})})}async function I(){if(h.source instanceof AudioBuffer)return h.source;const lt=os();if(typeof h.source!="string")throw new Error("Error validating arguments to sequence.attachAudio(). args.source must either be a string or an instance of AudioBuffer.");let Pt;try{Pt=await fetch(h.source)}catch(Xt){throw console.error(Xt),new Error("Could not fetch '".concat(h.source,"'. Network error logged above."))}let At;try{At=await Pt.arrayBuffer()}catch(Xt){throw console.error(Xt),new Error("Could not read '".concat(h.source,"' as an arrayBuffer."))}(await H).decodeAudioData(At,lt.resolve,lt.reject);let We;try{We=await lt.promise}catch(Xt){throw console.error(Xt),new Error("Could not decode ".concat(h.source," as an audio file."))}return We}const H=b(),ee=I(),[ue,Me]=await Promise.all([H,ee]),Ue=h.destinationNode||ue.destination,qe=ue.createGain();return qe.connect(Ue),{audioContext:ue,decodedBuffer:Me,gainNode:qe,destinationNode:Ue}}var I3=D3("Theatre_SheetObject");function D3(h){return b=>typeof b=="object"&&!!b&&b.type===h}var KS=class{constructor(h,b,I,H,ee){this._project=h,this._sheet=b,this._lengthD=I,this._subUnitsPerUnitD=H,le(this,"address"),le(this,"publicApi"),le(this,"_playbackControllerBox"),le(this,"_prismOfStatePointer"),le(this,"_positionD"),le(this,"_positionFormatterD"),le(this,"_playableRangeD"),le(this,"pointer",(0,T3.pointer)({root:this,path:[]})),le(this,"$$isPointerToPrismProvider",!0),le(this,"_logger"),le(this,"closestGridPosition",ue=>{const Me=this.subUnitsPerUnit,Ue=1/Me;return parseFloat((Math.round(ue/Ue)*Ue).toFixed(3))}),this._logger=h._logger.named("Sheet",b.address.sheetId).named("Instance",b.address.sheetInstanceId),this.address=ie(X({},this._sheet.address),{sequenceName:"default"}),this.publicApi=new WS(this),this._playbackControllerBox=new FS.Atom(ee!=null?ee:new P3),this._prismOfStatePointer=(0,ui.prism)(()=>this._playbackControllerBox.prism.getValue().statePointer),this._positionD=(0,ui.prism)(()=>{const ue=this._prismOfStatePointer.getValue();return(0,ui.val)(ue.position)}),this._positionFormatterD=(0,ui.prism)(()=>{const ue=(0,ui.val)(this._subUnitsPerUnitD);return new XS(ue)})}get type(){return"Theatre_Sequence"}pointerToPrism(h){const{path:b}=(0,NS.getPointerParts)(h);if(b.length===0)return(0,ui.prism)(()=>({length:(0,ui.val)(this.pointer.length),playing:(0,ui.val)(this.pointer.playing),position:(0,ui.val)(this.pointer.position),subUnitsPerUnit:(0,ui.val)(this.pointer.subUnitsPerUnit)}));if(b.length>1)return(0,ui.prism)(()=>{});const[I]=b;return I==="length"?this._lengthD:I==="subUnitsPerUnit"?this._subUnitsPerUnitD:I==="position"?this._positionD:I==="playing"?(0,ui.prism)(()=>(0,ui.val)(this._prismOfStatePointer.getValue().playing)):(0,ui.prism)(()=>{})}getKeyframesOfSimpleProp(h){const{path:b,root:I}=(0,NS.getPointerParts)(h);if(!I3(I))throw new _f("Argument prop must be a pointer to a SheetObject property");const H=(0,ui.val)(this._project.pointers.historic.sheetsById[this._sheet.address.sheetId].sequence.tracksByObject[I.address.objectKey]);if(!H)return[];const{trackData:ee,trackIdByPropPath:ue}=H,Me=k3(b),Ue=ue[Me];if(!Ue)return[];const qe=ee[Ue];return qe?qe.keyframes:[]}get positionFormatter(){return this._positionFormatterD.getValue()}get prismOfStatePointer(){return this._prismOfStatePointer}get length(){return this._lengthD.getValue()}get positionPrism(){return this._positionD}get position(){return this._playbackControllerBox.get().getCurrentPosition()}get subUnitsPerUnit(){return this._subUnitsPerUnitD.getValue()}get positionSnappedToGrid(){return this.closestGridPosition(this.position)}set position(h){let b=h;this.pause(),b>this.length&&(b=this.length);const I=this.length;this._playbackControllerBox.get().gotoPosition(b>I?I:b)}getDurationCold(){return this._lengthD.getValue()}get playing(){return(0,ui.val)(this._playbackControllerBox.get().statePointer.playing)}_makeRangeFromSequenceTemplate(){return(0,ui.prism)(()=>[0,(0,ui.val)(this._lengthD)])}playDynamicRange(h,b){return this._playbackControllerBox.get().playDynamicRange(h,b)}async play(h,b){const I=this.length,H=h&&h.range?h.range:[0,I],ee=h&&typeof h.iterationCount=="number"?h.iterationCount:1,ue=h&&typeof h.rate!="undefined"?h.rate:1,Me=h&&h.direction?h.direction:"normal";return await this._play(ee,[H[0],H[1]],ue,Me,b)}_play(h,b,I,H,ee){return this._playbackControllerBox.get().play(h,b,I,H,ee)}pause(){this._playbackControllerBox.get().pause()}replacePlaybackController(h){this.pause();const b=this._playbackControllerBox.get();this._playbackControllerBox.set(h);const I=b.getCurrentPosition();b.destroy(),h.gotoPosition(I)}},XS=class{constructor(h){this._fps=h}formatSubUnitForGrid(h){const b=h%1,I=1/this._fps;return Math.round(b/I)+"f"}formatFullUnitForGrid(h){let b=h,I="";b>=vo&&(I+=Math.floor(b/vo)+"h",b=b%vo),b>=nu&&(I+=Math.floor(b/nu)+"m",b=b%nu),b>=tu&&(I+=Math.floor(b/tu)+"s",b=b%tu);const H=1/this._fps;return b>=H&&(I+=Math.floor(b/H)+"f",b=b%H),I.length===0?"0s":I}formatForPlayhead(h){let b=h,I="";if(b>=vo){const ee=Math.floor(b/vo);I+=yf(ee.toString(),2,"0")+"h",b=b%vo}if(b>=nu){const ee=Math.floor(b/nu);I+=yf(ee.toString(),2,"0")+"m",b=b%nu}else I.length>0&&(I+="00m");if(b>=tu){const ee=Math.floor(b/tu);I+=yf(ee.toString(),2,"0")+"s",b=b%tu}else I+="00s";const H=1/this._fps;if(b>=H){const ee=Math.round(b/H);I+=yf(ee.toString(),2,"0")+"f",b=b%H}else b/H>.98?(I+=yf(1 .toString(),2,"0")+"f",b=b%H):I+="00f";return I.length===0?"00s00f":I}formatBasic(h){return h.toFixed(2)+"s"}},tu=1,nu=tu*60,vo=nu*60,by={};O(by,{boolean:()=>tE,compound:()=>Pa,file:()=>JS,image:()=>Cn,number:()=>Bo,rgba:()=>eE,string:()=>nE,stringLiteral:()=>N3});function Xr(h,b){return h.length<=b?h:h.substr(0,b-3)+"..."}var O3=h=>typeof h=="string"?'string("'.concat(Xr(h,10),'")'):typeof h=="number"?"number(".concat(Xr(String(h),10),")"):h===null?"null":h===void 0?"undefined":typeof h=="boolean"?String(h):Array.isArray(h)?"array":typeof h=="object"?"object":"unknown",$S=O3;function Ie(h,{removeAlphaIfOpaque:b=!1}={}){const I=(h.a*255|256).toString(16).slice(1),H=(h.r*255|1<<8).toString(16).slice(1)+(h.g*255|1<<8).toString(16).slice(1)+(h.b*255|1<<8).toString(16).slice(1)+(b&&I==="ff"?"":I);return"#".concat(H)}function _y(h){return ie(X({},h),{toString(){return Ie(this,{removeAlphaIfOpaque:!0})}})}function R3(h){return Object.fromEntries(Object.entries(h).map(([b,I])=>[b,cf(I,0,1)]))}function L3(h){function b(I){return I>=.0031308?1.055*I**(1/2.4)-.055:12.92*I}return R3({r:b(h.r),g:b(h.g),b:b(h.b),a:h.a})}function Ma(h){function b(I){return I>=.04045?((I+.055)/(1+.055))**2.4:I/12.92}return{r:b(h.r),g:b(h.g),b:b(h.b),a:h.a}}function ZS(h){let b=.4122214708*h.r+.5363325363*h.g+.0514459929*h.b,I=.2119034982*h.r+.6806995451*h.g+.1073969566*h.b,H=.0883024619*h.r+.2817188376*h.g+.6299787005*h.b,ee=Math.cbrt(b),ue=Math.cbrt(I),Me=Math.cbrt(H);return{L:.2104542553*ee+.793617785*ue-.0040720468*Me,a:1.9779984951*ee-2.428592205*ue+.4505937099*Me,b:.0259040371*ee+.7827717662*ue-.808675766*Me,alpha:h.a}}function Tn(h){let b=h.L+.3963377774*h.a+.2158037573*h.b,I=h.L-.1055613458*h.a-.0638541728*h.b,H=h.L-.0894841775*h.a-1.291485548*h.b,ee=b*b*b,ue=I*I*I,Me=H*H*H;return{r:4.0767416621*ee-3.3077115913*ue+.2309699292*Me,g:-1.2684380046*ee+2.6097574011*ue-.3413193965*Me,b:-.0041960863*ee-.7034186147*ue+1.707614701*Me,a:h.alpha}}var as=Symbol("TheatrePropType_Basic");function Sf(h){return typeof h=="object"&&!!h&&h[as]==="TheatrePropType"}function hm(h){if(typeof h=="number")return Bo(h);if(typeof h=="boolean")return tE(h);if(typeof h=="string")return nE(h);if(typeof h=="object"&&!!h){if(Sf(h))return h;if(px(h))return Pa(h);throw new _f("This value is not a valid prop type: ".concat($S(h)))}else throw new _f("This value is not a valid prop type: ".concat($S(h)))}function YS(h){const b={};for(const I of Object.keys(h)){const H=h[I];Sf(H)?b[I]=H:b[I]=hm(H)}return b}var Pa=(h,b={})=>{const I=YS(h),H=new WeakMap;return{type:"compound",props:I,valueType:null,[as]:"TheatrePropType",label:b.label,default:iy(I,ue=>ue.default),deserializeAndSanitize:ue=>{if(typeof ue!="object"||!ue)return;if(H.has(ue))return H.get(ue);const Me={};let Ue=!1;for(const[qe,lt]of Object.entries(I))if(Object.prototype.hasOwnProperty.call(ue,qe)){const Pt=lt.deserializeAndSanitize(ue[qe]);Pt!=null&&(Ue=!0,Me[qe]=Pt)}if(H.set(ue,Me),Ue)return Me}}},JS=(h,b={})=>{const I=(H,ee,ue)=>{var Me;const Ue=(Me=b.interpolate)!=null?Me:Ic;return{type:"file",id:Ue(H.id,ee.id,ue)}};return{type:"file",default:{type:"file",id:h},valueType:null,[as]:"TheatrePropType",label:b.label,interpolate:I,deserializeAndSanitize:ru}},ru=h=>{if(!h)return;let b=!0;if(typeof h.id!="string"&&![null,void 0].includes(h.id)&&(b=!1),h.type!=="file"&&(b=!1),!!b)return h},Cn=(h,b={})=>{const I=(H,ee,ue)=>{var Me;const Ue=(Me=b.interpolate)!=null?Me:Ic;return{type:"image",id:Ue(H.id,ee.id,ue)}};return{type:"image",default:{type:"image",id:h},valueType:null,[as]:"TheatrePropType",label:b.label,interpolate:I,deserializeAndSanitize:xy}},xy=h=>{if(!h)return;let b=!0;if(typeof h.id!="string"&&![null,void 0].includes(h.id)&&(b=!1),h.type!=="image"&&(b=!1),!!b)return h},Bo=(h,b={})=>{var I;return ie(X({type:"number",valueType:0,default:h,[as]:"TheatrePropType"},b||{}),{label:b.label,nudgeFn:(I=b.nudgeFn)!=null?I:iE,nudgeMultiplier:typeof b.nudgeMultiplier=="number"?b.nudgeMultiplier:void 0,interpolate:QS,deserializeAndSanitize:Ac(b.range)})},Ac=h=>h?b=>{if(!!(typeof b=="number"&&isFinite(b)))return cf(b,h[0],h[1])}:pm,pm=h=>typeof h=="number"&&isFinite(h)?h:void 0,QS=(h,b,I)=>h+I*(b-h),eE=(h={r:0,g:0,b:0,a:1},b={})=>{const I={};for(const H of["r","g","b","a"])I[H]=Math.min(Math.max(h[H],0),1);return{type:"rgba",valueType:null,default:_y(I),[as]:"TheatrePropType",label:b.label,interpolate:on,deserializeAndSanitize:wy}},wy=h=>{if(!h)return;let b=!0;for(const H of["r","g","b","a"])(!Object.prototype.hasOwnProperty.call(h,H)||typeof h[H]!="number")&&(b=!1);if(!b)return;const I={};for(const H of["r","g","b","a"])I[H]=Math.min(Math.max(h[H],0),1);return _y(I)},on=(h,b,I)=>{const H=ZS(Ma(h)),ee=ZS(Ma(b)),ue={L:(1-I)*H.L+I*ee.L,a:(1-I)*H.a+I*ee.a,b:(1-I)*H.b+I*ee.b,alpha:(1-I)*H.alpha+I*ee.alpha},Me=L3(Tn(ue));return _y(Me)},tE=(h,b={})=>{var I;return{type:"boolean",default:h,valueType:null,[as]:"TheatrePropType",label:b.label,interpolate:(I=b.interpolate)!=null?I:Ic,deserializeAndSanitize:z3}},z3=h=>typeof h=="boolean"?h:void 0;function Ic(h){return h}var nE=(h,b={})=>{var I;return{type:"string",default:h,valueType:null,[as]:"TheatrePropType",label:b.label,interpolate:(I=b.interpolate)!=null?I:Ic,deserializeAndSanitize:rE}};function rE(h){return typeof h=="string"?h:void 0}function N3(h,b,I={}){var H,ee;return{type:"stringLiteral",default:h,valuesAndLabels:X({},b),[as]:"TheatrePropType",valueType:null,as:(H=I.as)!=null?H:"menu",label:I.label,interpolate:(ee=I.interpolate)!=null?ee:Ic,deserializeAndSanitize(ue){if(typeof ue=="string"&&Object.prototype.hasOwnProperty.call(b,ue))return ue}}}var iE=({config:h,deltaX:b,deltaFraction:I,magnitude:H})=>{var ee;const{range:ue}=h;return!h.nudgeMultiplier&&ue&&!ue.includes(1/0)&&!ue.includes(-1/0)?I*(ue[1]-ue[0])*H:b*H*((ee=h.nudgeMultiplier)!=null?ee:1)},oE=h=>h.replace(/^[\s\/]*/,"").replace(/[\s\/]*$/,"").replace(/\s*\/\s*/g," / ");function mm(h,b){return oE(h)}_e(me());var F3=class{get type(){return"Theatre_Sheet_PublicAPI"}constructor(h){He(this,h)}object(h,b,I){const H=tt(this),ee=mm(h),ue=H.getObject(ee),Me=null,Ue=I==null?void 0:I.__actions__THIS_API_IS_UNSTABLE_AND_WILL_CHANGE_IN_THE_NEXT_VERSION;if(ue)return Ue&&ue.template._temp_setActions(Ue),ue.publicApi;{const qe=Pa(b);return H.createObject(ee,Me,qe,Ue).publicApi}}__experimental_getExistingObject(h){const b=tt(this),I=mm(h),H=b.getObject(I);return H==null?void 0:H.publicApi}get sequence(){return tt(this).getSequence().publicApi}get project(){return tt(this).project.publicApi}get address(){return X({},tt(this).address)}detachObject(h){const b=tt(this),I=mm(h);if(!b.getObject(I)){eu.warning(`Couldn't delete object "`.concat(I,'"'),'There is no object with key "'.concat(I,`".

To fix this, make sure you are calling \`sheet.deleteObject("`).concat(I,'")` with the correct key.')),console.warn('Object key "'.concat(I,'" does not exist.'));return}b.deleteObject(I)}},Dc=St,B3=class{constructor(h,b){this.template=h,this.instanceId=b,le(this,"_objects",new Dc.Atom({})),le(this,"_sequence"),le(this,"address"),le(this,"publicApi"),le(this,"project"),le(this,"objectsP",this._objects.pointer),le(this,"type","Theatre_Sheet"),le(this,"_logger"),this._logger=h.project._logger.named("Sheet",b),this._logger._trace("creating sheet"),this.project=h.project,this.address=ie(X({},h.address),{sheetInstanceId:this.instanceId}),this.publicApi=new F3(this)}createObject(h,b,I,H={}){const ue=this.template.getObjectTemplate(h,b,I,H).createInstance(this,b,I);return this._objects.setByPointer(Me=>Me[h],ue),ue}getObject(h){return this._objects.get()[h]}deleteObject(h){this._objects.reduce(b=>{const I=X({},b);return delete I[h],I})}getSequence(){if(!this._sequence){const h=(0,Dc.prism)(()=>{const I=(0,Dc.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.length);return aE(I)}),b=(0,Dc.prism)(()=>{const I=(0,Dc.val)(this.project.pointers.historic.sheetsById[this.address.sheetId].sequence.subUnitsPerUnit);return sE(I)});this._sequence=new KS(this.template.project,this,h,b)}return this._sequence}},aE=h=>typeof h=="number"&&isFinite(h)&&h>0?h:10,sE=h=>typeof h=="number"&&r3(h)&&h>=1&&h<=1e3?h:30,Sy=class{constructor(h,b){this.project=h,le(this,"type","Theatre_SheetTemplate"),le(this,"address"),le(this,"_instances",new LS.Atom({})),le(this,"instancesP",this._instances.pointer),le(this,"_objectTemplates",new LS.Atom({})),le(this,"objectTemplatesP",this._objectTemplates.pointer),this.address=ie(X({},h.address),{sheetId:b})}getInstance(h){let b=this._instances.get()[h];return b||(b=new B3(this,h),this._instances.setByPointer(I=>I[h],b)),b}getObjectTemplate(h,b,I,H){let ee=this._objectTemplates.get()[h];return ee||(ee=new E3(this,h,b,I,H),this._objectTemplates.setByPointer(ue=>ue[h],ee)),ee}},Ey=St,lE=St,j3=h=>new Promise(b=>setTimeout(b,h)),U3=j3;function zr(h){for(var b=arguments.length,I=Array(b>1?b-1:0),H=1;H<b;H++)I[H-1]=arguments[H];throw Error("[Immer] minified error nr: "+h+(I.length?" "+I.map(function(ee){return"'"+ee+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ra(h){return!!h&&!!h[xi]}function tl(h){return!!h&&(function(b){if(!b||typeof b!="object")return!1;var I=Object.getPrototypeOf(b);if(I===null)return!0;var H=Object.hasOwnProperty.call(I,"constructor")&&I.constructor;return H===Object||typeof H=="function"&&Function.toString.call(H)===Dy}(h)||Array.isArray(h)||!!h[Iy]||!!h.constructor[Iy]||ym(h)||bm(h))}function ky(h){return ra(h)||zr(23,h),h[xi].t}function yo(h,b,I){I===void 0&&(I=!1),nl(h)===0?(I?Object.keys:Tm)(h).forEach(function(H){I&&typeof H=="symbol"||b(H,h[H],h)}):h.forEach(function(H,ee){return b(ee,H,h)})}function nl(h){var b=h[xi];return b?b.i>3?b.i-4:b.i:Array.isArray(h)?1:ym(h)?2:bm(h)?3:0}function gm(h,b){return nl(h)===2?h.has(b):Object.prototype.hasOwnProperty.call(h,b)}function uE(h,b){return nl(h)===2?h.get(b):h[b]}function vm(h,b,I){var H=nl(h);H===2?h.set(b,I):H===3?(h.delete(b),h.add(I)):h[b]=I}function cE(h,b){return h===b?h!==0||1/h==1/b:h!=h&&b!=b}function ym(h){return fE&&h instanceof Map}function bm(h){return hE&&h instanceof Set}function bo(h){return h.o||h.t}function Bi(h){if(Array.isArray(h))return Array.prototype.slice.call(h);var b=pE(h);delete b[xi];for(var I=Tm(b),H=0;H<I.length;H++){var ee=I[H],ue=b[ee];ue.writable===!1&&(ue.writable=!0,ue.configurable=!0),(ue.get||ue.set)&&(b[ee]={configurable:!0,writable:!0,enumerable:ue.enumerable,value:h[ee]})}return Object.create(Object.getPrototypeOf(h),b)}function Ef(h,b){return b===void 0&&(b=!1),Ty(h)||ra(h)||!tl(h)||(nl(h)>1&&(h.set=h.add=h.clear=h.delete=_m),Object.freeze(h),b&&yo(h,function(I,H){return Ef(H,!0)},!0)),h}function _m(){zr(2)}function Ty(h){return h==null||typeof h!="object"||Object.isFrozen(h)}function Ca(h){var b=mE[h];return b||zr(18,h),b}function My(){return ss}function xm(h,b){b&&(Ca("Patches"),h.u=[],h.s=[],h.v=b)}function Oc(h){Ir(h),h.p.forEach(dE),h.p=null}function Ir(h){h===ss&&(ss=h.l)}function Py(h){return ss={p:[],l:ss,h,m:!0,_:0}}function dE(h){var b=h[xi];b.i===0||b.i===1?b.j():b.O=!0}function kf(h,b){b._=b.p.length;var I=b.p[0],H=h!==void 0&&h!==I;return b.h.g||Ca("ES5").S(b,h,H),H?(I[xi].P&&(Oc(b),zr(4)),tl(h)&&(h=iu(b,h),b.l||jo(b,h)),b.u&&Ca("Patches").M(I[xi],h,b.u,b.s)):h=iu(b,I,[]),Oc(b),b.u&&b.v(b.u,b.s),h!==Ay?h:void 0}function iu(h,b,I){if(Ty(b))return b;var H=b[xi];if(!H)return yo(b,function(ue,Me){return Rc(h,H,b,ue,Me,I)},!0),b;if(H.A!==h)return b;if(!H.P)return jo(h,H.t,!0),H.t;if(!H.I){H.I=!0,H.A._--;var ee=H.i===4||H.i===5?H.o=Bi(H.k):H.o;yo(H.i===3?new Set(ee):ee,function(ue,Me){return Rc(h,H,ee,ue,Me,I)}),jo(h,ee,!1),I&&h.u&&Ca("Patches").R(H,I,h.u,h.s)}return H.o}function Rc(h,b,I,H,ee,ue){if(ra(ee)){var Me=iu(h,ee,ue&&b&&b.i!==3&&!gm(b.D,H)?ue.concat(H):void 0);if(vm(I,H,Me),!ra(Me))return;h.m=!1}if(tl(ee)&&!Ty(ee)){if(!h.h.F&&h._<1)return;iu(h,ee),b&&b.A.l||jo(h,ee)}}function jo(h,b,I){I===void 0&&(I=!1),h.h.F&&h.m&&Ef(b,I)}function ia(h,b){var I=h[xi];return(I?bo(I):h)[b]}function Tf(h,b){if(b in h)for(var I=Object.getPrototypeOf(h);I;){var H=Object.getOwnPropertyDescriptor(I,b);if(H)return H;I=Object.getPrototypeOf(I)}}function wm(h){h.P||(h.P=!0,h.l&&wm(h.l))}function Sm(h){h.o||(h.o=Bi(h.t))}function Em(h,b,I){var H=ym(b)?Ca("MapSet").N(b,I):bm(b)?Ca("MapSet").T(b,I):h.g?function(ee,ue){var Me=Array.isArray(ee),Ue={i:Me?1:0,A:ue?ue.A:My(),P:!1,I:!1,D:{},l:ue,t:ee,k:null,o:null,j:null,C:!1},qe=Ue,lt=zc;Me&&(qe=[Ue],lt=Pf);var Pt=Proxy.revocable(qe,lt),At=Pt.revoke,se=Pt.proxy;return Ue.k=se,Ue.j=At,se}(b,I):Ca("ES5").J(b,I);return(I?I.A:My()).p.push(H),H}function Mf(h){return ra(h)||zr(22,h),function b(I){if(!tl(I))return I;var H,ee=I[xi],ue=nl(I);if(ee){if(!ee.P&&(ee.i<4||!Ca("ES5").K(ee)))return ee.t;ee.I=!0,H=Lc(I,ue),ee.I=!1}else H=Lc(I,ue);return yo(H,function(Me,Ue){ee&&uE(ee.t,Me)===Ue||vm(H,Me,b(Ue))}),ue===3?new Set(H):H}(h)}function Lc(h,b){switch(b){case 2:return new Map(h);case 3:return Array.from(h)}return Bi(h)}var ou,ss,km=typeof Symbol!="undefined"&&typeof Symbol("x")=="symbol",fE=typeof Map!="undefined",hE=typeof Set!="undefined",Cy=typeof Proxy!="undefined"&&Proxy.revocable!==void 0&&typeof Reflect!="undefined",Ay=km?Symbol.for("immer-nothing"):((ou={})["immer-nothing"]=!0,ou),Iy=km?Symbol.for("immer-draftable"):"__$immer_draftable",xi=km?Symbol.for("immer-state"):"__$immer_state",Dy=""+Object.prototype.constructor,Tm=typeof Reflect!="undefined"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(h){return Object.getOwnPropertyNames(h).concat(Object.getOwnPropertySymbols(h))}:Object.getOwnPropertyNames,pE=Object.getOwnPropertyDescriptors||function(h){var b={};return Tm(h).forEach(function(I){b[I]=Object.getOwnPropertyDescriptor(h,I)}),b},mE={},zc={get:function(h,b){if(b===xi)return h;var I=bo(h);if(!gm(I,b))return function(ee,ue,Me){var Ue,qe=Tf(ue,Me);return qe?"value"in qe?qe.value:(Ue=qe.get)===null||Ue===void 0?void 0:Ue.call(ee.k):void 0}(h,I,b);var H=I[b];return h.I||!tl(H)?H:H===ia(h.t,b)?(Sm(h),h.o[b]=Em(h.A.h,H,h)):H},has:function(h,b){return b in bo(h)},ownKeys:function(h){return Reflect.ownKeys(bo(h))},set:function(h,b,I){var H=Tf(bo(h),b);if(H!=null&&H.set)return H.set.call(h.k,I),!0;if(!h.P){var ee=ia(bo(h),b),ue=ee==null?void 0:ee[xi];if(ue&&ue.t===I)return h.o[b]=I,h.D[b]=!1,!0;if(cE(I,ee)&&(I!==void 0||gm(h.t,b)))return!0;Sm(h),wm(h)}return h.o[b]===I&&typeof I!="number"&&(I!==void 0||b in h.o)||(h.o[b]=I,h.D[b]=!0,!0)},deleteProperty:function(h,b){return ia(h.t,b)!==void 0||b in h.t?(h.D[b]=!1,Sm(h),wm(h)):delete h.D[b],h.o&&delete h.o[b],!0},getOwnPropertyDescriptor:function(h,b){var I=bo(h),H=Reflect.getOwnPropertyDescriptor(I,b);return H&&{writable:!0,configurable:h.i!==1||b!=="length",enumerable:H.enumerable,value:I[b]}},defineProperty:function(){zr(11)},getPrototypeOf:function(h){return Object.getPrototypeOf(h.t)},setPrototypeOf:function(){zr(12)}},Pf={};yo(zc,function(h,b){Pf[h]=function(){return arguments[0]=arguments[0][0],b.apply(this,arguments)}}),Pf.deleteProperty=function(h,b){return zc.deleteProperty.call(this,h[0],b)},Pf.set=function(h,b,I){return zc.set.call(this,h[0],b,I,h[0])};var Nc=function(){function h(I){var H=this;this.g=Cy,this.F=!0,this.produce=function(ee,ue,Me){if(typeof ee=="function"&&typeof ue!="function"){var Ue=ue;ue=ee;var qe=H;return function(We){var Xt=this;We===void 0&&(We=Ue);for(var Ln=arguments.length,jn=Array(Ln>1?Ln-1:0),In=1;In<Ln;In++)jn[In-1]=arguments[In];return qe.produce(We,function(Gn){var ci;return(ci=ue).call.apply(ci,[Xt,Gn].concat(jn))})}}var lt;if(typeof ue!="function"&&zr(6),Me!==void 0&&typeof Me!="function"&&zr(7),tl(ee)){var Pt=Py(H),At=Em(H,ee,void 0),se=!0;try{lt=ue(At),se=!1}finally{se?Oc(Pt):Ir(Pt)}return typeof Promise!="undefined"&&lt instanceof Promise?lt.then(function(We){return xm(Pt,Me),kf(We,Pt)},function(We){throw Oc(Pt),We}):(xm(Pt,Me),kf(lt,Pt))}if(!ee||typeof ee!="object")return(lt=ue(ee))===Ay?void 0:(lt===void 0&&(lt=ee),H.F&&Ef(lt,!0),lt);zr(21,ee)},this.produceWithPatches=function(ee,ue){return typeof ee=="function"?function(qe){for(var lt=arguments.length,Pt=Array(lt>1?lt-1:0),At=1;At<lt;At++)Pt[At-1]=arguments[At];return H.produceWithPatches(qe,function(se){return ee.apply(void 0,[se].concat(Pt))})}:[H.produce(ee,ue,function(qe,lt){Me=qe,Ue=lt}),Me,Ue];var Me,Ue},typeof(I==null?void 0:I.useProxies)=="boolean"&&this.setUseProxies(I.useProxies),typeof(I==null?void 0:I.autoFreeze)=="boolean"&&this.setAutoFreeze(I.autoFreeze)}var b=h.prototype;return b.createDraft=function(I){tl(I)||zr(8),ra(I)&&(I=Mf(I));var H=Py(this),ee=Em(this,I,void 0);return ee[xi].C=!0,Ir(H),ee},b.finishDraft=function(I,H){var ee=I&&I[xi],ue=ee.A;return xm(ue,H),kf(void 0,ue)},b.setAutoFreeze=function(I){this.F=I},b.setUseProxies=function(I){I&&!Cy&&zr(20),this.g=I},b.applyPatches=function(I,H){var ee;for(ee=H.length-1;ee>=0;ee--){var ue=H[ee];if(ue.path.length===0&&ue.op==="replace"){I=ue.value;break}}var Me=Ca("Patches").$;return ra(I)?Me(I,H):this.produce(I,function(Ue){return Me(Ue,H.slice(ee+1))})},h}(),eo=new Nc;eo.produce,eo.produceWithPatches.bind(eo),eo.setAutoFreeze.bind(eo),eo.setUseProxies.bind(eo),eo.applyPatches.bind(eo),eo.createDraft.bind(eo),eo.finishDraft.bind(eo);var Oy={currentProjectStateDefinitionVersion:"0.4.0"},ls=Oy;async function Ry(h,b,I){await U3(0),h.transaction(({drafts:H})=>{var ee;const ue=b.address.projectId;H.ephemeral.coreByProject[ue]={lastExportedObject:null,loadingState:{type:"loading"}},H.ahistoric.coreByProject[ue]={ahistoricStuff:""};function Me(){H.ephemeral.coreByProject[ue].loadingState={type:"loaded"},H.historic.coreByProject[ue]={sheetsById:{},definitionVersion:ls.currentProjectStateDefinitionVersion,revisionHistory:[]}}function Ue(At){H.ephemeral.coreByProject[ue].loadingState={type:"loaded"},H.historic.coreByProject[ue]=At}function qe(){H.ephemeral.coreByProject[ue].loadingState={type:"loaded"}}function lt(At){H.ephemeral.coreByProject[ue].loadingState={type:"browserStateIsNotBasedOnDiskState",onDiskState:At}}const Pt=(ee=ky(H.historic))==null?void 0:ee.coreByProject[b.address.projectId];Pt?I&&Pt.revisionHistory.indexOf(I.revisionHistory[0])==-1?lt(I):qe():I?Ue(I):Me()})}function Ly(){}function zy(h){var b,I;const H=(b=h==null?void 0:h.logging)!=null&&b.internal?(I=h.logging.min)!=null?I:256:1/0,ee=H<=128,ue=H<=512,Me=Cc(void 0,{_debug:ee?console.debug.bind(console,"_coreLogger(TheatreInternalLogger) debug"):Ly,_error:ue?console.error.bind(console,"_coreLogger(TheatreInternalLogger) error"):Ly});if(h){const{logger:Ue,logging:qe}=h;Ue&&Me.configureLogger(Ue),qe?Me.configureLogging(qe):Me.configureLogging({dev:!1})}return Me.getLogger().named("Theatre")}var gE=class{constructor(h,b={},I){this.config=b,this.publicApi=I,le(this,"pointers"),le(this,"_pointerProxies"),le(this,"address"),le(this,"_studioReadyDeferred"),le(this,"_assetStorageReadyDeferred"),le(this,"_readyPromise"),le(this,"_sheetTemplates",new lE.Atom({})),le(this,"sheetTemplatesP",this._sheetTemplates.pointer),le(this,"_studio"),le(this,"assetStorage"),le(this,"type","Theatre_Project"),le(this,"_logger");var H;this._logger=zy({logging:{dev:!0}}).named("Project",h),this._logger.traceDev("creating project"),this.address={projectId:h};const ee=new lE.Atom({ahistoric:{ahistoricStuff:""},historic:(H=b.state)!=null?H:{sheetsById:{},definitionVersion:ls.currentProjectStateDefinitionVersion,revisionHistory:[]},ephemeral:{loadingState:{type:"loaded"},lastExportedObject:null}});this._assetStorageReadyDeferred=os(),this.assetStorage={getAssetUrl:ue=>{var Me;return"".concat((Me=b.assets)==null?void 0:Me.baseUrl,"/").concat(ue)},createAsset:()=>{throw new Error("Please wait for Project.ready to use assets.")}},this._pointerProxies={historic:new Ey.PointerProxy(ee.pointer.historic),ahistoric:new Ey.PointerProxy(ee.pointer.ahistoric),ephemeral:new Ey.PointerProxy(ee.pointer.ephemeral)},this.pointers={historic:this._pointerProxies.historic.pointer,ahistoric:this._pointerProxies.ahistoric.pointer,ephemeral:this._pointerProxies.ephemeral.pointer},et.add(h,this),this._studioReadyDeferred=os(),this._readyPromise=Promise.all([this._studioReadyDeferred.promise,this._assetStorageReadyDeferred.promise]).then(()=>{}),b.state?setTimeout(()=>{this._studio||(this._studioReadyDeferred.resolve(void 0),this._assetStorageReadyDeferred.resolve(void 0),this._logger._trace("ready deferred resolved with no state"))},0):typeof window=="undefined"?console.error('Argument config.state in Theatre.getProject("'.concat(h,'", config) is empty. ')+"You can safely ignore this message if you're developing a Next.js/Remix project in development mode. But if you are shipping to your end-users, then you need to set config.state, otherwise your project's state will be empty and nothing will animate. Learn more at https://www.theatrejs.com/docs/latest/manual/projects#state"):setTimeout(()=>{if(!this._studio)throw new Error('Argument config.state in Theatre.getProject("'.concat(h,'", config) is empty. This is fine ')+"while you are using @theatre/core along with @theatre/studio. But since @theatre/studio "+'is not loaded, the state of project "'.concat(h,`" will be empty.

`)+`To fix this, you need to add @theatre/studio into the bundle and export the project's state. Learn how to do that at https://www.theatrejs.com/docs/latest/manual/projects#state
`)},1e3)}attachToStudio(h){if(this._studio){if(this._studio!==h)throw new Error("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));console.warn("Project ".concat(this.address.projectId," is already attached to studio ").concat(this._studio.address.studioId));return}this._studio=h,h.initialized.then(async()=>{var b;await Ry(h,this,this.config.state),this._pointerProxies.historic.setPointer(h.atomP.historic.coreByProject[this.address.projectId]),this._pointerProxies.ahistoric.setPointer(h.atomP.ahistoric.coreByProject[this.address.projectId]),this._pointerProxies.ephemeral.setPointer(h.atomP.ephemeral.coreByProject[this.address.projectId]),await h.createAssetStorage(this,(b=this.config.assets)==null?void 0:b.baseUrl).then(I=>{this.assetStorage=I,this._assetStorageReadyDeferred.resolve(void 0)}),this._studioReadyDeferred.resolve(void 0)}).catch(b=>{throw console.error(b),b})}get isAttachedToStudio(){return!!this._studio}get ready(){return this._readyPromise}isReady(){return this._studioReadyDeferred.status==="resolved"&&this._assetStorageReadyDeferred.status==="resolved"}getOrCreateSheet(h,b="default"){let I=this._sheetTemplates.get()[h];return I||(I=new Sy(this,h),this._sheetTemplates.reduce(H=>ie(X({},H),{[h]:I}))),I.getInstance(b)}},vE=class{get type(){return"Theatre_Project_PublicAPI"}constructor(h,b={}){He(this,new gE(h,b,this))}get ready(){return tt(this).ready}get isReady(){return tt(this).isReady()}get address(){return X({},tt(this).address)}getAssetUrl(h){if(!this.isReady){console.error("Calling `project.getAssetUrl()` before `project.ready` is resolved, will always return `undefined`. Either use `project.ready.then(() => project.getAssetUrl())` or `await project.ready` before calling `project.getAssetUrl()`.");return}return h.id?tt(this).assetStorage.getAssetUrl(h.id):void 0}sheet(h,b="default"){const I=mm(h);return tt(this).getOrCreateSheet(I,b).publicApi}};_e(me());var Cf=St,Fc=St;function Ny(h,b={}){const I=et.get(h);if(I)return I.publicApi;const ee=zy().named("Project",h);return b.state?(yE(h,b.state),ee._debug("deep validated config.state on disk")):ee._debug("no config.state"),new vE(h,b)}var Mm=(h,b)=>{if(Array.isArray(b)||b==null||b.definitionVersion!==ls.currentProjectStateDefinitionVersion)throw new _f("Error validating conf.state in Theatre.getProject(".concat(JSON.stringify(h),", conf). The state seems to be formatted in a way that is unreadable to Theatre.js. Read more at https://www.theatrejs.com/docs/latest/manual/projects#state"))},yE=(h,b)=>{Mm(h,b)};function Pm(h,b,I){const H=I?tt(I).ticker:HS();if((0,Cf.isPointer)(h))return(0,Fc.pointerToPrism)(h).onChange(H,b,!0);if((0,Fc.isPrism)(h))return h.onChange(H,b,!0);throw new Error("Called onChange(p) where p is neither a pointer nor a prism.")}function Fy(h){if((0,Cf.isPointer)(h))return(0,Fc.pointerToPrism)(h).getValue();throw new Error("Called val(p) where p is not a pointer.")}var bE=class{constructor(){le(this,"_studio")}get type(){return"Theatre_CoreBundle"}get version(){return"0.7.2"}getBitsForStudio(h,b){if(this._studio)throw new Error("@theatre/core is already attached to @theatre/studio");this._studio=h;const I={projectsP:et.atom.pointer.projects,privateAPI:tt,coreExports:Q,getCoreRafDriver:yy};b(I)}};_E();function _E(){if(typeof window=="undefined")return;const h=window[dm];if(typeof h!="undefined")throw typeof h=="object"&&h&&typeof h.version=="string"?new Error(`It seems that the module '@theatre/core' is loaded more than once. This could have two possible causes:
1. You might have two separate versions of Theatre.js in node_modules.
2. Or this might be a bundling misconfiguration, in case you're using a bundler like Webpack/ESBuild/Rollup.

Note that it **is okay** to import '@theatre/core' multiple times. But those imports should point to the same module.`):new Error("The variable window.".concat(dm," seems to be already set by a module other than @theatre/core."));const b=new bE;window[dm]=b;const I=window[C3];I&&I!==null&&I.type==="Theatre_StudioBundle"&&I.registerCoreBundle(b)}/*! Bundled license information:

lodash-es/lodash.js:
  (**
   * @license
   * Lodash (Custom Build) <https://lodash.com/>
   * Build: `lodash modularize exports="es" -o ./`
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)
*/})(Xa,Xa.exports);const w_e={"Animated scene":{staticOverrides:{byObject:{"Torus Knot":{rotation:{z:0,y:0,x:0},wireframe:!0}}},sequence:{subUnitsPerUnit:30,length:3,type:"PositionalSequence",tracksByObject:{"Torus Knot":{trackData:{rVM9fvISsC:{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","y"]',keyframes:[{id:"IXaZv1WgwK",position:0,connectedRight:!0,handles:[.5,1,.645,.045],value:0},{id:"V1i_Ve-dDz",position:3,connectedRight:!0,handles:[.355,1,.5,0],value:1}]},Q9IUK1iBde:{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","x"]',keyframes:[{id:"CFjUByQoGL",position:0,connectedRight:!0,handles:[.5,1,.645,.045],value:0},{id:"6qCOzmWF9R",position:3,connectedRight:!0,handles:[.355,1,.5,0],value:1}]},GIF0kOR5zw:{type:"BasicKeyframedTrack",__debugName:'Torus Knot:["rotation","z"]',keyframes:[{id:"IQHb1DjSrE",position:0,connectedRight:!0,handles:[.5,1,.645,.045],value:0},{id:"vvKRX6cdlX",position:3,connectedRight:!0,handles:[.355,1,.5,0],value:1}]}},trackIdByPropPath:{'["rotation","y"]':"rVM9fvISsC",'["rotation","x"]':"Q9IUK1iBde",'["rotation","z"]':"GIF0kOR5zw"}}}}}},S_e="0.4.0",E_e=["_5mNC6F_c_uzRdMY"];var k_e={sheetsById:w_e,definitionVersion:S_e,revisionHistory:E_e};bre.initialize();bre.ui.hide();const y1=new ube;y1.background=new zn("#87ceeb");const Xu=new Oo(70,window.innerWidth/window.innerHeight,.1,1e3);Xu.position.set(0,5,20);const b1=new ure({antialias:!0});b1.setSize(window.innerWidth,window.innerHeight);b1.setPixelRatio(Math.min(window.devicePixelRatio,2));document.body.appendChild(b1.domElement);y1.add(new Rbe(16777215,3));const _re=new mre(16777215,1);_re.position.set(10,20,10);y1.add(_re);const T_e=Xa.exports.getProject("SwampScroll",{state:k_e}),EL=T_e.sheet("Main"),M_e=EL.object("Camera",{position:Xa.exports.types.compound({x:Xa.exports.types.number(Xu.position.x,{range:[-100,100]}),y:Xa.exports.types.number(Xu.position.y,{range:[-100,100]}),z:Xa.exports.types.number(Xu.position.z,{range:[-100,100]})}),target:Xa.exports.types.compound({x:Xa.exports.types.number(0,{range:[-100,100]}),y:Xa.exports.types.number(0,{range:[-100,100]}),z:Xa.exports.types.number(0,{range:[-100,100]})})});let xre=new Ve;M_e.onValuesChange(w=>{Xu.position.set(w.position.x,w.position.y,w.position.z),xre.set(w.target.x,w.target.y,w.target.z)});const P_e=()=>{const w=window.scrollY,t=document.body.scrollHeight-window.innerHeight,i=w/t,l=Xa.exports.val(EL.sequence.pointer.length);EL.sequence.position=i*l};window.addEventListener("scroll",P_e);const C_e=new Wbe;C_e.load("/swamp_location.glb",w=>{const t=w.scene;t.scale.set(.5,.5,.5),t.position.set(0,0,0),y1.add(t)});const wre=()=>{Xu.lookAt(xre),b1.render(y1,Xu),requestAnimationFrame(wre)};wre();window.addEventListener("resize",()=>{Xu.aspect=window.innerWidth/window.innerHeight,Xu.updateProjectionMatrix(),b1.setSize(window.innerWidth,window.innerHeight)});
